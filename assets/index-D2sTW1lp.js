(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function vE(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Vd={exports:{}},_l={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function yS(){if(V_)return _l;V_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return _l.Fragment=t,_l.jsx=n,_l.jsxs=n,_l}var M_;function _S(){return M_||(M_=1,Vd.exports=yS()),Vd.exports}var Y=_S(),Md={exports:{}},wt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_;function vS(){if(x_)return wt;x_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),b=Symbol.iterator;function R(D){return D===null||typeof D!="object"?null:(D=b&&D[b]||D["@@iterator"],typeof D=="function"?D:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,tt={};function W(D,Z,it){this.props=D,this.context=Z,this.refs=tt,this.updater=it||H}W.prototype.isReactComponent={},W.prototype.setState=function(D,Z){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,Z,"setState")},W.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function dt(){}dt.prototype=W.prototype;function mt(D,Z,it){this.props=D,this.context=Z,this.refs=tt,this.updater=it||H}var ht=mt.prototype=new dt;ht.constructor=mt,z(ht,W.prototype),ht.isPureReactComponent=!0;var qt=Array.isArray,Tt={H:null,A:null,T:null,S:null,V:null},xt=Object.prototype.hasOwnProperty;function O(D,Z,it,J,ct,bt){return it=bt.ref,{$$typeof:r,type:D,key:Z,ref:it!==void 0?it:null,props:bt}}function S(D,Z){return O(D.type,Z,void 0,void 0,void 0,D.props)}function I(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function V(D){var Z={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(it){return Z[it]})}var M=/\/+/g;function x(D,Z){return typeof D=="object"&&D!==null&&D.key!=null?V(""+D.key):Z.toString(36)}function C(){}function ve(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(C,C):(D.status="pending",D.then(function(Z){D.status==="pending"&&(D.status="fulfilled",D.value=Z)},function(Z){D.status==="pending"&&(D.status="rejected",D.reason=Z)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function Zt(D,Z,it,J,ct){var bt=typeof D;(bt==="undefined"||bt==="boolean")&&(D=null);var vt=!1;if(D===null)vt=!0;else switch(bt){case"bigint":case"string":case"number":vt=!0;break;case"object":switch(D.$$typeof){case r:case t:vt=!0;break;case T:return vt=D._init,Zt(vt(D._payload),Z,it,J,ct)}}if(vt)return ct=ct(D),vt=J===""?"."+x(D,0):J,qt(ct)?(it="",vt!=null&&(it=vt.replace(M,"$&/")+"/"),Zt(ct,Z,it,"",function(ot){return ot})):ct!=null&&(I(ct)&&(ct=S(ct,it+(ct.key==null||D&&D.key===ct.key?"":(""+ct.key).replace(M,"$&/")+"/")+vt)),Z.push(ct)),1;vt=0;var Ee=J===""?".":J+":";if(qt(D))for(var Kt=0;Kt<D.length;Kt++)J=D[Kt],bt=Ee+x(J,Kt),vt+=Zt(J,Z,it,bt,ct);else if(Kt=R(D),typeof Kt=="function")for(D=Kt.call(D),Kt=0;!(J=D.next()).done;)J=J.value,bt=Ee+x(J,Kt++),vt+=Zt(J,Z,it,bt,ct);else if(bt==="object"){if(typeof D.then=="function")return Zt(ve(D),Z,it,J,ct);throw Z=String(D),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return vt}function G(D,Z,it){if(D==null)return D;var J=[],ct=0;return Zt(D,J,"","",function(bt){return Z.call(it,bt,ct++)}),J}function nt(D){if(D._status===-1){var Z=D._result;Z=Z(),Z.then(function(it){(D._status===0||D._status===-1)&&(D._status=1,D._result=it)},function(it){(D._status===0||D._status===-1)&&(D._status=2,D._result=it)}),D._status===-1&&(D._status=0,D._result=Z)}if(D._status===1)return D._result.default;throw D._result}var lt=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Bt(){}return wt.Children={map:G,forEach:function(D,Z,it){G(D,function(){Z.apply(this,arguments)},it)},count:function(D){var Z=0;return G(D,function(){Z++}),Z},toArray:function(D){return G(D,function(Z){return Z})||[]},only:function(D){if(!I(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},wt.Component=W,wt.Fragment=n,wt.Profiler=l,wt.PureComponent=mt,wt.StrictMode=s,wt.Suspense=g,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Tt,wt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return Tt.H.useMemoCache(D)}},wt.cache=function(D){return function(){return D.apply(null,arguments)}},wt.cloneElement=function(D,Z,it){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var J=z({},D.props),ct=D.key,bt=void 0;if(Z!=null)for(vt in Z.ref!==void 0&&(bt=void 0),Z.key!==void 0&&(ct=""+Z.key),Z)!xt.call(Z,vt)||vt==="key"||vt==="__self"||vt==="__source"||vt==="ref"&&Z.ref===void 0||(J[vt]=Z[vt]);var vt=arguments.length-2;if(vt===1)J.children=it;else if(1<vt){for(var Ee=Array(vt),Kt=0;Kt<vt;Kt++)Ee[Kt]=arguments[Kt+2];J.children=Ee}return O(D.type,ct,void 0,void 0,bt,J)},wt.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},wt.createElement=function(D,Z,it){var J,ct={},bt=null;if(Z!=null)for(J in Z.key!==void 0&&(bt=""+Z.key),Z)xt.call(Z,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(ct[J]=Z[J]);var vt=arguments.length-2;if(vt===1)ct.children=it;else if(1<vt){for(var Ee=Array(vt),Kt=0;Kt<vt;Kt++)Ee[Kt]=arguments[Kt+2];ct.children=Ee}if(D&&D.defaultProps)for(J in vt=D.defaultProps,vt)ct[J]===void 0&&(ct[J]=vt[J]);return O(D,bt,void 0,void 0,null,ct)},wt.createRef=function(){return{current:null}},wt.forwardRef=function(D){return{$$typeof:p,render:D}},wt.isValidElement=I,wt.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:nt}},wt.memo=function(D,Z){return{$$typeof:y,type:D,compare:Z===void 0?null:Z}},wt.startTransition=function(D){var Z=Tt.T,it={};Tt.T=it;try{var J=D(),ct=Tt.S;ct!==null&&ct(it,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(Bt,lt)}catch(bt){lt(bt)}finally{Tt.T=Z}},wt.unstable_useCacheRefresh=function(){return Tt.H.useCacheRefresh()},wt.use=function(D){return Tt.H.use(D)},wt.useActionState=function(D,Z,it){return Tt.H.useActionState(D,Z,it)},wt.useCallback=function(D,Z){return Tt.H.useCallback(D,Z)},wt.useContext=function(D){return Tt.H.useContext(D)},wt.useDebugValue=function(){},wt.useDeferredValue=function(D,Z){return Tt.H.useDeferredValue(D,Z)},wt.useEffect=function(D,Z,it){var J=Tt.H;if(typeof it=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(D,Z)},wt.useId=function(){return Tt.H.useId()},wt.useImperativeHandle=function(D,Z,it){return Tt.H.useImperativeHandle(D,Z,it)},wt.useInsertionEffect=function(D,Z){return Tt.H.useInsertionEffect(D,Z)},wt.useLayoutEffect=function(D,Z){return Tt.H.useLayoutEffect(D,Z)},wt.useMemo=function(D,Z){return Tt.H.useMemo(D,Z)},wt.useOptimistic=function(D,Z){return Tt.H.useOptimistic(D,Z)},wt.useReducer=function(D,Z,it){return Tt.H.useReducer(D,Z,it)},wt.useRef=function(D){return Tt.H.useRef(D)},wt.useState=function(D){return Tt.H.useState(D)},wt.useSyncExternalStore=function(D,Z,it){return Tt.H.useSyncExternalStore(D,Z,it)},wt.useTransition=function(){return Tt.H.useTransition()},wt.version="19.1.1",wt}var P_;function Cm(){return P_||(P_=1,Md.exports=vS()),Md.exports}var zt=Cm();const ES=vE(zt);var xd={exports:{}},vl={},Pd={exports:{}},kd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_;function TS(){return k_||(k_=1,(function(r){function t(G,nt){var lt=G.length;G.push(nt);t:for(;0<lt;){var Bt=lt-1>>>1,D=G[Bt];if(0<l(D,nt))G[Bt]=nt,G[lt]=D,lt=Bt;else break t}}function n(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var nt=G[0],lt=G.pop();if(lt!==nt){G[0]=lt;t:for(var Bt=0,D=G.length,Z=D>>>1;Bt<Z;){var it=2*(Bt+1)-1,J=G[it],ct=it+1,bt=G[ct];if(0>l(J,lt))ct<D&&0>l(bt,J)?(G[Bt]=bt,G[ct]=lt,Bt=ct):(G[Bt]=J,G[it]=lt,Bt=it);else if(ct<D&&0>l(bt,lt))G[Bt]=bt,G[ct]=lt,Bt=ct;else break t}}return nt}function l(G,nt){var lt=G.sortIndex-nt.sortIndex;return lt!==0?lt:G.id-nt.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var g=[],y=[],T=1,b=null,R=3,H=!1,z=!1,tt=!1,W=!1,dt=typeof setTimeout=="function"?setTimeout:null,mt=typeof clearTimeout=="function"?clearTimeout:null,ht=typeof setImmediate<"u"?setImmediate:null;function qt(G){for(var nt=n(y);nt!==null;){if(nt.callback===null)s(y);else if(nt.startTime<=G)s(y),nt.sortIndex=nt.expirationTime,t(g,nt);else break;nt=n(y)}}function Tt(G){if(tt=!1,qt(G),!z)if(n(g)!==null)z=!0,xt||(xt=!0,x());else{var nt=n(y);nt!==null&&Zt(Tt,nt.startTime-G)}}var xt=!1,O=-1,S=5,I=-1;function V(){return W?!0:!(r.unstable_now()-I<S)}function M(){if(W=!1,xt){var G=r.unstable_now();I=G;var nt=!0;try{t:{z=!1,tt&&(tt=!1,mt(O),O=-1),H=!0;var lt=R;try{e:{for(qt(G),b=n(g);b!==null&&!(b.expirationTime>G&&V());){var Bt=b.callback;if(typeof Bt=="function"){b.callback=null,R=b.priorityLevel;var D=Bt(b.expirationTime<=G);if(G=r.unstable_now(),typeof D=="function"){b.callback=D,qt(G),nt=!0;break e}b===n(g)&&s(g),qt(G)}else s(g);b=n(g)}if(b!==null)nt=!0;else{var Z=n(y);Z!==null&&Zt(Tt,Z.startTime-G),nt=!1}}break t}finally{b=null,R=lt,H=!1}nt=void 0}}finally{nt?x():xt=!1}}}var x;if(typeof ht=="function")x=function(){ht(M)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,ve=C.port2;C.port1.onmessage=M,x=function(){ve.postMessage(null)}}else x=function(){dt(M,0)};function Zt(G,nt){O=dt(function(){G(r.unstable_now())},nt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_next=function(G){switch(R){case 1:case 2:case 3:var nt=3;break;default:nt=R}var lt=R;R=nt;try{return G()}finally{R=lt}},r.unstable_requestPaint=function(){W=!0},r.unstable_runWithPriority=function(G,nt){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var lt=R;R=G;try{return nt()}finally{R=lt}},r.unstable_scheduleCallback=function(G,nt,lt){var Bt=r.unstable_now();switch(typeof lt=="object"&&lt!==null?(lt=lt.delay,lt=typeof lt=="number"&&0<lt?Bt+lt:Bt):lt=Bt,G){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=lt+D,G={id:T++,callback:nt,priorityLevel:G,startTime:lt,expirationTime:D,sortIndex:-1},lt>Bt?(G.sortIndex=lt,t(y,G),n(g)===null&&G===n(y)&&(tt?(mt(O),O=-1):tt=!0,Zt(Tt,lt-Bt))):(G.sortIndex=D,t(g,G),z||H||(z=!0,xt||(xt=!0,x()))),G},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(G){var nt=R;return function(){var lt=R;R=nt;try{return G.apply(this,arguments)}finally{R=lt}}}})(kd)),kd}var U_;function AS(){return U_||(U_=1,Pd.exports=TS()),Pd.exports}var Ud={exports:{}},Ze={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function SS(){if(L_)return Ze;L_=1;var r=Cm();function t(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,y,T){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:b==null?null:""+b,children:g,containerInfo:y,implementation:T}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ze.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ze.createPortal=function(g,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return c(g,y,null,T)},Ze.flushSync=function(g){var y=d.T,T=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=y,s.p=T,s.d.f()}},Ze.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},Ze.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Ze.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var T=y.as,b=p(T,y.crossOrigin),R=typeof y.integrity=="string"?y.integrity:void 0,H=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:R,fetchPriority:H}):T==="script"&&s.d.X(g,{crossOrigin:b,integrity:R,fetchPriority:H,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ze.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=p(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},Ze.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,b=p(T,y.crossOrigin);s.d.L(g,T,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ze.preloadModule=function(g,y){if(typeof g=="string")if(y){var T=p(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},Ze.requestFormReset=function(g){s.d.r(g)},Ze.unstable_batchedUpdates=function(g,y){return g(y)},Ze.useFormState=function(g,y,T){return d.H.useFormState(g,y,T)},Ze.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ze.version="19.1.1",Ze}var z_;function wS(){if(z_)return Ud.exports;z_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Ud.exports=SS(),Ud.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_;function bS(){if(B_)return vl;B_=1;var r=AS(),t=Cm(),n=wS();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function d(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function p(e){if(c(e)!==e)throw Error(s(188))}function g(e){var i=e.alternate;if(!i){if(i=c(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,o=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return p(h),e;if(f===o)return p(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=f;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,o=f;break}if(E===o){v=!0,o=h,a=f;break}E=E.sibling}if(!v){for(E=f.child;E;){if(E===a){v=!0,a=f,o=h;break}if(E===o){v=!0,o=f,a=h;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function y(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=y(e),i!==null)return i;e=e.sibling}return null}var T=Object.assign,b=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),tt=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),dt=Symbol.for("react.provider"),mt=Symbol.for("react.consumer"),ht=Symbol.for("react.context"),qt=Symbol.for("react.forward_ref"),Tt=Symbol.for("react.suspense"),xt=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function x(e){return e===null||typeof e!="object"?null:(e=M&&e[M]||e["@@iterator"],typeof e=="function"?e:null)}var C=Symbol.for("react.client.reference");function ve(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===C?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case z:return"Fragment";case W:return"Profiler";case tt:return"StrictMode";case Tt:return"Suspense";case xt:return"SuspenseList";case I:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case H:return"Portal";case ht:return(e.displayName||"Context")+".Provider";case mt:return(e._context.displayName||"Context")+".Consumer";case qt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case O:return i=e.displayName||null,i!==null?i:ve(e.type)||"Memo";case S:i=e._payload,e=e._init;try{return ve(e(i))}catch{}}return null}var Zt=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt={pending:!1,data:null,method:null,action:null},Bt=[],D=-1;function Z(e){return{current:e}}function it(e){0>D||(e.current=Bt[D],Bt[D]=null,D--)}function J(e,i){D++,Bt[D]=e.current,e.current=i}var ct=Z(null),bt=Z(null),vt=Z(null),Ee=Z(null);function Kt(e,i){switch(J(vt,i),J(bt,e),J(ct,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?a_(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=a_(i),e=o_(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}it(ct),J(ct,e)}function ot(){it(ct),it(bt),it(vt)}function Mt(e){e.memoizedState!==null&&J(Ee,e);var i=ct.current,a=o_(i,e.type);i!==a&&(J(bt,e),J(ct,a))}function jt(e){bt.current===e&&(it(ct),it(bt)),Ee.current===e&&(it(Ee),dl._currentValue=lt)}var nn=Object.prototype.hasOwnProperty,Zn=r.unstable_scheduleCallback,Wn=r.unstable_cancelCallback,rr=r.unstable_shouldYield,Ks=r.unstable_requestPaint,wn=r.unstable_now,Oh=r.unstable_getCurrentPriorityLevel,co=r.unstable_ImmediatePriority,Ys=r.unstable_UserBlockingPriority,ts=r.unstable_NormalPriority,Vh=r.unstable_LowPriority,Xs=r.unstable_IdlePriority,ho=r.log,iu=r.unstable_setDisableYieldValue,ce=null,Yt=null;function dn(e){if(typeof ho=="function"&&iu(e),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(ce,e)}catch{}}var Xe=Math.clz32?Math.clz32:es,ru=Math.log,Mh=Math.LN2;function es(e){return e>>>=0,e===0?32:31-(ru(e)/Mh|0)|0}var ns=256,is=4194304;function jn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function $s(e,i,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?h=jn(o):(v&=E,v!==0?h=jn(v):a||(a=E&~e,a!==0&&(h=jn(a))))):(E=o&~f,E!==0?h=jn(E):v!==0?h=jn(v):a||(a=o&~e,a!==0&&(h=jn(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function rs(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function fo(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mo(){var e=ns;return ns<<=1,(ns&4194048)===0&&(ns=256),e}function po(){var e=is;return is<<=1,(is&62914560)===0&&(is=4194304),e}function Ai(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function Si(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function go(e,i,a,o,h,f){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,w=e.expirationTimes,L=e.hiddenUpdates;for(a=v&~a;0<a;){var F=31-Xe(a),X=1<<F;E[F]=0,w[F]=-1;var B=L[F];if(B!==null)for(L[F]=null,F=0;F<B.length;F++){var j=B[F];j!==null&&(j.lane&=-536870913)}a&=~X}o!==0&&Jn(e,o,0),f!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~i))}function Jn(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-Xe(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function yo(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var o=31-Xe(a),h=1<<o;h&i|e[o]&i&&(e[o]|=i),a&=~h}}function sr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Zs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ar(){var e=nt.p;return e!==0?e:(e=window.event,e===void 0?32:R_(e.type))}function su(e,i){var a=nt.p;try{return nt.p=e,i()}finally{nt.p=a}}var ae=Math.random().toString(36).slice(2),Ce="__reactFiber$"+ae,Te="__reactProps$"+ae,bn="__reactContainer$"+ae,_o="__reactEvents$"+ae,xh="__reactListeners$"+ae,or="__reactHandles$"+ae,au="__reactResources$"+ae,ss="__reactMarker$"+ae;function lr(e){delete e[Ce],delete e[Te],delete e[_o],delete e[xh],delete e[or]}function wi(e){var i=e[Ce];if(i)return i;for(var a=e.parentNode;a;){if(i=a[bn]||a[Ce]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=h_(e);e!==null;){if(a=e[Ce])return a;e=h_(e)}return i}e=a,a=e.parentNode}return null}function ti(e){if(e=e[Ce]||e[bn]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function ei(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function rn(e){var i=e[au];return i||(i=e[au]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function de(e){e[ss]=!0}var vo=new Set,Ws={};function qn(e,i){bi(e,i),bi(e+"Capture",i)}function bi(e,i){for(Ws[e]=i,e=0;e<i.length;e++)vo.add(i[e])}var ou=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lu={},as={};function uu(e){return nn.call(as,e)?!0:nn.call(lu,e)?!1:ou.test(e)?as[e]=!0:(lu[e]=!0,!1)}function ur(e,i,a){if(uu(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function ni(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function je(e,i,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+o)}}var os,cu;function Ri(e){if(os===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);os=i&&i[1]||"",cu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+os+e+cu}var Js=!1;function ta(e,i){if(!e||Js)return"";Js=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(j){var B=j}Reflect.construct(e,[],X)}else{try{X.call()}catch(j){B=j}e.call(X.prototype)}}else{try{throw Error()}catch(j){B=j}(X=e())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(j){if(j&&B&&typeof j.stack=="string")return[j.stack,B.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],E=f[1];if(v&&E){var w=v.split(`
`),L=E.split(`
`);for(h=o=0;o<w.length&&!w[o].includes("DetermineComponentFrameRoot");)o++;for(;h<L.length&&!L[h].includes("DetermineComponentFrameRoot");)h++;if(o===w.length||h===L.length)for(o=w.length-1,h=L.length-1;1<=o&&0<=h&&w[o]!==L[h];)h--;for(;1<=o&&0<=h;o--,h--)if(w[o]!==L[h]){if(o!==1||h!==1)do if(o--,h--,0>h||w[o]!==L[h]){var F=`
`+w[o].replace(" at new "," at ");return e.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",e.displayName)),F}while(1<=o&&0<=h);break}}}finally{Js=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ri(a):""}function Eo(e){switch(e.tag){case 26:case 27:case 5:return Ri(e.type);case 16:return Ri("Lazy");case 13:return Ri("Suspense");case 19:return Ri("SuspenseList");case 0:case 15:return ta(e.type,!1);case 11:return ta(e.type.render,!1);case 1:return ta(e.type,!0);case 31:return Ri("Activity");default:return""}}function ea(e){try{var i="";do i+=Eo(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function sn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function To(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ph(e){var i=To(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),o=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function na(e){e._valueTracker||(e._valueTracker=Ph(e))}function Ao(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return e&&(o=To(e)?e.checked?"true":"false":e.value),e=o,e!==a?(i.setValue(e),!0):!1}function ls(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var kh=/[\n"\\]/g;function Ae(e){return e.replace(kh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function mn(e,i,a,o,h,f,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+sn(i)):e.value!==""+sn(i)&&(e.value=""+sn(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?cr(e,v,sn(i)):a!=null?cr(e,v,sn(a)):o!=null&&e.removeAttribute("value"),h==null&&f!=null&&(e.defaultChecked=!!f),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+sn(E):e.removeAttribute("name")}function us(e,i,a,o,h,f,v,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+sn(a):"",i=i!=null?""+sn(i):a,E||i===e.value||(e.value=i),e.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function cr(e,i,a){i==="number"&&ls(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ii(e,i,a,o){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+sn(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function Wt(e,i,a){if(i!=null&&(i=""+sn(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+sn(a):""}function cs(e,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(Zt(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=sn(i),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function Rn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var hs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hu(e,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,a):typeof a!="number"||a===0||hs.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function So(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&hu(e,h,o)}else for(var f in i)i.hasOwnProperty(f)&&hu(e,f,i[f])}function wo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Lh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ia(e){return Lh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ci=null;function In(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Di=null,Ni=null;function bo(e){var i=ti(e);if(i&&(e=i.stateNode)){var a=e[Te]||null;t:switch(e=i.stateNode,i.type){case"input":if(mn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ae(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==e&&o.form===e.form){var h=o[Te]||null;if(!h)throw Error(s(90));mn(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===e.form&&Ao(o)}break t;case"textarea":Wt(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Ii(e,!!a.multiple,i,!1)}}}var ii=!1;function fu(e,i,a){if(ii)return e(i,a);ii=!0;try{var o=e(i);return o}finally{if(ii=!1,(Di!==null||Ni!==null)&&(sc(),Di&&(i=Di,e=Ni,Ni=Di=null,bo(i),e)))for(i=0;i<e.length;i++)bo(e[i])}}function fs(e,i){var a=e.stateNode;if(a===null)return null;var o=a[Te]||null;if(o===null)return null;a=o[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cn=!1;if(Hn)try{var ds={};Object.defineProperty(ds,"passive",{get:function(){Cn=!0}}),window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,ds)}catch{Cn=!1}var ri=null,hr=null,Oi=null;function Ro(){if(Oi)return Oi;var e,i=hr,a=i.length,o,h="value"in ri?ri.value:ri.textContent,f=h.length;for(e=0;e<a&&i[e]===h[e];e++);var v=a-e;for(o=1;o<=v&&i[a-o]===h[f-o];o++);return Oi=h.slice(e,1<o?1-o:void 0)}function si(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function ai(){return!0}function Io(){return!1}function xe(e){function i(a,o,h,f,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ai:Io,this.isPropagationStopped=Io,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ai)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ai)},persist:function(){},isPersistent:ai}),i}var Ft={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ra=xe(Ft),ms=T({},Ft,{view:0,detail:0}),du=xe(ms),sa,aa,oi,ps=T({},ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_s,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==oi&&(oi&&e.type==="mousemove"?(sa=e.screenX-oi.screenX,aa=e.screenY-oi.screenY):aa=sa=0,oi=e),sa)},movementY:function(e){return"movementY"in e?e.movementY:aa}}),Dn=xe(ps),mu=T({},ps,{dataTransfer:0}),zh=xe(mu),gs=T({},ms,{relatedTarget:0}),oa=xe(gs),Co=T({},Ft,{animationName:0,elapsedTime:0,pseudoElement:0}),la=xe(Co),pu=T({},Ft,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ua=xe(pu),Bh=T({},Ft,{data:0}),Do=xe(Bh),ys={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function No(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=yu[e])?!!i[e]:!1}function _s(){return No}var _u=T({},ms,{key:function(e){if(e.key){var i=ys[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=si(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?gu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_s,charCode:function(e){return e.type==="keypress"?si(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?si(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ca=xe(_u),vu=T({},ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oo=xe(vu),Vi=T({},ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_s}),Eu=xe(Vi),Tu=T({},Ft,{propertyName:0,elapsedTime:0,pseudoElement:0}),Au=xe(Tu),Su=T({},ps,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ha=xe(Su),an=T({},Ft,{newState:0,oldState:0}),wu=xe(an),bu=[9,13,27,32],li=Hn&&"CompositionEvent"in window,u=null;Hn&&"documentMode"in document&&(u=document.documentMode);var m=Hn&&"TextEvent"in window&&!u,_=Hn&&(!li||u&&8<u&&11>=u),A=" ",k=!1;function q(e,i){switch(e){case"keyup":return bu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function et(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pt=!1;function De(e,i){switch(e){case"compositionend":return et(i);case"keypress":return i.which!==32?null:(k=!0,A);case"textInput":return e=i.data,e===A&&k?null:e;default:return null}}function kt(e,i){if(Pt)return e==="compositionend"||!li&&q(e,i)?(e=Ro(),Oi=hr=ri=null,Pt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Pe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ne(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Pe[e.type]:i==="textarea"}function Mi(e,i,a,o){Di?Ni?Ni.push(o):Ni=[o]:Di=o,i=hc(i,"onChange"),0<i.length&&(a=new ra("onChange","change",null,a,o),e.push({event:a,listeners:i}))}var qe=null,ui=null;function Vo(e){e_(e,0)}function Ru(e){var i=ei(e);if(Ao(i))return e}function Ap(e,i){if(e==="change")return i}var Sp=!1;if(Hn){var jh;if(Hn){var qh="oninput"in document;if(!qh){var wp=document.createElement("div");wp.setAttribute("oninput","return;"),qh=typeof wp.oninput=="function"}jh=qh}else jh=!1;Sp=jh&&(!document.documentMode||9<document.documentMode)}function bp(){qe&&(qe.detachEvent("onpropertychange",Rp),ui=qe=null)}function Rp(e){if(e.propertyName==="value"&&Ru(ui)){var i=[];Mi(i,ui,e,In(e)),fu(Vo,i)}}function K0(e,i,a){e==="focusin"?(bp(),qe=i,ui=a,qe.attachEvent("onpropertychange",Rp)):e==="focusout"&&bp()}function Y0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ru(ui)}function X0(e,i){if(e==="click")return Ru(i)}function $0(e,i){if(e==="input"||e==="change")return Ru(i)}function Z0(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var pn=typeof Object.is=="function"?Object.is:Z0;function Mo(e,i){if(pn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!nn.call(i,h)||!pn(e[h],i[h]))return!1}return!0}function Ip(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cp(e,i){var a=Ip(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=i&&o>=i)return{node:a,offset:i-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Ip(a)}}function Dp(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Dp(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Np(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=ls(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=ls(e.document)}return i}function Hh(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var W0=Hn&&"documentMode"in document&&11>=document.documentMode,fa=null,Gh=null,xo=null,Fh=!1;function Op(e,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Fh||fa==null||fa!==ls(o)||(o=fa,"selectionStart"in o&&Hh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),xo&&Mo(xo,o)||(xo=o,o=hc(Gh,"onSelect"),0<o.length&&(i=new ra("onSelect","select",null,i,a),e.push({event:i,listeners:o}),i.target=fa)))}function vs(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var da={animationend:vs("Animation","AnimationEnd"),animationiteration:vs("Animation","AnimationIteration"),animationstart:vs("Animation","AnimationStart"),transitionrun:vs("Transition","TransitionRun"),transitionstart:vs("Transition","TransitionStart"),transitioncancel:vs("Transition","TransitionCancel"),transitionend:vs("Transition","TransitionEnd")},Qh={},Vp={};Hn&&(Vp=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function Es(e){if(Qh[e])return Qh[e];if(!da[e])return e;var i=da[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Vp)return Qh[e]=i[a];return e}var Mp=Es("animationend"),xp=Es("animationiteration"),Pp=Es("animationstart"),J0=Es("transitionrun"),tA=Es("transitionstart"),eA=Es("transitioncancel"),kp=Es("transitionend"),Up=new Map,Kh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kh.push("scrollEnd");function Gn(e,i){Up.set(e,i),qn(i,[e])}var Lp=new WeakMap;function Nn(e,i){if(typeof e=="object"&&e!==null){var a=Lp.get(e);return a!==void 0?a:(i={value:e,source:i,stack:ea(i)},Lp.set(e,i),i)}return{value:e,source:i,stack:ea(i)}}var On=[],ma=0,Yh=0;function Iu(){for(var e=ma,i=Yh=ma=0;i<e;){var a=On[i];On[i++]=null;var o=On[i];On[i++]=null;var h=On[i];On[i++]=null;var f=On[i];if(On[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}f!==0&&zp(a,h,f)}}function Cu(e,i,a,o){On[ma++]=e,On[ma++]=i,On[ma++]=a,On[ma++]=o,Yh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Xh(e,i,a,o){return Cu(e,i,a,o),Du(e)}function pa(e,i){return Cu(e,null,null,i),Du(e)}function zp(e,i,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=e.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(h=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,h&&i!==null&&(h=31-Xe(a),e=f.hiddenUpdates,o=e[h],o===null?e[h]=[i]:o.push(i),i.lane=a|536870912),f):null}function Du(e){if(50<sl)throw sl=0,nd=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var ga={};function nA(e,i,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(e,i,a,o){return new nA(e,i,a,o)}function $h(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xi(e,i){var a=e.alternate;return a===null?(a=gn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Bp(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Nu(e,i,a,o,h,f){var v=0;if(o=e,typeof e=="function")$h(e)&&(v=1);else if(typeof e=="string")v=rS(e,a,ct.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case I:return e=gn(31,a,i,h),e.elementType=I,e.lanes=f,e;case z:return Ts(a.children,h,f,i);case tt:v=8,h|=24;break;case W:return e=gn(12,a,i,h|2),e.elementType=W,e.lanes=f,e;case Tt:return e=gn(13,a,i,h),e.elementType=Tt,e.lanes=f,e;case xt:return e=gn(19,a,i,h),e.elementType=xt,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case dt:case ht:v=10;break t;case mt:v=9;break t;case qt:v=11;break t;case O:v=14;break t;case S:v=16,o=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return i=gn(v,a,i,h),i.elementType=e,i.type=o,i.lanes=f,i}function Ts(e,i,a,o){return e=gn(7,e,o,i),e.lanes=a,e}function Zh(e,i,a){return e=gn(6,e,null,i),e.lanes=a,e}function Wh(e,i,a){return i=gn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var ya=[],_a=0,Ou=null,Vu=0,Vn=[],Mn=0,As=null,Pi=1,ki="";function Ss(e,i){ya[_a++]=Vu,ya[_a++]=Ou,Ou=e,Vu=i}function jp(e,i,a){Vn[Mn++]=Pi,Vn[Mn++]=ki,Vn[Mn++]=As,As=e;var o=Pi;e=ki;var h=32-Xe(o)-1;o&=~(1<<h),a+=1;var f=32-Xe(i)+h;if(30<f){var v=h-h%5;f=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Pi=1<<32-Xe(i)+h|a<<h|o,ki=f+e}else Pi=1<<f|a<<h|o,ki=e}function Jh(e){e.return!==null&&(Ss(e,1),jp(e,1,0))}function tf(e){for(;e===Ou;)Ou=ya[--_a],ya[_a]=null,Vu=ya[--_a],ya[_a]=null;for(;e===As;)As=Vn[--Mn],Vn[Mn]=null,ki=Vn[--Mn],Vn[Mn]=null,Pi=Vn[--Mn],Vn[Mn]=null}var on=null,he=null,Gt=!1,ws=null,ci=!1,ef=Error(s(519));function bs(e){var i=Error(s(418,""));throw Uo(Nn(i,e)),ef}function qp(e){var i=e.stateNode,a=e.type,o=e.memoizedProps;switch(i[Ce]=e,i[Te]=o,a){case"dialog":Dt("cancel",i),Dt("close",i);break;case"iframe":case"object":case"embed":Dt("load",i);break;case"video":case"audio":for(a=0;a<ol.length;a++)Dt(ol[a],i);break;case"source":Dt("error",i);break;case"img":case"image":case"link":Dt("error",i),Dt("load",i);break;case"details":Dt("toggle",i);break;case"input":Dt("invalid",i),us(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),na(i);break;case"select":Dt("invalid",i);break;case"textarea":Dt("invalid",i),cs(i,o.value,o.defaultValue,o.children),na(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||s_(i.textContent,a)?(o.popover!=null&&(Dt("beforetoggle",i),Dt("toggle",i)),o.onScroll!=null&&Dt("scroll",i),o.onScrollEnd!=null&&Dt("scrollend",i),o.onClick!=null&&(i.onclick=fc),i=!0):i=!1,i||bs(e)}function Hp(e){for(on=e.return;on;)switch(on.tag){case 5:case 13:ci=!1;return;case 27:case 3:ci=!0;return;default:on=on.return}}function Po(e){if(e!==on)return!1;if(!Gt)return Hp(e),Gt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||_d(e.type,e.memoizedProps)),a=!a),a&&he&&bs(e),Hp(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){he=Qn(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}he=null}}else i===27?(i=he,Ir(e.type)?(e=Ad,Ad=null,he=e):he=i):he=on?Qn(e.stateNode.nextSibling):null;return!0}function ko(){he=on=null,Gt=!1}function Gp(){var e=ws;return e!==null&&(cn===null?cn=e:cn.push.apply(cn,e),ws=null),e}function Uo(e){ws===null?ws=[e]:ws.push(e)}var nf=Z(null),Rs=null,Ui=null;function fr(e,i,a){J(nf,i._currentValue),i._currentValue=a}function Li(e){e._currentValue=nf.current,it(nf)}function rf(e,i,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===a)break;e=e.return}}function sf(e,i,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var f=h.dependencies;if(f!==null){var v=h.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=h;for(var w=0;w<i.length;w++)if(E.context===i[w]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),rf(f.return,a,e),o||(v=null);break t}f=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),rf(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Lo(e,i,a,o){e=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=h.type;pn(h.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(h===Ee.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(dl):e=[dl])}h=h.return}e!==null&&sf(i,e,a,o),i.flags|=262144}function Mu(e){for(e=e.firstContext;e!==null;){if(!pn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Is(e){Rs=e,Ui=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $e(e){return Fp(Rs,e)}function xu(e,i){return Rs===null&&Is(e),Fp(e,i)}function Fp(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Ui===null){if(e===null)throw Error(s(308));Ui=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Ui=Ui.next=i;return a}var iA=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},rA=r.unstable_scheduleCallback,sA=r.unstable_NormalPriority,Oe={$$typeof:ht,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function af(){return{controller:new iA,data:new Map,refCount:0}}function zo(e){e.refCount--,e.refCount===0&&rA(sA,function(){e.controller.abort()})}var Bo=null,of=0,va=0,Ea=null;function aA(e,i){if(Bo===null){var a=Bo=[];of=0,va=ud(),Ea={status:"pending",value:void 0,then:function(o){a.push(o)}}}return of++,i.then(Qp,Qp),i}function Qp(){if(--of===0&&Bo!==null){Ea!==null&&(Ea.status="fulfilled");var e=Bo;Bo=null,va=0,Ea=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function oA(e,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Kp=G.S;G.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&aA(e,i),Kp!==null&&Kp(e,i)};var Cs=Z(null);function lf(){var e=Cs.current;return e!==null?e:ie.pooledCache}function Pu(e,i){i===null?J(Cs,Cs.current):J(Cs,i.pool)}function Yp(){var e=lf();return e===null?null:{parent:Oe._currentValue,pool:e}}var jo=Error(s(460)),Xp=Error(s(474)),ku=Error(s(542)),uf={then:function(){}};function $p(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Uu(){}function Zp(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Uu,Uu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Jp(e),e;default:if(typeof i.status=="string")i.then(Uu,Uu);else{if(e=ie,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Jp(e),e}throw qo=i,jo}}var qo=null;function Wp(){if(qo===null)throw Error(s(459));var e=qo;return qo=null,e}function Jp(e){if(e===jo||e===ku)throw Error(s(483))}var dr=!1;function cf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function mr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function pr(e,i,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Xt&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Du(e),zp(e,null,a),i}return Cu(e,o,i,a),Du(e)}function Ho(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,yo(e,a)}}function ff(e,i){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var df=!1;function Go(){if(df){var e=Ea;if(e!==null)throw e}}function Fo(e,i,a,o){df=!1;var h=e.updateQueue;dr=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var w=E,L=w.next;w.next=null,v===null?f=L:v.next=L,v=w;var F=e.alternate;F!==null&&(F=F.updateQueue,E=F.lastBaseUpdate,E!==v&&(E===null?F.firstBaseUpdate=L:E.next=L,F.lastBaseUpdate=w))}if(f!==null){var X=h.baseState;v=0,F=L=w=null,E=f;do{var B=E.lane&-536870913,j=B!==E.lane;if(j?(Ut&B)===B:(o&B)===B){B!==0&&B===va&&(df=!0),F!==null&&(F=F.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var Et=e,pt=E;B=i;var ee=a;switch(pt.tag){case 1:if(Et=pt.payload,typeof Et=="function"){X=Et.call(ee,X,B);break t}X=Et;break t;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=pt.payload,B=typeof Et=="function"?Et.call(ee,X,B):Et,B==null)break t;X=T({},X,B);break t;case 2:dr=!0}}B=E.callback,B!==null&&(e.flags|=64,j&&(e.flags|=8192),j=h.callbacks,j===null?h.callbacks=[B]:j.push(B))}else j={lane:B,tag:E.tag,payload:E.payload,callback:E.callback,next:null},F===null?(L=F=j,w=X):F=F.next=j,v|=B;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;j=E,E=j.next,j.next=null,h.lastBaseUpdate=j,h.shared.pending=null}}while(!0);F===null&&(w=X),h.baseState=w,h.firstBaseUpdate=L,h.lastBaseUpdate=F,f===null&&(h.shared.lanes=0),Sr|=v,e.lanes=v,e.memoizedState=X}}function tg(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function eg(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)tg(a[e],i)}var Ta=Z(null),Lu=Z(0);function ng(e,i){e=Fi,J(Lu,e),J(Ta,i),Fi=e|i.baseLanes}function mf(){J(Lu,Fi),J(Ta,Ta.current)}function pf(){Fi=Lu.current,it(Ta),it(Lu)}var gr=0,Rt=null,Jt=null,Se=null,zu=!1,Aa=!1,Ds=!1,Bu=0,Qo=0,Sa=null,lA=0;function me(){throw Error(s(321))}function gf(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!pn(e[a],i[a]))return!1;return!0}function yf(e,i,a,o,h,f){return gr=f,Rt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=e===null||e.memoizedState===null?zg:Bg,Ds=!1,f=a(o,h),Ds=!1,Aa&&(f=rg(i,a,o,h)),ig(e),f}function ig(e){G.H=Qu;var i=Jt!==null&&Jt.next!==null;if(gr=0,Se=Jt=Rt=null,zu=!1,Qo=0,Sa=null,i)throw Error(s(300));e===null||ke||(e=e.dependencies,e!==null&&Mu(e)&&(ke=!0))}function rg(e,i,a,o){Rt=e;var h=0;do{if(Aa&&(Sa=null),Qo=0,Aa=!1,25<=h)throw Error(s(301));if(h+=1,Se=Jt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}G.H=pA,f=i(a,o)}while(Aa);return f}function uA(){var e=G.H,i=e.useState()[0];return i=typeof i.then=="function"?Ko(i):i,e=e.useState()[0],(Jt!==null?Jt.memoizedState:null)!==e&&(Rt.flags|=1024),i}function _f(){var e=Bu!==0;return Bu=0,e}function vf(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function Ef(e){if(zu){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}zu=!1}gr=0,Se=Jt=Rt=null,Aa=!1,Qo=Bu=0,Sa=null}function ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?Rt.memoizedState=Se=e:Se=Se.next=e,Se}function we(){if(Jt===null){var e=Rt.alternate;e=e!==null?e.memoizedState:null}else e=Jt.next;var i=Se===null?Rt.memoizedState:Se.next;if(i!==null)Se=i,Jt=e;else{if(e===null)throw Rt.alternate===null?Error(s(467)):Error(s(310));Jt=e,e={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},Se===null?Rt.memoizedState=Se=e:Se=Se.next=e}return Se}function Tf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ko(e){var i=Qo;return Qo+=1,Sa===null&&(Sa=[]),e=Zp(Sa,e,i),i=Rt,(Se===null?i.memoizedState:Se.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?zg:Bg),e}function ju(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ko(e);if(e.$$typeof===ht)return $e(e)}throw Error(s(438,String(e)))}function Af(e){var i=null,a=Rt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=Rt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Tf(),Rt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),o=0;o<e;o++)a[o]=V;return i.index++,a}function zi(e,i){return typeof i=="function"?i(e):i}function qu(e){var i=we();return Sf(i,Jt,e)}function Sf(e,i,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=e.baseQueue,f=o.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}i.baseQueue=h=f,o.pending=null}if(f=e.baseState,h===null)e.memoizedState=f;else{i=h.next;var E=v=null,w=null,L=i,F=!1;do{var X=L.lane&-536870913;if(X!==L.lane?(Ut&X)===X:(gr&X)===X){var B=L.revertLane;if(B===0)w!==null&&(w=w.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),X===va&&(F=!0);else if((gr&B)===B){L=L.next,B===va&&(F=!0);continue}else X={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},w===null?(E=w=X,v=f):w=w.next=X,Rt.lanes|=B,Sr|=B;X=L.action,Ds&&a(f,X),f=L.hasEagerState?L.eagerState:a(f,X)}else B={lane:X,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},w===null?(E=w=B,v=f):w=w.next=B,Rt.lanes|=X,Sr|=X;L=L.next}while(L!==null&&L!==i);if(w===null?v=f:w.next=E,!pn(f,e.memoizedState)&&(ke=!0,F&&(a=Ea,a!==null)))throw a;e.memoizedState=f,e.baseState=v,e.baseQueue=w,o.lastRenderedState=f}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function wf(e){var i=we(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do f=e(f,v.action),v=v.next;while(v!==h);pn(f,i.memoizedState)||(ke=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,o]}function sg(e,i,a){var o=Rt,h=we(),f=Gt;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!pn((Jt||h).memoizedState,a);v&&(h.memoizedState=a,ke=!0),h=h.queue;var E=lg.bind(null,o,h,e);if(Yo(2048,8,E,[e]),h.getSnapshot!==i||v||Se!==null&&Se.memoizedState.tag&1){if(o.flags|=2048,wa(9,Hu(),og.bind(null,o,h,a,i),null),ie===null)throw Error(s(349));f||(gr&124)!==0||ag(o,i,a)}return a}function ag(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=Rt.updateQueue,i===null?(i=Tf(),Rt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function og(e,i,a,o){i.value=a,i.getSnapshot=o,ug(i)&&cg(e)}function lg(e,i,a){return a(function(){ug(i)&&cg(e)})}function ug(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!pn(e,a)}catch{return!0}}function cg(e){var i=pa(e,2);i!==null&&Tn(i,e,2)}function bf(e){var i=ln();if(typeof e=="function"){var a=e;if(e=a(),Ds){dn(!0);try{a()}finally{dn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:e},i}function hg(e,i,a,o){return e.baseState=a,Sf(e,Jt,typeof o=="function"?o:zi)}function cA(e,i,a,o,h){if(Fu(e))throw Error(s(485));if(e=i.action,e!==null){var f={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};G.T!==null?a(!0):f.isTransition=!1,o(f),a=i.pending,a===null?(f.next=i.pending=f,fg(i,f)):(f.next=a.next,i.pending=a.next=f)}}function fg(e,i){var a=i.action,o=i.payload,h=e.state;if(i.isTransition){var f=G.T,v={};G.T=v;try{var E=a(h,o),w=G.S;w!==null&&w(v,E),dg(e,i,E)}catch(L){Rf(e,i,L)}finally{G.T=f}}else try{f=a(h,o),dg(e,i,f)}catch(L){Rf(e,i,L)}}function dg(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){mg(e,i,o)},function(o){return Rf(e,i,o)}):mg(e,i,a)}function mg(e,i,a){i.status="fulfilled",i.value=a,pg(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,fg(e,a)))}function Rf(e,i,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,pg(i),i=i.next;while(i!==o)}e.action=null}function pg(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function gg(e,i){return i}function yg(e,i){if(Gt){var a=ie.formState;if(a!==null){t:{var o=Rt;if(Gt){if(he){e:{for(var h=he,f=ci;h.nodeType!==8;){if(!f){h=null;break e}if(h=Qn(h.nextSibling),h===null){h=null;break e}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){he=Qn(h.nextSibling),o=h.data==="F!";break t}}bs(o)}o=!1}o&&(i=a[0])}}return a=ln(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gg,lastRenderedState:i},a.queue=o,a=kg.bind(null,Rt,o),o.dispatch=a,o=bf(!1),f=Of.bind(null,Rt,!1,o.queue),o=ln(),h={state:i,dispatch:null,action:e,pending:null},o.queue=h,a=cA.bind(null,Rt,h,f,a),h.dispatch=a,o.memoizedState=e,[i,a,!1]}function _g(e){var i=we();return vg(i,Jt,e)}function vg(e,i,a){if(i=Sf(e,i,gg)[0],e=qu(zi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Ko(i)}catch(v){throw v===jo?ku:v}else o=i;i=we();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(Rt.flags|=2048,wa(9,Hu(),hA.bind(null,h,a),null)),[o,f,e]}function hA(e,i){e.action=i}function Eg(e){var i=we(),a=Jt;if(a!==null)return vg(i,a,e);we(),i=i.memoizedState,a=we();var o=a.queue.dispatch;return a.memoizedState=e,[i,o,!1]}function wa(e,i,a,o){return e={tag:e,create:a,deps:o,inst:i,next:null},i=Rt.updateQueue,i===null&&(i=Tf(),Rt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,i.lastEffect=e),e}function Hu(){return{destroy:void 0,resource:void 0}}function Tg(){return we().memoizedState}function Gu(e,i,a,o){var h=ln();o=o===void 0?null:o,Rt.flags|=e,h.memoizedState=wa(1|i,Hu(),a,o)}function Yo(e,i,a,o){var h=we();o=o===void 0?null:o;var f=h.memoizedState.inst;Jt!==null&&o!==null&&gf(o,Jt.memoizedState.deps)?h.memoizedState=wa(i,f,a,o):(Rt.flags|=e,h.memoizedState=wa(1|i,f,a,o))}function Ag(e,i){Gu(8390656,8,e,i)}function Sg(e,i){Yo(2048,8,e,i)}function wg(e,i){return Yo(4,2,e,i)}function bg(e,i){return Yo(4,4,e,i)}function Rg(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Ig(e,i,a){a=a!=null?a.concat([e]):null,Yo(4,4,Rg.bind(null,i,e),a)}function If(){}function Cg(e,i){var a=we();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&gf(i,o[1])?o[0]:(a.memoizedState=[e,i],e)}function Dg(e,i){var a=we();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&gf(i,o[1]))return o[0];if(o=e(),Ds){dn(!0);try{e()}finally{dn(!1)}}return a.memoizedState=[o,i],o}function Cf(e,i,a){return a===void 0||(gr&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=Vy(),Rt.lanes|=e,Sr|=e,a)}function Ng(e,i,a,o){return pn(a,i)?a:Ta.current!==null?(e=Cf(e,a,o),pn(e,i)||(ke=!0),e):(gr&42)===0?(ke=!0,e.memoizedState=a):(e=Vy(),Rt.lanes|=e,Sr|=e,i)}function Og(e,i,a,o,h){var f=nt.p;nt.p=f!==0&&8>f?f:8;var v=G.T,E={};G.T=E,Of(e,!1,i,a);try{var w=h(),L=G.S;if(L!==null&&L(E,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var F=oA(w,o);Xo(e,i,F,En(e))}else Xo(e,i,o,En(e))}catch(X){Xo(e,i,{then:function(){},status:"rejected",reason:X},En())}finally{nt.p=f,G.T=v}}function fA(){}function Df(e,i,a,o){if(e.tag!==5)throw Error(s(476));var h=Vg(e).queue;Og(e,h,i,lt,a===null?fA:function(){return Mg(e),a(o)})}function Vg(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:lt,baseState:lt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:lt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Mg(e){var i=Vg(e).next.queue;Xo(e,i,{},En())}function Nf(){return $e(dl)}function xg(){return we().memoizedState}function Pg(){return we().memoizedState}function dA(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=En();e=mr(a);var o=pr(i,e,a);o!==null&&(Tn(o,i,a),Ho(o,i,a)),i={cache:af()},e.payload=i;return}i=i.return}}function mA(e,i,a){var o=En();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Fu(e)?Ug(i,a):(a=Xh(e,i,a,o),a!==null&&(Tn(a,e,o),Lg(a,i,o)))}function kg(e,i,a){var o=En();Xo(e,i,a,o)}function Xo(e,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Fu(e))Ug(i,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var v=i.lastRenderedState,E=f(v,a);if(h.hasEagerState=!0,h.eagerState=E,pn(E,v))return Cu(e,i,h,0),ie===null&&Iu(),!1}catch{}finally{}if(a=Xh(e,i,h,o),a!==null)return Tn(a,e,o),Lg(a,i,o),!0}return!1}function Of(e,i,a,o){if(o={lane:2,revertLane:ud(),action:o,hasEagerState:!1,eagerState:null,next:null},Fu(e)){if(i)throw Error(s(479))}else i=Xh(e,a,o,2),i!==null&&Tn(i,e,2)}function Fu(e){var i=e.alternate;return e===Rt||i!==null&&i===Rt}function Ug(e,i){Aa=zu=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Lg(e,i,a){if((a&4194048)!==0){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,yo(e,a)}}var Qu={readContext:$e,use:ju,useCallback:me,useContext:me,useEffect:me,useImperativeHandle:me,useLayoutEffect:me,useInsertionEffect:me,useMemo:me,useReducer:me,useRef:me,useState:me,useDebugValue:me,useDeferredValue:me,useTransition:me,useSyncExternalStore:me,useId:me,useHostTransitionStatus:me,useFormState:me,useActionState:me,useOptimistic:me,useMemoCache:me,useCacheRefresh:me},zg={readContext:$e,use:ju,useCallback:function(e,i){return ln().memoizedState=[e,i===void 0?null:i],e},useContext:$e,useEffect:Ag,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Gu(4194308,4,Rg.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Gu(4194308,4,e,i)},useInsertionEffect:function(e,i){Gu(4,2,e,i)},useMemo:function(e,i){var a=ln();i=i===void 0?null:i;var o=e();if(Ds){dn(!0);try{e()}finally{dn(!1)}}return a.memoizedState=[o,i],o},useReducer:function(e,i,a){var o=ln();if(a!==void 0){var h=a(i);if(Ds){dn(!0);try{a(i)}finally{dn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=mA.bind(null,Rt,e),[o.memoizedState,e]},useRef:function(e){var i=ln();return e={current:e},i.memoizedState=e},useState:function(e){e=bf(e);var i=e.queue,a=kg.bind(null,Rt,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:If,useDeferredValue:function(e,i){var a=ln();return Cf(a,e,i)},useTransition:function(){var e=bf(!1);return e=Og.bind(null,Rt,e.queue,!0,!1),ln().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var o=Rt,h=ln();if(Gt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),ie===null)throw Error(s(349));(Ut&124)!==0||ag(o,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,Ag(lg.bind(null,o,f,e),[e]),o.flags|=2048,wa(9,Hu(),og.bind(null,o,f,a,i),null),a},useId:function(){var e=ln(),i=ie.identifierPrefix;if(Gt){var a=ki,o=Pi;a=(o&~(1<<32-Xe(o)-1)).toString(32)+a,i="«"+i+"R"+a,a=Bu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=lA++,i="«"+i+"r"+a.toString(32)+"»";return e.memoizedState=i},useHostTransitionStatus:Nf,useFormState:yg,useActionState:yg,useOptimistic:function(e){var i=ln();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Of.bind(null,Rt,!0,a),a.dispatch=i,[e,i]},useMemoCache:Af,useCacheRefresh:function(){return ln().memoizedState=dA.bind(null,Rt)}},Bg={readContext:$e,use:ju,useCallback:Cg,useContext:$e,useEffect:Sg,useImperativeHandle:Ig,useInsertionEffect:wg,useLayoutEffect:bg,useMemo:Dg,useReducer:qu,useRef:Tg,useState:function(){return qu(zi)},useDebugValue:If,useDeferredValue:function(e,i){var a=we();return Ng(a,Jt.memoizedState,e,i)},useTransition:function(){var e=qu(zi)[0],i=we().memoizedState;return[typeof e=="boolean"?e:Ko(e),i]},useSyncExternalStore:sg,useId:xg,useHostTransitionStatus:Nf,useFormState:_g,useActionState:_g,useOptimistic:function(e,i){var a=we();return hg(a,Jt,e,i)},useMemoCache:Af,useCacheRefresh:Pg},pA={readContext:$e,use:ju,useCallback:Cg,useContext:$e,useEffect:Sg,useImperativeHandle:Ig,useInsertionEffect:wg,useLayoutEffect:bg,useMemo:Dg,useReducer:wf,useRef:Tg,useState:function(){return wf(zi)},useDebugValue:If,useDeferredValue:function(e,i){var a=we();return Jt===null?Cf(a,e,i):Ng(a,Jt.memoizedState,e,i)},useTransition:function(){var e=wf(zi)[0],i=we().memoizedState;return[typeof e=="boolean"?e:Ko(e),i]},useSyncExternalStore:sg,useId:xg,useHostTransitionStatus:Nf,useFormState:Eg,useActionState:Eg,useOptimistic:function(e,i){var a=we();return Jt!==null?hg(a,Jt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Af,useCacheRefresh:Pg},ba=null,$o=0;function Ku(e){var i=$o;return $o+=1,ba===null&&(ba=[]),Zp(ba,e,i)}function Zo(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Yu(e,i){throw i.$$typeof===b?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function jg(e){var i=e._init;return i(e._payload)}function qg(e){function i(P,N){if(e){var U=P.deletions;U===null?(P.deletions=[N],P.flags|=16):U.push(N)}}function a(P,N){if(!e)return null;for(;N!==null;)i(P,N),N=N.sibling;return null}function o(P){for(var N=new Map;P!==null;)P.key!==null?N.set(P.key,P):N.set(P.index,P),P=P.sibling;return N}function h(P,N){return P=xi(P,N),P.index=0,P.sibling=null,P}function f(P,N,U){return P.index=U,e?(U=P.alternate,U!==null?(U=U.index,U<N?(P.flags|=67108866,N):U):(P.flags|=67108866,N)):(P.flags|=1048576,N)}function v(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function E(P,N,U,Q){return N===null||N.tag!==6?(N=Zh(U,P.mode,Q),N.return=P,N):(N=h(N,U),N.return=P,N)}function w(P,N,U,Q){var at=U.type;return at===z?F(P,N,U.props.children,Q,U.key):N!==null&&(N.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===S&&jg(at)===N.type)?(N=h(N,U.props),Zo(N,U),N.return=P,N):(N=Nu(U.type,U.key,U.props,null,P.mode,Q),Zo(N,U),N.return=P,N)}function L(P,N,U,Q){return N===null||N.tag!==4||N.stateNode.containerInfo!==U.containerInfo||N.stateNode.implementation!==U.implementation?(N=Wh(U,P.mode,Q),N.return=P,N):(N=h(N,U.children||[]),N.return=P,N)}function F(P,N,U,Q,at){return N===null||N.tag!==7?(N=Ts(U,P.mode,Q,at),N.return=P,N):(N=h(N,U),N.return=P,N)}function X(P,N,U){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Zh(""+N,P.mode,U),N.return=P,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case R:return U=Nu(N.type,N.key,N.props,null,P.mode,U),Zo(U,N),U.return=P,U;case H:return N=Wh(N,P.mode,U),N.return=P,N;case S:var Q=N._init;return N=Q(N._payload),X(P,N,U)}if(Zt(N)||x(N))return N=Ts(N,P.mode,U,null),N.return=P,N;if(typeof N.then=="function")return X(P,Ku(N),U);if(N.$$typeof===ht)return X(P,xu(P,N),U);Yu(P,N)}return null}function B(P,N,U,Q){var at=N!==null?N.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return at!==null?null:E(P,N,""+U,Q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case R:return U.key===at?w(P,N,U,Q):null;case H:return U.key===at?L(P,N,U,Q):null;case S:return at=U._init,U=at(U._payload),B(P,N,U,Q)}if(Zt(U)||x(U))return at!==null?null:F(P,N,U,Q,null);if(typeof U.then=="function")return B(P,N,Ku(U),Q);if(U.$$typeof===ht)return B(P,N,xu(P,U),Q);Yu(P,U)}return null}function j(P,N,U,Q,at){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return P=P.get(U)||null,E(N,P,""+Q,at);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case R:return P=P.get(Q.key===null?U:Q.key)||null,w(N,P,Q,at);case H:return P=P.get(Q.key===null?U:Q.key)||null,L(N,P,Q,at);case S:var It=Q._init;return Q=It(Q._payload),j(P,N,U,Q,at)}if(Zt(Q)||x(Q))return P=P.get(U)||null,F(N,P,Q,at,null);if(typeof Q.then=="function")return j(P,N,U,Ku(Q),at);if(Q.$$typeof===ht)return j(P,N,U,xu(N,Q),at);Yu(N,Q)}return null}function Et(P,N,U,Q){for(var at=null,It=null,ut=N,gt=N=0,Le=null;ut!==null&&gt<U.length;gt++){ut.index>gt?(Le=ut,ut=null):Le=ut.sibling;var Ht=B(P,ut,U[gt],Q);if(Ht===null){ut===null&&(ut=Le);break}e&&ut&&Ht.alternate===null&&i(P,ut),N=f(Ht,N,gt),It===null?at=Ht:It.sibling=Ht,It=Ht,ut=Le}if(gt===U.length)return a(P,ut),Gt&&Ss(P,gt),at;if(ut===null){for(;gt<U.length;gt++)ut=X(P,U[gt],Q),ut!==null&&(N=f(ut,N,gt),It===null?at=ut:It.sibling=ut,It=ut);return Gt&&Ss(P,gt),at}for(ut=o(ut);gt<U.length;gt++)Le=j(ut,P,gt,U[gt],Q),Le!==null&&(e&&Le.alternate!==null&&ut.delete(Le.key===null?gt:Le.key),N=f(Le,N,gt),It===null?at=Le:It.sibling=Le,It=Le);return e&&ut.forEach(function(Vr){return i(P,Vr)}),Gt&&Ss(P,gt),at}function pt(P,N,U,Q){if(U==null)throw Error(s(151));for(var at=null,It=null,ut=N,gt=N=0,Le=null,Ht=U.next();ut!==null&&!Ht.done;gt++,Ht=U.next()){ut.index>gt?(Le=ut,ut=null):Le=ut.sibling;var Vr=B(P,ut,Ht.value,Q);if(Vr===null){ut===null&&(ut=Le);break}e&&ut&&Vr.alternate===null&&i(P,ut),N=f(Vr,N,gt),It===null?at=Vr:It.sibling=Vr,It=Vr,ut=Le}if(Ht.done)return a(P,ut),Gt&&Ss(P,gt),at;if(ut===null){for(;!Ht.done;gt++,Ht=U.next())Ht=X(P,Ht.value,Q),Ht!==null&&(N=f(Ht,N,gt),It===null?at=Ht:It.sibling=Ht,It=Ht);return Gt&&Ss(P,gt),at}for(ut=o(ut);!Ht.done;gt++,Ht=U.next())Ht=j(ut,P,gt,Ht.value,Q),Ht!==null&&(e&&Ht.alternate!==null&&ut.delete(Ht.key===null?gt:Ht.key),N=f(Ht,N,gt),It===null?at=Ht:It.sibling=Ht,It=Ht);return e&&ut.forEach(function(gS){return i(P,gS)}),Gt&&Ss(P,gt),at}function ee(P,N,U,Q){if(typeof U=="object"&&U!==null&&U.type===z&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case R:t:{for(var at=U.key;N!==null;){if(N.key===at){if(at=U.type,at===z){if(N.tag===7){a(P,N.sibling),Q=h(N,U.props.children),Q.return=P,P=Q;break t}}else if(N.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===S&&jg(at)===N.type){a(P,N.sibling),Q=h(N,U.props),Zo(Q,U),Q.return=P,P=Q;break t}a(P,N);break}else i(P,N);N=N.sibling}U.type===z?(Q=Ts(U.props.children,P.mode,Q,U.key),Q.return=P,P=Q):(Q=Nu(U.type,U.key,U.props,null,P.mode,Q),Zo(Q,U),Q.return=P,P=Q)}return v(P);case H:t:{for(at=U.key;N!==null;){if(N.key===at)if(N.tag===4&&N.stateNode.containerInfo===U.containerInfo&&N.stateNode.implementation===U.implementation){a(P,N.sibling),Q=h(N,U.children||[]),Q.return=P,P=Q;break t}else{a(P,N);break}else i(P,N);N=N.sibling}Q=Wh(U,P.mode,Q),Q.return=P,P=Q}return v(P);case S:return at=U._init,U=at(U._payload),ee(P,N,U,Q)}if(Zt(U))return Et(P,N,U,Q);if(x(U)){if(at=x(U),typeof at!="function")throw Error(s(150));return U=at.call(U),pt(P,N,U,Q)}if(typeof U.then=="function")return ee(P,N,Ku(U),Q);if(U.$$typeof===ht)return ee(P,N,xu(P,U),Q);Yu(P,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,N!==null&&N.tag===6?(a(P,N.sibling),Q=h(N,U),Q.return=P,P=Q):(a(P,N),Q=Zh(U,P.mode,Q),Q.return=P,P=Q),v(P)):a(P,N)}return function(P,N,U,Q){try{$o=0;var at=ee(P,N,U,Q);return ba=null,at}catch(ut){if(ut===jo||ut===ku)throw ut;var It=gn(29,ut,null,P.mode);return It.lanes=Q,It.return=P,It}finally{}}}var Ra=qg(!0),Hg=qg(!1),xn=Z(null),hi=null;function yr(e){var i=e.alternate;J(Ve,Ve.current&1),J(xn,e),hi===null&&(i===null||Ta.current!==null||i.memoizedState!==null)&&(hi=e)}function Gg(e){if(e.tag===22){if(J(Ve,Ve.current),J(xn,e),hi===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(hi=e)}}else _r()}function _r(){J(Ve,Ve.current),J(xn,xn.current)}function Bi(e){it(xn),hi===e&&(hi=null),it(Ve)}var Ve=Z(0);function Xu(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Td(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Vf(e,i,a,o){i=e.memoizedState,a=a(o,i),a=a==null?i:T({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Mf={enqueueSetState:function(e,i,a){e=e._reactInternals;var o=En(),h=mr(o);h.payload=i,a!=null&&(h.callback=a),i=pr(e,h,o),i!==null&&(Tn(i,e,o),Ho(i,e,o))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var o=En(),h=mr(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=pr(e,h,o),i!==null&&(Tn(i,e,o),Ho(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=En(),o=mr(a);o.tag=2,i!=null&&(o.callback=i),i=pr(e,o,a),i!==null&&(Tn(i,e,a),Ho(i,e,a))}};function Fg(e,i,a,o,h,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,v):i.prototype&&i.prototype.isPureReactComponent?!Mo(a,o)||!Mo(h,f):!0}function Qg(e,i,a,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==e&&Mf.enqueueReplaceState(i,i.state,null)}function Ns(e,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(e=e.defaultProps){a===i&&(a=T({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var $u=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Kg(e){$u(e)}function Yg(e){console.error(e)}function Xg(e){$u(e)}function Zu(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function $g(e,i,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function xf(e,i,a){return a=mr(a),a.tag=3,a.payload={element:null},a.callback=function(){Zu(e,i)},a}function Zg(e){return e=mr(e),e.tag=3,e}function Wg(e,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;e.payload=function(){return h(f)},e.callback=function(){$g(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){$g(i,a,o),typeof h!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function gA(e,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Lo(i,a,h,!0),a=xn.current,a!==null){switch(a.tag){case 13:return hi===null?rd():a.alternate===null&&fe===0&&(fe=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===uf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),ad(e,o,h)),!1;case 22:return a.flags|=65536,o===uf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),ad(e,o,h)),!1}throw Error(s(435,a.tag))}return ad(e,o,h),rd(),!1}if(Gt)return i=xn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==ef&&(e=Error(s(422),{cause:o}),Uo(Nn(e,a)))):(o!==ef&&(i=Error(s(423),{cause:o}),Uo(Nn(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=Nn(o,a),h=xf(e.stateNode,o,h),ff(e,h),fe!==4&&(fe=2)),!1;var f=Error(s(520),{cause:o});if(f=Nn(f,a),rl===null?rl=[f]:rl.push(f),fe!==4&&(fe=2),i===null)return!0;o=Nn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=xf(a.stateNode,o,e),ff(a,e),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(wr===null||!wr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Zg(h),Wg(h,e,a,o),ff(a,h),!1}a=a.return}while(a!==null);return!1}var Jg=Error(s(461)),ke=!1;function He(e,i,a,o){i.child=e===null?Hg(i,null,a,o):Ra(i,e.child,a,o)}function ty(e,i,a,o,h){a=a.render;var f=i.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return Is(i),o=yf(e,i,a,v,f,h),E=_f(),e!==null&&!ke?(vf(e,i,h),ji(e,i,h)):(Gt&&E&&Jh(i),i.flags|=1,He(e,i,o,h),i.child)}function ey(e,i,a,o,h){if(e===null){var f=a.type;return typeof f=="function"&&!$h(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,ny(e,i,f,o,h)):(e=Nu(a.type,null,o,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(f=e.child,!qf(e,h)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:Mo,a(v,o)&&e.ref===i.ref)return ji(e,i,h)}return i.flags|=1,e=xi(f,o),e.ref=i.ref,e.return=i,i.child=e}function ny(e,i,a,o,h){if(e!==null){var f=e.memoizedProps;if(Mo(f,o)&&e.ref===i.ref)if(ke=!1,i.pendingProps=o=f,qf(e,h))(e.flags&131072)!==0&&(ke=!0);else return i.lanes=e.lanes,ji(e,i,h)}return Pf(e,i,a,o,h)}function iy(e,i,a){var o=i.pendingProps,h=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,e!==null){for(h=i.child=e.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~o}else i.childLanes=0,i.child=null;return ry(e,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Pu(i,f!==null?f.cachePool:null),f!==null?ng(i,f):mf(),Gg(i);else return i.lanes=i.childLanes=536870912,ry(e,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(Pu(i,f.cachePool),ng(i,f),_r(),i.memoizedState=null):(e!==null&&Pu(i,null),mf(),_r());return He(e,i,h,a),i.child}function ry(e,i,a,o){var h=lf();return h=h===null?null:{parent:Oe._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&Pu(i,null),mf(),Gg(i),e!==null&&Lo(e,i,o,!0),null}function Wu(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Pf(e,i,a,o,h){return Is(i),a=yf(e,i,a,o,void 0,h),o=_f(),e!==null&&!ke?(vf(e,i,h),ji(e,i,h)):(Gt&&o&&Jh(i),i.flags|=1,He(e,i,a,h),i.child)}function sy(e,i,a,o,h,f){return Is(i),i.updateQueue=null,a=rg(i,o,a,h),ig(e),o=_f(),e!==null&&!ke?(vf(e,i,f),ji(e,i,f)):(Gt&&o&&Jh(i),i.flags|=1,He(e,i,a,f),i.child)}function ay(e,i,a,o,h){if(Is(i),i.stateNode===null){var f=ga,v=a.contextType;typeof v=="object"&&v!==null&&(f=$e(v)),f=new a(o,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Mf,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=o,f.state=i.memoizedState,f.refs={},cf(i),v=a.contextType,f.context=typeof v=="object"&&v!==null?$e(v):ga,f.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Vf(i,a,v,o),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&Mf.enqueueReplaceState(f,f.state,null),Fo(i,o,f,h),Go(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){f=i.stateNode;var E=i.memoizedProps,w=Ns(a,E);f.props=w;var L=f.context,F=a.contextType;v=ga,typeof F=="object"&&F!==null&&(v=$e(F));var X=a.getDerivedStateFromProps;F=typeof X=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,F||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||L!==v)&&Qg(i,f,o,v),dr=!1;var B=i.memoizedState;f.state=B,Fo(i,o,f,h),Go(),L=i.memoizedState,E||B!==L||dr?(typeof X=="function"&&(Vf(i,a,X,o),L=i.memoizedState),(w=dr||Fg(i,a,w,o,B,L,v))?(F||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=L),f.props=o,f.state=L,f.context=v,o=w):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{f=i.stateNode,hf(e,i),v=i.memoizedProps,F=Ns(a,v),f.props=F,X=i.pendingProps,B=f.context,L=a.contextType,w=ga,typeof L=="object"&&L!==null&&(w=$e(L)),E=a.getDerivedStateFromProps,(L=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==X||B!==w)&&Qg(i,f,o,w),dr=!1,B=i.memoizedState,f.state=B,Fo(i,o,f,h),Go();var j=i.memoizedState;v!==X||B!==j||dr||e!==null&&e.dependencies!==null&&Mu(e.dependencies)?(typeof E=="function"&&(Vf(i,a,E,o),j=i.memoizedState),(F=dr||Fg(i,a,F,o,B,j,w)||e!==null&&e.dependencies!==null&&Mu(e.dependencies))?(L||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,j,w),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,j,w)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=j),f.props=o,f.state=j,f.context=w,o=F):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(i.flags|=1024),o=!1)}return f=o,Wu(e,i),o=(i.flags&128)!==0,f||o?(f=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,e!==null&&o?(i.child=Ra(i,e.child,null,h),i.child=Ra(i,null,a,h)):He(e,i,a,h),i.memoizedState=f.state,e=i.child):e=ji(e,i,h),e}function oy(e,i,a,o){return ko(),i.flags|=256,He(e,i,a,o),i.child}var kf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uf(e){return{baseLanes:e,cachePool:Yp()}}function Lf(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Pn),e}function ly(e,i,a){var o=i.pendingProps,h=!1,f=(i.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(Ve.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(Gt){if(h?yr(i):_r(),Gt){var E=he,w;if(w=E){t:{for(w=E,E=ci;w.nodeType!==8;){if(!E){E=null;break t}if(w=Qn(w.nextSibling),w===null){E=null;break t}}E=w}E!==null?(i.memoizedState={dehydrated:E,treeContext:As!==null?{id:Pi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},w=gn(18,null,null,0),w.stateNode=E,w.return=i,i.child=w,on=i,he=null,w=!0):w=!1}w||bs(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Td(E)?i.lanes=32:i.lanes=536870912,null;Bi(i)}return E=o.children,o=o.fallback,h?(_r(),h=i.mode,E=Ju({mode:"hidden",children:E},h),o=Ts(o,h,a,null),E.return=i,o.return=i,E.sibling=o,i.child=E,h=i.child,h.memoizedState=Uf(a),h.childLanes=Lf(e,v,a),i.memoizedState=kf,o):(yr(i),zf(i,E))}if(w=e.memoizedState,w!==null&&(E=w.dehydrated,E!==null)){if(f)i.flags&256?(yr(i),i.flags&=-257,i=Bf(e,i,a)):i.memoizedState!==null?(_r(),i.child=e.child,i.flags|=128,i=null):(_r(),h=o.fallback,E=i.mode,o=Ju({mode:"visible",children:o.children},E),h=Ts(h,E,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,Ra(i,e.child,null,a),o=i.child,o.memoizedState=Uf(a),o.childLanes=Lf(e,v,a),i.memoizedState=kf,i=h);else if(yr(i),Td(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var L=v.dgst;v=L,o=Error(s(419)),o.stack="",o.digest=v,Uo({value:o,source:null,stack:null}),i=Bf(e,i,a)}else if(ke||Lo(e,i,a,!1),v=(a&e.childLanes)!==0,ke||v){if(v=ie,v!==null&&(o=a&-a,o=(o&42)!==0?1:sr(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==w.retryLane))throw w.retryLane=o,pa(e,o),Tn(v,e,o),Jg;E.data==="$?"||rd(),i=Bf(e,i,a)}else E.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=w.treeContext,he=Qn(E.nextSibling),on=i,Gt=!0,ws=null,ci=!1,e!==null&&(Vn[Mn++]=Pi,Vn[Mn++]=ki,Vn[Mn++]=As,Pi=e.id,ki=e.overflow,As=i),i=zf(i,o.children),i.flags|=4096);return i}return h?(_r(),h=o.fallback,E=i.mode,w=e.child,L=w.sibling,o=xi(w,{mode:"hidden",children:o.children}),o.subtreeFlags=w.subtreeFlags&65011712,L!==null?h=xi(L,h):(h=Ts(h,E,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,E=e.child.memoizedState,E===null?E=Uf(a):(w=E.cachePool,w!==null?(L=Oe._currentValue,w=w.parent!==L?{parent:L,pool:L}:w):w=Yp(),E={baseLanes:E.baseLanes|a,cachePool:w}),h.memoizedState=E,h.childLanes=Lf(e,v,a),i.memoizedState=kf,o):(yr(i),a=e.child,e=a.sibling,a=xi(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function zf(e,i){return i=Ju({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Ju(e,i){return e=gn(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Bf(e,i,a){return Ra(i,e.child,null,a),e=zf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function uy(e,i,a){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),rf(e.return,i,a)}function jf(e,i,a,o,h){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=h)}function cy(e,i,a){var o=i.pendingProps,h=o.revealOrder,f=o.tail;if(He(e,i,o.children,a),o=Ve.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uy(e,a,i);else if(e.tag===19)uy(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(J(Ve,o),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&Xu(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),jf(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Xu(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}jf(i,!0,a,null,f);break;case"together":jf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ji(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Sr|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Lo(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=xi(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=xi(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function qf(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Mu(e)))}function yA(e,i,a){switch(i.tag){case 3:Kt(i,i.stateNode.containerInfo),fr(i,Oe,e.memoizedState.cache),ko();break;case 27:case 5:Mt(i);break;case 4:Kt(i,i.stateNode.containerInfo);break;case 10:fr(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(yr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?ly(e,i,a):(yr(i),e=ji(e,i,a),e!==null?e.sibling:null);yr(i);break;case 19:var h=(e.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Lo(e,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return cy(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),J(Ve,Ve.current),o)break;return null;case 22:case 23:return i.lanes=0,iy(e,i,a);case 24:fr(i,Oe,e.memoizedState.cache)}return ji(e,i,a)}function hy(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)ke=!0;else{if(!qf(e,a)&&(i.flags&128)===0)return ke=!1,yA(e,i,a);ke=(e.flags&131072)!==0}else ke=!1,Gt&&(i.flags&1048576)!==0&&jp(i,Vu,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")$h(o)?(e=Ns(o,e),i.tag=1,i=ay(null,i,o,e,a)):(i.tag=0,i=Pf(null,i,o,e,a));else{if(o!=null){if(h=o.$$typeof,h===qt){i.tag=11,i=ty(null,i,o,e,a);break t}else if(h===O){i.tag=14,i=ey(null,i,o,e,a);break t}}throw i=ve(o)||o,Error(s(306,i,""))}}return i;case 0:return Pf(e,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=Ns(o,i.pendingProps),ay(e,i,o,h,a);case 3:t:{if(Kt(i,i.stateNode.containerInfo),e===null)throw Error(s(387));o=i.pendingProps;var f=i.memoizedState;h=f.element,hf(e,i),Fo(i,o,null,a);var v=i.memoizedState;if(o=v.cache,fr(i,Oe,o),o!==f.cache&&sf(i,[Oe],a,!0),Go(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=oy(e,i,o,a);break t}else if(o!==h){h=Nn(Error(s(424)),i),Uo(h),i=oy(e,i,o,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(he=Qn(e.firstChild),on=i,Gt=!0,ws=null,ci=!0,a=Hg(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ko(),o===h){i=ji(e,i,a);break t}He(e,i,o,a)}i=i.child}return i;case 26:return Wu(e,i),e===null?(a=p_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Gt||(a=i.type,e=i.pendingProps,o=dc(vt.current).createElement(a),o[Ce]=i,o[Te]=e,Fe(o,a,e),de(o),i.stateNode=o):i.memoizedState=p_(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Mt(i),e===null&&Gt&&(o=i.stateNode=f_(i.type,i.pendingProps,vt.current),on=i,ci=!0,h=he,Ir(i.type)?(Ad=h,he=Qn(o.firstChild)):he=h),He(e,i,i.pendingProps.children,a),Wu(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Gt&&((h=o=he)&&(o=FA(o,i.type,i.pendingProps,ci),o!==null?(i.stateNode=o,on=i,he=Qn(o.firstChild),ci=!1,h=!0):h=!1),h||bs(i)),Mt(i),h=i.type,f=i.pendingProps,v=e!==null?e.memoizedProps:null,o=f.children,_d(h,f)?o=null:v!==null&&_d(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=yf(e,i,uA,null,null,a),dl._currentValue=h),Wu(e,i),He(e,i,o,a),i.child;case 6:return e===null&&Gt&&((e=a=he)&&(a=QA(a,i.pendingProps,ci),a!==null?(i.stateNode=a,on=i,he=null,e=!0):e=!1),e||bs(i)),null;case 13:return ly(e,i,a);case 4:return Kt(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=Ra(i,null,o,a):He(e,i,o,a),i.child;case 11:return ty(e,i,i.type,i.pendingProps,a);case 7:return He(e,i,i.pendingProps,a),i.child;case 8:return He(e,i,i.pendingProps.children,a),i.child;case 12:return He(e,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,fr(i,i.type,o.value),He(e,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Is(i),h=$e(h),o=o(h),i.flags|=1,He(e,i,o,a),i.child;case 14:return ey(e,i,i.type,i.pendingProps,a);case 15:return ny(e,i,i.type,i.pendingProps,a);case 19:return cy(e,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},e===null?(a=Ju(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=xi(e.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return iy(e,i,a);case 24:return Is(i),o=$e(Oe),e===null?(h=lf(),h===null&&(h=ie,f=af(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:o,cache:h},cf(i),fr(i,Oe,h)):((e.lanes&a)!==0&&(hf(e,i),Fo(i,null,null,a),Go()),h=e.memoizedState,f=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),fr(i,Oe,o)):(o=f.cache,fr(i,Oe,o),o!==h.cache&&sf(i,[Oe],a,!0))),He(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function qi(e){e.flags|=4}function fy(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!E_(i)){if(i=xn.current,i!==null&&((Ut&4194048)===Ut?hi!==null:(Ut&62914560)!==Ut&&(Ut&536870912)===0||i!==hi))throw qo=uf,Xp;e.flags|=8192}}function tc(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?po():536870912,e.lanes|=i,Na|=i)}function Wo(e,i){if(!Gt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function le(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,i}function _A(e,i,a){var o=i.pendingProps;switch(tf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return le(i),null;case 1:return le(i),null;case 3:return a=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Li(Oe),ot(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Po(i)?qi(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Gp())),le(i),null;case 26:return a=i.memoizedState,e===null?(qi(i),a!==null?(le(i),fy(i,a)):(le(i),i.flags&=-16777217)):a?a!==e.memoizedState?(qi(i),le(i),fy(i,a)):(le(i),i.flags&=-16777217):(e.memoizedProps!==o&&qi(i),le(i),i.flags&=-16777217),null;case 27:jt(i),a=vt.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==o&&qi(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return le(i),null}e=ct.current,Po(i)?qp(i):(e=f_(h,o,a),i.stateNode=e,qi(i))}return le(i),null;case 5:if(jt(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&qi(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return le(i),null}if(e=ct.current,Po(i))qp(i);else{switch(h=dc(vt.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}e[Ce]=i,e[Te]=o;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(Fe(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&qi(i)}}return le(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&qi(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(e=vt.current,Po(i)){if(e=i.stateNode,a=i.memoizedProps,o=null,h=on,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Ce]=i,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||s_(e.nodeValue,a)),e||bs(i)}else e=dc(e).createTextNode(o),e[Ce]=i,i.stateNode=e}return le(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Po(i),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Ce]=i}else ko(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;le(i),h=!1}else h=Gp(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Bi(i),i):(Bi(i),null)}if(Bi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),tc(i,i.updateQueue),le(i),null;case 4:return ot(),e===null&&dd(i.stateNode.containerInfo),le(i),null;case 10:return Li(i.type),le(i),null;case 19:if(it(Ve),h=i.memoizedState,h===null)return le(i),null;if(o=(i.flags&128)!==0,f=h.rendering,f===null)if(o)Wo(h,!1);else{if(fe!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(f=Xu(e),f!==null){for(i.flags|=128,Wo(h,!1),e=f.updateQueue,i.updateQueue=e,tc(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Bp(a,e),a=a.sibling;return J(Ve,Ve.current&1|2),i.child}e=e.sibling}h.tail!==null&&wn()>ic&&(i.flags|=128,o=!0,Wo(h,!1),i.lanes=4194304)}else{if(!o)if(e=Xu(f),e!==null){if(i.flags|=128,o=!0,e=e.updateQueue,i.updateQueue=e,tc(i,e),Wo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Gt)return le(i),null}else 2*wn()-h.renderingStartTime>ic&&a!==536870912&&(i.flags|=128,o=!0,Wo(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(e=h.last,e!==null?e.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=wn(),i.sibling=null,e=Ve.current,J(Ve,o?e&1|2:e&1),i):(le(i),null);case 22:case 23:return Bi(i),pf(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(le(i),i.subtreeFlags&6&&(i.flags|=8192)):le(i),a=i.updateQueue,a!==null&&tc(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),e!==null&&it(Cs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Li(Oe),le(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function vA(e,i){switch(tf(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Li(Oe),ot(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return jt(i),null;case 13:if(Bi(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));ko()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return it(Ve),null;case 4:return ot(),null;case 10:return Li(i.type),null;case 22:case 23:return Bi(i),pf(),e!==null&&it(Cs),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Li(Oe),null;case 25:return null;default:return null}}function dy(e,i){switch(tf(i),i.tag){case 3:Li(Oe),ot();break;case 26:case 27:case 5:jt(i);break;case 4:ot();break;case 13:Bi(i);break;case 19:it(Ve);break;case 10:Li(i.type);break;case 22:case 23:Bi(i),pf(),e!==null&&it(Cs);break;case 24:Li(Oe)}}function Jo(e,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==h)}}catch(E){ne(i,i.return,E)}}function vr(e,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&e)===e){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=i;var w=a,L=E;try{L()}catch(F){ne(h,w,F)}}}o=o.next}while(o!==f)}}catch(F){ne(i,i.return,F)}}function my(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{eg(i,a)}catch(o){ne(e,e.return,o)}}}function py(e,i,a){a.props=Ns(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){ne(e,i,o)}}function tl(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){ne(e,i,h)}}function fi(e,i){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){ne(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ne(e,i,h)}else a.current=null}function gy(e){var i=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){ne(e,e.return,h)}}function Hf(e,i,a){try{var o=e.stateNode;BA(o,e.type,a,i),o[Te]=i}catch(h){ne(e,e.return,h)}}function yy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ir(e.type)||e.tag===4}function Gf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||yy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ir(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ff(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=fc));else if(o!==4&&(o===27&&Ir(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(Ff(e,i,a),e=e.sibling;e!==null;)Ff(e,i,a),e=e.sibling}function ec(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(o!==4&&(o===27&&Ir(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(ec(e,i,a),e=e.sibling;e!==null;)ec(e,i,a),e=e.sibling}function _y(e){var i=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Fe(i,o,a),i[Ce]=e,i[Te]=a}catch(f){ne(e,e.return,f)}}var Hi=!1,pe=!1,Qf=!1,vy=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function EA(e,i){if(e=e.containerInfo,gd=vc,e=Np(e),Hh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break t}var v=0,E=-1,w=-1,L=0,F=0,X=e,B=null;e:for(;;){for(var j;X!==a||h!==0&&X.nodeType!==3||(E=v+h),X!==f||o!==0&&X.nodeType!==3||(w=v+o),X.nodeType===3&&(v+=X.nodeValue.length),(j=X.firstChild)!==null;)B=X,X=j;for(;;){if(X===e)break e;if(B===a&&++L===h&&(E=v),B===f&&++F===o&&(w=v),(j=X.nextSibling)!==null)break;X=B,B=X.parentNode}X=j}a=E===-1||w===-1?null:{start:E,end:w}}else a=null}a=a||{start:0,end:0}}else a=null;for(yd={focusedElem:e,selectionRange:a},vc=!1,Ue=i;Ue!==null;)if(i=Ue,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,Ue=e;else for(;Ue!==null;){switch(i=Ue,f=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var Et=Ns(a.type,h,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(Et,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(pt){ne(a,a.return,pt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)Ed(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ed(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Ue=e;break}Ue=i.return}}function Ey(e,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Er(e,a),o&4&&Jo(5,a);break;case 1:if(Er(e,a),o&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(v){ne(a,a.return,v)}else{var h=Ns(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){ne(a,a.return,v)}}o&64&&my(a),o&512&&tl(a,a.return);break;case 3:if(Er(e,a),o&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{eg(e,i)}catch(v){ne(a,a.return,v)}}break;case 27:i===null&&o&4&&_y(a);case 26:case 5:Er(e,a),i===null&&o&4&&gy(a),o&512&&tl(a,a.return);break;case 12:Er(e,a);break;case 13:Er(e,a),o&4&&Sy(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=DA.bind(null,a),KA(e,a))));break;case 22:if(o=a.memoizedState!==null||Hi,!o){i=i!==null&&i.memoizedState!==null||pe,h=Hi;var f=pe;Hi=o,(pe=i)&&!f?Tr(e,a,(a.subtreeFlags&8772)!==0):Er(e,a),Hi=h,pe=f}break;case 30:break;default:Er(e,a)}}function Ty(e){var i=e.alternate;i!==null&&(e.alternate=null,Ty(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&lr(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var oe=null,un=!1;function Gi(e,i,a){for(a=a.child;a!==null;)Ay(e,i,a),a=a.sibling}function Ay(e,i,a){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(ce,a)}catch{}switch(a.tag){case 26:pe||fi(a,i),Gi(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:pe||fi(a,i);var o=oe,h=un;Ir(a.type)&&(oe=a.stateNode,un=!1),Gi(e,i,a),ul(a.stateNode),oe=o,un=h;break;case 5:pe||fi(a,i);case 6:if(o=oe,h=un,oe=null,Gi(e,i,a),oe=o,un=h,oe!==null)if(un)try{(oe.nodeType===9?oe.body:oe.nodeName==="HTML"?oe.ownerDocument.body:oe).removeChild(a.stateNode)}catch(f){ne(a,i,f)}else try{oe.removeChild(a.stateNode)}catch(f){ne(a,i,f)}break;case 18:oe!==null&&(un?(e=oe,c_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),yl(e)):c_(oe,a.stateNode));break;case 4:o=oe,h=un,oe=a.stateNode.containerInfo,un=!0,Gi(e,i,a),oe=o,un=h;break;case 0:case 11:case 14:case 15:pe||vr(2,a,i),pe||vr(4,a,i),Gi(e,i,a);break;case 1:pe||(fi(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&py(a,i,o)),Gi(e,i,a);break;case 21:Gi(e,i,a);break;case 22:pe=(o=pe)||a.memoizedState!==null,Gi(e,i,a),pe=o;break;default:Gi(e,i,a)}}function Sy(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{yl(e)}catch(a){ne(i,i.return,a)}}function TA(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new vy),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new vy),i;default:throw Error(s(435,e.tag))}}function Kf(e,i){var a=TA(e);i.forEach(function(o){var h=NA.bind(null,e,o);a.has(o)||(a.add(o),o.then(h,h))})}function yn(e,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=e,v=i,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(Ir(E.type)){oe=E.stateNode,un=!1;break t}break;case 5:oe=E.stateNode,un=!1;break t;case 3:case 4:oe=E.stateNode.containerInfo,un=!0;break t}E=E.return}if(oe===null)throw Error(s(160));Ay(f,v,h),oe=null,un=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)wy(i,e),i=i.sibling}var Fn=null;function wy(e,i){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:yn(i,e),_n(e),o&4&&(vr(3,e,e.return),Jo(3,e),vr(5,e,e.return));break;case 1:yn(i,e),_n(e),o&512&&(pe||a===null||fi(a,a.return)),o&64&&Hi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Fn;if(yn(i,e),_n(e),o&512&&(pe||a===null||fi(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[ss]||f[Ce]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),Fe(f,o,a),f[Ce]=e,de(f),o=f;break t;case"link":var v=__("link","href",h).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(f=v[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}f=h.createElement(o),Fe(f,o,a),h.head.appendChild(f);break;case"meta":if(v=__("meta","content",h).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(f=v[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}f=h.createElement(o),Fe(f,o,a),h.head.appendChild(f);break;default:throw Error(s(468,o))}f[Ce]=e,de(f),o=f}e.stateNode=o}else v_(h,e.type,e.stateNode);else e.stateNode=y_(h,o,e.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?v_(h,e.type,e.stateNode):y_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Hf(e,e.memoizedProps,a.memoizedProps)}break;case 27:yn(i,e),_n(e),o&512&&(pe||a===null||fi(a,a.return)),a!==null&&o&4&&Hf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(yn(i,e),_n(e),o&512&&(pe||a===null||fi(a,a.return)),e.flags&32){h=e.stateNode;try{Rn(h,"")}catch(j){ne(e,e.return,j)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,Hf(e,h,a!==null?a.memoizedProps:h)),o&1024&&(Qf=!0);break;case 6:if(yn(i,e),_n(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(j){ne(e,e.return,j)}}break;case 3:if(gc=null,h=Fn,Fn=mc(i.containerInfo),yn(i,e),Fn=h,_n(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{yl(i.containerInfo)}catch(j){ne(e,e.return,j)}Qf&&(Qf=!1,by(e));break;case 4:o=Fn,Fn=mc(e.stateNode.containerInfo),yn(i,e),_n(e),Fn=o;break;case 12:yn(i,e),_n(e);break;case 13:yn(i,e),_n(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Jf=wn()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Kf(e,o)));break;case 22:h=e.memoizedState!==null;var w=a!==null&&a.memoizedState!==null,L=Hi,F=pe;if(Hi=L||h,pe=F||w,yn(i,e),pe=F,Hi=L,_n(e),o&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||w||Hi||pe||Os(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){w=a=i;try{if(f=w.stateNode,h)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=w.stateNode;var X=w.memoizedProps.style,B=X!=null&&X.hasOwnProperty("display")?X.display:null;E.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(j){ne(w,w.return,j)}}}else if(i.tag===6){if(a===null){w=i;try{w.stateNode.nodeValue=h?"":w.memoizedProps}catch(j){ne(w,w.return,j)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Kf(e,a))));break;case 19:yn(i,e),_n(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Kf(e,o)));break;case 30:break;case 21:break;default:yn(i,e),_n(e)}}function _n(e){var i=e.flags;if(i&2){try{for(var a,o=e.return;o!==null;){if(yy(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=Gf(e);ec(e,f,h);break;case 5:var v=a.stateNode;a.flags&32&&(Rn(v,""),a.flags&=-33);var E=Gf(e);ec(e,E,v);break;case 3:case 4:var w=a.stateNode.containerInfo,L=Gf(e);Ff(e,L,w);break;default:throw Error(s(161))}}catch(F){ne(e,e.return,F)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function by(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;by(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function Er(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Ey(e,i.alternate,i),i=i.sibling}function Os(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:vr(4,i,i.return),Os(i);break;case 1:fi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&py(i,i.return,a),Os(i);break;case 27:ul(i.stateNode);case 26:case 5:fi(i,i.return),Os(i);break;case 22:i.memoizedState===null&&Os(i);break;case 30:Os(i);break;default:Os(i)}e=e.sibling}}function Tr(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=e,f=i,v=f.flags;switch(f.tag){case 0:case 11:case 15:Tr(h,f,a),Jo(4,f);break;case 1:if(Tr(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(L){ne(o,o.return,L)}if(o=f,h=o.updateQueue,h!==null){var E=o.stateNode;try{var w=h.shared.hiddenCallbacks;if(w!==null)for(h.shared.hiddenCallbacks=null,h=0;h<w.length;h++)tg(w[h],E)}catch(L){ne(o,o.return,L)}}a&&v&64&&my(f),tl(f,f.return);break;case 27:_y(f);case 26:case 5:Tr(h,f,a),a&&o===null&&v&4&&gy(f),tl(f,f.return);break;case 12:Tr(h,f,a);break;case 13:Tr(h,f,a),a&&v&4&&Sy(h,f);break;case 22:f.memoizedState===null&&Tr(h,f,a),tl(f,f.return);break;case 30:break;default:Tr(h,f,a)}i=i.sibling}}function Yf(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&zo(a))}function Xf(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&zo(e))}function di(e,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ry(e,i,a,o),i=i.sibling}function Ry(e,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:di(e,i,a,o),h&2048&&Jo(9,i);break;case 1:di(e,i,a,o);break;case 3:di(e,i,a,o),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&zo(e)));break;case 12:if(h&2048){di(e,i,a,o),e=i.stateNode;try{var f=i.memoizedProps,v=f.id,E=f.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(w){ne(i,i.return,w)}}else di(e,i,a,o);break;case 13:di(e,i,a,o);break;case 23:break;case 22:f=i.stateNode,v=i.alternate,i.memoizedState!==null?f._visibility&2?di(e,i,a,o):el(e,i):f._visibility&2?di(e,i,a,o):(f._visibility|=2,Ia(e,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&Yf(v,i);break;case 24:di(e,i,a,o),h&2048&&Xf(i.alternate,i);break;default:di(e,i,a,o)}}function Ia(e,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=e,v=i,E=a,w=o,L=v.flags;switch(v.tag){case 0:case 11:case 15:Ia(f,v,E,w,h),Jo(8,v);break;case 23:break;case 22:var F=v.stateNode;v.memoizedState!==null?F._visibility&2?Ia(f,v,E,w,h):el(f,v):(F._visibility|=2,Ia(f,v,E,w,h)),h&&L&2048&&Yf(v.alternate,v);break;case 24:Ia(f,v,E,w,h),h&&L&2048&&Xf(v.alternate,v);break;default:Ia(f,v,E,w,h)}i=i.sibling}}function el(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,o=i,h=o.flags;switch(o.tag){case 22:el(a,o),h&2048&&Yf(o.alternate,o);break;case 24:el(a,o),h&2048&&Xf(o.alternate,o);break;default:el(a,o)}i=i.sibling}}var nl=8192;function Ca(e){if(e.subtreeFlags&nl)for(e=e.child;e!==null;)Iy(e),e=e.sibling}function Iy(e){switch(e.tag){case 26:Ca(e),e.flags&nl&&e.memoizedState!==null&&aS(Fn,e.memoizedState,e.memoizedProps);break;case 5:Ca(e);break;case 3:case 4:var i=Fn;Fn=mc(e.stateNode.containerInfo),Ca(e),Fn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=nl,nl=16777216,Ca(e),nl=i):Ca(e));break;default:Ca(e)}}function Cy(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function il(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Ue=o,Ny(o,e)}Cy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Dy(e),e=e.sibling}function Dy(e){switch(e.tag){case 0:case 11:case 15:il(e),e.flags&2048&&vr(9,e,e.return);break;case 3:il(e);break;case 12:il(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,nc(e)):il(e);break;default:il(e)}}function nc(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Ue=o,Ny(o,e)}Cy(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:vr(8,i,i.return),nc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,nc(i));break;default:nc(i)}e=e.sibling}}function Ny(e,i){for(;Ue!==null;){var a=Ue;switch(a.tag){case 0:case 11:case 15:vr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:zo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Ue=o;else t:for(a=e;Ue!==null;){o=Ue;var h=o.sibling,f=o.return;if(Ty(o),o===a){Ue=null;break t}if(h!==null){h.return=f,Ue=h;break t}Ue=f}}}var AA={getCacheForType:function(e){var i=$e(Oe),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},SA=typeof WeakMap=="function"?WeakMap:Map,Xt=0,ie=null,Ct=null,Ut=0,$t=0,vn=null,Ar=!1,Da=!1,$f=!1,Fi=0,fe=0,Sr=0,Vs=0,Zf=0,Pn=0,Na=0,rl=null,cn=null,Wf=!1,Jf=0,ic=1/0,rc=null,wr=null,Ge=0,br=null,Oa=null,Va=0,td=0,ed=null,Oy=null,sl=0,nd=null;function En(){if((Xt&2)!==0&&Ut!==0)return Ut&-Ut;if(G.T!==null){var e=va;return e!==0?e:ud()}return ar()}function Vy(){Pn===0&&(Pn=(Ut&536870912)===0||Gt?mo():536870912);var e=xn.current;return e!==null&&(e.flags|=32),Pn}function Tn(e,i,a){(e===ie&&($t===2||$t===9)||e.cancelPendingCommit!==null)&&(Ma(e,0),Rr(e,Ut,Pn,!1)),Si(e,a),((Xt&2)===0||e!==ie)&&(e===ie&&((Xt&2)===0&&(Vs|=a),fe===4&&Rr(e,Ut,Pn,!1)),mi(e))}function My(e,i,a){if((Xt&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&e.expiredLanes)===0||rs(e,i),h=o?RA(e,i):sd(e,i,!0),f=o;do{if(h===0){Da&&!o&&Rr(e,i,0,!1);break}else{if(a=e.current.alternate,f&&!wA(a)){h=sd(e,i,!1),f=!1;continue}if(h===2){if(f=i,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var E=e;h=rl;var w=E.current.memoizedState.isDehydrated;if(w&&(Ma(E,v).flags|=256),v=sd(E,v,!1),v!==2){if($f&&!w){E.errorRecoveryDisabledLanes|=f,Vs|=f,h=4;break t}f=cn,cn=h,f!==null&&(cn===null?cn=f:cn.push.apply(cn,f))}h=v}if(f=!1,h!==2)continue}}if(h===1){Ma(e,0),Rr(e,i,0,!0);break}t:{switch(o=e,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Rr(o,i,Pn,!Ar);break t;case 2:cn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Jf+300-wn(),10<h)){if(Rr(o,i,Pn,!Ar),$s(o,0,!0)!==0)break t;o.timeoutHandle=l_(xy.bind(null,o,a,cn,rc,Wf,i,Pn,Vs,Na,Ar,f,2,-0,0),h);break t}xy(o,a,cn,rc,Wf,i,Pn,Vs,Na,Ar,f,0,-0,0)}}break}while(!0);mi(e)}function xy(e,i,a,o,h,f,v,E,w,L,F,X,B,j){if(e.timeoutHandle=-1,X=i.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(fl={stylesheets:null,count:0,unsuspend:sS},Iy(i),X=oS(),X!==null)){e.cancelPendingCommit=X(jy.bind(null,e,i,f,a,o,h,v,E,w,F,1,B,j)),Rr(e,f,v,!L);return}jy(e,i,f,a,o,h,v,E,w)}function wA(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!pn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Rr(e,i,a,o){i&=~Zf,i&=~Vs,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var h=i;0<h;){var f=31-Xe(h),v=1<<f;o[f]=-1,h&=~v}a!==0&&Jn(e,a,i)}function sc(){return(Xt&6)===0?(al(0),!1):!0}function id(){if(Ct!==null){if($t===0)var e=Ct.return;else e=Ct,Ui=Rs=null,Ef(e),ba=null,$o=0,e=Ct;for(;e!==null;)dy(e.alternate,e),e=e.return;Ct=null}}function Ma(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,qA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),id(),ie=e,Ct=a=xi(e.current,null),Ut=i,$t=0,vn=null,Ar=!1,Da=rs(e,i),$f=!1,Na=Pn=Zf=Vs=Sr=fe=0,cn=rl=null,Wf=!1,(i&8)!==0&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var h=31-Xe(o),f=1<<h;i|=e[h],o&=~f}return Fi=i,Iu(),a}function Py(e,i){Rt=null,G.H=Qu,i===jo||i===ku?(i=Wp(),$t=3):i===Xp?(i=Wp(),$t=4):$t=i===Jg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,vn=i,Ct===null&&(fe=1,Zu(e,Nn(i,e.current)))}function ky(){var e=G.H;return G.H=Qu,e===null?Qu:e}function Uy(){var e=G.A;return G.A=AA,e}function rd(){fe=4,Ar||(Ut&4194048)!==Ut&&xn.current!==null||(Da=!0),(Sr&134217727)===0&&(Vs&134217727)===0||ie===null||Rr(ie,Ut,Pn,!1)}function sd(e,i,a){var o=Xt;Xt|=2;var h=ky(),f=Uy();(ie!==e||Ut!==i)&&(rc=null,Ma(e,i)),i=!1;var v=fe;t:do try{if($t!==0&&Ct!==null){var E=Ct,w=vn;switch($t){case 8:id(),v=6;break t;case 3:case 2:case 9:case 6:xn.current===null&&(i=!0);var L=$t;if($t=0,vn=null,xa(e,E,w,L),a&&Da){v=0;break t}break;default:L=$t,$t=0,vn=null,xa(e,E,w,L)}}bA(),v=fe;break}catch(F){Py(e,F)}while(!0);return i&&e.shellSuspendCounter++,Ui=Rs=null,Xt=o,G.H=h,G.A=f,Ct===null&&(ie=null,Ut=0,Iu()),v}function bA(){for(;Ct!==null;)Ly(Ct)}function RA(e,i){var a=Xt;Xt|=2;var o=ky(),h=Uy();ie!==e||Ut!==i?(rc=null,ic=wn()+500,Ma(e,i)):Da=rs(e,i);t:do try{if($t!==0&&Ct!==null){i=Ct;var f=vn;e:switch($t){case 1:$t=0,vn=null,xa(e,i,f,1);break;case 2:case 9:if($p(f)){$t=0,vn=null,zy(i);break}i=function(){$t!==2&&$t!==9||ie!==e||($t=7),mi(e)},f.then(i,i);break t;case 3:$t=7;break t;case 4:$t=5;break t;case 7:$p(f)?($t=0,vn=null,zy(i)):($t=0,vn=null,xa(e,i,f,7));break;case 5:var v=null;switch(Ct.tag){case 26:v=Ct.memoizedState;case 5:case 27:var E=Ct;if(!v||E_(v)){$t=0,vn=null;var w=E.sibling;if(w!==null)Ct=w;else{var L=E.return;L!==null?(Ct=L,ac(L)):Ct=null}break e}}$t=0,vn=null,xa(e,i,f,5);break;case 6:$t=0,vn=null,xa(e,i,f,6);break;case 8:id(),fe=6;break t;default:throw Error(s(462))}}IA();break}catch(F){Py(e,F)}while(!0);return Ui=Rs=null,G.H=o,G.A=h,Xt=a,Ct!==null?0:(ie=null,Ut=0,Iu(),fe)}function IA(){for(;Ct!==null&&!rr();)Ly(Ct)}function Ly(e){var i=hy(e.alternate,e,Fi);e.memoizedProps=e.pendingProps,i===null?ac(e):Ct=i}function zy(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=sy(a,i,i.pendingProps,i.type,void 0,Ut);break;case 11:i=sy(a,i,i.pendingProps,i.type.render,i.ref,Ut);break;case 5:Ef(i);default:dy(a,i),i=Ct=Bp(i,Fi),i=hy(a,i,Fi)}e.memoizedProps=e.pendingProps,i===null?ac(e):Ct=i}function xa(e,i,a,o){Ui=Rs=null,Ef(i),ba=null,$o=0;var h=i.return;try{if(gA(e,h,i,a,Ut)){fe=1,Zu(e,Nn(a,e.current)),Ct=null;return}}catch(f){if(h!==null)throw Ct=h,f;fe=1,Zu(e,Nn(a,e.current)),Ct=null;return}i.flags&32768?(Gt||o===1?e=!0:Da||(Ut&536870912)!==0?e=!1:(Ar=e=!0,(o===2||o===9||o===3||o===6)&&(o=xn.current,o!==null&&o.tag===13&&(o.flags|=16384))),By(i,e)):ac(i)}function ac(e){var i=e;do{if((i.flags&32768)!==0){By(i,Ar);return}e=i.return;var a=_A(i.alternate,i,Fi);if(a!==null){Ct=a;return}if(i=i.sibling,i!==null){Ct=i;return}Ct=i=e}while(i!==null);fe===0&&(fe=5)}function By(e,i){do{var a=vA(e.alternate,e);if(a!==null){a.flags&=32767,Ct=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Ct=e;return}Ct=e=a}while(e!==null);fe=6,Ct=null}function jy(e,i,a,o,h,f,v,E,w){e.cancelPendingCommit=null;do oc();while(Ge!==0);if((Xt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=Yh,go(e,a,f,v,E,w),e===ie&&(Ct=ie=null,Ut=0),Oa=i,br=e,Va=a,td=f,ed=h,Oy=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,OA(ts,function(){return Qy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=G.T,G.T=null,h=nt.p,nt.p=2,v=Xt,Xt|=4;try{EA(e,i,a)}finally{Xt=v,nt.p=h,G.T=o}}Ge=1,qy(),Hy(),Gy()}}function qy(){if(Ge===1){Ge=0;var e=br,i=Oa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var o=nt.p;nt.p=2;var h=Xt;Xt|=4;try{wy(i,e);var f=yd,v=Np(e.containerInfo),E=f.focusedElem,w=f.selectionRange;if(v!==E&&E&&E.ownerDocument&&Dp(E.ownerDocument.documentElement,E)){if(w!==null&&Hh(E)){var L=w.start,F=w.end;if(F===void 0&&(F=L),"selectionStart"in E)E.selectionStart=L,E.selectionEnd=Math.min(F,E.value.length);else{var X=E.ownerDocument||document,B=X&&X.defaultView||window;if(B.getSelection){var j=B.getSelection(),Et=E.textContent.length,pt=Math.min(w.start,Et),ee=w.end===void 0?pt:Math.min(w.end,Et);!j.extend&&pt>ee&&(v=ee,ee=pt,pt=v);var P=Cp(E,pt),N=Cp(E,ee);if(P&&N&&(j.rangeCount!==1||j.anchorNode!==P.node||j.anchorOffset!==P.offset||j.focusNode!==N.node||j.focusOffset!==N.offset)){var U=X.createRange();U.setStart(P.node,P.offset),j.removeAllRanges(),pt>ee?(j.addRange(U),j.extend(N.node,N.offset)):(U.setEnd(N.node,N.offset),j.addRange(U))}}}}for(X=[],j=E;j=j.parentNode;)j.nodeType===1&&X.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<X.length;E++){var Q=X[E];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}vc=!!gd,yd=gd=null}finally{Xt=h,nt.p=o,G.T=a}}e.current=i,Ge=2}}function Hy(){if(Ge===2){Ge=0;var e=br,i=Oa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var o=nt.p;nt.p=2;var h=Xt;Xt|=4;try{Ey(e,i.alternate,i)}finally{Xt=h,nt.p=o,G.T=a}}Ge=3}}function Gy(){if(Ge===4||Ge===3){Ge=0,Ks();var e=br,i=Oa,a=Va,o=Oy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ge=5:(Ge=0,Oa=br=null,Fy(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(wr=null),Zs(a),i=i.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(ce,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=G.T,h=nt.p,nt.p=2,G.T=null;try{for(var f=e.onRecoverableError,v=0;v<o.length;v++){var E=o[v];f(E.value,{componentStack:E.stack})}}finally{G.T=i,nt.p=h}}(Va&3)!==0&&oc(),mi(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===nd?sl++:(sl=0,nd=e):sl=0,al(0)}}function Fy(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,zo(i)))}function oc(e){return qy(),Hy(),Gy(),Qy()}function Qy(){if(Ge!==5)return!1;var e=br,i=td;td=0;var a=Zs(Va),o=G.T,h=nt.p;try{nt.p=32>a?32:a,G.T=null,a=ed,ed=null;var f=br,v=Va;if(Ge=0,Oa=br=null,Va=0,(Xt&6)!==0)throw Error(s(331));var E=Xt;if(Xt|=4,Dy(f.current),Ry(f,f.current,v,a),Xt=E,al(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(ce,f)}catch{}return!0}finally{nt.p=h,G.T=o,Fy(e,i)}}function Ky(e,i,a){i=Nn(a,i),i=xf(e.stateNode,i,2),e=pr(e,i,2),e!==null&&(Si(e,2),mi(e))}function ne(e,i,a){if(e.tag===3)Ky(e,e,a);else for(;i!==null;){if(i.tag===3){Ky(i,e,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(wr===null||!wr.has(o))){e=Nn(a,e),a=Zg(2),o=pr(i,a,2),o!==null&&(Wg(a,o,i,e),Si(o,2),mi(o));break}}i=i.return}}function ad(e,i,a){var o=e.pingCache;if(o===null){o=e.pingCache=new SA;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||($f=!0,h.add(a),e=CA.bind(null,e,i,a),i.then(e,e))}function CA(e,i,a){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ie===e&&(Ut&a)===a&&(fe===4||fe===3&&(Ut&62914560)===Ut&&300>wn()-Jf?(Xt&2)===0&&Ma(e,0):Zf|=a,Na===Ut&&(Na=0)),mi(e)}function Yy(e,i){i===0&&(i=po()),e=pa(e,i),e!==null&&(Si(e,i),mi(e))}function DA(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Yy(e,a)}function NA(e,i){var a=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),Yy(e,a)}function OA(e,i){return Zn(e,i)}var lc=null,Pa=null,od=!1,uc=!1,ld=!1,Ms=0;function mi(e){e!==Pa&&e.next===null&&(Pa===null?lc=Pa=e:Pa=Pa.next=e),uc=!0,od||(od=!0,MA())}function al(e,i){if(!ld&&uc){ld=!0;do for(var a=!1,o=lc;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var v=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-Xe(42|e)+1)-1,f&=h&~(v&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Wy(o,f))}else f=Ut,f=$s(o,o===ie?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||rs(o,f)||(a=!0,Wy(o,f));o=o.next}while(a);ld=!1}}function VA(){Xy()}function Xy(){uc=od=!1;var e=0;Ms!==0&&(jA()&&(e=Ms),Ms=0);for(var i=wn(),a=null,o=lc;o!==null;){var h=o.next,f=$y(o,i);f===0?(o.next=null,a===null?lc=h:a.next=h,h===null&&(Pa=a)):(a=o,(e!==0||(f&3)!==0)&&(uc=!0)),o=h}al(e)}function $y(e,i){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-Xe(f),E=1<<v,w=h[v];w===-1?((E&a)===0||(E&o)!==0)&&(h[v]=fo(E,i)):w<=i&&(e.expiredLanes|=E),f&=~E}if(i=ie,a=Ut,a=$s(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===i&&($t===2||$t===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Wn(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||rs(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(o!==null&&Wn(o),Zs(a)){case 2:case 8:a=Ys;break;case 32:a=ts;break;case 268435456:a=Xs;break;default:a=ts}return o=Zy.bind(null,e),a=Zn(a,o),e.callbackPriority=i,e.callbackNode=a,i}return o!==null&&o!==null&&Wn(o),e.callbackPriority=2,e.callbackNode=null,2}function Zy(e,i){if(Ge!==0&&Ge!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(oc()&&e.callbackNode!==a)return null;var o=Ut;return o=$s(e,e===ie?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(My(e,o,i),$y(e,wn()),e.callbackNode!=null&&e.callbackNode===a?Zy.bind(null,e):null)}function Wy(e,i){if(oc())return null;My(e,i,!0)}function MA(){HA(function(){(Xt&6)!==0?Zn(co,VA):Xy()})}function ud(){return Ms===0&&(Ms=mo()),Ms}function Jy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ia(""+e)}function t_(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function xA(e,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var f=Jy((h[Te]||null).action),v=o.submitter;v&&(i=(i=v[Te]||null)?Jy(i.formAction):v.getAttribute("formAction"),i!==null&&(f=i,v=null));var E=new ra("action","action",null,o,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ms!==0){var w=v?t_(h,v):new FormData(h);Df(a,{pending:!0,data:w,method:h.method,action:f},null,w)}}else typeof f=="function"&&(E.preventDefault(),w=v?t_(h,v):new FormData(h),Df(a,{pending:!0,data:w,method:h.method,action:f},f,w))},currentTarget:h}]})}}for(var cd=0;cd<Kh.length;cd++){var hd=Kh[cd],PA=hd.toLowerCase(),kA=hd[0].toUpperCase()+hd.slice(1);Gn(PA,"on"+kA)}Gn(Mp,"onAnimationEnd"),Gn(xp,"onAnimationIteration"),Gn(Pp,"onAnimationStart"),Gn("dblclick","onDoubleClick"),Gn("focusin","onFocus"),Gn("focusout","onBlur"),Gn(J0,"onTransitionRun"),Gn(tA,"onTransitionStart"),Gn(eA,"onTransitionCancel"),Gn(kp,"onTransitionEnd"),bi("onMouseEnter",["mouseout","mouseover"]),bi("onMouseLeave",["mouseout","mouseover"]),bi("onPointerEnter",["pointerout","pointerover"]),bi("onPointerLeave",["pointerout","pointerover"]),qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ol));function e_(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var f=void 0;if(i)for(var v=o.length-1;0<=v;v--){var E=o[v],w=E.instance,L=E.currentTarget;if(E=E.listener,w!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=L;try{f(h)}catch(F){$u(F)}h.currentTarget=null,f=w}else for(v=0;v<o.length;v++){if(E=o[v],w=E.instance,L=E.currentTarget,E=E.listener,w!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=L;try{f(h)}catch(F){$u(F)}h.currentTarget=null,f=w}}}}function Dt(e,i){var a=i[_o];a===void 0&&(a=i[_o]=new Set);var o=e+"__bubble";a.has(o)||(n_(i,e,2,!1),a.add(o))}function fd(e,i,a){var o=0;i&&(o|=4),n_(a,e,o,i)}var cc="_reactListening"+Math.random().toString(36).slice(2);function dd(e){if(!e[cc]){e[cc]=!0,vo.forEach(function(a){a!=="selectionchange"&&(UA.has(a)||fd(a,!1,e),fd(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[cc]||(i[cc]=!0,fd("selectionchange",!1,i))}}function n_(e,i,a,o){switch(R_(i)){case 2:var h=cS;break;case 8:h=hS;break;default:h=Id}a=h.bind(null,i,a,e),h=void 0,!Cn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function md(e,i,a,o,h){var f=o;if((i&1)===0&&(i&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=o.return;v!==null;){var w=v.tag;if((w===3||w===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=wi(E),v===null)return;if(w=v.tag,w===5||w===6||w===26||w===27){o=f=v;continue t}E=E.parentNode}}o=o.return}fu(function(){var L=f,F=In(a),X=[];t:{var B=Up.get(e);if(B!==void 0){var j=ra,Et=e;switch(e){case"keypress":if(si(a)===0)break t;case"keydown":case"keyup":j=ca;break;case"focusin":Et="focus",j=oa;break;case"focusout":Et="blur",j=oa;break;case"beforeblur":case"afterblur":j=oa;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=zh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=Eu;break;case Mp:case xp:case Pp:j=la;break;case kp:j=Au;break;case"scroll":case"scrollend":j=du;break;case"wheel":j=ha;break;case"copy":case"cut":case"paste":j=ua;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Oo;break;case"toggle":case"beforetoggle":j=wu}var pt=(i&4)!==0,ee=!pt&&(e==="scroll"||e==="scrollend"),P=pt?B!==null?B+"Capture":null:B;pt=[];for(var N=L,U;N!==null;){var Q=N;if(U=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||U===null||P===null||(Q=fs(N,P),Q!=null&&pt.push(ll(N,Q,U))),ee)break;N=N.return}0<pt.length&&(B=new j(B,Et,null,a,F),X.push({event:B,listeners:pt}))}}if((i&7)===0){t:{if(B=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",B&&a!==Ci&&(Et=a.relatedTarget||a.fromElement)&&(wi(Et)||Et[bn]))break t;if((j||B)&&(B=F.window===F?F:(B=F.ownerDocument)?B.defaultView||B.parentWindow:window,j?(Et=a.relatedTarget||a.toElement,j=L,Et=Et?wi(Et):null,Et!==null&&(ee=c(Et),pt=Et.tag,Et!==ee||pt!==5&&pt!==27&&pt!==6)&&(Et=null)):(j=null,Et=L),j!==Et)){if(pt=Dn,Q="onMouseLeave",P="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(pt=Oo,Q="onPointerLeave",P="onPointerEnter",N="pointer"),ee=j==null?B:ei(j),U=Et==null?B:ei(Et),B=new pt(Q,N+"leave",j,a,F),B.target=ee,B.relatedTarget=U,Q=null,wi(F)===L&&(pt=new pt(P,N+"enter",Et,a,F),pt.target=U,pt.relatedTarget=ee,Q=pt),ee=Q,j&&Et)e:{for(pt=j,P=Et,N=0,U=pt;U;U=ka(U))N++;for(U=0,Q=P;Q;Q=ka(Q))U++;for(;0<N-U;)pt=ka(pt),N--;for(;0<U-N;)P=ka(P),U--;for(;N--;){if(pt===P||P!==null&&pt===P.alternate)break e;pt=ka(pt),P=ka(P)}pt=null}else pt=null;j!==null&&i_(X,B,j,pt,!1),Et!==null&&ee!==null&&i_(X,ee,Et,pt,!0)}}t:{if(B=L?ei(L):window,j=B.nodeName&&B.nodeName.toLowerCase(),j==="select"||j==="input"&&B.type==="file")var at=Ap;else if(Ne(B))if(Sp)at=$0;else{at=Y0;var It=K0}else j=B.nodeName,!j||j.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?L&&wo(L.elementType)&&(at=Ap):at=X0;if(at&&(at=at(e,L))){Mi(X,at,a,F);break t}It&&It(e,B,L),e==="focusout"&&L&&B.type==="number"&&L.memoizedProps.value!=null&&cr(B,"number",B.value)}switch(It=L?ei(L):window,e){case"focusin":(Ne(It)||It.contentEditable==="true")&&(fa=It,Gh=L,xo=null);break;case"focusout":xo=Gh=fa=null;break;case"mousedown":Fh=!0;break;case"contextmenu":case"mouseup":case"dragend":Fh=!1,Op(X,a,F);break;case"selectionchange":if(W0)break;case"keydown":case"keyup":Op(X,a,F)}var ut;if(li)t:{switch(e){case"compositionstart":var gt="onCompositionStart";break t;case"compositionend":gt="onCompositionEnd";break t;case"compositionupdate":gt="onCompositionUpdate";break t}gt=void 0}else Pt?q(e,a)&&(gt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(gt="onCompositionStart");gt&&(_&&a.locale!=="ko"&&(Pt||gt!=="onCompositionStart"?gt==="onCompositionEnd"&&Pt&&(ut=Ro()):(ri=F,hr="value"in ri?ri.value:ri.textContent,Pt=!0)),It=hc(L,gt),0<It.length&&(gt=new Do(gt,e,null,a,F),X.push({event:gt,listeners:It}),ut?gt.data=ut:(ut=et(a),ut!==null&&(gt.data=ut)))),(ut=m?De(e,a):kt(e,a))&&(gt=hc(L,"onBeforeInput"),0<gt.length&&(It=new Do("onBeforeInput","beforeinput",null,a,F),X.push({event:It,listeners:gt}),It.data=ut)),xA(X,e,L,a,F)}e_(X,i)})}function ll(e,i,a){return{instance:e,listener:i,currentTarget:a}}function hc(e,i){for(var a=i+"Capture",o=[];e!==null;){var h=e,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=fs(e,a),h!=null&&o.unshift(ll(e,h,f)),h=fs(e,i),h!=null&&o.push(ll(e,h,f))),e.tag===3)return o;e=e.return}return[]}function ka(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function i_(e,i,a,o,h){for(var f=i._reactName,v=[];a!==null&&a!==o;){var E=a,w=E.alternate,L=E.stateNode;if(E=E.tag,w!==null&&w===o)break;E!==5&&E!==26&&E!==27||L===null||(w=L,h?(L=fs(a,f),L!=null&&v.unshift(ll(a,L,w))):h||(L=fs(a,f),L!=null&&v.push(ll(a,L,w)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var LA=/\r\n?/g,zA=/\u0000|\uFFFD/g;function r_(e){return(typeof e=="string"?e:""+e).replace(LA,`
`).replace(zA,"")}function s_(e,i){return i=r_(i),r_(e)===i}function fc(){}function te(e,i,a,o,h,f){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||Rn(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&Rn(e,""+o);break;case"className":ni(e,"class",o);break;case"tabIndex":ni(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ni(e,a,o);break;case"style":So(e,o,f);break;case"data":if(i!=="object"){ni(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=ia(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&te(e,i,"name",h.name,h,null),te(e,i,"formEncType",h.formEncType,h,null),te(e,i,"formMethod",h.formMethod,h,null),te(e,i,"formTarget",h.formTarget,h,null)):(te(e,i,"encType",h.encType,h,null),te(e,i,"method",h.method,h,null),te(e,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=ia(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=fc);break;case"onScroll":o!=null&&Dt("scroll",e);break;case"onScrollEnd":o!=null&&Dt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=ia(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Dt("beforetoggle",e),Dt("toggle",e),ur(e,"popover",o);break;case"xlinkActuate":je(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":je(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":je(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":je(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":je(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":je(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":je(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":je(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":je(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ur(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Uh.get(a)||a,ur(e,a,o))}}function pd(e,i,a,o,h,f){switch(a){case"style":So(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?Rn(e,o):(typeof o=="number"||typeof o=="bigint")&&Rn(e,""+o);break;case"onScroll":o!=null&&Dt("scroll",e);break;case"onScrollEnd":o!=null&&Dt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=fc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ws.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=e[Te]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(i,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):ur(e,a,o)}}}function Fe(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Dt("error",e),Dt("load",e);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:te(e,i,f,v,a,null)}}h&&te(e,i,"srcSet",a.srcSet,a,null),o&&te(e,i,"src",a.src,a,null);return;case"input":Dt("invalid",e);var E=f=v=h=null,w=null,L=null;for(o in a)if(a.hasOwnProperty(o)){var F=a[o];if(F!=null)switch(o){case"name":h=F;break;case"type":v=F;break;case"checked":w=F;break;case"defaultChecked":L=F;break;case"value":f=F;break;case"defaultValue":E=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:te(e,i,o,F,a,null)}}us(e,f,E,w,L,v,h,!1),na(e);return;case"select":Dt("invalid",e),o=v=f=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:te(e,i,h,E,a,null)}i=f,a=v,e.multiple=!!o,i!=null?Ii(e,!!o,i,!1):a!=null&&Ii(e,!!o,a,!0);return;case"textarea":Dt("invalid",e),f=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:te(e,i,v,E,a,null)}cs(e,o,h,f),na(e);return;case"option":for(w in a)if(a.hasOwnProperty(w)&&(o=a[w],o!=null))switch(w){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:te(e,i,w,o,a,null)}return;case"dialog":Dt("beforetoggle",e),Dt("toggle",e),Dt("cancel",e),Dt("close",e);break;case"iframe":case"object":Dt("load",e);break;case"video":case"audio":for(o=0;o<ol.length;o++)Dt(ol[o],e);break;case"image":Dt("error",e),Dt("load",e);break;case"details":Dt("toggle",e);break;case"embed":case"source":case"link":Dt("error",e),Dt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(o=a[L],o!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:te(e,i,L,o,a,null)}return;default:if(wo(i)){for(F in a)a.hasOwnProperty(F)&&(o=a[F],o!==void 0&&pd(e,i,F,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&te(e,i,E,o,a,null))}function BA(e,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,v=null,E=null,w=null,L=null,F=null;for(j in a){var X=a[j];if(a.hasOwnProperty(j)&&X!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":w=X;default:o.hasOwnProperty(j)||te(e,i,j,null,o,X)}}for(var B in o){var j=o[B];if(X=a[B],o.hasOwnProperty(B)&&(j!=null||X!=null))switch(B){case"type":f=j;break;case"name":h=j;break;case"checked":L=j;break;case"defaultChecked":F=j;break;case"value":v=j;break;case"defaultValue":E=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,i));break;default:j!==X&&te(e,i,B,j,o,X)}}mn(e,v,E,w,L,F,f,h);return;case"select":j=v=E=B=null;for(f in a)if(w=a[f],a.hasOwnProperty(f)&&w!=null)switch(f){case"value":break;case"multiple":j=w;default:o.hasOwnProperty(f)||te(e,i,f,null,o,w)}for(h in o)if(f=o[h],w=a[h],o.hasOwnProperty(h)&&(f!=null||w!=null))switch(h){case"value":B=f;break;case"defaultValue":E=f;break;case"multiple":v=f;default:f!==w&&te(e,i,h,f,o,w)}i=E,a=v,o=j,B!=null?Ii(e,!!a,B,!1):!!o!=!!a&&(i!=null?Ii(e,!!a,i,!0):Ii(e,!!a,a?[]:"",!1));return;case"textarea":j=B=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:te(e,i,E,null,o,h)}for(v in o)if(h=o[v],f=a[v],o.hasOwnProperty(v)&&(h!=null||f!=null))switch(v){case"value":B=h;break;case"defaultValue":j=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&te(e,i,v,h,o,f)}Wt(e,B,j);return;case"option":for(var Et in a)if(B=a[Et],a.hasOwnProperty(Et)&&B!=null&&!o.hasOwnProperty(Et))switch(Et){case"selected":e.selected=!1;break;default:te(e,i,Et,null,o,B)}for(w in o)if(B=o[w],j=a[w],o.hasOwnProperty(w)&&B!==j&&(B!=null||j!=null))switch(w){case"selected":e.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:te(e,i,w,B,o,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pt in a)B=a[pt],a.hasOwnProperty(pt)&&B!=null&&!o.hasOwnProperty(pt)&&te(e,i,pt,null,o,B);for(L in o)if(B=o[L],j=a[L],o.hasOwnProperty(L)&&B!==j&&(B!=null||j!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,i));break;default:te(e,i,L,B,o,j)}return;default:if(wo(i)){for(var ee in a)B=a[ee],a.hasOwnProperty(ee)&&B!==void 0&&!o.hasOwnProperty(ee)&&pd(e,i,ee,void 0,o,B);for(F in o)B=o[F],j=a[F],!o.hasOwnProperty(F)||B===j||B===void 0&&j===void 0||pd(e,i,F,B,o,j);return}}for(var P in a)B=a[P],a.hasOwnProperty(P)&&B!=null&&!o.hasOwnProperty(P)&&te(e,i,P,null,o,B);for(X in o)B=o[X],j=a[X],!o.hasOwnProperty(X)||B===j||B==null&&j==null||te(e,i,X,B,o,j)}var gd=null,yd=null;function dc(e){return e.nodeType===9?e:e.ownerDocument}function a_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function o_(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function _d(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var vd=null;function jA(){var e=window.event;return e&&e.type==="popstate"?e===vd?!1:(vd=e,!0):(vd=null,!1)}var l_=typeof setTimeout=="function"?setTimeout:void 0,qA=typeof clearTimeout=="function"?clearTimeout:void 0,u_=typeof Promise=="function"?Promise:void 0,HA=typeof queueMicrotask=="function"?queueMicrotask:typeof u_<"u"?function(e){return u_.resolve(null).then(e).catch(GA)}:l_;function GA(e){setTimeout(function(){throw e})}function Ir(e){return e==="head"}function c_(e,i){var a=i,o=0,h=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var v=e.ownerDocument;if(a&1&&ul(v.documentElement),a&2&&ul(v.body),a&4)for(a=v.head,ul(a),v=a.firstChild;v;){var E=v.nextSibling,w=v.nodeName;v[ss]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){e.removeChild(f),yl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);yl(i)}function Ed(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ed(a),lr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function FA(e,i,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ss])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Qn(e.nextSibling),e===null)break}return null}function QA(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Qn(e.nextSibling),e===null))return null;return e}function Td(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function KA(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Qn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var Ad=null;function h_(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function f_(e,i,a){switch(i=dc(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function ul(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);lr(e)}var kn=new Map,d_=new Set;function mc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Qi=nt.d;nt.d={f:YA,r:XA,D:$A,C:ZA,L:WA,m:JA,X:eS,S:tS,M:nS};function YA(){var e=Qi.f(),i=sc();return e||i}function XA(e){var i=ti(e);i!==null&&i.tag===5&&i.type==="form"?Mg(i):Qi.r(e)}var Ua=typeof document>"u"?null:document;function m_(e,i,a){var o=Ua;if(o&&typeof i=="string"&&i){var h=Ae(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),d_.has(h)||(d_.add(h),e={rel:e,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Fe(i,"link",e),de(i),o.head.appendChild(i)))}}function $A(e){Qi.D(e),m_("dns-prefetch",e,null)}function ZA(e,i){Qi.C(e,i),m_("preconnect",e,i)}function WA(e,i,a){Qi.L(e,i,a);var o=Ua;if(o&&e&&i){var h='link[rel="preload"][as="'+Ae(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Ae(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Ae(a.imageSizes)+'"]')):h+='[href="'+Ae(e)+'"]';var f=h;switch(i){case"style":f=La(e);break;case"script":f=za(e)}kn.has(f)||(e=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),kn.set(f,e),o.querySelector(h)!==null||i==="style"&&o.querySelector(cl(f))||i==="script"&&o.querySelector(hl(f))||(i=o.createElement("link"),Fe(i,"link",e),de(i),o.head.appendChild(i)))}}function JA(e,i){Qi.m(e,i);var a=Ua;if(a&&e){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Ae(o)+'"][href="'+Ae(e)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=za(e)}if(!kn.has(f)&&(e=T({rel:"modulepreload",href:e},i),kn.set(f,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(hl(f)))return}o=a.createElement("link"),Fe(o,"link",e),de(o),a.head.appendChild(o)}}}function tS(e,i,a){Qi.S(e,i,a);var o=Ua;if(o&&e){var h=rn(o).hoistableStyles,f=La(e);i=i||"default";var v=h.get(f);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(cl(f)))E.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":i},a),(a=kn.get(f))&&Sd(e,a);var w=v=o.createElement("link");de(w),Fe(w,"link",e),w._p=new Promise(function(L,F){w.onload=L,w.onerror=F}),w.addEventListener("load",function(){E.loading|=1}),w.addEventListener("error",function(){E.loading|=2}),E.loading|=4,pc(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(f,v)}}}function eS(e,i){Qi.X(e,i);var a=Ua;if(a&&e){var o=rn(a).hoistableScripts,h=za(e),f=o.get(h);f||(f=a.querySelector(hl(h)),f||(e=T({src:e,async:!0},i),(i=kn.get(h))&&wd(e,i),f=a.createElement("script"),de(f),Fe(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function nS(e,i){Qi.M(e,i);var a=Ua;if(a&&e){var o=rn(a).hoistableScripts,h=za(e),f=o.get(h);f||(f=a.querySelector(hl(h)),f||(e=T({src:e,async:!0,type:"module"},i),(i=kn.get(h))&&wd(e,i),f=a.createElement("script"),de(f),Fe(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function p_(e,i,a,o){var h=(h=vt.current)?mc(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=La(a.href),a=rn(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=La(a.href);var f=rn(h).hoistableStyles,v=f.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=h.querySelector(cl(e)))&&!f._p&&(v.instance=f,v.state.loading=5),kn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},kn.set(e,a),f||iS(h,e,a,v.state))),i&&o===null)throw Error(s(528,""));return v}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=za(a),a=rn(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function La(e){return'href="'+Ae(e)+'"'}function cl(e){return'link[rel="stylesheet"]['+e+"]"}function g_(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function iS(e,i,a,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Fe(i,"link",a),de(i),e.head.appendChild(i))}function za(e){return'[src="'+Ae(e)+'"]'}function hl(e){return"script[async]"+e}function y_(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+Ae(a.href)+'"]');if(o)return i.instance=o,de(o),o;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),de(o),Fe(o,"style",h),pc(o,a.precedence,e),i.instance=o;case"stylesheet":h=La(a.href);var f=e.querySelector(cl(h));if(f)return i.state.loading|=4,i.instance=f,de(f),f;o=g_(a),(h=kn.get(h))&&Sd(o,h),f=(e.ownerDocument||e).createElement("link"),de(f);var v=f;return v._p=new Promise(function(E,w){v.onload=E,v.onerror=w}),Fe(f,"link",o),i.state.loading|=4,pc(f,a.precedence,e),i.instance=f;case"script":return f=za(a.src),(h=e.querySelector(hl(f)))?(i.instance=h,de(h),h):(o=a,(h=kn.get(f))&&(o=T({},a),wd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),de(h),Fe(h,"link",o),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,pc(o,a.precedence,e));return i.instance}function pc(e,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===i)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(e,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Sd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function wd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var gc=null;function __(e,i,a){if(gc===null){var o=new Map,h=gc=new Map;h.set(a,o)}else h=gc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var f=a[h];if(!(f[ss]||f[Ce]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(i)||"";v=e+v;var E=o.get(v);E?E.push(f):o.set(v,[f])}}return o}function v_(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function rS(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function E_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var fl=null;function sS(){}function aS(e,i,a){if(fl===null)throw Error(s(475));var o=fl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=La(a.href),f=e.querySelector(cl(h));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=yc.bind(o),e.then(o,o)),i.state.loading|=4,i.instance=f,de(f);return}f=e.ownerDocument||e,a=g_(a),(h=kn.get(h))&&Sd(a,h),f=f.createElement("link"),de(f);var v=f;v._p=new Promise(function(E,w){v.onload=E,v.onerror=w}),Fe(f,"link",a),i.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=yc.bind(o),e.addEventListener("load",i),e.addEventListener("error",i))}}function oS(){if(fl===null)throw Error(s(475));var e=fl;return e.stylesheets&&e.count===0&&bd(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&bd(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function yc(){if(this.count--,this.count===0){if(this.stylesheets)bd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var _c=null;function bd(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,_c=new Map,i.forEach(lS,e),_c=null,yc.call(e))}function lS(e,i){if(!(i.state.loading&4)){var a=_c.get(e);if(a)var o=a.get(null);else{a=new Map,_c.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var v=h[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,h),a.set(v,h),this.count++,o=yc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var dl={$$typeof:ht,Provider:null,Consumer:null,_currentValue:lt,_currentValue2:lt,_threadCount:0};function uS(e,i,a,o,h,f,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.hiddenUpdates=Ai(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function T_(e,i,a,o,h,f,v,E,w,L,F,X){return e=new uS(e,i,a,v,E,w,L,X),i=1,f===!0&&(i|=24),f=gn(3,null,null,i),e.current=f,f.stateNode=e,i=af(),i.refCount++,e.pooledCache=i,i.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:i},cf(f),e}function A_(e){return e?(e=ga,e):ga}function S_(e,i,a,o,h,f){h=A_(h),o.context===null?o.context=h:o.pendingContext=h,o=mr(i),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=pr(e,o,i),a!==null&&(Tn(a,e,i),Ho(a,e,i))}function w_(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Rd(e,i){w_(e,i),(e=e.alternate)&&w_(e,i)}function b_(e){if(e.tag===13){var i=pa(e,67108864);i!==null&&Tn(i,e,67108864),Rd(e,67108864)}}var vc=!0;function cS(e,i,a,o){var h=G.T;G.T=null;var f=nt.p;try{nt.p=2,Id(e,i,a,o)}finally{nt.p=f,G.T=h}}function hS(e,i,a,o){var h=G.T;G.T=null;var f=nt.p;try{nt.p=8,Id(e,i,a,o)}finally{nt.p=f,G.T=h}}function Id(e,i,a,o){if(vc){var h=Cd(o);if(h===null)md(e,i,o,Ec,a),I_(e,o);else if(dS(h,e,i,a,o))o.stopPropagation();else if(I_(e,o),i&4&&-1<fS.indexOf(e)){for(;h!==null;){var f=ti(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=jn(f.pendingLanes);if(v!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var w=1<<31-Xe(v);E.entanglements[1]|=w,v&=~w}mi(f),(Xt&6)===0&&(ic=wn()+500,al(0))}}break;case 13:E=pa(f,2),E!==null&&Tn(E,f,2),sc(),Rd(f,2)}if(f=Cd(o),f===null&&md(e,i,o,Ec,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else md(e,i,o,null,a)}}function Cd(e){return e=In(e),Dd(e)}var Ec=null;function Dd(e){if(Ec=null,e=wi(e),e!==null){var i=c(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=d(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Ec=e,null}function R_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oh()){case co:return 2;case Ys:return 8;case ts:case Vh:return 32;case Xs:return 268435456;default:return 32}default:return 32}}var Nd=!1,Cr=null,Dr=null,Nr=null,ml=new Map,pl=new Map,Or=[],fS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function I_(e,i){switch(e){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":ml.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":pl.delete(i.pointerId)}}function gl(e,i,a,o,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},i!==null&&(i=ti(i),i!==null&&b_(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function dS(e,i,a,o,h){switch(i){case"focusin":return Cr=gl(Cr,e,i,a,o,h),!0;case"dragenter":return Dr=gl(Dr,e,i,a,o,h),!0;case"mouseover":return Nr=gl(Nr,e,i,a,o,h),!0;case"pointerover":var f=h.pointerId;return ml.set(f,gl(ml.get(f)||null,e,i,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,pl.set(f,gl(pl.get(f)||null,e,i,a,o,h)),!0}return!1}function C_(e){var i=wi(e.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){e.blockedOn=i,su(e.priority,function(){if(a.tag===13){var o=En();o=sr(o);var h=pa(a,o);h!==null&&Tn(h,a,o),Rd(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Tc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=Cd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Ci=o,a.target.dispatchEvent(o),Ci=null}else return i=ti(a),i!==null&&b_(i),e.blockedOn=a,!1;i.shift()}return!0}function D_(e,i,a){Tc(e)&&a.delete(i)}function mS(){Nd=!1,Cr!==null&&Tc(Cr)&&(Cr=null),Dr!==null&&Tc(Dr)&&(Dr=null),Nr!==null&&Tc(Nr)&&(Nr=null),ml.forEach(D_),pl.forEach(D_)}function Ac(e,i){e.blockedOn===i&&(e.blockedOn=null,Nd||(Nd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,mS)))}var Sc=null;function N_(e){Sc!==e&&(Sc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Sc===e&&(Sc=null);for(var i=0;i<e.length;i+=3){var a=e[i],o=e[i+1],h=e[i+2];if(typeof o!="function"){if(Dd(o||a)===null)continue;break}var f=ti(a);f!==null&&(e.splice(i,3),i-=3,Df(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function yl(e){function i(w){return Ac(w,e)}Cr!==null&&Ac(Cr,e),Dr!==null&&Ac(Dr,e),Nr!==null&&Ac(Nr,e),ml.forEach(i),pl.forEach(i);for(var a=0;a<Or.length;a++){var o=Or[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Or.length&&(a=Or[0],a.blockedOn===null);)C_(a),a.blockedOn===null&&Or.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],v=h[Te]||null;if(typeof f=="function")v||N_(a);else if(v){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,v=f[Te]||null)E=v.formAction;else if(Dd(h)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),N_(a)}}}function Od(e){this._internalRoot=e}wc.prototype.render=Od.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=En();S_(a,o,e,i,null,null)},wc.prototype.unmount=Od.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;S_(e.current,2,null,e,null,null),sc(),i[bn]=null}};function wc(e){this._internalRoot=e}wc.prototype.unstable_scheduleHydration=function(e){if(e){var i=ar();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Or.length&&i!==0&&i<Or[a].priority;a++);Or.splice(a,0,e),a===0&&C_(e)}};var O_=t.version;if(O_!=="19.1.1")throw Error(s(527,O_,"19.1.1"));nt.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(i),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var pS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bc.isDisabled&&bc.supportsFiber)try{ce=bc.inject(pS),Yt=bc}catch{}}return vl.createRoot=function(e,i){if(!l(e))throw Error(s(299));var a=!1,o="",h=Kg,f=Yg,v=Xg,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=T_(e,1,!1,null,null,a,o,h,f,v,E,null),e[bn]=i.current,dd(e),new Od(i)},vl.hydrateRoot=function(e,i,a){if(!l(e))throw Error(s(299));var o=!1,h="",f=Kg,v=Yg,E=Xg,w=null,L=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(w=a.unstable_transitionCallbacks),a.formState!==void 0&&(L=a.formState)),i=T_(e,1,!0,i,a??null,o,h,f,v,E,w,L),i.context=A_(null),a=i.current,o=En(),o=sr(o),h=mr(o),h.callback=null,pr(a,h,o),a=o,i.current.lanes=a,Si(i,a),mi(i),e[bn]=i.current,dd(e),new wc(i)},vl.version="19.1.1",vl}var j_;function RS(){if(j_)return xd.exports;j_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),xd.exports=bS(),xd.exports}var IS=RS();const CS=vE(IS),DS=()=>{};var q_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},NS=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];t[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],d=r[n++],p=r[n++],g=((l&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;t[s++]=String.fromCharCode(55296+(g>>10)),t[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[n++],d=r[n++];t[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return t.join("")},TE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,p=d?r[l+1]:0,g=l+2<r.length,y=g?r[l+2]:0,T=c>>2,b=(c&3)<<4|p>>4;let R=(p&15)<<2|y>>6,H=y&63;g||(H=64,d||(R=64)),s.push(n[T],n[b],n[R],n[H])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(EE(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):NS(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],p=l<r.length?n[r.charAt(l)]:0;++l;const y=l<r.length?n[r.charAt(l)]:64;++l;const b=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||p==null||y==null||b==null)throw new OS;const R=c<<2|p>>4;if(s.push(R),y!==64){const H=p<<4&240|y>>2;if(s.push(H),b!==64){const z=y<<6&192|b;s.push(z)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class OS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VS=function(r){const t=EE(r);return TE.encodeByteArray(t,!0)},Hc=function(r){return VS(r).replace(/\./g,"")},AE=function(r){try{return TE.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=()=>MS().__FIREBASE_DEFAULTS__,PS=()=>{if(typeof process>"u"||typeof q_>"u")return;const r=q_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},kS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&AE(r[1]);return t&&JSON.parse(t)},lh=()=>{try{return DS()||xS()||PS()||kS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},SE=r=>lh()?.emulatorHosts?.[r],US=r=>{const t=SE(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},wE=()=>lh()?.config,bE=r=>lh()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function RE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Hc(JSON.stringify(n)),Hc(JSON.stringify(d)),""].join(".")}const Il={};function BS(){const r={prod:[],emulator:[]};for(const t of Object.keys(Il))Il[t]?r.emulator.push(t):r.prod.push(t);return r}function jS(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let H_=!1;function IE(r,t){if(typeof window>"u"||typeof document>"u"||!no(window.location.host)||Il[r]===t||Il[r]||H_)return;Il[r]=t;function n(R){return`__firebase__banner__${R}`}const s="__firebase__banner",c=BS().prod.length>0;function d(){const R=document.getElementById(s);R&&R.remove()}function p(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function g(R,H){R.setAttribute("width","24"),R.setAttribute("id",H),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function y(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{H_=!0,d()},R}function T(R,H){R.setAttribute("id",H),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function b(){const R=jS(s),H=n("text"),z=document.getElementById(H)||document.createElement("span"),tt=n("learnmore"),W=document.getElementById(tt)||document.createElement("a"),dt=n("preprendIcon"),mt=document.getElementById(dt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const ht=R.element;p(ht),T(W,tt);const qt=y();g(mt,dt),ht.append(mt,z,W,qt),document.body.appendChild(ht)}c?(z.innerText="Preview backend disconnected.",mt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(mt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",H)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function HS(){const r=lh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function QS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KS(){const r=en();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function YS(){return!HS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XS(){try{return typeof indexedDB=="object"}catch{return!1}}function $S(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="FirebaseError";class ir extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=ZS,Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gl.prototype.create)}}class Gl{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},l=`${this.service}/${t}`,c=this.errors[t],d=c?WS(c,s):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new ir(l,p,s)}}function WS(r,t){return r.replace(JS,(n,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const JS=/\{\$([^}]+)}/g;function t1(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Ls(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const l of n){if(!s.includes(l))return!1;const c=r[l],d=t[l];if(G_(c)&&G_(d)){if(!Ls(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function G_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function El(r){const t={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");t[decodeURIComponent(l)]=decodeURIComponent(c)}}),t}function Tl(r){const t=r.indexOf("?");if(!t)return"";const n=r.indexOf("#",t);return r.substring(t,n>0?n:void 0)}function e1(r,t){const n=new n1(r,t);return n.subscribe.bind(n)}class n1{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let l;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");i1(t,["next","error","complete"])?l=t:l={next:t,error:n,complete:s},l.next===void 0&&(l.next=Ld),l.error===void 0&&(l.error=Ld),l.complete===void 0&&(l.complete=Ld);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function i1(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function Ld(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(r){return r&&r._delegate?r._delegate:r}class zs{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new LS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(a1(t))try{this.getOrInitializeService({instanceIdentifier:xs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(t=xs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=xs){return this.instances.has(t)}getOptions(t=xs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);s===p&&d.resolve(l)}return l}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&t(c,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:s1(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=xs){return this.component?this.component.multipleInstances?t:xs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function s1(r){return r===xs?void 0:r}function a1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new r1(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Nt||(Nt={}));const l1={debug:Nt.DEBUG,verbose:Nt.VERBOSE,info:Nt.INFO,warn:Nt.WARN,error:Nt.ERROR,silent:Nt.SILENT},u1=Nt.INFO,c1={[Nt.DEBUG]:"log",[Nt.VERBOSE]:"log",[Nt.INFO]:"info",[Nt.WARN]:"warn",[Nt.ERROR]:"error"},h1=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=c1[t];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Dm{constructor(t){this.name=t,this._logLevel=u1,this._logHandler=h1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Nt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?l1[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Nt.DEBUG,...t),this._logHandler(this,Nt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Nt.VERBOSE,...t),this._logHandler(this,Nt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Nt.INFO,...t),this._logHandler(this,Nt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Nt.WARN,...t),this._logHandler(this,Nt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Nt.ERROR,...t),this._logHandler(this,Nt.ERROR,...t)}}const f1=(r,t)=>t.some(n=>r instanceof n);let F_,Q_;function d1(){return F_||(F_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function m1(){return Q_||(Q_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CE=new WeakMap,Wd=new WeakMap,DE=new WeakMap,zd=new WeakMap,Nm=new WeakMap;function p1(r){const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(Lr(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return t.then(n=>{n instanceof IDBCursor&&CE.set(n,r)}).catch(()=>{}),Nm.set(t,r),t}function g1(r){if(Wd.has(r))return;const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});Wd.set(r,t)}let Jd={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return Wd.get(r);if(t==="objectStoreNames")return r.objectStoreNames||DE.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Lr(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function y1(r){Jd=r(Jd)}function _1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(Bd(this),t,...n);return DE.set(s,t.sort?t.sort():[t]),Lr(s)}:m1().includes(r)?function(...t){return r.apply(Bd(this),t),Lr(CE.get(this))}:function(...t){return Lr(r.apply(Bd(this),t))}}function v1(r){return typeof r=="function"?_1(r):(r instanceof IDBTransaction&&g1(r),f1(r,d1())?new Proxy(r,Jd):r)}function Lr(r){if(r instanceof IDBRequest)return p1(r);if(zd.has(r))return zd.get(r);const t=v1(r);return t!==r&&(zd.set(r,t),Nm.set(t,r)),t}const Bd=r=>Nm.get(r);function E1(r,t,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,t),p=Lr(d);return s&&d.addEventListener("upgradeneeded",g=>{s(Lr(d.result),g.oldVersion,g.newVersion,Lr(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const T1=["get","getKey","getAll","getAllKeys","count"],A1=["put","add","delete","clear"],jd=new Map;function K_(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(jd.get(t))return jd.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,l=A1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||T1.includes(n)))return;const c=async function(d,...p){const g=this.transaction(d,l?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&g.done]))[0]};return jd.set(t,c),c}y1(r=>({...r,get:(t,n,s)=>K_(t,n)||r.get(t,n,s),has:(t,n)=>!!K_(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(w1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function w1(r){return r.getComponent()?.type==="VERSION"}const tm="@firebase/app",Y_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new Dm("@firebase/app"),b1="@firebase/app-compat",R1="@firebase/analytics-compat",I1="@firebase/analytics",C1="@firebase/app-check-compat",D1="@firebase/app-check",N1="@firebase/auth",O1="@firebase/auth-compat",V1="@firebase/database",M1="@firebase/data-connect",x1="@firebase/database-compat",P1="@firebase/functions",k1="@firebase/functions-compat",U1="@firebase/installations",L1="@firebase/installations-compat",z1="@firebase/messaging",B1="@firebase/messaging-compat",j1="@firebase/performance",q1="@firebase/performance-compat",H1="@firebase/remote-config",G1="@firebase/remote-config-compat",F1="@firebase/storage",Q1="@firebase/storage-compat",K1="@firebase/firestore",Y1="@firebase/ai",X1="@firebase/firestore-compat",$1="firebase",Z1="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="[DEFAULT]",W1={[tm]:"fire-core",[b1]:"fire-core-compat",[I1]:"fire-analytics",[R1]:"fire-analytics-compat",[D1]:"fire-app-check",[C1]:"fire-app-check-compat",[N1]:"fire-auth",[O1]:"fire-auth-compat",[V1]:"fire-rtdb",[M1]:"fire-data-connect",[x1]:"fire-rtdb-compat",[P1]:"fire-fn",[k1]:"fire-fn-compat",[U1]:"fire-iid",[L1]:"fire-iid-compat",[z1]:"fire-fcm",[B1]:"fire-fcm-compat",[j1]:"fire-perf",[q1]:"fire-perf-compat",[H1]:"fire-rc",[G1]:"fire-rc-compat",[F1]:"fire-gcs",[Q1]:"fire-gcs-compat",[K1]:"fire-fst",[X1]:"fire-fst-compat",[Y1]:"fire-vertex","fire-js":"fire-js",[$1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=new Map,J1=new Map,nm=new Map;function X_(r,t){try{r.container.addComponent(t)}catch(n){Ji.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function Xa(r){const t=r.name;if(nm.has(t))return Ji.debug(`There were multiple attempts to register component ${t}.`),!1;nm.set(t,r);for(const n of Gc.values())X_(n,r);for(const n of J1.values())X_(n,r);return!0}function Om(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function An(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zr=new Gl("app","Firebase",tw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=Z1;function NE(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s={name:em,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw zr.create("bad-app-name",{appName:String(l)});if(n||(n=wE()),!n)throw zr.create("no-options");const c=Gc.get(l);if(c){if(Ls(n,c.options)&&Ls(s,c.config))return c;throw zr.create("duplicate-app",{appName:l})}const d=new o1(l);for(const g of nm.values())d.addComponent(g);const p=new ew(n,s,d);return Gc.set(l,p),p}function OE(r=em){const t=Gc.get(r);if(!t&&r===em&&wE())return NE();if(!t)throw zr.create("no-app",{appName:r});return t}function Br(r,t,n){let s=W1[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${t}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ji.warn(d.join(" "));return}Xa(new zs(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="firebase-heartbeat-database",iw=1,xl="firebase-heartbeat-store";let qd=null;function VE(){return qd||(qd=E1(nw,iw,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(xl)}catch(n){console.warn(n)}}}}).catch(r=>{throw zr.create("idb-open",{originalErrorMessage:r.message})})),qd}async function rw(r){try{const n=(await VE()).transaction(xl),s=await n.objectStore(xl).get(ME(r));return await n.done,s}catch(t){if(t instanceof ir)Ji.warn(t.message);else{const n=zr.create("idb-get",{originalErrorMessage:t?.message});Ji.warn(n.message)}}}async function $_(r,t){try{const s=(await VE()).transaction(xl,"readwrite");await s.objectStore(xl).put(t,ME(r)),await s.done}catch(n){if(n instanceof ir)Ji.warn(n.message);else{const s=zr.create("idb-set",{originalErrorMessage:n?.message});Ji.warn(s.message)}}}function ME(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw=1024,aw=30;class ow{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uw(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Z_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>aw){const l=cw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Ji.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Z_(),{heartbeatsToSend:n,unsentEntries:s}=lw(this._heartbeatsCache.heartbeats),l=Hc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ji.warn(t),""}}}function Z_(){return new Date().toISOString().substring(0,10)}function lw(r,t=sw){const n=[];let s=r.slice();for(const l of r){const c=n.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),W_(n)>t){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),W_(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class uw{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XS()?$S().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rw(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return $_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return $_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function W_(r){return Hc(JSON.stringify({version:2,heartbeats:r})).length}function cw(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(r){Xa(new zs("platform-logger",t=>new S1(t),"PRIVATE")),Xa(new zs("heartbeat",t=>new ow(t),"PRIVATE")),Br(tm,Y_,r),Br(tm,Y_,"esm2020"),Br("fire-js","")}hw("");var fw="firebase",dw="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Br(fw,dw,"app");function xE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mw=xE,PE=new Gl("auth","Firebase",xE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=new Dm("@firebase/auth");function pw(r,...t){Fc.logLevel<=Nt.WARN&&Fc.warn(`Auth (${io}): ${r}`,...t)}function Vc(r,...t){Fc.logLevel<=Nt.ERROR&&Fc.error(`Auth (${io}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(r,...t){throw Mm(r,...t)}function Yn(r,...t){return Mm(r,...t)}function Vm(r,t,n){const s={...mw(),[t]:n};return new Gl("auth","Firebase",s).create(t,{appName:r.name})}function Zi(r){return Vm(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gw(r,t,n){const s=n;if(!(t instanceof s))throw s.name!==t.constructor.name&&Bn(r,"argument-error"),Vm(r,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mm(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return PE.create(r,...t)}function yt(r,t,...n){if(!r)throw Mm(t,...n)}function Xi(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Vc(t),new Error(t)}function tr(r,t){r||Xi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(){return typeof self<"u"&&self.location?.href||""}function yw(){return J_()==="http:"||J_()==="https:"}function J_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yw()||FS()||"connection"in navigator)?navigator.onLine:!0}function vw(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(t,n){this.shortDelay=t,this.longDelay=n,tr(n>t,"Short delay should be less than long delay!"),this.isMobile=qS()||QS()}get(){return _w()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(r,t){tr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Aw=new Ql(3e4,6e4);function Xr(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function $r(r,t,n,s,l={}){return UE(r,l,async()=>{let c={},d={};s&&(t==="GET"?d=s:c={body:JSON.stringify(s)});const p=Fl({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:t,headers:g,...c};return GS()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&no(r.emulatorConfig.host)&&(y.credentials="include"),kE.fetch()(await LE(r,r.config.apiHost,n,p),y)})}async function UE(r,t,n){r._canInitEmulator=!1;const s={...Ew,...t};try{const l=new ww(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Rc(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rc(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Rc(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw Rc(r,"user-disabled",d);const T=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Vm(r,T,y);Bn(r,T)}}catch(l){if(l instanceof ir)throw l;Bn(r,"network-request-failed",{message:String(l)})}}async function Kl(r,t,n,s,l={}){const c=await $r(r,t,n,s,l);return"mfaPendingCredential"in c&&Bn(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function LE(r,t,n,s){const l=`${t}${n}?${s}`,c=r,d=c.config.emulator?xm(r.config,l):`${r.config.apiScheme}://${l}`;return Tw.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function Sw(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ww{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Yn(this.auth,"network-request-failed")),Aw.get())})}}function Rc(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=Yn(r,t,s);return l.customData._tokenResponse=n,l}function tv(r){return r!==void 0&&r.enterprise!==void 0}class bw{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return Sw(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Rw(r,t){return $r(r,"GET","/v2/recaptchaConfig",Xr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iw(r,t){return $r(r,"POST","/v1/accounts:delete",t)}async function Qc(r,t){return $r(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Cw(r,t=!1){const n=Be(r),s=await n.getIdToken(t),l=Pm(s);yt(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:s,authTime:Cl(Hd(l.auth_time)),issuedAtTime:Cl(Hd(l.iat)),expirationTime:Cl(Hd(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Hd(r){return Number(r)*1e3}function Pm(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return Vc("JWT malformed, contained fewer than 3 sections"),null;try{const l=AE(n);return l?JSON.parse(l):(Vc("Failed to decode base64 JWT payload"),null)}catch(l){return Vc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function ev(r){const t=Pm(r);return yt(t,"internal-error"),yt(typeof t.exp<"u","internal-error"),yt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof ir&&Dw(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function Dw({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cl(this.lastLoginAt),this.creationTime=Cl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kc(r){const t=r.auth,n=await r.getIdToken(),s=await Pl(r,Qc(t,{idToken:n}));yt(s?.users.length,t,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=l.providerUserInfo?.length?zE(l.providerUserInfo):[],d=Vw(r.providerData,c),p=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!d?.length,y=p?g:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new rm(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(r,T)}async function Ow(r){const t=Be(r);await Kc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Vw(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function zE(r){return r.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mw(r,t){const n=await UE(r,{},async()=>{const s=Fl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await LE(r,l,"/v1/token",`key=${c}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return r.emulatorConfig&&no(r.emulatorConfig.host)&&(g.credentials="include"),kE.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xw(r,t){return $r(r,"POST","/v2/accounts:revokeToken",Xr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){yt(t.idToken,"internal-error"),yt(typeof t.idToken<"u","internal-error"),yt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):ev(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){yt(t.length!==0,"internal-error");const n=ev(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(yt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await Mw(t,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,d=new Ga;return s&&(yt(typeof s=="string","internal-error",{appName:t}),d.refreshToken=s),l&&(yt(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),c&&(yt(typeof c=="number","internal-error",{appName:t}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ga,this.toJSON())}_performRefresh(){return Xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(r,t){yt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Kn{constructor({uid:t,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new Nw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new rm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await Pl(this,this.stsTokenManager.getToken(this.auth,t));return yt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Cw(this,t)}reload(){return Ow(this)}_assign(t){this!==t&&(yt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Kn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await Kc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(An(this.auth.app))return Promise.reject(Zi(this.auth));const t=await this.getIdToken();return await Pl(this,Iw(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:b,emailVerified:R,isAnonymous:H,providerData:z,stsTokenManager:tt}=n;yt(b&&tt,t,"internal-error");const W=Ga.fromJSON(this.name,tt);yt(typeof b=="string",t,"internal-error"),Mr(s,t.name),Mr(l,t.name),yt(typeof R=="boolean",t,"internal-error"),yt(typeof H=="boolean",t,"internal-error"),Mr(c,t.name),Mr(d,t.name),Mr(p,t.name),Mr(g,t.name),Mr(y,t.name),Mr(T,t.name);const dt=new Kn({uid:b,auth:t,email:l,emailVerified:R,displayName:s,isAnonymous:H,photoURL:d,phoneNumber:c,tenantId:p,stsTokenManager:W,createdAt:y,lastLoginAt:T});return z&&Array.isArray(z)&&(dt.providerData=z.map(mt=>({...mt}))),g&&(dt._redirectEventId=g),dt}static async _fromIdTokenResponse(t,n,s=!1){const l=new Ga;l.updateFromServerResponse(n);const c=new Kn({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await Kc(c),c}static async _fromGetAccountInfoResponse(t,n,s){const l=n.users[0];yt(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?zE(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,p=new Ga;p.updateFromIdToken(s);const g=new Kn({uid:l.localId,auth:t,stsTokenManager:p,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new rm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=new Map;function $i(r){tr(r instanceof Function,"Expected a class definition");let t=nv.get(r);return t?(tr(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,nv.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}BE.type="NONE";const iv=BE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(r,t,n){return`firebase:${r}:${t}:${n}`}class Fa{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Mc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Mc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Qc(this.auth,{idToken:t}).catch(()=>{});return n?Kn._fromGetAccountInfoResponse(this.auth,n,t):null}return Kn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Fa($i(iv),t,s);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||$i(iv);const d=Mc(s,t.config.apiKey,t.name);let p=null;for(const y of n)try{const T=await y._get(d);if(T){let b;if(typeof T=="string"){const R=await Qc(t,{idToken:T}).catch(()=>{});if(!R)break;b=await Kn._fromGetAccountInfoResponse(t,R,T)}else b=Kn._fromJSON(t,T);y!==c&&(p=b),c=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Fa(c,t,s):(c=g[0],p&&await c._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new Fa(c,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(GE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(jE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(QE(t))return"Blackberry";if(KE(t))return"Webos";if(qE(t))return"Safari";if((t.includes("chrome/")||HE(t))&&!t.includes("edge/"))return"Chrome";if(FE(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function jE(r=en()){return/firefox\//i.test(r)}function qE(r=en()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function HE(r=en()){return/crios\//i.test(r)}function GE(r=en()){return/iemobile/i.test(r)}function FE(r=en()){return/android/i.test(r)}function QE(r=en()){return/blackberry/i.test(r)}function KE(r=en()){return/webos/i.test(r)}function km(r=en()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Pw(r=en()){return km(r)&&!!window.navigator?.standalone}function kw(){return KS()&&document.documentMode===10}function YE(r=en()){return km(r)||FE(r)||KE(r)||QE(r)||/windows phone/i.test(r)||GE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(r,t=[]){let n;switch(r){case"Browser":n=rv(en());break;case"Worker":n=`${rv(en())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${io}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=c=>new Promise((d,p)=>{try{const g=t(c);d(g)}catch(g){p(g)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lw(r,t={}){return $r(r,"GET","/v2/passwordPolicy",Xr(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=6;class Bw{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??zw,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(t,n,s,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sv(this),this.idTokenSubscription=new sv(this),this.beforeStateQueue=new Uw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=$i(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Fa.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Qc(this,{idToken:t}),s=await Kn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(An(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,p=await this.tryRedirectSignIn(t);(!c||c===d)&&p?.user&&(s=p.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Kc(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=vw()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(An(this.app))return Promise.reject(Zi(this));const n=t?Be(t):null;return n&&yt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&yt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return An(this.app)?Promise.reject(Zi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return An(this.app)?Promise.reject(Zi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($i(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Lw(this),n=new Bw(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Gl("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await xw(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&$i(t)||this._popupRedirectResolver;yt(n,this,"argument-error"),this.redirectPersistenceManager=await Fa.create(this,[$i(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(yt(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const g=t.addObserver(n,s,l);return()=>{d=!0,g()}}else{const g=t.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=XE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&pw(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Zr(r){return Be(r)}class sv{constructor(t){this.auth=t,this.observer=null,this.addObserver=e1(n=>this.observer=n)}get next(){return yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qw(r){uh=r}function $E(r){return uh.loadJS(r)}function Hw(){return uh.recaptchaEnterpriseScript}function Gw(){return uh.gapiScript}function Fw(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Qw{constructor(){this.enterprise=new Kw}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class Kw{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const Yw="recaptcha-enterprise",ZE="NO_RECAPTCHA";class Xw{constructor(t){this.type=Yw,this.auth=Zr(t)}async verify(t="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,p)=>{Rw(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new bw(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function l(c,d,p){const g=window.grecaptcha;tv(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:t}).then(y=>{d(y)}).catch(()=>{d(ZE)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Qw().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(p=>{if(!n&&tv(window.grecaptcha))l(p,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=Hw();g.length!==0&&(g+=p),$E(g).then(()=>{l(p,c,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function av(r,t,n,s=!1,l=!1){const c=new Xw(r);let d;if(l)d=ZE;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const p={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function sm(r,t,n,s,l){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await av(r,t,n,n==="getOobCode");return s(r,c)}else return s(r,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await av(r,t,n,n==="getOobCode");return s(r,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(r,t){const n=Om(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Ls(c,t??{}))return l;Bn(l,"already-initialized")}return n.initialize({options:t})}function Zw(r,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map($i);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function Ww(r,t,n){const s=Zr(r);yt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,c=WE(t),{host:d,port:p}=Jw(t),g=p===null?"":`:${p}`,y={url:`${c}//${d}${g}/`},T=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){yt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),yt(Ls(y,s.config.emulator)&&Ls(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,no(d)?(RE(`${c}//${d}${g}`),IE("Auth",!0)):tb()}function WE(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function Jw(r){const t=WE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:ov(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:ov(d)}}}function ov(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function tb(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Xi("not implemented")}_getIdTokenResponse(t){return Xi("not implemented")}_linkToIdToken(t,n){return Xi("not implemented")}_getReauthenticationResolver(t){return Xi("not implemented")}}async function eb(r,t){return $r(r,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nb(r,t){return Kl(r,"POST","/v1/accounts:signInWithPassword",Xr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ib(r,t){return Kl(r,"POST","/v1/accounts:signInWithEmailLink",Xr(r,t))}async function rb(r,t){return Kl(r,"POST","/v1/accounts:signInWithEmailLink",Xr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl extends Um{constructor(t,n,s,l=null){super("password",s),this._email=t,this._password=n,this._tenantId=l}static _fromEmailAndPassword(t,n){return new kl(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new kl(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sm(t,n,"signInWithPassword",nb);case"emailLink":return ib(t,{email:this._email,oobCode:this._password});default:Bn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sm(t,s,"signUpPassword",eb);case"emailLink":return rb(t,{idToken:n,email:this._email,oobCode:this._password});default:Bn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qa(r,t){return Kl(r,"POST","/v1/accounts:signInWithIdp",Xr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="http://localhost";class Bs extends Um{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Bs(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l,...c}=n;if(!s||!l)return null;const d=new Bs(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(t){const n=this.buildRequest();return Qa(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,Qa(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Qa(t,n)}buildRequest(){const t={requestUri:sb,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Fl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ob(r){const t=El(Tl(r)).link,n=t?El(Tl(t)).deep_link_id:null,s=El(Tl(r)).deep_link_id;return(s?El(Tl(s)).link:null)||s||n||t||r}class Lm{constructor(t){const n=El(Tl(t)),s=n.apiKey??null,l=n.oobCode??null,c=ab(n.mode??null);yt(s&&l&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=ob(t);try{return new Lm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){this.providerId=ro.PROVIDER_ID}static credential(t,n){return kl._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=Lm.parseLink(n);return yt(s,"argument-error"),kl._fromEmailAndCode(t,s.code,s.tenantId)}}ro.PROVIDER_ID="password";ro.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ro.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl extends zm{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Yl{constructor(){super("facebook.com")}static credential(t){return Bs._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return xr.credentialFromTaggedObject(t)}static credentialFromError(t){return xr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return xr.credential(t.oauthAccessToken)}catch{return null}}}xr.FACEBOOK_SIGN_IN_METHOD="facebook.com";xr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends Yl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Bs._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Yi.credentialFromTaggedObject(t)}static credentialFromError(t){return Yi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return Yi.credential(n,s)}catch{return null}}}Yi.GOOGLE_SIGN_IN_METHOD="google.com";Yi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Yl{constructor(){super("github.com")}static credential(t){return Bs._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Pr.credentialFromTaggedObject(t)}static credentialFromError(t){return Pr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Pr.credential(t.oauthAccessToken)}catch{return null}}}Pr.GITHUB_SIGN_IN_METHOD="github.com";Pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends Yl{constructor(){super("twitter.com")}static credential(t,n){return Bs._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return kr.credentialFromTaggedObject(t)}static credentialFromError(t){return kr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return kr.credential(n,s)}catch{return null}}}kr.TWITTER_SIGN_IN_METHOD="twitter.com";kr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lb(r,t){return Kl(r,"POST","/v1/accounts:signUp",Xr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,l=!1){const c=await Kn._fromIdTokenResponse(t,s,l),d=lv(s);return new js({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const l=lv(s);return new js({user:t,providerId:l,_tokenResponse:s,operationType:n})}}function lv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc extends ir{constructor(t,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Yc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,l){return new Yc(t,n,s,l)}}function JE(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Yc._fromErrorAndOperation(r,c,t,s):c})}async function ub(r,t,n=!1){const s=await Pl(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return js._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cb(r,t,n=!1){const{auth:s}=r;if(An(s.app))return Promise.reject(Zi(s));const l="reauthenticate";try{const c=await Pl(r,JE(s,l,t,r),n);yt(c.idToken,s,"internal-error");const d=Pm(c.idToken);yt(d,s,"internal-error");const{sub:p}=d;return yt(r.uid===p,s,"user-mismatch"),js._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&Bn(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tT(r,t,n=!1){if(An(r.app))return Promise.reject(Zi(r));const s="signIn",l=await JE(r,s,t),c=await js._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}async function hb(r,t){return tT(Zr(r),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eT(r){const t=Zr(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function fb(r,t,n){if(An(r.app))return Promise.reject(Zi(r));const s=Zr(r),d=await sm(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lb).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&eT(r),g}),p=await js._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(p.user),p}function db(r,t,n){return An(r.app)?Promise.reject(Zi(r)):hb(Be(r),ro.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&eT(r),s})}function mb(r,t,n,s){return Be(r).onIdTokenChanged(t,n,s)}function pb(r,t,n){return Be(r).beforeAuthStateChanged(t,n)}function gb(r,t,n,s){return Be(r).onAuthStateChanged(t,n,s)}function yb(r){return Be(r).signOut()}const Xc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xc,"1"),this.storage.removeItem(Xc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b=1e3,vb=10;class iT extends nT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&t(n,l,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const s=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);kw()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,vb):l()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},_b)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}iT.type="LOCAL";const Eb=iT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT extends nT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}rT.type="SESSION";const sT=rT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const s=new ch(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:l,data:c}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const p=Array.from(d).map(async y=>y(n.origin,c)),g=await Tb(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ch.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((p,g)=>{const y=Bm("",20);l.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(b){const R=b;if(R.data.eventId===y)switch(R.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(R.data.response);break;default:clearTimeout(T),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:y,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(){return window}function Sb(r){gi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(){return typeof gi().WorkerGlobalScope<"u"&&typeof gi().importScripts=="function"}async function wb(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bb(){return navigator?.serviceWorker?.controller||null}function Rb(){return aT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="firebaseLocalStorageDb",Ib=1,$c="firebaseLocalStorage",lT="fbase_key";class Xl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hh(r,t){return r.transaction([$c],t?"readwrite":"readonly").objectStore($c)}function Cb(){const r=indexedDB.deleteDatabase(oT);return new Xl(r).toPromise()}function am(){const r=indexedDB.open(oT,Ib);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore($c,{keyPath:lT})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains($c)?t(s):(s.close(),await Cb(),t(await am()))})})}async function uv(r,t,n){const s=hh(r,!0).put({[lT]:t,value:n});return new Xl(s).toPromise()}async function Db(r,t){const n=hh(r,!1).get(t),s=await new Xl(n).toPromise();return s===void 0?null:s.value}function cv(r,t){const n=hh(r,!0).delete(t);return new Xl(n).toPromise()}const Nb=800,Ob=3;class uT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await am(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>Ob)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ch._getInstance(Rb()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await wb(),!this.activeServiceWorker)return;this.sender=new Ab(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||bb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await am();return await uv(t,Xc,"1"),await cv(t,Xc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>uv(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>Db(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>cv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=hh(l,!1).getAll();return new Xl(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Nb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uT.type="LOCAL";const Vb=uT;new Ql(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(r,t){return t?$i(t):(yt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm extends Um{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Qa(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Qa(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Qa(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Mb(r){return tT(r.auth,new jm(r),r.bypassAuthState)}function xb(r){const{auth:t,user:n}=r;return yt(n,t,"internal-error"),cb(n,new jm(r),r.bypassAuthState)}async function Pb(r){const{auth:t,user:n}=r;return yt(n,t,"internal-error"),ub(n,new jm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(t,n,s,l,c=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:d,type:p}=t;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Mb;case"linkViaPopup":case"linkViaRedirect":return Pb;case"reauthViaPopup":case"reauthViaRedirect":return xb;default:Bn(this.auth,"internal-error")}}resolve(t){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=new Ql(2e3,1e4);async function Ub(r,t,n){if(An(r.app))return Promise.reject(Yn(r,"operation-not-supported-in-this-environment"));const s=Zr(r);gw(r,t,zm);const l=cT(s,n);return new Ps(s,"signInViaPopup",t,l).executeNotNull()}class Ps extends hT{constructor(t,n,s,l,c){super(t,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Ps.currentPopupAction&&Ps.currentPopupAction.cancel(),Ps.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return yt(t,this.auth,"internal-error"),t}async onExecution(){tr(this.filter.length===1,"Popup operations only handle one event");const t=Bm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ps.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,kb.get())};t()}}Ps.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="pendingRedirect",xc=new Map;class zb extends hT{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=xc.get(this.auth._key());if(!t){try{const s=await Bb(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}xc.set(this.auth._key(),t)}return this.bypassAuthState||xc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Bb(r,t){const n=Hb(t),s=qb(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function jb(r,t){xc.set(r._key(),t)}function qb(r){return $i(r._redirectPersistence)}function Hb(r){return Mc(Lb,r.config.apiKey,r.name)}async function Gb(r,t,n=!1){if(An(r.app))return Promise.reject(Zi(r));const s=Zr(r),l=cT(s,t),d=await new zb(s,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=600*1e3;class Qb{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Kb(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!fT(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Yn(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Fb&&this.cachedEventUids.clear(),this.cachedEventUids.has(hv(t))}saveEventToCache(t){this.cachedEventUids.add(hv(t)),this.lastProcessedEventTime=Date.now()}}function hv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function fT({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function Kb(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fT(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yb(r,t={}){return $r(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$b=/^https?/;async function Zb(r){if(r.config.emulator)return;const{authorizedDomains:t}=await Yb(r);for(const n of t)try{if(Wb(n))return}catch{}Bn(r,"unauthorized-domain")}function Wb(r){const t=im(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!$b.test(n))return!1;if(Xb.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=new Ql(3e4,6e4);function fv(){const r=gi().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function tR(r){return new Promise((t,n)=>{function s(){fv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{fv(),n(Yn(r,"network-request-failed"))},timeout:Jb.get()})}if(gi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(gi().gapi?.load)s();else{const l=Fw("iframefcb");return gi()[l]=()=>{gapi.load?s():n(Yn(r,"network-request-failed"))},$E(`${Gw()}?onload=${l}`).catch(c=>n(c))}}).catch(t=>{throw Pc=null,t})}let Pc=null;function eR(r){return Pc=Pc||tR(r),Pc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=new Ql(5e3,15e3),iR="__/auth/iframe",rR="emulator/auth/iframe",sR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oR(r){const t=r.config;yt(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?xm(t,rR):`https://${r.config.authDomain}/${iR}`,s={apiKey:t.apiKey,appName:r.name,v:io},l=aR.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Fl(s).slice(1)}`}async function lR(r){const t=await eR(r),n=gi().gapi;return yt(n,r,"internal-error"),t.open({where:document.body,url:oR(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sR,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=Yn(r,"network-request-failed"),p=gi().setTimeout(()=>{c(d)},nR.get());function g(){gi().clearTimeout(p),l(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cR=500,hR=600,fR="_blank",dR="http://localhost";class dv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mR(r,t,n,s=cR,l=hR){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g={...uR,width:s.toString(),height:l.toString(),top:c,left:d},y=en().toLowerCase();n&&(p=HE(y)?fR:n),jE(y)&&(t=t||dR,g.scrollbars="yes");const T=Object.entries(g).reduce((R,[H,z])=>`${R}${H}=${z},`,"");if(Pw(y)&&p!=="_self")return pR(t||"",p),new dv(null);const b=window.open(t||"",p,T);yt(b,r,"popup-blocked");try{b.focus()}catch{}return new dv(b)}function pR(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR="__/auth/handler",yR="emulator/auth/handler",_R=encodeURIComponent("fac");async function mv(r,t,n,s,l,c){yt(r.config.authDomain,r,"auth-domain-config-required"),yt(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:io,eventId:l};if(t instanceof zm){t.setDefaultLanguage(r.languageCode),d.providerId=t.providerId||"",t1(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,b]of Object.entries({}))d[T]=b}if(t instanceof Yl){const T=t.getScopes().filter(b=>b!=="");T.length>0&&(d.scopes=T.join(","))}r.tenantId&&(d.tid=r.tenantId);const p=d;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const g=await r._getAppCheckToken(),y=g?`#${_R}=${encodeURIComponent(g)}`:"";return`${vR(r)}?${Fl(p).slice(1)}${y}`}function vR({config:r}){return r.emulator?xm(r,yR):`https://${r.authDomain}/${gR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="webStorageSupport";class ER{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sT,this._completeRedirectFn=Gb,this._overrideRedirectResult=jb}async _openPopup(t,n,s,l){tr(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const c=await mv(t,n,s,im(),l);return mR(t,c,Bm())}async _openRedirect(t,n,s,l){await this._originValidation(t);const c=await mv(t,n,s,im(),l);return Sb(c),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(tr(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await lR(t),s=new Qb(t);return n.register("authEvent",l=>(yt(l?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Gd,{type:Gd},l=>{const c=l?.[0]?.[Gd];c!==void 0&&n(!!c),Bn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Zb(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return YE()||qE()||km()}}const TR=ER;var pv="@firebase/auth",gv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wR(r){Xa(new zs("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=s.options;yt(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XE(r)},y=new jw(s,l,c,g);return Zw(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Xa(new zs("auth-internal",t=>{const n=Zr(t.getProvider("auth").getImmediate());return(s=>new AR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Br(pv,gv,SR(r)),Br(pv,gv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=300,RR=bE("authIdTokenMaxAge")||bR;let yv=null;const IR=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>RR)return;const l=n?.token;yv!==l&&(yv=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function CR(r=OE()){const t=Om(r,"auth");if(t.isInitialized())return t.getImmediate();const n=$w(r,{popupRedirectResolver:TR,persistence:[Vb,Eb,sT]}),s=bE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=IR(c.toString());pb(n,d,()=>d(n.currentUser)),mb(n,p=>d(p))}}const l=SE("auth");return l&&Ww(n,`http://${l}`),n}function DR(){return document.getElementsByTagName("head")?.[0]??document}qw({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const c=Yn("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",DR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wR("Browser");var _v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jr,dT;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(O,S){function I(){}I.prototype=S.prototype,O.D=S.prototype,O.prototype=new I,O.prototype.constructor=O,O.C=function(V,M,x){for(var C=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)C[ve-2]=arguments[ve];return S.prototype[M].apply(V,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(O,S,I){I||(I=0);var V=Array(16);if(typeof S=="string")for(var M=0;16>M;++M)V[M]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(M=0;16>M;++M)V[M]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=O.g[0],I=O.g[1],M=O.g[2];var x=O.g[3],C=S+(x^I&(M^x))+V[0]+3614090360&4294967295;S=I+(C<<7&4294967295|C>>>25),C=x+(M^S&(I^M))+V[1]+3905402710&4294967295,x=S+(C<<12&4294967295|C>>>20),C=M+(I^x&(S^I))+V[2]+606105819&4294967295,M=x+(C<<17&4294967295|C>>>15),C=I+(S^M&(x^S))+V[3]+3250441966&4294967295,I=M+(C<<22&4294967295|C>>>10),C=S+(x^I&(M^x))+V[4]+4118548399&4294967295,S=I+(C<<7&4294967295|C>>>25),C=x+(M^S&(I^M))+V[5]+1200080426&4294967295,x=S+(C<<12&4294967295|C>>>20),C=M+(I^x&(S^I))+V[6]+2821735955&4294967295,M=x+(C<<17&4294967295|C>>>15),C=I+(S^M&(x^S))+V[7]+4249261313&4294967295,I=M+(C<<22&4294967295|C>>>10),C=S+(x^I&(M^x))+V[8]+1770035416&4294967295,S=I+(C<<7&4294967295|C>>>25),C=x+(M^S&(I^M))+V[9]+2336552879&4294967295,x=S+(C<<12&4294967295|C>>>20),C=M+(I^x&(S^I))+V[10]+4294925233&4294967295,M=x+(C<<17&4294967295|C>>>15),C=I+(S^M&(x^S))+V[11]+2304563134&4294967295,I=M+(C<<22&4294967295|C>>>10),C=S+(x^I&(M^x))+V[12]+1804603682&4294967295,S=I+(C<<7&4294967295|C>>>25),C=x+(M^S&(I^M))+V[13]+4254626195&4294967295,x=S+(C<<12&4294967295|C>>>20),C=M+(I^x&(S^I))+V[14]+2792965006&4294967295,M=x+(C<<17&4294967295|C>>>15),C=I+(S^M&(x^S))+V[15]+1236535329&4294967295,I=M+(C<<22&4294967295|C>>>10),C=S+(M^x&(I^M))+V[1]+4129170786&4294967295,S=I+(C<<5&4294967295|C>>>27),C=x+(I^M&(S^I))+V[6]+3225465664&4294967295,x=S+(C<<9&4294967295|C>>>23),C=M+(S^I&(x^S))+V[11]+643717713&4294967295,M=x+(C<<14&4294967295|C>>>18),C=I+(x^S&(M^x))+V[0]+3921069994&4294967295,I=M+(C<<20&4294967295|C>>>12),C=S+(M^x&(I^M))+V[5]+3593408605&4294967295,S=I+(C<<5&4294967295|C>>>27),C=x+(I^M&(S^I))+V[10]+38016083&4294967295,x=S+(C<<9&4294967295|C>>>23),C=M+(S^I&(x^S))+V[15]+3634488961&4294967295,M=x+(C<<14&4294967295|C>>>18),C=I+(x^S&(M^x))+V[4]+3889429448&4294967295,I=M+(C<<20&4294967295|C>>>12),C=S+(M^x&(I^M))+V[9]+568446438&4294967295,S=I+(C<<5&4294967295|C>>>27),C=x+(I^M&(S^I))+V[14]+3275163606&4294967295,x=S+(C<<9&4294967295|C>>>23),C=M+(S^I&(x^S))+V[3]+4107603335&4294967295,M=x+(C<<14&4294967295|C>>>18),C=I+(x^S&(M^x))+V[8]+1163531501&4294967295,I=M+(C<<20&4294967295|C>>>12),C=S+(M^x&(I^M))+V[13]+2850285829&4294967295,S=I+(C<<5&4294967295|C>>>27),C=x+(I^M&(S^I))+V[2]+4243563512&4294967295,x=S+(C<<9&4294967295|C>>>23),C=M+(S^I&(x^S))+V[7]+1735328473&4294967295,M=x+(C<<14&4294967295|C>>>18),C=I+(x^S&(M^x))+V[12]+2368359562&4294967295,I=M+(C<<20&4294967295|C>>>12),C=S+(I^M^x)+V[5]+4294588738&4294967295,S=I+(C<<4&4294967295|C>>>28),C=x+(S^I^M)+V[8]+2272392833&4294967295,x=S+(C<<11&4294967295|C>>>21),C=M+(x^S^I)+V[11]+1839030562&4294967295,M=x+(C<<16&4294967295|C>>>16),C=I+(M^x^S)+V[14]+4259657740&4294967295,I=M+(C<<23&4294967295|C>>>9),C=S+(I^M^x)+V[1]+2763975236&4294967295,S=I+(C<<4&4294967295|C>>>28),C=x+(S^I^M)+V[4]+1272893353&4294967295,x=S+(C<<11&4294967295|C>>>21),C=M+(x^S^I)+V[7]+4139469664&4294967295,M=x+(C<<16&4294967295|C>>>16),C=I+(M^x^S)+V[10]+3200236656&4294967295,I=M+(C<<23&4294967295|C>>>9),C=S+(I^M^x)+V[13]+681279174&4294967295,S=I+(C<<4&4294967295|C>>>28),C=x+(S^I^M)+V[0]+3936430074&4294967295,x=S+(C<<11&4294967295|C>>>21),C=M+(x^S^I)+V[3]+3572445317&4294967295,M=x+(C<<16&4294967295|C>>>16),C=I+(M^x^S)+V[6]+76029189&4294967295,I=M+(C<<23&4294967295|C>>>9),C=S+(I^M^x)+V[9]+3654602809&4294967295,S=I+(C<<4&4294967295|C>>>28),C=x+(S^I^M)+V[12]+3873151461&4294967295,x=S+(C<<11&4294967295|C>>>21),C=M+(x^S^I)+V[15]+530742520&4294967295,M=x+(C<<16&4294967295|C>>>16),C=I+(M^x^S)+V[2]+3299628645&4294967295,I=M+(C<<23&4294967295|C>>>9),C=S+(M^(I|~x))+V[0]+4096336452&4294967295,S=I+(C<<6&4294967295|C>>>26),C=x+(I^(S|~M))+V[7]+1126891415&4294967295,x=S+(C<<10&4294967295|C>>>22),C=M+(S^(x|~I))+V[14]+2878612391&4294967295,M=x+(C<<15&4294967295|C>>>17),C=I+(x^(M|~S))+V[5]+4237533241&4294967295,I=M+(C<<21&4294967295|C>>>11),C=S+(M^(I|~x))+V[12]+1700485571&4294967295,S=I+(C<<6&4294967295|C>>>26),C=x+(I^(S|~M))+V[3]+2399980690&4294967295,x=S+(C<<10&4294967295|C>>>22),C=M+(S^(x|~I))+V[10]+4293915773&4294967295,M=x+(C<<15&4294967295|C>>>17),C=I+(x^(M|~S))+V[1]+2240044497&4294967295,I=M+(C<<21&4294967295|C>>>11),C=S+(M^(I|~x))+V[8]+1873313359&4294967295,S=I+(C<<6&4294967295|C>>>26),C=x+(I^(S|~M))+V[15]+4264355552&4294967295,x=S+(C<<10&4294967295|C>>>22),C=M+(S^(x|~I))+V[6]+2734768916&4294967295,M=x+(C<<15&4294967295|C>>>17),C=I+(x^(M|~S))+V[13]+1309151649&4294967295,I=M+(C<<21&4294967295|C>>>11),C=S+(M^(I|~x))+V[4]+4149444226&4294967295,S=I+(C<<6&4294967295|C>>>26),C=x+(I^(S|~M))+V[11]+3174756917&4294967295,x=S+(C<<10&4294967295|C>>>22),C=M+(S^(x|~I))+V[2]+718787259&4294967295,M=x+(C<<15&4294967295|C>>>17),C=I+(x^(M|~S))+V[9]+3951481745&4294967295,O.g[0]=O.g[0]+S&4294967295,O.g[1]=O.g[1]+(M+(C<<21&4294967295|C>>>11))&4294967295,O.g[2]=O.g[2]+M&4294967295,O.g[3]=O.g[3]+x&4294967295}s.prototype.u=function(O,S){S===void 0&&(S=O.length);for(var I=S-this.blockSize,V=this.B,M=this.h,x=0;x<S;){if(M==0)for(;x<=I;)l(this,O,x),x+=this.blockSize;if(typeof O=="string"){for(;x<S;)if(V[M++]=O.charCodeAt(x++),M==this.blockSize){l(this,V),M=0;break}}else for(;x<S;)if(V[M++]=O[x++],M==this.blockSize){l(this,V),M=0;break}}this.h=M,this.o+=S},s.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var S=1;S<O.length-8;++S)O[S]=0;var I=8*this.o;for(S=O.length-8;S<O.length;++S)O[S]=I&255,I/=256;for(this.u(O),O=Array(16),S=I=0;4>S;++S)for(var V=0;32>V;V+=8)O[I++]=this.g[S]>>>V&255;return O};function c(O,S){var I=p;return Object.prototype.hasOwnProperty.call(I,O)?I[O]:I[O]=S(O)}function d(O,S){this.h=S;for(var I=[],V=!0,M=O.length-1;0<=M;M--){var x=O[M]|0;V&&x==S||(I[M]=x,V=!1)}this.g=I}var p={};function g(O){return-128<=O&&128>O?c(O,function(S){return new d([S|0],0>S?-1:0)}):new d([O|0],0>O?-1:0)}function y(O){if(isNaN(O)||!isFinite(O))return b;if(0>O)return W(y(-O));for(var S=[],I=1,V=0;O>=I;V++)S[V]=O/I|0,I*=4294967296;return new d(S,0)}function T(O,S){if(O.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(O.charAt(0)=="-")return W(T(O.substring(1),S));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=y(Math.pow(S,8)),V=b,M=0;M<O.length;M+=8){var x=Math.min(8,O.length-M),C=parseInt(O.substring(M,M+x),S);8>x?(x=y(Math.pow(S,x)),V=V.j(x).add(y(C))):(V=V.j(I),V=V.add(y(C)))}return V}var b=g(0),R=g(1),H=g(16777216);r=d.prototype,r.m=function(){if(tt(this))return-W(this).m();for(var O=0,S=1,I=0;I<this.g.length;I++){var V=this.i(I);O+=(0<=V?V:4294967296+V)*S,S*=4294967296}return O},r.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(z(this))return"0";if(tt(this))return"-"+W(this).toString(O);for(var S=y(Math.pow(O,6)),I=this,V="";;){var M=qt(I,S).g;I=dt(I,M.j(S));var x=((0<I.g.length?I.g[0]:I.h)>>>0).toString(O);if(I=M,z(I))return x+V;for(;6>x.length;)x="0"+x;V=x+V}},r.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function z(O){if(O.h!=0)return!1;for(var S=0;S<O.g.length;S++)if(O.g[S]!=0)return!1;return!0}function tt(O){return O.h==-1}r.l=function(O){return O=dt(this,O),tt(O)?-1:z(O)?0:1};function W(O){for(var S=O.g.length,I=[],V=0;V<S;V++)I[V]=~O.g[V];return new d(I,~O.h).add(R)}r.abs=function(){return tt(this)?W(this):this},r.add=function(O){for(var S=Math.max(this.g.length,O.g.length),I=[],V=0,M=0;M<=S;M++){var x=V+(this.i(M)&65535)+(O.i(M)&65535),C=(x>>>16)+(this.i(M)>>>16)+(O.i(M)>>>16);V=C>>>16,x&=65535,C&=65535,I[M]=C<<16|x}return new d(I,I[I.length-1]&-2147483648?-1:0)};function dt(O,S){return O.add(W(S))}r.j=function(O){if(z(this)||z(O))return b;if(tt(this))return tt(O)?W(this).j(W(O)):W(W(this).j(O));if(tt(O))return W(this.j(W(O)));if(0>this.l(H)&&0>O.l(H))return y(this.m()*O.m());for(var S=this.g.length+O.g.length,I=[],V=0;V<2*S;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(var M=0;M<O.g.length;M++){var x=this.i(V)>>>16,C=this.i(V)&65535,ve=O.i(M)>>>16,Zt=O.i(M)&65535;I[2*V+2*M]+=C*Zt,mt(I,2*V+2*M),I[2*V+2*M+1]+=x*Zt,mt(I,2*V+2*M+1),I[2*V+2*M+1]+=C*ve,mt(I,2*V+2*M+1),I[2*V+2*M+2]+=x*ve,mt(I,2*V+2*M+2)}for(V=0;V<S;V++)I[V]=I[2*V+1]<<16|I[2*V];for(V=S;V<2*S;V++)I[V]=0;return new d(I,0)};function mt(O,S){for(;(O[S]&65535)!=O[S];)O[S+1]+=O[S]>>>16,O[S]&=65535,S++}function ht(O,S){this.g=O,this.h=S}function qt(O,S){if(z(S))throw Error("division by zero");if(z(O))return new ht(b,b);if(tt(O))return S=qt(W(O),S),new ht(W(S.g),W(S.h));if(tt(S))return S=qt(O,W(S)),new ht(W(S.g),S.h);if(30<O.g.length){if(tt(O)||tt(S))throw Error("slowDivide_ only works with positive integers.");for(var I=R,V=S;0>=V.l(O);)I=Tt(I),V=Tt(V);var M=xt(I,1),x=xt(V,1);for(V=xt(V,2),I=xt(I,2);!z(V);){var C=x.add(V);0>=C.l(O)&&(M=M.add(I),x=C),V=xt(V,1),I=xt(I,1)}return S=dt(O,M.j(S)),new ht(M,S)}for(M=b;0<=O.l(S);){for(I=Math.max(1,Math.floor(O.m()/S.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),x=y(I),C=x.j(S);tt(C)||0<C.l(O);)I-=V,x=y(I),C=x.j(S);z(x)&&(x=R),M=M.add(x),O=dt(O,C)}return new ht(M,O)}r.A=function(O){return qt(this,O).h},r.and=function(O){for(var S=Math.max(this.g.length,O.g.length),I=[],V=0;V<S;V++)I[V]=this.i(V)&O.i(V);return new d(I,this.h&O.h)},r.or=function(O){for(var S=Math.max(this.g.length,O.g.length),I=[],V=0;V<S;V++)I[V]=this.i(V)|O.i(V);return new d(I,this.h|O.h)},r.xor=function(O){for(var S=Math.max(this.g.length,O.g.length),I=[],V=0;V<S;V++)I[V]=this.i(V)^O.i(V);return new d(I,this.h^O.h)};function Tt(O){for(var S=O.g.length+1,I=[],V=0;V<S;V++)I[V]=O.i(V)<<1|O.i(V-1)>>>31;return new d(I,O.h)}function xt(O,S){var I=S>>5;S%=32;for(var V=O.g.length-I,M=[],x=0;x<V;x++)M[x]=0<S?O.i(x+I)>>>S|O.i(x+I+1)<<32-S:O.i(x+I);return new d(M,O.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,dT=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=T,jr=d}).apply(typeof _v<"u"?_v:typeof self<"u"?self:typeof window<"u"?window:{});var Ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mT,Al,pT,kc,om,gT,yT,_T;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ic=="object"&&Ic];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)t:{var _=s;u=u.split(".");for(var A=0;A<u.length-1;A++){var k=u[A];if(!(k in _))break t;_=_[k]}u=u[u.length-1],A=_[u],m=m(A),m!=A&&m!=null&&t(_,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var _=0,A=!1,k={next:function(){if(!A&&_<u.length){var q=_++;return{value:m(q,u[q]),done:!1}}return A=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function g(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function T(u,m,_){return u.call.apply(u.bind,arguments)}function b(u,m,_){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,A),u.apply(m,k)}}return function(){return u.apply(m,arguments)}}function R(u,m,_){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:b,R.apply(null,arguments)}function H(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function z(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(A,k,q){for(var et=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)et[Pt-2]=arguments[Pt];return m.prototype[k].apply(A,et)}}function tt(u){const m=u.length;if(0<m){const _=Array(m);for(let A=0;A<m;A++)_[A]=u[A];return _}return[]}function W(u,m){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(g(A)){const k=u.length||0,q=A.length||0;u.length=k+q;for(let et=0;et<q;et++)u[k+et]=A[et]}else u.push(A)}}class dt{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function mt(u){return/^[\s\xa0]*$/.test(u)}function ht(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function qt(u){return qt[" "](u),u}qt[" "]=function(){};var Tt=ht().indexOf("Gecko")!=-1&&!(ht().toLowerCase().indexOf("webkit")!=-1&&ht().indexOf("Edge")==-1)&&!(ht().indexOf("Trident")!=-1||ht().indexOf("MSIE")!=-1)&&ht().indexOf("Edge")==-1;function xt(u,m,_){for(const A in u)m.call(_,u[A],A,u)}function O(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function S(u){const m={};for(const _ in u)m[_]=u[_];return m}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(u,m){let _,A;for(let k=1;k<arguments.length;k++){A=arguments[k];for(_ in A)u[_]=A[_];for(let q=0;q<I.length;q++)_=I[q],Object.prototype.hasOwnProperty.call(A,_)&&(u[_]=A[_])}}function M(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function x(u){p.setTimeout(()=>{throw u},0)}function C(){var u=Bt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ve{constructor(){this.h=this.g=null}add(m,_){const A=Zt.get();A.set(m,_),this.h?this.h.next=A:this.g=A,this.h=A}}var Zt=new dt(()=>new G,u=>u.reset());class G{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let nt,lt=!1,Bt=new ve,D=()=>{const u=p.Promise.resolve(void 0);nt=()=>{u.then(Z)}};var Z=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(_){x(_)}var m=Zt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}lt=!1};function it(){this.s=this.s,this.C=this.C}it.prototype.s=!1,it.prototype.ma=function(){this.s||(this.s=!0,this.N())},it.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var ct=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,m),p.removeEventListener("test",_,m)}catch{}return u})();function bt(u,m){if(J.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Tt){t:{try{qt(m.nodeName);var k=!0;break t}catch{}k=!1}k||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:vt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&bt.aa.h.call(this)}}z(bt,J);var vt={2:"touch",3:"pen",4:"mouse"};bt.prototype.h=function(){bt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),Kt=0;function ot(u,m,_,A,k){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!A,this.ha=k,this.key=++Kt,this.da=this.fa=!1}function Mt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function jt(u){this.src=u,this.g={},this.h=0}jt.prototype.add=function(u,m,_,A,k){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var et=Zn(u,m,A,k);return-1<et?(m=u[et],_||(m.fa=!1)):(m=new ot(m,this.src,q,!!A,k),m.fa=_,u.push(m)),m};function nn(u,m){var _=m.type;if(_ in u.g){var A=u.g[_],k=Array.prototype.indexOf.call(A,m,void 0),q;(q=0<=k)&&Array.prototype.splice.call(A,k,1),q&&(Mt(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Zn(u,m,_,A){for(var k=0;k<u.length;++k){var q=u[k];if(!q.da&&q.listener==m&&q.capture==!!_&&q.ha==A)return k}return-1}var Wn="closure_lm_"+(1e6*Math.random()|0),rr={};function Ks(u,m,_,A,k){if(Array.isArray(m)){for(var q=0;q<m.length;q++)Ks(u,m[q],_,A,k);return null}return _=iu(_),u&&u[Ee]?u.K(m,_,y(A)?!!A.capture:!1,k):wn(u,m,_,!1,A,k)}function wn(u,m,_,A,k,q){if(!m)throw Error("Invalid event type");var et=y(k)?!!k.capture:!!k,Pt=Xs(u);if(Pt||(u[Wn]=Pt=new jt(u)),_=Pt.add(m,_,A,et,q),_.proxy)return _;if(A=Oh(),_.proxy=A,A.src=u,A.listener=_,u.addEventListener)ct||(k=et),k===void 0&&(k=!1),u.addEventListener(m.toString(),A,k);else if(u.attachEvent)u.attachEvent(ts(m.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Oh(){function u(_){return m.call(u.src,u.listener,_)}const m=Vh;return u}function co(u,m,_,A,k){if(Array.isArray(m))for(var q=0;q<m.length;q++)co(u,m[q],_,A,k);else A=y(A)?!!A.capture:!!A,_=iu(_),u&&u[Ee]?(u=u.i,m=String(m).toString(),m in u.g&&(q=u.g[m],_=Zn(q,_,A,k),-1<_&&(Mt(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete u.g[m],u.h--)))):u&&(u=Xs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Zn(m,_,A,k)),(_=-1<u?m[u]:null)&&Ys(_))}function Ys(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ee])nn(m.i,u);else{var _=u.type,A=u.proxy;m.removeEventListener?m.removeEventListener(_,A,u.capture):m.detachEvent?m.detachEvent(ts(_),A):m.addListener&&m.removeListener&&m.removeListener(A),(_=Xs(m))?(nn(_,u),_.h==0&&(_.src=null,m[Wn]=null)):Mt(u)}}}function ts(u){return u in rr?rr[u]:rr[u]="on"+u}function Vh(u,m){if(u.da)u=!0;else{m=new bt(m,this);var _=u.listener,A=u.ha||u.src;u.fa&&Ys(u),u=_.call(A,m)}return u}function Xs(u){return u=u[Wn],u instanceof jt?u:null}var ho="__closure_events_fn_"+(1e9*Math.random()>>>0);function iu(u){return typeof u=="function"?u:(u[ho]||(u[ho]=function(m){return u.handleEvent(m)}),u[ho])}function ce(){it.call(this),this.i=new jt(this),this.M=this,this.F=null}z(ce,it),ce.prototype[Ee]=!0,ce.prototype.removeEventListener=function(u,m,_,A){co(this,u,m,_,A)};function Yt(u,m){var _,A=u.F;if(A)for(_=[];A;A=A.F)_.push(A);if(u=u.M,A=m.type||m,typeof m=="string")m=new J(m,u);else if(m instanceof J)m.target=m.target||u;else{var k=m;m=new J(A,u),V(m,k)}if(k=!0,_)for(var q=_.length-1;0<=q;q--){var et=m.g=_[q];k=dn(et,A,!0,m)&&k}if(et=m.g=u,k=dn(et,A,!0,m)&&k,k=dn(et,A,!1,m)&&k,_)for(q=0;q<_.length;q++)et=m.g=_[q],k=dn(et,A,!1,m)&&k}ce.prototype.N=function(){if(ce.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],A=0;A<_.length;A++)Mt(_[A]);delete u.g[m],u.h--}}this.F=null},ce.prototype.K=function(u,m,_,A){return this.i.add(String(u),m,!1,_,A)},ce.prototype.L=function(u,m,_,A){return this.i.add(String(u),m,!0,_,A)};function dn(u,m,_,A){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var k=!0,q=0;q<m.length;++q){var et=m[q];if(et&&!et.da&&et.capture==_){var Pt=et.listener,De=et.ha||et.src;et.fa&&nn(u.i,et),k=Pt.call(De,A)!==!1&&k}}return k&&!A.defaultPrevented}function Xe(u,m,_){if(typeof u=="function")_&&(u=R(u,_));else if(u&&typeof u.handleEvent=="function")u=R(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(u,m||0)}function ru(u){u.g=Xe(()=>{u.g=null,u.i&&(u.i=!1,ru(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Mh extends it{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ru(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function es(u){it.call(this),this.h=u,this.g={}}z(es,it);var ns=[];function is(u){xt(u.g,function(m,_){this.g.hasOwnProperty(_)&&Ys(m)},u),u.g={}}es.prototype.N=function(){es.aa.N.call(this),is(this)},es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jn=p.JSON.stringify,$s=p.JSON.parse,rs=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function fo(){}fo.prototype.h=null;function mo(u){return u.h||(u.h=u.i())}function po(){}var Ai={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Si(){J.call(this,"d")}z(Si,J);function go(){J.call(this,"c")}z(go,J);var Jn={},yo=null;function sr(){return yo=yo||new ce}Jn.La="serverreachability";function Zs(u){J.call(this,Jn.La,u)}z(Zs,J);function ar(u){const m=sr();Yt(m,new Zs(m))}Jn.STAT_EVENT="statevent";function su(u,m){J.call(this,Jn.STAT_EVENT,u),this.stat=m}z(su,J);function ae(u){const m=sr();Yt(m,new su(m,u))}Jn.Ma="timingevent";function Ce(u,m){J.call(this,Jn.Ma,u),this.size=m}z(Ce,J);function Te(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function bn(){this.g=!0}bn.prototype.xa=function(){this.g=!1};function _o(u,m,_,A,k,q){u.info(function(){if(u.g)if(q)for(var et="",Pt=q.split("&"),De=0;De<Pt.length;De++){var kt=Pt[De].split("=");if(1<kt.length){var Pe=kt[0];kt=kt[1];var Ne=Pe.split("_");et=2<=Ne.length&&Ne[1]=="type"?et+(Pe+"="+kt+"&"):et+(Pe+"=redacted&")}}else et=null;else et=q;return"XMLHTTP REQ ("+A+") [attempt "+k+"]: "+m+`
`+_+`
`+et})}function xh(u,m,_,A,k,q,et){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+k+"]: "+m+`
`+_+`
`+q+" "+et})}function or(u,m,_,A){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+ss(u,_)+(A?" "+A:"")})}function au(u,m){u.info(function(){return"TIMEOUT: "+m})}bn.prototype.info=function(){};function ss(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var A=_[u];if(!(2>A.length)){var k=A[1];if(Array.isArray(k)&&!(1>k.length)){var q=k[0];if(q!="noop"&&q!="stop"&&q!="close")for(var et=1;et<k.length;et++)k[et]=""}}}}return jn(_)}catch{return m}}var lr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ti;function ei(){}z(ei,fo),ei.prototype.g=function(){return new XMLHttpRequest},ei.prototype.i=function(){return{}},ti=new ei;function rn(u,m,_,A){this.j=u,this.i=m,this.l=_,this.R=A||1,this.U=new es(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new de}function de(){this.i=null,this.g="",this.h=!1}var vo={},Ws={};function qn(u,m,_){u.L=1,u.v=cs(mn(m)),u.m=_,u.P=!0,bi(u,null)}function bi(u,m){u.F=Date.now(),as(u),u.A=mn(u.v);var _=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),bo(_.i,"t",A),u.C=0,_=u.j.J,u.h=new de,u.g=Au(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Mh(R(u.Y,u,u.g),u.O)),m=u.U,_=u.g,A=u.ca;var k="readystatechange";Array.isArray(k)||(k&&(ns[0]=k.toString()),k=ns);for(var q=0;q<k.length;q++){var et=Ks(_,k[q],A||m.handleEvent,!1,m.h||m);if(!et)break;m.g[et.key]=et}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),ar(),_o(u.i,u.u,u.A,u.l,u.R,u.m)}rn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Dn(u)==3?m.j():this.Y(u)},rn.prototype.Y=function(u){try{if(u==this.g)t:{const Ne=Dn(this.g);var m=this.g.Ba();const Mi=this.g.Z();if(!(3>Ne)&&(Ne!=3||this.g&&(this.h.h||this.g.oa()||mu(this.g)))){this.J||Ne!=4||m==7||(m==8||0>=Mi?ar(3):ar(2)),ur(this);var _=this.g.Z();this.X=_;e:if(ou(this)){var A=mu(this.g);u="";var k=A.length,q=Dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){je(this),ni(this);var et="";break e}this.h.i=new p.TextDecoder}for(m=0;m<k;m++)this.h.h=!0,u+=this.h.i.decode(A[m],{stream:!(q&&m==k-1)});A.length=0,this.h.g+=u,this.C=0,et=this.h.g}else et=this.g.oa();if(this.o=_==200,xh(this.i,this.u,this.A,this.l,this.R,Ne,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Pt,De=this.g;if((Pt=De.g?De.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mt(Pt)){var kt=Pt;break e}}kt=null}if(_=kt)or(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,os(this,_);else{this.o=!1,this.s=3,ae(12),je(this),ni(this);break t}}if(this.P){_=!0;let qe;for(;!this.J&&this.C<et.length;)if(qe=lu(this,et),qe==Ws){Ne==4&&(this.s=4,ae(14),_=!1),or(this.i,this.l,null,"[Incomplete Response]");break}else if(qe==vo){this.s=4,ae(15),or(this.i,this.l,et,"[Invalid Chunk]"),_=!1;break}else or(this.i,this.l,qe,null),os(this,qe);if(ou(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||et.length!=0||this.h.h||(this.s=1,ae(16),_=!1),this.o=this.o&&_,!_)or(this.i,this.l,et,"[Invalid Chunked Response]"),je(this),ni(this);else if(0<et.length&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.ba&&!Pe.M&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+et.length),_s(Pe),Pe.M=!0,ae(11))}}else or(this.i,this.l,et,null),os(this,et);Ne==4&&je(this),this.o&&!this.J&&(Ne==4?vu(this.j,this):(this.o=!1,as(this)))}else zh(this.g),_==400&&0<et.indexOf("Unknown SID")?(this.s=3,ae(12)):(this.s=0,ae(13)),je(this),ni(this)}}}catch{}finally{}};function ou(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function lu(u,m){var _=u.C,A=m.indexOf(`
`,_);return A==-1?Ws:(_=Number(m.substring(_,A)),isNaN(_)?vo:(A+=1,A+_>m.length?Ws:(m=m.slice(A,A+_),u.C=A+_,m)))}rn.prototype.cancel=function(){this.J=!0,je(this)};function as(u){u.S=Date.now()+u.I,uu(u,u.I)}function uu(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Te(R(u.ba,u),m)}function ur(u){u.B&&(p.clearTimeout(u.B),u.B=null)}rn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(au(this.i,this.A),this.L!=2&&(ar(),ae(17)),je(this),this.s=2,ni(this)):uu(this,this.S-u)};function ni(u){u.j.G==0||u.J||vu(u.j,u)}function je(u){ur(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,is(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function os(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||Eo(_.h,u))){if(!u.K&&Eo(_.h,u)&&_.G==3){try{var A=_.Da.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var k=A;if(k[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)ca(_),la(_);else break t;No(_),ae(18)}}else _.za=k[1],0<_.za-_.T&&37500>k[2]&&_.F&&_.v==0&&!_.C&&(_.C=Te(R(_.Za,_),6e3));if(1>=ta(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Vi(_,11)}else if((u.K||_.g==u)&&ca(_),!mt(m))for(k=_.Da.g.parse(m),m=0;m<k.length;m++){let kt=k[m];if(_.T=kt[0],kt=kt[1],_.G==2)if(kt[0]=="c"){_.K=kt[1],_.ia=kt[2];const Pe=kt[3];Pe!=null&&(_.la=Pe,_.j.info("VER="+_.la));const Ne=kt[4];Ne!=null&&(_.Aa=Ne,_.j.info("SVER="+_.Aa));const Mi=kt[5];Mi!=null&&typeof Mi=="number"&&0<Mi&&(A=1.5*Mi,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const qe=u.g;if(qe){const ui=qe.g?qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ui){var q=A.h;q.g||ui.indexOf("spdy")==-1&&ui.indexOf("quic")==-1&&ui.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(ea(q,q.h),q.h=null))}if(A.D){const Vo=qe.g?qe.g.getResponseHeader("X-HTTP-Session-Id"):null;Vo&&(A.ya=Vo,Wt(A.I,A.D,Vo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var et=u;if(A.qa=Tu(A,A.J?A.ia:null,A.W),et.K){sn(A.h,et);var Pt=et,De=A.L;De&&(Pt.I=De),Pt.B&&(ur(Pt),as(Pt)),A.g=et}else yu(A);0<_.i.length&&ua(_)}else kt[0]!="stop"&&kt[0]!="close"||Vi(_,7);else _.G==3&&(kt[0]=="stop"||kt[0]=="close"?kt[0]=="stop"?Vi(_,7):Co(_):kt[0]!="noop"&&_.l&&_.l.ta(kt),_.v=0)}}ar(4)}catch{}}var cu=class{constructor(u,m){this.g=u,this.map=m}};function Ri(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Js(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ta(u){return u.h?1:u.g?u.g.size:0}function Eo(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ea(u,m){u.g?u.g.add(m):u.h=m}function sn(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ri.prototype.cancel=function(){if(this.i=To(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function To(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return tt(u.i)}function Ph(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var m=[],_=u.length,A=0;A<_;A++)m.push(u[A]);return m}m=[],_=0;for(A in u)m[_++]=u[A];return m}function na(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const A in u)m[_++]=A;return m}}}function Ao(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=na(u),A=Ph(u),k=A.length,q=0;q<k;q++)m.call(void 0,A[q],_&&_[q],u)}var ls=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kh(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var A=u[_].indexOf("="),k=null;if(0<=A){var q=u[_].substring(0,A);k=u[_].substring(A+1)}else q=u[_];m(q,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Ae(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ae){this.h=u.h,us(this,u.j),this.o=u.o,this.g=u.g,cr(this,u.s),this.l=u.l;var m=u.i,_=new Ci;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Ii(this,_),this.m=u.m}else u&&(m=String(u).match(ls))?(this.h=!1,us(this,m[1]||"",!0),this.o=Rn(m[2]||""),this.g=Rn(m[3]||"",!0),cr(this,m[4]),this.l=Rn(m[5]||"",!0),Ii(this,m[6]||"",!0),this.m=Rn(m[7]||"")):(this.h=!1,this.i=new Ci(null,this.h))}Ae.prototype.toString=function(){var u=[],m=this.j;m&&u.push(hs(m,So,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(hs(m,So,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(hs(_,_.charAt(0)=="/"?Uh:wo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",hs(_,ia)),u.join("")};function mn(u){return new Ae(u)}function us(u,m,_){u.j=_?Rn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function cr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Ii(u,m,_){m instanceof Ci?(u.i=m,fu(u.i,u.h)):(_||(m=hs(m,Lh)),u.i=new Ci(m,u.h))}function Wt(u,m,_){u.i.set(m,_)}function cs(u){return Wt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Rn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function hs(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,hu),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function hu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var So=/[#\/\?@]/g,wo=/[#\?:]/g,Uh=/[#\?]/g,Lh=/[#\?@]/g,ia=/#/g;function Ci(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function In(u){u.g||(u.g=new Map,u.h=0,u.i&&kh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Ci.prototype,r.add=function(u,m){In(this),this.i=null,u=ii(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function Di(u,m){In(u),m=ii(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ni(u,m){return In(u),m=ii(u,m),u.g.has(m)}r.forEach=function(u,m){In(this),this.g.forEach(function(_,A){_.forEach(function(k){u.call(m,k,A,this)},this)},this)},r.na=function(){In(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let A=0;A<m.length;A++){const k=u[A];for(let q=0;q<k.length;q++)_.push(m[A])}return _},r.V=function(u){In(this);let m=[];if(typeof u=="string")Ni(this,u)&&(m=m.concat(this.g.get(ii(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return In(this),this.i=null,u=ii(this,u),Ni(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function bo(u,m,_){Di(u,m),0<_.length&&(u.i=null,u.g.set(ii(u,m),tt(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var A=m[_];const q=encodeURIComponent(String(A)),et=this.V(A);for(A=0;A<et.length;A++){var k=q;et[A]!==""&&(k+="="+encodeURIComponent(String(et[A]))),u.push(k)}}return this.i=u.join("&")};function ii(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function fu(u,m){m&&!u.j&&(In(u),u.i=null,u.g.forEach(function(_,A){var k=A.toLowerCase();A!=k&&(Di(this,A),bo(this,k,_))},u)),u.j=m}function fs(u,m){const _=new bn;if(p.Image){const A=new Image;A.onload=H(Cn,_,"TestLoadImage: loaded",!0,m,A),A.onerror=H(Cn,_,"TestLoadImage: error",!1,m,A),A.onabort=H(Cn,_,"TestLoadImage: abort",!1,m,A),A.ontimeout=H(Cn,_,"TestLoadImage: timeout",!1,m,A),p.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else m(!1)}function Hn(u,m){const _=new bn,A=new AbortController,k=setTimeout(()=>{A.abort(),Cn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:A.signal}).then(q=>{clearTimeout(k),q.ok?Cn(_,"TestPingServer: ok",!0,m):Cn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(k),Cn(_,"TestPingServer: error",!1,m)})}function Cn(u,m,_,A,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),A(_)}catch{}}function ds(){this.g=new rs}function ri(u,m,_){const A=_||"";try{Ao(u,function(k,q){let et=k;y(k)&&(et=jn(k)),m.push(A+q+"="+encodeURIComponent(et))})}catch(k){throw m.push(A+"type="+encodeURIComponent("_badmap")),k}}function hr(u){this.l=u.Ub||null,this.j=u.eb||!1}z(hr,fo),hr.prototype.g=function(){return new Oi(this.l,this.j)},hr.prototype.i=(function(u){return function(){return u}})({});function Oi(u,m){ce.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}z(Oi,ce),r=Oi.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,ai(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,si(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ai(this)),this.g&&(this.readyState=3,ai(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ro(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ro(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?si(this):ai(this),this.readyState==3&&Ro(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,si(this))},r.Qa=function(u){this.g&&(this.response=u,si(this))},r.ga=function(){this.g&&si(this)};function si(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ai(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function ai(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Oi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Io(u){let m="";return xt(u,function(_,A){m+=A,m+=":",m+=_,m+=`\r
`}),m}function xe(u,m,_){t:{for(A in _){var A=!1;break t}A=!0}A||(_=Io(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Wt(u,m,_))}function Ft(u){ce.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}z(Ft,ce);var ra=/^https?$/i,ms=["POST","PUT"];r=Ft.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ti.g(),this.v=this.o?mo(this.o):mo(ti),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(q){du(this,q);return}if(u=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var k in A)_.set(k,A[k]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const q of A.keys())_.set(q,A.get(q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),k=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(ms,m,void 0))||A||k||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,et]of _)this.g.setRequestHeader(q,et);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ps(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){du(this,q)}};function du(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,sa(u),oi(u)}function sa(u){u.A||(u.A=!0,Yt(u,"complete"),Yt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Yt(this,"complete"),Yt(this,"abort"),oi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),oi(this,!0)),Ft.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?aa(this):this.bb())},r.bb=function(){aa(this)};function aa(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Dn(u)!=4||u.Z()!=2)){if(u.u&&Dn(u)==4)Xe(u.Ea,0,u);else if(Yt(u,"readystatechange"),Dn(u)==4){u.h=!1;try{const et=u.Z();t:switch(et){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var _;if(!(_=m)){var A;if(A=et===0){var k=String(u.D).match(ls)[1]||null;!k&&p.self&&p.self.location&&(k=p.self.location.protocol.slice(0,-1)),A=!ra.test(k?k.toLowerCase():"")}_=A}if(_)Yt(u,"complete"),Yt(u,"success");else{u.m=6;try{var q=2<Dn(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",sa(u)}}finally{oi(u)}}}}function oi(u,m){if(u.g){ps(u);const _=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Yt(u,"ready");try{_.onreadystatechange=A}catch{}}}function ps(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Dn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Dn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),$s(m)}};function mu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function zh(u){const m={};u=(u.g&&2<=Dn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(mt(u[A]))continue;var _=M(u[A]);const k=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=m[k]||[];m[k]=q,q.push(_)}O(m,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gs(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function oa(u){this.Aa=0,this.i=[],this.j=new bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gs("baseRetryDelayMs",5e3,u),this.cb=gs("retryDelaySeedMs",1e4,u),this.Wa=gs("forwardChannelMaxRetries",2,u),this.wa=gs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ri(u&&u.concurrentRequestLimit),this.Da=new ds,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=oa.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,A){ae(0),this.W=u,this.H=m||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=Tu(this,null,this.W),ua(this)};function Co(u){if(pu(u),u.G==3){var m=u.U++,_=mn(u.I);if(Wt(_,"SID",u.K),Wt(_,"RID",m),Wt(_,"TYPE","terminate"),ys(u,_),m=new rn(u,u.j,m),m.L=2,m.v=cs(mn(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=m.v,_=!0),_||(m.g=Au(m.j,null),m.g.ea(m.v)),m.F=Date.now(),as(m)}Eu(u)}function la(u){u.g&&(_s(u),u.g.cancel(),u.g=null)}function pu(u){la(u),u.u&&(p.clearTimeout(u.u),u.u=null),ca(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function ua(u){if(!Js(u.h)&&!u.s){u.s=!0;var m=u.Ga;nt||D(),lt||(nt(),lt=!0),Bt.add(m,u),u.B=0}}function Bh(u,m){return ta(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Te(R(u.Ga,u,m),Oo(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const k=new rn(this,this.j,u);let q=this.o;if(this.S&&(q?(q=S(q),V(q,this.S)):q=this.S),this.m!==null||this.O||(k.H=q,q=null),this.P)t:{for(var m=0,_=0;_<this.i.length;_++){e:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(m+=A,4096<m){m=_;break t}if(m===4096||_===this.i.length-1){m=_+1;break t}}m=1e3}else m=1e3;m=gu(this,k,m),_=mn(this.I),Wt(_,"RID",u),Wt(_,"CVER",22),this.D&&Wt(_,"X-HTTP-Session-Id",this.D),ys(this,_),q&&(this.O?m="headers="+encodeURIComponent(String(Io(q)))+"&"+m:this.m&&xe(_,this.m,q)),ea(this.h,k),this.Ua&&Wt(_,"TYPE","init"),this.P?(Wt(_,"$req",m),Wt(_,"SID","null"),k.T=!0,qn(k,_,null)):qn(k,_,m),this.G=2}}else this.G==3&&(u?Do(this,u):this.i.length==0||Js(this.h)||Do(this))};function Do(u,m){var _;m?_=m.l:_=u.U++;const A=mn(u.I);Wt(A,"SID",u.K),Wt(A,"RID",_),Wt(A,"AID",u.T),ys(u,A),u.m&&u.o&&xe(A,u.m,u.o),_=new rn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=gu(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ea(u.h,_),qn(_,A,m)}function ys(u,m){u.H&&xt(u.H,function(_,A){Wt(m,A,_)}),u.l&&Ao({},function(_,A){Wt(m,A,_)})}function gu(u,m,_){_=Math.min(u.i.length,_);var A=u.l?R(u.l.Na,u.l,u):null;t:{var k=u.i;let q=-1;for(;;){const et=["count="+_];q==-1?0<_?(q=k[0].g,et.push("ofs="+q)):q=0:et.push("ofs="+q);let Pt=!0;for(let De=0;De<_;De++){let kt=k[De].g;const Pe=k[De].map;if(kt-=q,0>kt)q=Math.max(0,k[De].g-100),Pt=!1;else try{ri(Pe,et,"req"+kt+"_")}catch{A&&A(Pe)}}if(Pt){A=et.join("&");break t}}}return u=u.i.splice(0,_),m.D=u,A}function yu(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;nt||D(),lt||(nt(),lt=!0),Bt.add(m,u),u.v=0}}function No(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Te(R(u.Fa,u),Oo(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,_u(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Te(R(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ae(10),la(this),_u(this))};function _s(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function _u(u){u.g=new rn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=mn(u.qa);Wt(m,"RID","rpc"),Wt(m,"SID",u.K),Wt(m,"AID",u.T),Wt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Wt(m,"TO",u.ja),Wt(m,"TYPE","xmlhttp"),ys(u,m),u.m&&u.o&&xe(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=cs(mn(m)),_.m=null,_.P=!0,bi(_,u)}r.Za=function(){this.C!=null&&(this.C=null,la(this),No(this),ae(19))};function ca(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function vu(u,m){var _=null;if(u.g==m){ca(u),_s(u),u.g=null;var A=2}else if(Eo(u.h,m))_=m.D,sn(u.h,m),A=1;else return;if(u.G!=0){if(m.o)if(A==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var k=u.B;A=sr(),Yt(A,new Ce(A,_)),ua(u)}else yu(u);else if(k=m.s,k==3||k==0&&0<m.X||!(A==1&&Bh(u,m)||A==2&&No(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),k){case 1:Vi(u,5);break;case 4:Vi(u,10);break;case 3:Vi(u,6);break;default:Vi(u,2)}}}function Oo(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Vi(u,m){if(u.j.info("Error code "+m),m==2){var _=R(u.fb,u),A=u.Xa;const k=!A;A=new Ae(A||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||us(A,"https"),cs(A),k?fs(A.toString(),_):Hn(A.toString(),_)}else ae(2);u.G=0,u.l&&u.l.sa(m),Eu(u),pu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ae(2)):(this.j.info("Failed to ping google.com"),ae(1))};function Eu(u){if(u.G=0,u.ka=[],u.l){const m=To(u.h);(m.length!=0||u.i.length!=0)&&(W(u.ka,m),W(u.ka,u.i),u.h.i.length=0,tt(u.i),u.i.length=0),u.l.ra()}}function Tu(u,m,_){var A=_ instanceof Ae?mn(_):new Ae(_);if(A.g!="")m&&(A.g=m+"."+A.g),cr(A,A.s);else{var k=p.location;A=k.protocol,m=m?m+"."+k.hostname:k.hostname,k=+k.port;var q=new Ae(null);A&&us(q,A),m&&(q.g=m),k&&cr(q,k),_&&(q.l=_),A=q}return _=u.D,m=u.ya,_&&m&&Wt(A,_,m),Wt(A,"VER",u.la),ys(u,A),A}function Au(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Ft(new hr({eb:_})):new Ft(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Su(){}r=Su.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ha(){}ha.prototype.g=function(u,m){return new an(u,m)};function an(u,m){ce.call(this),this.g=new oa(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!mt(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!mt(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new li(this)}z(an,ce),an.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){Co(this.g)},an.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=jn(u),u=_);m.i.push(new cu(m.Ya++,u)),m.G==3&&ua(m)},an.prototype.N=function(){this.g.l=null,delete this.j,Co(this.g),delete this.g,an.aa.N.call(this)};function wu(u){Si.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const _ in m){u=_;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}z(wu,Si);function bu(){go.call(this),this.status=1}z(bu,go);function li(u){this.g=u}z(li,Su),li.prototype.ua=function(){Yt(this.g,"a")},li.prototype.ta=function(u){Yt(this.g,new wu(u))},li.prototype.sa=function(u){Yt(this.g,new bu)},li.prototype.ra=function(){Yt(this.g,"b")},ha.prototype.createWebChannel=ha.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,_T=function(){return new ha},yT=function(){return sr()},gT=Jn,om={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lr.NO_ERROR=0,lr.TIMEOUT=8,lr.HTTP_ERROR=6,kc=lr,wi.COMPLETE="complete",pT=wi,po.EventType=Ai,Ai.OPEN="a",Ai.CLOSE="b",Ai.ERROR="c",Ai.MESSAGE="d",ce.prototype.listen=ce.prototype.K,Al=po,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,mT=Ft}).apply(typeof Ic<"u"?Ic:typeof self<"u"?self:typeof window<"u"?window:{});const vv="@firebase/firestore",Ev="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let so="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new Dm("@firebase/firestore");function Ba(){return qs.logLevel}function st(r,...t){if(qs.logLevel<=Nt.DEBUG){const n=t.map(qm);qs.debug(`Firestore (${so}): ${r}`,...n)}}function er(r,...t){if(qs.logLevel<=Nt.ERROR){const n=t.map(qm);qs.error(`Firestore (${so}): ${r}`,...n)}}function $a(r,...t){if(qs.logLevel<=Nt.WARN){const n=t.map(qm);qs.warn(`Firestore (${so}): ${r}`,...n)}}function qm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,vT(r,s,n)}function vT(r,t,n){let s=`FIRESTORE (${so}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw er(s),new Error(s)}function Qt(r,t,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||vT(t,l,s)}function St(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rt extends ir{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class NR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Je.UNAUTHENTICATED)))}shutdown(){}}class OR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class VR{constructor(t){this.t=t,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Qt(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let c=new Wi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Wi,t.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=c;t.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Wi)}}),0),d()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Qt(typeof s.accessToken=="string",31837,{l:s}),new ET(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Qt(t===null||typeof t=="string",2055,{h:t}),new Je(t)}}class MR{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xR{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new MR(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Je.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Tv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PR{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,An(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Qt(this.o===void 0,3512);const s=c=>{c.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,st("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>s(c)))};const l=c=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Tv(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Qt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Tv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=kR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=t.charAt(l[c]%62))}return s}}function Ot(r,t){return r<t?-1:r>t?1:0}function lm(r,t){const n=Math.min(r.length,t.length);for(let s=0;s<n;s++){const l=r.charAt(s),c=t.charAt(s);if(l!==c)return Fd(l)===Fd(c)?Ot(l,c):Fd(l)?1:-1}return Ot(r.length,t.length)}const UR=55296,LR=57343;function Fd(r){const t=r.charCodeAt(0);return t>=UR&&t<=LR}function Za(r,t,n){return r.length===t.length&&r.every(((s,l)=>n(s,t[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="__name__";class pi{constructor(t,n,s){n===void 0?n=0:n>t.length&&_t(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&_t(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return pi.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof pi?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let l=0;l<s;l++){const c=pi.compareSegments(t.get(l),n.get(l));if(c!==0)return c}return Ot(t.length,n.length)}static compareSegments(t,n){const s=pi.isNumericId(t),l=pi.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?pi.extractNumericId(t).compare(pi.extractNumericId(n)):lm(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return jr.fromString(t.substring(4,t.length-2))}}class re extends pi{construct(t,n,s){return new re(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new rt(K.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new re(n)}static emptyPath(){return new re([])}}const zR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ke extends pi{construct(t,n,s){return new Ke(t,n,s)}static isValidIdentifier(t){return zR.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ke.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Av}static keyField(){return new Ke([Av])}static fromServerFormat(t){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new rt(K.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;l<t.length;){const p=t[l];if(p==="\\"){if(l+1===t.length)throw new rt(K.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new rt(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=g,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(s+=p,l++):(c(),l++)}if(c(),d)throw new rt(K.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ke(n)}static emptyPath(){return new Ke([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(t){this.path=t}static fromPath(t){return new ft(re.fromString(t))}static fromName(t){return new ft(re.fromString(t).popFirst(5))}static empty(){return new ft(re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&re.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return re.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ft(new re(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(r,t,n){if(!n)throw new rt(K.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function BR(r,t,n,s){if(t===!0&&s===!0)throw new rt(K.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Sv(r){if(!ft.isDocumentKey(r))throw new rt(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function wv(r){if(ft.isDocumentKey(r))throw new rt(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function AT(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function fh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":_t(12329,{type:typeof r})}function Xn(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new rt(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fh(r);throw new rt(K.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(r,t){const n={typeString:r};return t&&(n.value=t),n}function $l(r,t){if(!AT(r))throw new rt(K.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const l=t[s].typeString,c="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new rt(K.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=-62135596800,Rv=1e6;class se{static now(){return se.fromMillis(Date.now())}static fromDate(t){return se.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*Rv);return new se(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new rt(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new rt(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<bv)throw new rt(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new rt(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Rv}_compareTo(t){return this.seconds===t.seconds?Ot(this.nanoseconds,t.nanoseconds):Ot(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:se._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if($l(t,se._jsonSchema))return new se(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-bv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}se._jsonSchemaVersion="firestore/timestamp/1.0",se._jsonSchema={type:Ie("string",se._jsonSchemaVersion),seconds:Ie("number"),nanoseconds:Ie("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{static fromTimestamp(t){return new At(t)}static min(){return new At(new se(0,0))}static max(){return new At(new se(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=-1;function jR(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=At.fromTimestamp(s===1e9?new se(n+1,0):new se(n,s));return new Hr(l,ft.empty(),t)}function qR(r){return new Hr(r.readTime,r.key,Ul)}class Hr{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Hr(At.min(),ft.empty(),Ul)}static max(){return new Hr(At.max(),ft.empty(),Ul)}}function HR(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=ft.comparator(r.documentKey,t.documentKey),n!==0?n:Ot(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(r){if(r.code!==K.FAILED_PRECONDITION||r.message!==GR)throw r;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&_t(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new $(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):$.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):$.reject(n)}static resolve(t){return new $(((n,s)=>{n(t)}))}static reject(t){return new $(((n,s)=>{s(t)}))}static waitFor(t){return new $(((n,s)=>{let l=0,c=0,d=!1;t.forEach((p=>{++l,p.next((()=>{++c,d&&c===l&&n()}),(g=>s(g)))})),d=!0,c===l&&n()}))}static or(t){let n=$.resolve(!1);for(const s of t)n=n.next((l=>l?$.resolve(l):s()));return n}static forEach(t,n){const s=[];return t.forEach(((l,c)=>{s.push(n.call(this,l,c))})),this.waitFor(s)}static mapArray(t,n){return new $(((s,l)=>{const c=t.length,d=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(t[y]).next((T=>{d[y]=T,++p,p===c&&s(d)}),(T=>l(T)))}}))}static doWhile(t,n){return new $(((s,l)=>{const c=()=>{t()===!0?n().next((()=>{c()}),l):s()};c()}))}}function QR(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function oo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}dh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm=-1;function mh(r){return r==null}function Zc(r){return r===0&&1/r==-1/0}function KR(r){return typeof r=="number"&&Number.isInteger(r)&&!Zc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="";function YR(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=Iv(t)),t=XR(r.get(n),t);return Iv(t)}function XR(r,t){let n=t;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case ST:n+="";break;default:n+=c}}return n}function Iv(r){return r+ST+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function Wr(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function wT(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t,n){this.comparator=t,this.root=n||Qe.EMPTY}insert(t,n){return new ue(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Qe.BLACK,null,null))}remove(t){return new ue(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Qe.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Cc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Cc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Cc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Cc(this.root,t,this.comparator,!0)}}class Cc{constructor(t,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=n?s(t.key,n):1,n&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Qe{constructor(t,n,s,l,c){this.key=t,this.value=n,this.color=s??Qe.RED,this.left=l??Qe.EMPTY,this.right=c??Qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,l,c){return new Qe(t??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let l=this;const c=s(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Qe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return Qe.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _t(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _t(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw _t(27949);return t+(this.isRed()?0:1)}}Qe.EMPTY=null,Qe.RED=!0,Qe.BLACK=!1;Qe.EMPTY=new class{constructor(){this.size=0}get key(){throw _t(57766)}get value(){throw _t(16141)}get color(){throw _t(16727)}get left(){throw _t(29726)}get right(){throw _t(36894)}copy(t,n,s,l,c){return this}insert(t,n,s){return new Qe(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t){this.comparator=t,this.data=new ue(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dv(this.data.getIterator())}getIteratorFrom(t){return new Dv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof Me)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Me(this.comparator);return n.data=t,n}}class Dv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(t){this.fields=t,t.sort(Ke.comparator)}static empty(){return new Sn([])}unionWith(t){let n=new Me(Ke.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new Sn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Za(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new bT("Invalid base64 string: "+c):c}})(t);return new Ye(n)}static fromUint8Array(t){const n=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(t);return new Ye(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ot(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ye.EMPTY_BYTE_STRING=new Ye("");const $R=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gr(r){if(Qt(!!r,39018),typeof r=="string"){let t=0;const n=$R.exec(r);if(Qt(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ye(r.seconds),nanos:ye(r.nanos)}}function ye(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Fr(r){return typeof r=="string"?Ye.fromBase64String(r):Ye.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="server_timestamp",IT="__type__",CT="__previous_value__",DT="__local_write_time__";function Fm(r){return(r?.mapValue?.fields||{})[IT]?.stringValue===RT}function ph(r){const t=r.mapValue.fields[CT];return Fm(t)?ph(t):t}function Ll(r){const t=Gr(r.mapValue.fields[DT].timestampValue);return new se(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(t,n,s,l,c,d,p,g,y,T){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=T}}const Wc="(default)";class zl{constructor(t,n){this.projectId=t,this.database=n||Wc}static empty(){return new zl("","")}get isDefaultDatabase(){return this.database===Wc}isEqual(t){return t instanceof zl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="__type__",WR="__max__",Dc={mapValue:{}},OT="__vector__",Jc="value";function Qr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Fm(r)?4:tI(r)?9007199254740991:JR(r)?10:11:_t(28295,{value:r})}function Ti(r,t){if(r===t)return!0;const n=Qr(r);if(n!==Qr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Ll(r).isEqual(Ll(t));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Gr(l.timestampValue),p=Gr(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(l,c){return Fr(l.bytesValue).isEqual(Fr(c.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(l,c){return ye(l.geoPointValue.latitude)===ye(c.geoPointValue.latitude)&&ye(l.geoPointValue.longitude)===ye(c.geoPointValue.longitude)})(r,t);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return ye(l.integerValue)===ye(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=ye(l.doubleValue),p=ye(c.doubleValue);return d===p?Zc(d)===Zc(p):isNaN(d)&&isNaN(p)}return!1})(r,t);case 9:return Za(r.arrayValue.values||[],t.arrayValue.values||[],Ti);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},p=c.mapValue.fields||{};if(Cv(d)!==Cv(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!Ti(d[g],p[g])))return!1;return!0})(r,t);default:return _t(52216,{left:r})}}function Bl(r,t){return(r.values||[]).find((n=>Ti(n,t)))!==void 0}function Wa(r,t){if(r===t)return 0;const n=Qr(r),s=Qr(t);if(n!==s)return Ot(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ot(r.booleanValue,t.booleanValue);case 2:return(function(c,d){const p=ye(c.integerValue||c.doubleValue),g=ye(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,t);case 3:return Nv(r.timestampValue,t.timestampValue);case 4:return Nv(Ll(r),Ll(t));case 5:return lm(r.stringValue,t.stringValue);case 6:return(function(c,d){const p=Fr(c),g=Fr(d);return p.compareTo(g)})(r.bytesValue,t.bytesValue);case 7:return(function(c,d){const p=c.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const T=Ot(p[y],g[y]);if(T!==0)return T}return Ot(p.length,g.length)})(r.referenceValue,t.referenceValue);case 8:return(function(c,d){const p=Ot(ye(c.latitude),ye(d.latitude));return p!==0?p:Ot(ye(c.longitude),ye(d.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return Ov(r.arrayValue,t.arrayValue);case 10:return(function(c,d){const p=c.fields||{},g=d.fields||{},y=p[Jc]?.arrayValue,T=g[Jc]?.arrayValue,b=Ot(y?.values?.length||0,T?.values?.length||0);return b!==0?b:Ov(y,T)})(r.mapValue,t.mapValue);case 11:return(function(c,d){if(c===Dc.mapValue&&d===Dc.mapValue)return 0;if(c===Dc.mapValue)return 1;if(d===Dc.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=d.fields||{},T=Object.keys(y);g.sort(),T.sort();for(let b=0;b<g.length&&b<T.length;++b){const R=lm(g[b],T[b]);if(R!==0)return R;const H=Wa(p[g[b]],y[T[b]]);if(H!==0)return H}return Ot(g.length,T.length)})(r.mapValue,t.mapValue);default:throw _t(23264,{he:n})}}function Nv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Ot(r,t);const n=Gr(r),s=Gr(t),l=Ot(n.seconds,s.seconds);return l!==0?l:Ot(n.nanos,s.nanos)}function Ov(r,t){const n=r.values||[],s=t.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=Wa(n[l],s[l]);if(c)return c}return Ot(n.length,s.length)}function Ja(r){return um(r)}function um(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Gr(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Fr(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return ft.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=um(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${um(n.fields[d])}`;return l+"}"})(r.mapValue):_t(61005,{value:r})}function Uc(r){switch(Qr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ph(r);return t?16+Uc(t):16;case 5:return 2*r.stringValue.length;case 6:return Fr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+Uc(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return Wr(s.fields,((c,d)=>{l+=c.length+Uc(d)})),l})(r.mapValue);default:throw _t(13486,{value:r})}}function Vv(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function cm(r){return!!r&&"integerValue"in r}function Qm(r){return!!r&&"arrayValue"in r}function Mv(r){return!!r&&"nullValue"in r}function xv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Lc(r){return!!r&&"mapValue"in r}function JR(r){return(r?.mapValue?.fields||{})[NT]?.stringValue===OT}function Dl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return Wr(r.mapValue.fields,((n,s)=>t.mapValue.fields[n]=Dl(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Dl(r.arrayValue.values[n]);return t}return{...r}}function tI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===WR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(t){this.value=t}static empty(){return new fn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Lc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Dl(n)}setAll(t){let n=Ke.emptyPath(),s={},l=[];t.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,s,l),s={},l=[],n=p.popLast()}d?s[p.lastSegment()]=Dl(d):l.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(t){const n=this.field(t.popLast());Lc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ti(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=n.mapValue.fields[t.get(s)];Lc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,s){Wr(n,((l,c)=>t[l]=c));for(const l of s)delete t[l]}clone(){return new fn(Dl(this.value))}}function VT(r){const t=[];return Wr(r.fields,((n,s)=>{const l=new Ke([n]);if(Lc(s)){const c=VT(s.mapValue).fields;if(c.length===0)t.push(l);else for(const d of c)t.push(l.child(d))}else t.push(l)})),new Sn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t,n,s,l,c,d,p){this.key=t,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(t){return new tn(t,0,At.min(),At.min(),At.min(),fn.empty(),0)}static newFoundDocument(t,n,s,l){return new tn(t,1,n,At.min(),s,l,0)}static newNoDocument(t,n){return new tn(t,2,n,At.min(),At.min(),fn.empty(),0)}static newUnknownDocument(t,n){return new tn(t,3,n,At.min(),At.min(),fn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(At.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof tn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(t,n){this.position=t,this.inclusive=n}}function Pv(r,t,n){let s=0;for(let l=0;l<r.position.length;l++){const c=t[l],d=r.position[l];if(c.field.isKeyField()?s=ft.comparator(ft.fromName(d.referenceValue),n.key):s=Wa(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function kv(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Ti(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(t,n="asc"){this.field=t,this.dir=n}}function eI(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{}class Re extends MT{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new iI(t,n,s):n==="array-contains"?new aI(t,s):n==="in"?new oI(t,s):n==="not-in"?new lI(t,s):n==="array-contains-any"?new uI(t,s):new Re(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new rI(t,s):new sI(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wa(n,this.value)):n!==null&&Qr(this.value)===Qr(n)&&this.matchesComparison(Wa(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return _t(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends MT{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new $n(t,n)}matches(t){return xT(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xT(r){return r.op==="and"}function PT(r){return nI(r)&&xT(r)}function nI(r){for(const t of r.filters)if(t instanceof $n)return!1;return!0}function hm(r){if(r instanceof Re)return r.field.canonicalString()+r.op.toString()+Ja(r.value);if(PT(r))return r.filters.map((t=>hm(t))).join(",");{const t=r.filters.map((n=>hm(n))).join(",");return`${r.op}(${t})`}}function kT(r,t){return r instanceof Re?(function(s,l){return l instanceof Re&&s.op===l.op&&s.field.isEqual(l.field)&&Ti(s.value,l.value)})(r,t):r instanceof $n?(function(s,l){return l instanceof $n&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,d,p)=>c&&kT(d,l.filters[p])),!0):!1})(r,t):void _t(19439)}function UT(r){return r instanceof Re?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ja(n.value)}`})(r):r instanceof $n?(function(n){return n.op.toString()+" {"+n.getFilters().map(UT).join(" ,")+"}"})(r):"Filter"}class iI extends Re{constructor(t,n,s){super(t,n,s),this.key=ft.fromName(s.referenceValue)}matches(t){const n=ft.comparator(t.key,this.key);return this.matchesComparison(n)}}class rI extends Re{constructor(t,n){super(t,"in",n),this.keys=LT("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class sI extends Re{constructor(t,n){super(t,"not-in",n),this.keys=LT("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function LT(r,t){return(t.arrayValue?.values||[]).map((n=>ft.fromName(n.referenceValue)))}class aI extends Re{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Qm(n)&&Bl(n.arrayValue,this.value)}}class oI extends Re{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Bl(this.value.arrayValue,n)}}class lI extends Re{constructor(t,n){super(t,"not-in",n)}matches(t){if(Bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Bl(this.value.arrayValue,n)}}class uI extends Re{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Qm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Bl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(t,n=null,s=[],l=[],c=null,d=null,p=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=p,this.Te=null}}function Uv(r,t=null,n=[],s=[],l=null,c=null,d=null){return new cI(r,t,n,s,l,c,d)}function Km(r){const t=St(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>hm(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),mh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Ja(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Ja(s))).join(",")),t.Te=n}return t.Te}function Ym(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!eI(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!kT(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!kv(r.startAt,t.startAt)&&kv(r.endAt,t.endAt)}function fm(r){return ft.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(t,n=null,s=[],l=[],c=null,d="F",p=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function hI(r,t,n,s,l,c,d,p){return new Zl(r,t,n,s,l,c,d,p)}function Xm(r){return new Zl(r)}function Lv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function zT(r){return r.collectionGroup!==null}function Nl(r){const t=St(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),n.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Me(Ke.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(t).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new eh(c,s))})),n.has(Ke.keyField().canonicalString())||t.Ie.push(new eh(Ke.keyField(),s))}return t.Ie}function yi(r){const t=St(r);return t.Ee||(t.Ee=fI(t,Nl(r))),t.Ee}function fI(r,t){if(r.limitType==="F")return Uv(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new eh(l.field,c)}));const n=r.endAt?new th(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new th(r.startAt.position,r.startAt.inclusive):null;return Uv(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function dm(r,t){const n=r.filters.concat([t]);return new Zl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function mm(r,t,n){return new Zl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function gh(r,t){return Ym(yi(r),yi(t))&&r.limitType===t.limitType}function BT(r){return`${Km(yi(r))}|lt:${r.limitType}`}function ja(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>UT(l))).join(", ")}]`),mh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>Ja(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>Ja(l))).join(",")),`Target(${s})`})(yi(r))}; limitType=${r.limitType})`}function yh(r,t){return t.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ft.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,t)&&(function(s,l){for(const c of Nl(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,t)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,t)&&(function(s,l){return!(s.startAt&&!(function(d,p,g){const y=Pv(d,p,g);return d.inclusive?y<=0:y<0})(s.startAt,Nl(s),l)||s.endAt&&!(function(d,p,g){const y=Pv(d,p,g);return d.inclusive?y>=0:y>0})(s.endAt,Nl(s),l))})(r,t)}function dI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function jT(r){return(t,n)=>{let s=!1;for(const l of Nl(r)){const c=mI(l,t,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function mI(r,t,n){const s=r.field.isKeyField()?ft.comparator(t.key,n.key):(function(c,d,p){const g=d.data.field(c),y=p.data.field(c);return g!==null&&y!==null?Wa(g,y):_t(42886)})(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return _t(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Wr(this.inner,((n,s)=>{for(const[l,c]of s)t(l,c)}))}isEmpty(){return wT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=new ue(ft.comparator);function nr(){return pI}const qT=new ue(ft.comparator);function Sl(...r){let t=qT;for(const n of r)t=t.insert(n.key,n);return t}function HT(r){let t=qT;return r.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function ks(){return Ol()}function GT(){return Ol()}function Ol(){return new Gs((r=>r.toString()),((r,t)=>r.isEqual(t)))}const gI=new ue(ft.comparator),yI=new Me(ft.comparator);function Vt(...r){let t=yI;for(const n of r)t=t.add(n);return t}const _I=new Me(Ot);function vI(){return _I}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zc(t)?"-0":t}}function FT(r){return{integerValue:""+r}}function EI(r,t){return KR(t)?FT(t):$m(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this._=void 0}}function TI(r,t,n){return r instanceof jl?(function(l,c){const d={fields:{[IT]:{stringValue:RT},[DT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Fm(c)&&(c=ph(c)),c&&(d.fields[CT]=c),{mapValue:d}})(n,t):r instanceof ql?KT(r,t):r instanceof Hl?YT(r,t):(function(l,c){const d=QT(l,c),p=zv(d)+zv(l.Ae);return cm(d)&&cm(l.Ae)?FT(p):$m(l.serializer,p)})(r,t)}function AI(r,t,n){return r instanceof ql?KT(r,t):r instanceof Hl?YT(r,t):n}function QT(r,t){return r instanceof nh?(function(s){return cm(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(t)?t:{integerValue:0}:null}class jl extends _h{}class ql extends _h{constructor(t){super(),this.elements=t}}function KT(r,t){const n=XT(t);for(const s of r.elements)n.some((l=>Ti(l,s)))||n.push(s);return{arrayValue:{values:n}}}class Hl extends _h{constructor(t){super(),this.elements=t}}function YT(r,t){let n=XT(t);for(const s of r.elements)n=n.filter((l=>!Ti(l,s)));return{arrayValue:{values:n}}}class nh extends _h{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function zv(r){return ye(r.integerValue||r.doubleValue)}function XT(r){return Qm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(t,n){this.field=t,this.transform=n}}function wI(r,t){return r.field.isEqual(t.field)&&(function(s,l){return s instanceof ql&&l instanceof ql||s instanceof Hl&&l instanceof Hl?Za(s.elements,l.elements,Ti):s instanceof nh&&l instanceof nh?Ti(s.Ae,l.Ae):s instanceof jl&&l instanceof jl})(r.transform,t.transform)}class bI{constructor(t,n){this.version=t,this.transformResults=n}}class zn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new zn}static exists(t){return new zn(void 0,t)}static updateTime(t){return new zn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function zc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class vh{}function $T(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new Zm(r.key,zn.none()):new Wl(r.key,r.data,zn.none());{const n=r.data,s=fn.empty();let l=new Me(Ke.comparator);for(let c of t.fields)if(!l.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new Jr(r.key,s,new Sn(l.toArray()),zn.none())}}function RI(r,t,n){r instanceof Wl?(function(l,c,d){const p=l.value.clone(),g=jv(l.fieldTransforms,c,d.transformResults);p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,t,n):r instanceof Jr?(function(l,c,d){if(!zc(l.precondition,c))return void c.convertToUnknownDocument(d.version);const p=jv(l.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(ZT(l)),g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,t,n):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,t,n)}function Vl(r,t,n,s){return r instanceof Wl?(function(c,d,p,g){if(!zc(c.precondition,d))return p;const y=c.value.clone(),T=qv(c.fieldTransforms,g,d);return y.setAll(T),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(r,t,n,s):r instanceof Jr?(function(c,d,p,g){if(!zc(c.precondition,d))return p;const y=qv(c.fieldTransforms,g,d),T=d.data;return T.setAll(ZT(c)),T.setAll(y),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((b=>b.field)))})(r,t,n,s):(function(c,d,p){return zc(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,t,n)}function II(r,t){let n=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),c=QT(s.transform,l||null);c!=null&&(n===null&&(n=fn.empty()),n.set(s.field,c))}return n||null}function Bv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Za(s,l,((c,d)=>wI(c,d)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Wl extends vh{constructor(t,n,s,l=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Jr extends vh{constructor(t,n,s,l,c=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function ZT(r){const t=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}})),t}function jv(r,t,n){const s=new Map;Qt(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const c=r[l],d=c.transform,p=t.data.field(c.field);s.set(c.field,AI(d,p,n[l]))}return s}function qv(r,t,n){const s=new Map;for(const l of r){const c=l.transform,d=n.data.field(l.field);s.set(l.field,TI(c,d,t))}return s}class Zm extends vh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CI extends vh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(t,n,s,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&RI(c,t,s[l])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=Vl(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=Vl(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=GT();return this.mutations.forEach((l=>{const c=t.get(l.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=n.has(l.key)?null:p;const g=$T(d,p);g!==null&&s.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(At.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Vt())}isEqual(t){return this.batchId===t.batchId&&Za(this.mutations,t.mutations,((n,s)=>Bv(n,s)))&&Za(this.baseMutations,t.baseMutations,((n,s)=>Bv(n,s)))}}class Wm{constructor(t,n,s,l){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(t,n,s){Qt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=(function(){return gI})();const c=t.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new Wm(t,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be,Lt;function VI(r){switch(r){case K.OK:return _t(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return _t(15467,{code:r})}}function WT(r){if(r===void 0)return er("GRPC error has no .code"),K.UNKNOWN;switch(r){case be.OK:return K.OK;case be.CANCELLED:return K.CANCELLED;case be.UNKNOWN:return K.UNKNOWN;case be.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case be.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case be.INTERNAL:return K.INTERNAL;case be.UNAVAILABLE:return K.UNAVAILABLE;case be.UNAUTHENTICATED:return K.UNAUTHENTICATED;case be.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case be.NOT_FOUND:return K.NOT_FOUND;case be.ALREADY_EXISTS:return K.ALREADY_EXISTS;case be.PERMISSION_DENIED:return K.PERMISSION_DENIED;case be.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case be.ABORTED:return K.ABORTED;case be.OUT_OF_RANGE:return K.OUT_OF_RANGE;case be.UNIMPLEMENTED:return K.UNIMPLEMENTED;case be.DATA_LOSS:return K.DATA_LOSS;default:return _t(39323,{code:r})}}(Lt=be||(be={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=new jr([4294967295,4294967295],0);function Hv(r){const t=MI().encode(r),n=new dT;return n.update(t),new Uint8Array(n.digest())}function Gv(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new jr([n,s],0),new jr([l,c],0)]}class Jm{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new wl(`Invalid padding: ${n}`);if(s<0)throw new wl(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new wl(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new wl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=jr.fromNumber(this.ge)}ye(t,n,s){let l=t.add(n.multiply(jr.fromNumber(s)));return l.compare(xI)===1&&(l=new jr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Hv(t),[s,l]=Gv(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(t,n,s){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),d=new Jm(c,l,n);return s.forEach((p=>d.insert(p))),d}insert(t){if(this.ge===0)return;const n=Hv(t),[s,l]=Gv(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class wl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(t,n,s,l,c){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const l=new Map;return l.set(t,Jl.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new Eh(At.min(),l,new ue(Ot),nr(),Vt())}}class Jl{constructor(t,n,s,l,c){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Jl(s,n,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(t,n,s,l){this.be=t,this.removedTargetIds=n,this.key=s,this.De=l}}class JT{constructor(t,n){this.targetId=t,this.Ce=n}}class t0{constructor(t,n,s=Ye.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=l}}class Fv{constructor(){this.ve=0,this.Fe=Qv(),this.Me=Ye.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Vt(),n=Vt(),s=Vt();return this.Fe.forEach(((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:_t(38017,{changeType:c})}})),new Jl(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=Qv()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class PI{constructor(t){this.Ge=t,this.ze=new Map,this.je=nr(),this.Je=Nc(),this.He=Nc(),this.Ye=new ue(Ot)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:_t(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(t){const n=t.targetId,s=t.Ce.count,l=this.ot(n);if(l){const c=l.target;if(fm(c))if(s===0){const d=new ft(c.path);this.et(n,d,tn.newNoDocument(d,At.min()))}else Qt(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const p=this.ut(t),g=p?this.ct(p,t,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let d,p;try{d=Fr(s).toUint8Array()}catch(g){if(g instanceof bT)return $a("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Jm(d,l,c)}catch(g){return $a(g instanceof wl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((c=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;t.mightContain(p)||(this.et(n,c,null),l++)})),l}Tt(t){const n=new Map;this.ze.forEach(((c,d)=>{const p=this.ot(d);if(p){if(c.current&&fm(p.target)){const g=new ft(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,tn.newNoDocument(g,t))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let s=Vt();this.He.forEach(((c,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(t)));const l=new Eh(t,n,this.Ye,this.je,s);return this.je=nr(),this.Je=Nc(),this.He=Nc(),this.Ye=new ue(Ot),l}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Fv,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Me(Ot),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Me(Ot),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||st("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Fv),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Nc(){return new ue(ft.comparator)}function Qv(){return new ue(ft.comparator)}const kI={asc:"ASCENDING",desc:"DESCENDING"},UI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LI={and:"AND",or:"OR"};class zI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function pm(r,t){return r.useProto3Json||mh(t)?t:{value:t}}function ih(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function e0(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function BI(r,t){return ih(r,t.toTimestamp())}function _i(r){return Qt(!!r,49232),At.fromTimestamp((function(n){const s=Gr(n);return new se(s.seconds,s.nanos)})(r))}function tp(r,t){return gm(r,t).canonicalString()}function gm(r,t){const n=(function(l){return new re(["projects",l.projectId,"databases",l.database])})(r).child("documents");return t===void 0?n:n.child(t)}function n0(r){const t=re.fromString(r);return Qt(o0(t),10190,{key:t.toString()}),t}function ym(r,t){return tp(r.databaseId,t.path)}function Qd(r,t){const n=n0(t);if(n.get(1)!==r.databaseId.projectId)throw new rt(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new rt(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ft(r0(n))}function i0(r,t){return tp(r.databaseId,t)}function jI(r){const t=n0(r);return t.length===4?re.emptyPath():r0(t)}function _m(r){return new re(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function r0(r){return Qt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Kv(r,t,n){return{name:ym(r,t),fields:n.value.mapValue.fields}}function qI(r,t){let n;if("targetChange"in t){t.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:_t(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=(function(y,T){return y.useProto3Json?(Qt(T===void 0||typeof T=="string",58123),Ye.fromBase64String(T||"")):(Qt(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Ye.fromUint8Array(T||new Uint8Array))})(r,t.targetChange.resumeToken),d=t.targetChange.cause,p=d&&(function(y){const T=y.code===void 0?K.UNKNOWN:WT(y.code);return new rt(T,y.message||"")})(d);n=new t0(s,l,c,p||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=Qd(r,s.document.name),c=_i(s.document.updateTime),d=s.document.createTime?_i(s.document.createTime):At.min(),p=new fn({mapValue:{fields:s.document.fields}}),g=tn.newFoundDocument(l,c,d,p),y=s.targetIds||[],T=s.removedTargetIds||[];n=new Bc(y,T,g.key,g)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=Qd(r,s.document),c=s.readTime?_i(s.readTime):At.min(),d=tn.newNoDocument(l,c),p=s.removedTargetIds||[];n=new Bc([],p,d.key,d)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=Qd(r,s.document),c=s.removedTargetIds||[];n=new Bc([],c,l,null)}else{if(!("filter"in t))return _t(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new OI(l,c),p=s.targetId;n=new JT(p,d)}}return n}function HI(r,t){let n;if(t instanceof Wl)n={update:Kv(r,t.key,t.value)};else if(t instanceof Zm)n={delete:ym(r,t.key)};else if(t instanceof Jr)n={update:Kv(r,t.key,t.data),updateMask:WI(t.fieldMask)};else{if(!(t instanceof CI))return _t(16599,{Vt:t.type});n={verify:ym(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(c,d){const p=d.transform;if(p instanceof jl)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof ql)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Hl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof nh)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw _t(20930,{transform:d.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:BI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:_t(27497)})(r,t.precondition)),n}function GI(r,t){return r&&r.length>0?(Qt(t!==void 0,14353),r.map((n=>(function(l,c){let d=l.updateTime?_i(l.updateTime):_i(c);return d.isEqual(At.min())&&(d=_i(c)),new bI(d,l.transformResults||[])})(n,t)))):[]}function FI(r,t){return{documents:[i0(r,t.path)]}}function QI(r,t){const n={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=i0(r,l);const c=(function(y){if(y.length!==0)return a0($n.create(y,"and"))})(t.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((T=>(function(R){return{field:qa(R.field),direction:XI(R.dir)}})(T)))})(t.orderBy);d&&(n.structuredQuery.orderBy=d);const p=pm(r,t.limit);return p!==null&&(n.structuredQuery.limit=p),t.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:n,parent:l}}function KI(r){let t=jI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){Qt(s===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:t=t.child(T.collectionId)}let c=[];n.where&&(c=(function(b){const R=s0(b);return R instanceof $n&&PT(R)?R.getFilters():[R]})(n.where));let d=[];n.orderBy&&(d=(function(b){return b.map((R=>(function(z){return new eh(Ha(z.field),(function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(R)))})(n.orderBy));let p=null;n.limit&&(p=(function(b){let R;return R=typeof b=="object"?b.value:b,mh(R)?null:R})(n.limit));let g=null;n.startAt&&(g=(function(b){const R=!!b.before,H=b.values||[];return new th(H,R)})(n.startAt));let y=null;return n.endAt&&(y=(function(b){const R=!b.before,H=b.values||[];return new th(H,R)})(n.endAt)),hI(t,l,d,c,p,"F",g,y)}function YI(r,t){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _t(28987,{purpose:l})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function s0(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ha(n.unaryFilter.field);return Re.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Ha(n.unaryFilter.field);return Re.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ha(n.unaryFilter.field);return Re.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ha(n.unaryFilter.field);return Re.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _t(61313);default:return _t(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Re.create(Ha(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _t(58110);default:return _t(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return $n.create(n.compositeFilter.filters.map((s=>s0(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return _t(1026)}})(n.compositeFilter.op))})(r):_t(30097,{filter:r})}function XI(r){return kI[r]}function $I(r){return UI[r]}function ZI(r){return LI[r]}function qa(r){return{fieldPath:r.canonicalString()}}function Ha(r){return Ke.fromServerFormat(r.fieldPath)}function a0(r){return r instanceof Re?(function(n){if(n.op==="=="){if(xv(n.value))return{unaryFilter:{field:qa(n.field),op:"IS_NAN"}};if(Mv(n.value))return{unaryFilter:{field:qa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xv(n.value))return{unaryFilter:{field:qa(n.field),op:"IS_NOT_NAN"}};if(Mv(n.value))return{unaryFilter:{field:qa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qa(n.field),op:$I(n.op),value:n.value}}})(r):r instanceof $n?(function(n){const s=n.getFilters().map((l=>a0(l)));return s.length===1?s[0]:{compositeFilter:{op:ZI(n.op),filters:s}}})(r):_t(54877,{filter:r})}function WI(r){const t=[];return r.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function o0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t,n,s,l,c=At.min(),d=At.min(),p=Ye.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(t){return new Ur(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(t){this.yt=t}}function tC(r){const t=KI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?mm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(){this.Cn=new nC}addToCollectionParentIndex(t,n){return this.Cn.add(n),$.resolve()}getCollectionParents(t,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return $.resolve()}deleteFieldIndex(t,n){return $.resolve()}deleteAllFieldIndexes(t){return $.resolve()}createTargetIndexes(t,n){return $.resolve()}getDocumentsMatchingTarget(t,n){return $.resolve(null)}getIndexType(t,n){return $.resolve(0)}getFieldIndexes(t,n){return $.resolve([])}getNextCollectionGroupToUpdate(t){return $.resolve(null)}getMinOffset(t,n){return $.resolve(Hr.min())}getMinOffsetFromCollectionGroup(t,n){return $.resolve(Hr.min())}updateCollectionGroup(t,n,s){return $.resolve()}updateIndexEntries(t,n){return $.resolve()}}class nC{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n]||new Me(re.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(t){return(this.index[t]||new Me(re.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},l0=41943040;class hn{static withCacheSize(t){return new hn(t,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(l0,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new to(0)}static cr(){return new to(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="LruGarbageCollector",iC=1048576;function $v([r,t],[n,s]){const l=Ot(r,n);return l===0?Ot(t,s):l}class rC{constructor(t){this.Ir=t,this.buffer=new Me($v),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();$v(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class sC{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){st(Xv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){oo(n)?st(Xv,"Ignoring IndexedDB error during garbage collection: ",n):await ao(n)}await this.Vr(3e5)}))}}class aC{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return $.resolve(dh.ce);const s=new rC(n);return this.mr.forEachTarget(t,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Yv)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yv):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,l,c,d,p,g,y;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),l=this.params.maximumSequenceNumbersToCollect):l=b,d=Date.now(),this.nthSequenceNumber(t,l)))).next((b=>(s=b,p=Date.now(),this.removeTargets(t,s,n)))).next((b=>(c=b,g=Date.now(),this.removeOrphanedDocuments(t,s)))).next((b=>(y=Date.now(),Ba()<=Nt.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${b} documents in `+(y-g)+`ms
Total Duration: ${y-T}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:b}))))}}function oC(r,t){return new aC(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.changes=new Gs((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,tn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?$.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(t,n,s,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(t,n)))).next((l=>(s!==null&&Vl(s.mutation,l,Sn.empty(),se.now()),l)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,Vt()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=Vt()){const l=ks();return this.populateOverlays(t,l,n).next((()=>this.computeViews(t,n,l,s).next((c=>{let d=Sl();return c.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(t,n){const s=ks();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,Vt())))}populateOverlays(t,n,s){const l=[];return s.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(t,l).next((c=>{c.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(t,n,s,l){let c=nr();const d=Ol(),p=(function(){return Ol()})();return n.forEach(((g,y)=>{const T=s.get(y.key);l.has(y.key)&&(T===void 0||T.mutation instanceof Jr)?c=c.insert(y.key,y):T!==void 0?(d.set(y.key,T.mutation.getFieldMask()),Vl(T.mutation,y,T.mutation.getFieldMask(),se.now())):d.set(y.key,Sn.empty())})),this.recalculateAndSaveOverlays(t,c).next((g=>(g.forEach(((y,T)=>d.set(y,T))),n.forEach(((y,T)=>p.set(y,new uC(T,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(t,n){const s=Ol();let l=new ue(((d,p)=>d-p)),c=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let T=s.get(g)||Sn.empty();T=p.applyToLocalView(y,T),s.set(g,T);const b=(l.get(p.batchId)||Vt()).add(g);l=l.insert(p.batchId,b)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,T=g.value,b=GT();T.forEach((R=>{if(!c.has(R)){const H=$T(n.get(R),s.get(R));H!==null&&b.set(R,H),c=c.add(R)}})),d.push(this.documentOverlayCache.saveOverlays(t,y,b))}return $.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,l){return(function(d){return ft.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):zT(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,l):this.getDocumentsMatchingCollectionQuery(t,n,s,l)}getNextDocuments(t,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,l-c.size):$.resolve(ks());let p=Ul,g=c;return d.next((y=>$.forEach(y,((T,b)=>(p<b.largestBatchId&&(p=b.largestBatchId),c.get(T)?$.resolve():this.remoteDocumentCache.getEntry(t,T).next((R=>{g=g.insert(T,R)}))))).next((()=>this.populateOverlays(t,y,c))).next((()=>this.computeViews(t,g,y,Vt()))).next((T=>({batchId:p,changes:HT(T)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ft(n)).next((s=>{let l=Sl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,l){const c=n.collectionGroup;let d=Sl();return this.indexManager.getCollectionParents(t,c).next((p=>$.forEach(p,(g=>{const y=(function(b,R){return new Zl(R,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(t,y,s,l).next((T=>{T.forEach(((b,R)=>{d=d.insert(b,R)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(t,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,c,l)))).next((d=>{c.forEach(((g,y)=>{const T=y.getKey();d.get(T)===null&&(d=d.insert(T,tn.newInvalidDocument(T)))}));let p=Sl();return d.forEach(((g,y)=>{const T=c.get(g);T!==void 0&&Vl(T.mutation,y,Sn.empty(),se.now()),yh(n,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:_i(l.createTime)}})(n)),$.resolve()}getNamedQuery(t,n){return $.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:tC(l.bundledQuery),readTime:_i(l.readTime)}})(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this.overlays=new ue(ft.comparator),this.qr=new Map}getOverlay(t,n){return $.resolve(this.overlays.get(n))}getOverlays(t,n){const s=ks();return $.forEach(n,(l=>this.getOverlay(t,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((l,c)=>{this.St(t,n,c)})),$.resolve()}removeOverlaysForBatchId(t,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),$.resolve()}getOverlaysForCollection(t,n,s){const l=ks(),c=n.length+1,d=new ft(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return $.resolve(l)}getOverlaysForCollectionGroup(t,n,s,l){let c=new ue(((y,T)=>y-T));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=c.get(y.largestBatchId);T===null&&(T=ks(),c=c.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const p=ks(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,T)=>p.set(y,T))),!(p.size()>=l)););return $.resolve(p)}St(t,n,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new NI(n,s));let c=this.qr.get(n);c===void 0&&(c=Vt(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(){this.sessionToken=Ye.EMPTY_BYTE_STRING}getSessionToken(t){return $.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(){this.Qr=new Me(ze.$r),this.Ur=new Me(ze.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new ze(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new ze(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new ft(new re([])),s=new ze(n,t),l=new ze(n,t+1),c=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ft(new re([])),s=new ze(n,t),l=new ze(n,t+1);let c=Vt();return this.Ur.forEachInRange([s,l],(d=>{c=c.add(d.key)})),c}containsKey(t){const n=new ze(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class ze{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ft.comparator(t.key,n.key)||Ot(t.Yr,n.Yr)}static Kr(t,n){return Ot(t.Yr,n.Yr)||ft.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Me(ze.$r)}checkEmpty(t){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new DI(c,n,s,l);this.mutationQueue.push(d);for(const p of l)this.Zr=this.Zr.add(new ze(p.key,c)),this.indexManager.addToCollectionParentIndex(t,p.key.path.popLast());return $.resolve(d)}lookupMutationBatch(t,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,l=this.ei(s),c=l<0?0:l;return $.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Gm:this.tr-1)}getAllMutationBatches(t){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new ze(n,0),l=new ze(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(d=>{const p=this.Xr(d.Yr);c.push(p)})),$.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Me(Ot);return n.forEach((l=>{const c=new ze(l,0),d=new ze(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(p=>{s=s.add(p.Yr)}))})),$.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,l=s.length+1;let c=s;ft.isDocumentKey(c)||(c=c.child(""));const d=new ze(new ft(c),0);let p=new Me(Ot);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Yr)),!0)}),d),$.resolve(this.ti(p))}ti(t){const n=[];return t.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(t,n){Qt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return $.forEach(n.mutations,(l=>{const c=new ze(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new ze(n,0),l=this.Zr.firstAfterOrEqual(s);return $.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,$.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(t){this.ri=t,this.docs=(function(){return new ue(ft.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return $.resolve(s?s.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(t,n){let s=nr();return n.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():tn.newInvalidDocument(l))})),$.resolve(s)}getDocumentsMatchingQuery(t,n,s,l){let c=nr();const d=n.path,p=new ft(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:T}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||HR(qR(T),s)<=0||(l.has(T.key)||yh(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return $.resolve(c)}getAllFromCollectionGroup(t,n,s,l){_t(9500)}ii(t,n){return $.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new gC(this)}getSize(t){return $.resolve(this.size)}}class gC extends lC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)})),$.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(t){this.persistence=t,this.si=new Gs((n=>Km(n)),Ym),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.oi=0,this._i=new ep,this.targetCount=0,this.ai=to.ur()}forEachTarget(t,n){return this.si.forEach(((s,l)=>n(l))),$.resolve()}getLastRemoteSnapshotVersion(t){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),$.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new to(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(t,n){return this.Pr(n),$.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(t,n,s){let l=0;const c=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(t,p.targetId)),l++)})),$.waitFor(c).next((()=>l))}getTargetCount(t){return $.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return $.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),$.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((d=>{c.push(l.markPotentiallyOrphaned(t,d))})),$.waitFor(c)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return $.resolve(s)}containsKey(t,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(t,n){this.ui={},this.overlays={},this.ci=new dh(0),this.li=!1,this.li=!0,this.hi=new dC,this.referenceDelegate=t(this),this.Pi=new yC(this),this.indexManager=new eC,this.remoteDocumentCache=(function(l){return new pC(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new JI(n),this.Ii=new hC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new fC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new mC(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){st("MemoryPersistence","Starting transaction:",t);const l=new _C(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(t,n){return $.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class _C extends FR{constructor(t){super(),this.currentSequenceNumber=t}}class np{constructor(t){this.persistence=t,this.Ri=new ep,this.Vi=null}static mi(t){return new np(t)}get fi(){if(this.Vi)return this.Vi;throw _t(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),$.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),$.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,(s=>{const l=ft.fromPath(s);return this.gi(t,l).next((c=>{c||n.removeEntry(l,At.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class rh{constructor(t,n){this.persistence=t,this.pi=new Gs((s=>YR(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=oC(this,n)}static mi(t,n){return new rh(t,n)}Ei(){}di(t){return $.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((l=>s+l))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return $.forEach(this.pi,((s,l)=>this.br(t,s,l).next((c=>c?$.resolve():n(l)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(t,(d=>this.br(t,d,n).next((p=>{p||(s++,c.removeEntry(d,At.min()))})))).next((()=>c.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),$.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),$.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),$.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),$.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Uc(t.data.value)),n}br(t,n,s){return $.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.pi.get(n);return $.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(t,n,s,l){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=l}static As(t,n){let s=Vt(),l=Vt();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new ip(t,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return YS()?8:QR(en())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,l){const c={result:null};return this.ys(t,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(t,n,l,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new vC;return this.Ss(t,n,d).next((p=>{if(c.result=p,this.Vs)return this.bs(t,n,d,p.size)}))})).next((()=>c.result))}bs(t,n,s,l){return s.documentReadCount<this.fs?(Ba()<=Nt.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",ja(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(Ba()<=Nt.DEBUG&&st("QueryEngine","Query:",ja(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Ba()<=Nt.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",ja(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,yi(n))):$.resolve())}ys(t,n){if(Lv(n))return $.resolve(null);let s=yi(n);return this.indexManager.getIndexType(t,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=mm(n,null,"F"),s=yi(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((c=>{const d=Vt(...c);return this.ps.getDocuments(t,d).next((p=>this.indexManager.getMinOffset(t,s).next((g=>{const y=this.Ds(n,p);return this.Cs(n,y,d,g.readTime)?this.ys(t,mm(n,null,"F")):this.vs(t,y,n,g)}))))})))))}ws(t,n,s,l){return Lv(n)||l.isEqual(At.min())?$.resolve(null):this.ps.getDocuments(t,s).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,s,l)?$.resolve(null):(Ba()<=Nt.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),ja(n)),this.vs(t,d,n,jR(l,Ul)).next((p=>p)))}))}Ds(t,n){let s=new Me(jT(t));return n.forEach(((l,c)=>{yh(t,c)&&(s=s.add(c))})),s}Cs(t,n,s,l){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const c=t.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(t,n,s){return Ba()<=Nt.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",ja(n)),this.ps.getDocumentsMatchingQuery(t,n,Hr.min(),s)}vs(t,n,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="LocalStore",TC=3e8;class AC{constructor(t,n,s,l){this.persistence=t,this.Fs=n,this.serializer=l,this.Ms=new ue(Ot),this.xs=new Gs((c=>Km(c)),Ym),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new cC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function SC(r,t,n,s){return new AC(r,t,n,s)}async function c0(r,t){const n=St(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],p=[];let g=Vt();for(const y of l){d.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}for(const y of c){p.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}return n.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function wC(r,t){const n=St(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=t.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,T){const b=y.batch,R=b.keys();let H=$.resolve();return R.forEach((z=>{H=H.next((()=>T.getEntry(g,z))).next((tt=>{const W=y.docVersions.get(z);Qt(W!==null,48541),tt.version.compareTo(W)<0&&(b.applyToRemoteDocument(tt,y),tt.isValidDocument()&&(tt.setReadTime(y.commitVersion),T.addEntry(tt)))}))})),H.next((()=>p.mutationQueue.removeMutationBatch(g,b)))})(n,s,t,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let g=Vt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(t)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function h0(r){const t=St(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function bC(r,t){const n=St(r),s=t.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];t.targetChanges.forEach(((T,b)=>{const R=l.get(b);if(!R)return;p.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,b))));let H=R.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(b)!==null?H=H.withResumeToken(Ye.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):T.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(T.resumeToken,s)),l=l.insert(b,H),(function(tt,W,dt){return tt.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-tt.snapshotVersion.toMicroseconds()>=TC?!0:dt.addedDocuments.size+dt.modifiedDocuments.size+dt.removedDocuments.size>0})(R,H,T)&&p.push(n.Pi.updateTargetData(c,H))}));let g=nr(),y=Vt();if(t.documentUpdates.forEach((T=>{t.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),p.push(RC(c,d,t.documentUpdates).next((T=>{g=T.ks,y=T.qs}))),!s.isEqual(At.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((b=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));p.push(T)}return $.waitFor(p).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.Ms=l,c)))}function RC(r,t,n){let s=Vt(),l=Vt();return n.forEach((c=>s=s.add(c))),t.getEntries(r,s).next((c=>{let d=nr();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(At.min())?(t.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(g),d=d.insert(p,g)):st(rp,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{ks:d,qs:l}}))}function IC(r,t){const n=St(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Gm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function CC(r,t){const n=St(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,t).next((c=>c?(l=c,$.resolve(l)):n.Pi.allocateTargetId(s).next((d=>(l=new Ur(t,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function vm(r,t,n){const s=St(r),l=s.Ms.get(t),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!oo(d))throw d;st(rp,`Failed to update sequence numbers for target ${t}: ${d}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function Zv(r,t,n){const s=St(r);let l=At.min(),c=Vt();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,T){const b=St(g),R=b.xs.get(T);return R!==void 0?$.resolve(b.Ms.get(R)):b.Pi.getTargetData(y,T)})(s,d,yi(t)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,p.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,t,n?l:At.min(),n?c:Vt()))).next((p=>(DC(s,dI(t),p),{documents:p,Qs:c})))))}function DC(r,t,n){let s=r.Os.get(t)||At.min();n.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(t,s)}class Wv{constructor(){this.activeTargetIds=vI()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class NC{constructor(){this.Mo=new Wv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Wv,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="ConnectivityMonitor";class tE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){st(Jv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){st(Jv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oc=null;function Em(){return Oc===null?Oc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Oc++,"0x"+Oc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd="RestConnection",VC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class MC{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Wc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,n,s,l,c){const d=Em(),p=this.zo(t,n.toUriEncodedString());st(Kd,`Sending RPC '${t}' ${d}:`,p,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,c);const{host:y}=new URL(p),T=no(y);return this.Jo(t,p,g,s,T).then((b=>(st(Kd,`Received RPC '${t}' ${d}: `,b),b)),(b=>{throw $a(Kd,`RPC '${t}' ${d} failed with error: `,b,"url: ",p,"request:",s),b}))}Ho(t,n,s,l,c,d){return this.Go(t,n,s,l,c)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+so})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>t[c]=l)),s&&s.headers.forEach(((l,c)=>t[c]=l))}zo(t,n){const s=VC[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const We="WebChannelConnection";class PC extends MC{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,l,c){const d=Em();return new Promise(((p,g)=>{const y=new mT;y.setWithCredentials(!0),y.listenOnce(pT.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case kc.NO_ERROR:const b=y.getResponseJson();st(We,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(b)),p(b);break;case kc.TIMEOUT:st(We,`RPC '${t}' ${d} timed out`),g(new rt(K.DEADLINE_EXCEEDED,"Request time out"));break;case kc.HTTP_ERROR:const R=y.getStatus();if(st(We,`RPC '${t}' ${d} failed with status:`,R,"response text:",y.getResponseText()),R>0){let H=y.getResponseJson();Array.isArray(H)&&(H=H[0]);const z=H?.error;if(z&&z.status&&z.message){const tt=(function(dt){const mt=dt.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(mt)>=0?mt:K.UNKNOWN})(z.status);g(new rt(tt,z.message))}else g(new rt(K.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new rt(K.UNAVAILABLE,"Connection failed."));break;default:_t(9055,{l_:t,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{st(We,`RPC '${t}' ${d} completed.`)}}));const T=JSON.stringify(l);st(We,`RPC '${t}' ${d} sending request:`,l),y.send(n,"POST",T,s,15)}))}T_(t,n,s){const l=Em(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=_T(),p=yT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const T=c.join("");st(We,`Creating RPC '${t}' stream ${l}: ${T}`,g);const b=d.createWebChannel(T,g);this.I_(b);let R=!1,H=!1;const z=new xC({Yo:W=>{H?st(We,`Not sending because RPC '${t}' stream ${l} is closed:`,W):(R||(st(We,`Opening RPC '${t}' stream ${l} transport.`),b.open(),R=!0),st(We,`RPC '${t}' stream ${l} sending:`,W),b.send(W))},Zo:()=>b.close()}),tt=(W,dt,mt)=>{W.listen(dt,(ht=>{try{mt(ht)}catch(qt){setTimeout((()=>{throw qt}),0)}}))};return tt(b,Al.EventType.OPEN,(()=>{H||(st(We,`RPC '${t}' stream ${l} transport opened.`),z.o_())})),tt(b,Al.EventType.CLOSE,(()=>{H||(H=!0,st(We,`RPC '${t}' stream ${l} transport closed`),z.a_(),this.E_(b))})),tt(b,Al.EventType.ERROR,(W=>{H||(H=!0,$a(We,`RPC '${t}' stream ${l} transport errored. Name:`,W.name,"Message:",W.message),z.a_(new rt(K.UNAVAILABLE,"The operation could not be completed")))})),tt(b,Al.EventType.MESSAGE,(W=>{if(!H){const dt=W.data[0];Qt(!!dt,16349);const mt=dt,ht=mt?.error||mt[0]?.error;if(ht){st(We,`RPC '${t}' stream ${l} received error:`,ht);const qt=ht.status;let Tt=(function(S){const I=be[S];if(I!==void 0)return WT(I)})(qt),xt=ht.message;Tt===void 0&&(Tt=K.INTERNAL,xt="Unknown error status: "+qt+" with message "+ht.message),H=!0,z.a_(new rt(Tt,xt)),b.close()}else st(We,`RPC '${t}' stream ${l} received:`,dt),z.u_(dt)}})),tt(p,gT.STAT_EVENT,(W=>{W.stat===om.PROXY?st(We,`RPC '${t}' stream ${l} detected buffering proxy`):W.stat===om.NOPROXY&&st(We,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{z.__()}),0),z}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function Yd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(r){return new zI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(t,n,s=1e3,l=1.5,c=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&st("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="PersistentStream";class d0{constructor(t,n,s,l,c,d,p,g){this.Mi=t,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new f0(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(er(n.toString()),er("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{t((()=>{const l=new rt(K.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return st(eE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(st(eE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class kC extends d0{constructor(t,n,s,l,c,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=qI(this.serializer,t),s=(function(c){if(!("targetChange"in c))return At.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?At.min():d.readTime?_i(d.readTime):At.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=_m(this.serializer),n.addTarget=(function(c,d){let p;const g=d.target;if(p=fm(g)?{documents:FI(c,g)}:{query:QI(c,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=e0(c,d.resumeToken);const y=pm(c,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(At.min())>0){p.readTime=ih(c,d.snapshotVersion.toTimestamp());const y=pm(c,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,t);const s=YI(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=_m(this.serializer),n.removeTarget=t,this.q_(n)}}class UC extends d0{constructor(t,n,s,l,c,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Qt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Qt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Qt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=GI(t.writeResults,t.commitTime),s=_i(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=_m(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>HI(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{}class zC extends LC{constructor(t,n,s,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new rt(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(t,gm(n,s),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new rt(K.UNKNOWN,c.toString())}))}Ho(t,n,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(t,gm(n,s),l,d,p,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new rt(K.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class BC{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(er(n),this.aa=!1):st("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="RemoteStore";class jC{constructor(t,n,s,l,c){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Fs(this)&&(st(Hs,"Restarting streams for network reachability change."),await(async function(g){const y=St(g);y.Ea.add(4),await tu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Ah(y)})(this))}))})),this.Ra=new BC(s,l)}}async function Ah(r){if(Fs(r))for(const t of r.da)await t(!0)}async function tu(r){for(const t of r.da)await t(!1)}function m0(r,t){const n=St(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),lp(n)?op(n):lo(n).O_()&&ap(n,t))}function sp(r,t){const n=St(r),s=lo(n);n.Ia.delete(t),s.O_()&&p0(n,t),n.Ia.size===0&&(s.O_()?s.L_():Fs(n)&&n.Ra.set("Unknown"))}function ap(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(At.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}lo(r).Y_(t)}function p0(r,t){r.Va.Ue(t),lo(r).Z_(t)}function op(r){r.Va=new PI({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),lo(r).start(),r.Ra.ua()}function lp(r){return Fs(r)&&!lo(r).x_()&&r.Ia.size>0}function Fs(r){return St(r).Ea.size===0}function g0(r){r.Va=void 0}async function qC(r){r.Ra.set("Online")}async function HC(r){r.Ia.forEach(((t,n)=>{ap(r,t)}))}async function GC(r,t){g0(r),lp(r)?(r.Ra.ha(t),op(r)):r.Ra.set("Unknown")}async function FC(r,t,n){if(r.Ra.set("Online"),t instanceof t0&&t.state===2&&t.cause)try{await(async function(l,c){const d=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.Va.removeTarget(p))})(r,t)}catch(s){st(Hs,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await sh(r,s)}else if(t instanceof Bc?r.Va.Ze(t):t instanceof JT?r.Va.st(t):r.Va.tt(t),!n.isEqual(At.min()))try{const s=await h0(r.localStore);n.compareTo(s)>=0&&await(function(c,d){const p=c.Va.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const T=c.Ia.get(y);T&&c.Ia.set(y,T.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const T=c.Ia.get(g);if(!T)return;c.Ia.set(g,T.withResumeToken(Ye.EMPTY_BYTE_STRING,T.snapshotVersion)),p0(c,g);const b=new Ur(T.target,g,y,T.sequenceNumber);ap(c,b)})),c.remoteSyncer.applyRemoteEvent(p)})(r,n)}catch(s){st(Hs,"Failed to raise snapshot:",s),await sh(r,s)}}async function sh(r,t,n){if(!oo(t))throw t;r.Ea.add(1),await tu(r),r.Ra.set("Offline"),n||(n=()=>h0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{st(Hs,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Ah(r)}))}function y0(r,t){return t().catch((n=>sh(r,n,t)))}async function Sh(r){const t=St(r),n=Kr(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Gm;for(;QC(t);)try{const l=await IC(t.localStore,s);if(l===null){t.Ta.length===0&&n.L_();break}s=l.batchId,KC(t,l)}catch(l){await sh(t,l)}_0(t)&&v0(t)}function QC(r){return Fs(r)&&r.Ta.length<10}function KC(r,t){r.Ta.push(t);const n=Kr(r);n.O_()&&n.X_&&n.ea(t.mutations)}function _0(r){return Fs(r)&&!Kr(r).x_()&&r.Ta.length>0}function v0(r){Kr(r).start()}async function YC(r){Kr(r).ra()}async function XC(r){const t=Kr(r);for(const n of r.Ta)t.ea(n.mutations)}async function $C(r,t,n){const s=r.Ta.shift(),l=Wm.from(s,t,n);await y0(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await Sh(r)}async function ZC(r,t){t&&Kr(r).X_&&await(async function(s,l){if((function(d){return VI(d)&&d!==K.ABORTED})(l.code)){const c=s.Ta.shift();Kr(s).B_(),await y0(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Sh(s)}})(r,t),_0(r)&&v0(r)}async function nE(r,t){const n=St(r);n.asyncQueue.verifyOperationInProgress(),st(Hs,"RemoteStore received new credentials");const s=Fs(n);n.Ea.add(3),await tu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Ah(n)}async function WC(r,t){const n=St(r);t?(n.Ea.delete(2),await Ah(n)):t||(n.Ea.add(2),await tu(n),n.Ra.set("Unknown"))}function lo(r){return r.ma||(r.ma=(function(n,s,l){const c=St(n);return c.sa(),new kC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:qC.bind(null,r),t_:HC.bind(null,r),r_:GC.bind(null,r),H_:FC.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),lp(r)?op(r):r.Ra.set("Unknown")):(await r.ma.stop(),g0(r))}))),r.ma}function Kr(r){return r.fa||(r.fa=(function(n,s,l){const c=St(n);return c.sa(),new UC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:YC.bind(null,r),r_:ZC.bind(null,r),ta:XC.bind(null,r),na:$C.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await Sh(r)):(await r.fa.stop(),r.Ta.length>0&&(st(Hs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(t,n,s,l,c){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,l,c){const d=Date.now()+s,p=new up(t,n,d,l,c);return p.start(s),p}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new rt(K.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cp(r,t){if(er("AsyncQueue",`${t}: ${r}`),oo(r))return new rt(K.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{static emptySet(t){return new Ka(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||ft.comparator(n.key,s.key):(n,s)=>ft.comparator(n.key,s.key),this.keyedMap=Sl(),this.sortedSet=new ue(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ka)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new Ka;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(){this.ga=new ue(ft.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):_t(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class eo{constructor(t,n,s,l,c,d,p,g,y){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(t,n,s,l,c){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new eo(t,n,Ka.emptySet(n),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&gh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class t2{constructor(){this.queries=rE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=St(n),c=l.queries;l.queries=rE(),c.forEach(((d,p)=>{for(const g of p.Sa)g.onError(s)}))})(this,new rt(K.ABORTED,"Firestore shutting down"))}}function rE(){return new Gs((r=>BT(r)),gh)}async function E0(r,t){const n=St(r);let s=3;const l=t.query;let c=n.queries.get(l);c?!c.ba()&&t.Da()&&(s=2):(c=new JC,s=t.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const p=cp(d,`Initialization of query '${ja(t.query)}' failed`);return void t.onError(p)}n.queries.set(l,c),c.Sa.push(t),t.va(n.onlineState),c.wa&&t.Fa(c.wa)&&hp(n)}async function T0(r,t){const n=St(r),s=t.query;let l=3;const c=n.queries.get(s);if(c){const d=c.Sa.indexOf(t);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=t.Da()?0:1:!c.ba()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function e2(r,t){const n=St(r);let s=!1;for(const l of t){const c=l.query,d=n.queries.get(c);if(d){for(const p of d.Sa)p.Fa(l)&&(s=!0);d.wa=l}}s&&hp(n)}function n2(r,t,n){const s=St(r),l=s.queries.get(t);if(l)for(const c of l.Sa)c.onError(n);s.queries.delete(t)}function hp(r){r.Ca.forEach((t=>{t.next()}))}var Tm,sE;(sE=Tm||(Tm={})).Ma="default",sE.Cache="cache";class A0{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new eo(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=eo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Tm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(t){this.key=t}}class w0{constructor(t){this.key=t}}class i2{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Vt(),this.mutatedKeys=Vt(),this.eu=jT(t),this.tu=new Ka(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new iE,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((T,b)=>{const R=l.get(T),H=yh(this.query,b)?b:null,z=!!R&&this.mutatedKeys.has(R.key),tt=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let W=!1;R&&H?R.data.isEqual(H.data)?z!==tt&&(s.track({type:3,doc:H}),W=!0):this.su(R,H)||(s.track({type:2,doc:H}),W=!0,(g&&this.eu(H,g)>0||y&&this.eu(H,y)<0)&&(p=!0)):!R&&H?(s.track({type:0,doc:H}),W=!0):R&&!H&&(s.track({type:1,doc:R}),W=!0,(g||y)&&(p=!0)),W&&(H?(d=d.add(H),c=tt?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{tu:d,iu:s,Cs:p,mutatedKeys:c}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,l){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const d=t.iu.ya();d.sort(((T,b)=>(function(H,z){const tt=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t(20277,{Rt:W})}};return tt(H)-tt(z)})(T.type,b.type)||this.eu(T.doc,b.doc))),this.ou(s),l=l??!1;const p=n&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,y=g!==this.Za;return this.Za=g,d.length!==0||y?{snapshot:new eo(this.query,t.tu,c,d,t.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new iE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Vt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new w0(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new S0(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=Vt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return eo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const fp="SyncEngine";class r2{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class s2{constructor(t){this.key=t,this.hu=!1}}class a2{constructor(t,n,s,l,c,d){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Gs((p=>BT(p)),gh),this.Iu=new Map,this.Eu=new Set,this.du=new ue(ft.comparator),this.Au=new Map,this.Ru=new ep,this.Vu={},this.mu=new Map,this.fu=to.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function o2(r,t,n=!0){const s=N0(r);let l;const c=s.Tu.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await b0(s,t,n,!0),l}async function l2(r,t){const n=N0(r);await b0(n,t,!0,!1)}async function b0(r,t,n,s){const l=await CC(r.localStore,yi(t)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let p;return s&&(p=await u2(r,t,c,d==="current",l.resumeToken)),r.isPrimaryClient&&n&&m0(r.remoteStore,l),p}async function u2(r,t,n,s,l){r.pu=(b,R,H)=>(async function(tt,W,dt,mt){let ht=W.view.ru(dt);ht.Cs&&(ht=await Zv(tt.localStore,W.query,!1).then((({documents:O})=>W.view.ru(O,ht))));const qt=mt&&mt.targetChanges.get(W.targetId),Tt=mt&&mt.targetMismatches.get(W.targetId)!=null,xt=W.view.applyChanges(ht,tt.isPrimaryClient,qt,Tt);return oE(tt,W.targetId,xt.au),xt.snapshot})(r,b,R,H);const c=await Zv(r.localStore,t,!0),d=new i2(t,c.Qs),p=d.ru(c.documents),g=Jl.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),y=d.applyChanges(p,r.isPrimaryClient,g);oE(r,n,y.au);const T=new r2(t,n,d);return r.Tu.set(t,T),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),y.snapshot}async function c2(r,t,n){const s=St(r),l=s.Tu.get(t),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((d=>!gh(d,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await vm(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&sp(s.remoteStore,l.targetId),Am(s,l.targetId)})).catch(ao)):(Am(s,l.targetId),await vm(s.localStore,l.targetId,!0))}async function h2(r,t){const n=St(r),s=n.Tu.get(t),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),sp(n.remoteStore,s.targetId))}async function f2(r,t,n){const s=v2(r);try{const l=await(function(d,p){const g=St(d),y=se.now(),T=p.reduce(((H,z)=>H.add(z.key)),Vt());let b,R;return g.persistence.runTransaction("Locally write mutations","readwrite",(H=>{let z=nr(),tt=Vt();return g.Ns.getEntries(H,T).next((W=>{z=W,z.forEach(((dt,mt)=>{mt.isValidDocument()||(tt=tt.add(dt))}))})).next((()=>g.localDocuments.getOverlayedDocuments(H,z))).next((W=>{b=W;const dt=[];for(const mt of p){const ht=II(mt,b.get(mt.key).overlayedDocument);ht!=null&&dt.push(new Jr(mt.key,ht,VT(ht.value.mapValue),zn.exists(!0)))}return g.mutationQueue.addMutationBatch(H,y,dt,p)})).next((W=>{R=W;const dt=W.applyToLocalDocumentSet(b,tt);return g.documentOverlayCache.saveOverlays(H,W.batchId,dt)}))})).then((()=>({batchId:R.batchId,changes:HT(b)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),(function(d,p,g){let y=d.Vu[d.currentUser.toKey()];y||(y=new ue(Ot)),y=y.insert(p,g),d.Vu[d.currentUser.toKey()]=y})(s,l.batchId,n),await eu(s,l.changes),await Sh(s.remoteStore)}catch(l){const c=cp(l,"Failed to persist write");n.reject(c)}}async function R0(r,t){const n=St(r);try{const s=await bC(n.localStore,t);t.targetChanges.forEach(((l,c)=>{const d=n.Au.get(c);d&&(Qt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Qt(d.hu,14607):l.removedDocuments.size>0&&(Qt(d.hu,42227),d.hu=!1))})),await eu(n,s,t)}catch(s){await ao(s)}}function aE(r,t,n){const s=St(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((c,d)=>{const p=d.view.va(t);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const g=St(d);g.onlineState=p;let y=!1;g.queries.forEach(((T,b)=>{for(const R of b.Sa)R.va(p)&&(y=!0)})),y&&hp(g)})(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function d2(r,t,n){const s=St(r);s.sharedClientState.updateQueryState(t,"rejected",n);const l=s.Au.get(t),c=l&&l.key;if(c){let d=new ue(ft.comparator);d=d.insert(c,tn.newNoDocument(c,At.min()));const p=Vt().add(c),g=new Eh(At.min(),new Map,new ue(Ot),d,p);await R0(s,g),s.du=s.du.remove(c),s.Au.delete(t),dp(s)}else await vm(s.localStore,t,!1).then((()=>Am(s,t,n))).catch(ao)}async function m2(r,t){const n=St(r),s=t.batch.batchId;try{const l=await wC(n.localStore,t);C0(n,s,null),I0(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await eu(n,l)}catch(l){await ao(l)}}async function p2(r,t,n){const s=St(r);try{const l=await(function(d,p){const g=St(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return g.mutationQueue.lookupMutationBatch(y,p).next((b=>(Qt(b!==null,37113),T=b.keys(),g.mutationQueue.removeMutationBatch(y,b)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,T,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>g.localDocuments.getDocuments(y,T)))}))})(s.localStore,t);C0(s,t,n),I0(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await eu(s,l)}catch(l){await ao(l)}}function I0(r,t){(r.mu.get(t)||[]).forEach((n=>{n.resolve()})),r.mu.delete(t)}function C0(r,t,n){const s=St(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(t);c&&(n?c.reject(n):c.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function Am(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||D0(r,s)}))}function D0(r,t){r.Eu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(sp(r.remoteStore,n),r.du=r.du.remove(t),r.Au.delete(n),dp(r))}function oE(r,t,n){for(const s of n)s instanceof S0?(r.Ru.addReference(s.key,t),g2(r,s)):s instanceof w0?(st(fp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||D0(r,s.key)):_t(19791,{wu:s})}function g2(r,t){const n=t.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(st(fp,"New document in limbo: "+n),r.Eu.add(s),dp(r))}function dp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new ft(re.fromString(t)),s=r.fu.next();r.Au.set(s,new s2(n)),r.du=r.du.insert(n,s),m0(r.remoteStore,new Ur(yi(Xm(n.path)),s,"TargetPurposeLimboResolution",dh.ce))}}async function eu(r,t,n){const s=St(r),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,g)=>{d.push(s.pu(g,t,n).then((y=>{if((y||n)&&s.isPrimaryClient){const T=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(y){l.push(y);const T=ip.As(g.targetId,y);c.push(T)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(g,y){const T=St(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>$.forEach(y,(R=>$.forEach(R.Es,(H=>T.persistence.referenceDelegate.addReference(b,R.targetId,H))).next((()=>$.forEach(R.ds,(H=>T.persistence.referenceDelegate.removeReference(b,R.targetId,H)))))))))}catch(b){if(!oo(b))throw b;st(rp,"Failed to update sequence numbers: "+b)}for(const b of y){const R=b.targetId;if(!b.fromCache){const H=T.Ms.get(R),z=H.snapshotVersion,tt=H.withLastLimboFreeSnapshotVersion(z);T.Ms=T.Ms.insert(R,tt)}}})(s.localStore,c))}async function y2(r,t){const n=St(r);if(!n.currentUser.isEqual(t)){st(fp,"User change. New user:",t.toKey());const s=await c0(n.localStore,t);n.currentUser=t,(function(c,d){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new rt(K.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await eu(n,s.Ls)}}function _2(r,t){const n=St(r),s=n.Au.get(t);if(s&&s.hu)return Vt().add(s.key);{let l=Vt();const c=n.Iu.get(t);if(!c)return l;for(const d of c){const p=n.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function N0(r){const t=St(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=R0.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_2.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=d2.bind(null,t),t.Pu.H_=e2.bind(null,t.eventManager),t.Pu.yu=n2.bind(null,t.eventManager),t}function v2(r){const t=St(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=m2.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=p2.bind(null,t),t}class ah{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Th(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return SC(this.persistence,new EC,t.initialUser,this.serializer)}Cu(t){return new u0(np.mi,this.serializer)}Du(t){return new NC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ah.provider={build:()=>new ah};class E2 extends ah{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Qt(this.persistence.referenceDelegate instanceof rh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new sC(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new u0((s=>rh.mi(s,n)),this.serializer)}}class Sm{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>aE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=y2.bind(null,this.syncEngine),await WC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new t2})()}createDatastore(t){const n=Th(t.databaseInfo.databaseId),s=(function(c){return new PC(c)})(t.databaseInfo);return(function(c,d,p,g){return new zC(c,d,p,g)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,l,c,d,p){return new jC(s,l,c,d,p)})(this.localStore,this.datastore,t.asyncQueue,(n=>aE(this.syncEngine,n,0)),(function(){return tE.v()?new tE:new OC})())}createSyncEngine(t,n){return(function(l,c,d,p,g,y,T){const b=new a2(l,c,d,p,g,y);return T&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=St(n);st(Hs,"RemoteStore shutting down."),s.Ea.add(5),await tu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Sm.provider={build:()=>new Sm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):er("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="FirestoreClient";class T2{constructor(t,n,s,l,c){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=Je.UNAUTHENTICATED,this.clientId=Hm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{st(Yr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(st(Yr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=cp(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function Xd(r,t){r.asyncQueue.verifyOperationInProgress(),st(Yr,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await c0(t.localStore,l),s=l)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function lE(r,t){r.asyncQueue.verifyOperationInProgress();const n=await A2(r);st(Yr,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener((s=>nE(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>nE(t.remoteStore,l))),r._onlineComponents=t}async function A2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){st(Yr,"Using user provided OfflineComponentProvider");try{await Xd(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(l){return l.name==="FirebaseError"?l.code===K.FAILED_PRECONDITION||l.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;$a("Error using user provided cache. Falling back to memory cache: "+n),await Xd(r,new ah)}}else st(Yr,"Using default OfflineComponentProvider"),await Xd(r,new E2(void 0));return r._offlineComponents}async function V0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(st(Yr,"Using user provided OnlineComponentProvider"),await lE(r,r._uninitializedComponentsProvider._online)):(st(Yr,"Using default OnlineComponentProvider"),await lE(r,new Sm))),r._onlineComponents}function S2(r){return V0(r).then((t=>t.syncEngine))}async function M0(r){const t=await V0(r),n=t.eventManager;return n.onListen=o2.bind(null,t.syncEngine),n.onUnlisten=c2.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=l2.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=h2.bind(null,t.syncEngine),n}function w2(r,t,n={}){const s=new Wi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const T=new O0({next:R=>{T.Nu(),d.enqueueAndForget((()=>T0(c,b)));const H=R.docs.has(p);!H&&R.fromCache?y.reject(new rt(K.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&R.fromCache&&g&&g.source==="server"?y.reject(new rt(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(R)},error:R=>y.reject(R)}),b=new A0(Xm(p.path),T,{includeMetadataChanges:!0,qa:!0});return E0(c,b)})(await M0(r),r.asyncQueue,t,n,s))),s.promise}function b2(r,t,n={}){const s=new Wi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const T=new O0({next:R=>{T.Nu(),d.enqueueAndForget((()=>T0(c,b))),R.fromCache&&g.source==="server"?y.reject(new rt(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(R)},error:R=>y.reject(R)}),b=new A0(p,T,{includeMetadataChanges:!0,qa:!0});return E0(c,b)})(await M0(r),r.asyncQueue,t,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="firestore.googleapis.com",cE=!0;class hE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new rt(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=P0,this.ssl=cE}else this.host=t.host,this.ssl=t.ssl??cE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=l0;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<iC)throw new rt(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}BR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x0(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new rt(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new rt(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new rt(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class wh{constructor(t,n,s,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new rt(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new rt(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new NR;switch(s.type){case"firstParty":return new xR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new rt(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=uE.get(n);s&&(st("ComponentProvider","Removing Datastore"),uE.delete(n),s.terminate())})(this),Promise.resolve()}}function R2(r,t,n,s={}){r=Xn(r,wh);const l=no(t),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},p=`${t}:${n}`;l&&(RE(`https://${p}`),IE("Firestore",!0)),c.host!==P0&&c.host!==p&&$a("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:l,emulatorOptions:s};if(!Ls(g,d)&&(r._setSettings(g),s.mockUserToken)){let y,T;if(typeof s.mockUserToken=="string")y=s.mockUserToken,T=Je.MOCK_USER;else{y=zS(s.mockUserToken,r._app?.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new rt(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Je(b)}r._authCredentials=new OR(new ET(y,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new uo(this.firestore,t,this._query)}}class _e{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new _e(this.firestore,t,this._key)}toJSON(){return{type:_e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if($l(n,_e._jsonSchema))return new _e(t,s||null,new ft(re.fromString(n.referencePath)))}}_e._jsonSchemaVersion="firestore/documentReference/1.0",_e._jsonSchema={type:Ie("string",_e._jsonSchemaVersion),referencePath:Ie("string")};class qr extends uo{constructor(t,n,s){super(t,n,Xm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new _e(this.firestore,null,new ft(t))}withConverter(t){return new qr(this.firestore,t,this._path)}}function jc(r,t,...n){if(r=Be(r),TT("collection","path",t),r instanceof wh){const s=re.fromString(t,...n);return wv(s),new qr(r,null,s)}{if(!(r instanceof _e||r instanceof qr))throw new rt(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(re.fromString(t,...n));return wv(s),new qr(r.firestore,null,s)}}function Ki(r,t,...n){if(r=Be(r),arguments.length===1&&(t=Hm.newId()),TT("doc","path",t),r instanceof wh){const s=re.fromString(t,...n);return Sv(s),new _e(r,null,new ft(s))}{if(!(r instanceof _e||r instanceof qr))throw new rt(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(re.fromString(t,...n));return Sv(s),new _e(r.firestore,r instanceof qr?r.converter:null,new ft(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="AsyncQueue";class dE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new f0(this,"async_queue_retry"),this._c=()=>{const s=Yd();s&&st(fE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Yd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Yd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Wi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!oo(t))throw t;st(fE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,er("INTERNAL UNHANDLED ERROR: ",mE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=up.createAndSchedule(this,t,n,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&_t(47125,{Pc:mE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function mE(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}class Qs extends wh{constructor(t,n,s,l){super(t,n,s,l),this.type="firestore",this._queue=new dE,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new dE(t),this._firestoreClient=void 0,await t}}}function I2(r,t){const n=typeof r=="object"?r:OE(),s=typeof r=="string"?r:Wc,l=Om(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=US("firestore");c&&R2(l,...c)}return l}function mp(r){if(r._terminated)throw new rt(K.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||C2(r),r._firestoreClient}function C2(r){const t=r._freezeSettings(),n=(function(l,c,d,p){return new ZR(l,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,x0(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new T2(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ln(Ye.fromBase64String(t))}catch(n){throw new rt(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ln(Ye.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if($l(t,Ln._jsonSchema))return Ln.fromBase64String(t.bytes)}}Ln._jsonSchemaVersion="firestore/bytes/1.0",Ln._jsonSchema={type:Ie("string",Ln._jsonSchemaVersion),bytes:Ie("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new rt(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new rt(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new rt(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ot(this._lat,t._lat)||Ot(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vi._jsonSchemaVersion}}static fromJSON(t){if($l(t,vi._jsonSchema))return new vi(t.latitude,t.longitude)}}vi._jsonSchemaVersion="firestore/geoPoint/1.0",vi._jsonSchema={type:Ie("string",vi._jsonSchemaVersion),latitude:Ie("number"),longitude:Ie("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Ei._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if($l(t,Ei._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Ei(t.vectorValues);throw new rt(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ei._jsonSchemaVersion="firestore/vectorValue/1.0",Ei._jsonSchema={type:Ie("string",Ei._jsonSchemaVersion),vectorValues:Ie("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=/^__.*__$/;class N2{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Jr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Wl(t,this.data,n,this.fieldTransforms)}}class k0{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new Jr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function U0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t(40011,{Ac:r})}}class pp{constructor(t,n,s,l,c,d){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new pp({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return oh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(U0(this.Ac)&&D2.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class O2{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Th(t)}Cc(t,n,s,l=!1){return new pp({Ac:t,methodName:n,Dc:s,path:Ke.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ih(r){const t=r._freezeSettings(),n=Th(r._databaseId);return new O2(r._databaseId,!!t.ignoreUndefinedProperties,n)}function L0(r,t,n,s,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,t,n,l);yp("Data must be an object, but it was:",d,s);const p=z0(s,d);let g,y;if(c.merge)g=new Sn(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const T=[];for(const b of c.mergeFields){const R=wm(t,b,n);if(!d.contains(R))throw new rt(K.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);j0(T,R)||T.push(R)}g=new Sn(T),y=d.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,y=d.fieldTransforms;return new N2(new fn(p),g,y)}class Ch extends Rh{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ch}}class gp extends Rh{_toFieldTransform(t){return new SI(t.path,new jl)}isEqual(t){return t instanceof gp}}function V2(r,t,n,s){const l=r.Cc(1,t,n);yp("Data must be an object, but it was:",l,s);const c=[],d=fn.empty();Wr(s,((g,y)=>{const T=_p(t,g,n);y=Be(y);const b=l.yc(T);if(y instanceof Ch)c.push(T);else{const R=nu(y,b);R!=null&&(c.push(T),d.set(T,R))}}));const p=new Sn(c);return new k0(d,p,l.fieldTransforms)}function M2(r,t,n,s,l,c){const d=r.Cc(1,t,n),p=[wm(t,s,n)],g=[l];if(c.length%2!=0)throw new rt(K.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<c.length;R+=2)p.push(wm(t,c[R])),g.push(c[R+1]);const y=[],T=fn.empty();for(let R=p.length-1;R>=0;--R)if(!j0(y,p[R])){const H=p[R];let z=g[R];z=Be(z);const tt=d.yc(H);if(z instanceof Ch)y.push(H);else{const W=nu(z,tt);W!=null&&(y.push(H),T.set(H,W))}}const b=new Sn(y);return new k0(T,b,d.fieldTransforms)}function x2(r,t,n,s=!1){return nu(n,r.Cc(s?4:3,t))}function nu(r,t){if(B0(r=Be(r)))return yp("Unsupported field value:",t,r),z0(r,t);if(r instanceof Rh)return(function(s,l){if(!U0(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let d=0;for(const p of s){let g=nu(p,l.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,t)}return(function(s,l){if((s=Be(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return EI(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=se.fromDate(s);return{timestampValue:ih(l.serializer,c)}}if(s instanceof se){const c=new se(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ih(l.serializer,c)}}if(s instanceof vi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ln)return{bytesValue:e0(l.serializer,s._byteString)};if(s instanceof _e){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:tp(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Ei)return(function(d,p){return{mapValue:{fields:{[NT]:{stringValue:OT},[Jc]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return $m(p.serializer,y)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${fh(s)}`)})(r,t)}function z0(r,t){const n={};return wT(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Wr(r,((s,l)=>{const c=nu(l,t.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function B0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof se||r instanceof vi||r instanceof Ln||r instanceof _e||r instanceof Rh||r instanceof Ei)}function yp(r,t,n){if(!B0(n)||!AT(n)){const s=fh(n);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function wm(r,t,n){if((t=Be(t))instanceof bh)return t._internalPath;if(typeof t=="string")return _p(r,t);throw oh("Field path arguments must be of type string or ",r,!1,void 0,n)}const P2=new RegExp("[~\\*/\\[\\]]");function _p(r,t,n){if(t.search(P2)>=0)throw oh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new bh(...t.split("."))._internalPath}catch{throw oh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function oh(r,t,n,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let p=`Function ${t}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${l}`),g+=")"),new rt(K.INVALID_ARGUMENT,p+r+g)}function j0(r,t){return r.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(t,n,s,l,c){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new _e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new k2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(vp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class k2 extends q0{data(){return super.data()}}function vp(r,t){return typeof t=="string"?_p(r,t):t instanceof bh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new rt(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ep{}class L2 extends Ep{}function z2(r,t,...n){let s=[];t instanceof Ep&&s.push(t),s=s.concat(n),(function(c){const d=c.filter((g=>g instanceof Tp)).length,p=c.filter((g=>g instanceof Dh)).length;if(d>1||d>0&&p>0)throw new rt(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class Dh extends L2{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new Dh(t,n,s)}_apply(t){const n=this._parse(t);return H0(t._query,n),new uo(t.firestore,t.converter,dm(t._query,n))}_parse(t){const n=Ih(t.firestore);return(function(c,d,p,g,y,T,b){let R;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new rt(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){gE(b,T);const z=[];for(const tt of b)z.push(pE(g,c,tt));R={arrayValue:{values:z}}}else R=pE(g,c,b)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||gE(b,T),R=x2(p,d,b,T==="in"||T==="not-in");return Re.create(y,T,R)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function B2(r,t,n){const s=t,l=vp("where",r);return Dh._create(l,s,n)}class Tp extends Ep{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Tp(t,n)}_parse(t){const n=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:$n.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(l,c){let d=l;const p=c.getFlattenedFilters();for(const g of p)H0(d,g),d=dm(d,g)})(t._query,n),new uo(t.firestore,t.converter,dm(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function pE(r,t,n){if(typeof(n=Be(n))=="string"){if(n==="")throw new rt(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zT(t)&&n.indexOf("/")!==-1)throw new rt(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(re.fromString(n));if(!ft.isDocumentKey(s))throw new rt(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Vv(r,new ft(s))}if(n instanceof _e)return Vv(r,n._key);throw new rt(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fh(n)}.`)}function gE(r,t){if(!Array.isArray(r)||r.length===0)throw new rt(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function H0(r,t){const n=(function(l,c){for(const d of l)for(const p of d.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new rt(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new rt(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class j2{convertValue(t,n="none"){switch(Qr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ye(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Fr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw _t(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Wr(t,((l,c)=>{s[l]=this.convertValue(c,n)})),s}convertVectorValue(t){const n=t.fields?.[Jc].arrayValue?.values?.map((s=>ye(s.doubleValue)));return new Ei(n)}convertGeoPoint(t){return new vi(ye(t.latitude),ye(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=ph(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ll(t));default:return null}}convertTimestamp(t){const n=Gr(t);return new se(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=re.fromString(t);Qt(o0(s),9688,{name:t});const l=new zl(s.get(1),s.get(3)),c=new ft(s.popFirst(5));return l.isEqual(n)||er(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(r,t,n){let s;return s=r?r.toFirestore(t):t,s}class bl{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Us extends q0{constructor(t,n,s,l,c,d){super(t,n,s,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new qc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(vp("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new rt(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Us._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Us._jsonSchemaVersion="firestore/documentSnapshot/1.0",Us._jsonSchema={type:Ie("string",Us._jsonSchemaVersion),bundleSource:Ie("string","DocumentSnapshot"),bundleName:Ie("string"),bundle:Ie("string")};class qc extends Us{data(t={}){return super.data(t)}}class Ya{constructor(t,n,s,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new bl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new qc(this._firestore,this._userDataWriter,s.key,s,new bl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new rt(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const g=new qc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new bl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new qc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new bl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,T=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),T=d.indexOf(p.doc.key)),{type:q2(p.type),doc:g,oldIndex:y,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new rt(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ya._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Hm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function q2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(r){r=Xn(r,_e);const t=Xn(r.firestore,Qs);return w2(mp(t),r._key).then((n=>F2(t,r,n)))}Ya._jsonSchemaVersion="firestore/querySnapshot/1.0",Ya._jsonSchema={type:Ie("string",Ya._jsonSchemaVersion),bundleSource:Ie("string","QuerySnapshot"),bundleName:Ie("string"),bundle:Ie("string")};class F0 extends j2{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ln(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new _e(this.firestore,null,n)}}function $d(r){r=Xn(r,uo);const t=Xn(r.firestore,Qs),n=mp(t),s=new F0(t);return U2(r._query),b2(n,r._query).then((l=>new Ya(t,s,r,l)))}function Zd(r,t,n){r=Xn(r,_e);const s=Xn(r.firestore,Qs),l=G0(r.converter,t);return Nh(s,[L0(Ih(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,zn.none())])}function bm(r,t,n,...s){r=Xn(r,_e);const l=Xn(r.firestore,Qs),c=Ih(l);let d;return d=typeof(t=Be(t))=="string"||t instanceof bh?M2(c,"updateDoc",r._key,t,n,s):V2(c,"updateDoc",r._key,t),Nh(l,[d.toMutation(r._key,zn.exists(!0))])}function Rm(r){return Nh(Xn(r.firestore,Qs),[new Zm(r._key,zn.none())])}function G2(r,t){const n=Xn(r.firestore,Qs),s=Ki(r),l=G0(r.converter,t);return Nh(n,[L0(Ih(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,zn.exists(!1))]).then((()=>s))}function Nh(r,t){return(function(s,l){const c=new Wi;return s.asyncQueue.enqueueAndForget((async()=>f2(await S2(s),l,c))),c.promise})(mp(r),t)}function F2(r,t,n){const s=n.docs.get(t._key),l=new F0(r);return new Us(r,l,t._key,s,new bl(n.hasPendingWrites,n.fromCache),t.converter)}function Rl(){return new gp("serverTimestamp")}(function(t,n=!0){(function(l){so=l})(io),Xa(new zs("firestore",((s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),p=new Qs(new VR(s.getProvider("auth-internal")),new PR(d,s.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new rt(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zl(y.options.projectId,T)})(d,l),d);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Br(vv,Ev,t),Br(vv,Ev,"esm2020")})();const Q2={apiKey:"AIzaSyBXwgi6OuXNYLDbhxBIVC84MmXQVXWr2A8",authDomain:"listening-app-3f383.firebaseapp.com",projectId:"listening-app-3f383",storageBucket:"listening-app-3f383.firebasestorage.app",messagingSenderId:"514391644676",appId:"1:514391644676:web:ae16404730766401173351"},Q0=NE(Q2),Ml=CR(Q0),Un=I2(Q0);function yE(r,t=8e3){return Promise.race([r,new Promise((n,s)=>setTimeout(()=>s(new Error("timeout")),t))])}const K2=new Yi;function ge({children:r,className:t="",variant:n="solid",...s}){const l="px-4 py-2 rounded-2xl text-sm font-semibold transition shadow focus:outline-none focus:ring disabled:opacity-50",c={solid:"bg-black text-white hover:opacity-90",soft:"bg-gray-100 hover:bg-gray-200",ghost:"hover:bg-gray-100",danger:"bg-red-500 text-white hover:bg-red-600"};return Y.jsx("button",{className:`${l} ${c[n]||""} ${t}`,...s,children:r})}function Y2({message:r}){return r?Y.jsx("p",{className:"text-sm text-red-600 mt-1",children:r}):null}function Im(r){if(r==null||Number.isNaN(r))return"0:00";const t=Math.floor(r/60),n=Math.floor(r%60).toString().padStart(2,"0");return`${t}:${n}`}function X2({src:r,onPlay:t}){const n=zt.useRef(null),[s,l]=zt.useState(!1),[c,d]=zt.useState(0),[p,g]=zt.useState(0),[y,T]=zt.useState(1),b=[.5,.75,1,1.25,1.5,2];zt.useEffect(()=>{const z=n.current;if(!z)return;const tt=()=>d(z.currentTime),W=()=>g(isFinite(z.duration)?z.duration:0),dt=()=>l(!1);return z.addEventListener("timeupdate",tt),z.addEventListener("loadedmetadata",W),z.addEventListener("ended",dt),()=>{z.removeEventListener("timeupdate",tt),z.removeEventListener("loadedmetadata",W),z.removeEventListener("ended",dt)}},[r]),zt.useEffect(()=>{n.current&&(n.current.playbackRate=y)},[y]),zt.useEffect(()=>{const z=n.current;z&&(s?(z.play().catch(()=>l(!1)),t&&t()):z.pause())},[s]),zt.useEffect(()=>{l(!1),d(0),g(0)},[r]);const R=()=>l(z=>!z),H=z=>{n.current&&(n.current.currentTime=z,d(z))};return Y.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow flex flex-col gap-2",children:[Y.jsx("audio",{ref:n,src:r,preload:"metadata",className:"hidden"}),Y.jsxs("div",{className:"flex items-center gap-3",children:[Y.jsx("button",{onClick:R,"aria-label":s?"Pause":"Play",className:"w-10 h-10 rounded-full bg-black text-white flex items-center justify-center shadow hover:scale-105 transition",children:s?"❚❚":"➤"}),Y.jsx("div",{className:"flex-1",children:Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx("span",{className:"text-xs text-gray-600 w-12 text-left",children:Im(c)}),Y.jsx("input",{type:"range",min:0,max:p||0,step:"0.1",value:Math.min(c,p||0),onChange:z=>H(Number(z.target.value)),className:"flex-1 h-1 bg-gray-200 rounded-lg accent-black"}),Y.jsx("span",{className:"text-xs text-gray-600 w-12 text-right",children:Im(p)})]})})]}),Y.jsxs("div",{className:"flex justify-end items-center gap-2",children:[Y.jsx("label",{className:"text-xs text-gray-500",children:"Speed"}),Y.jsx("select",{value:y,onChange:z=>T(Number(z.target.value)),className:"border rounded px-2 py-1 text-sm",children:b.map(z=>Y.jsxs("option",{value:z,children:[z,"×"]},z))})]})]})}function $2({onLogin:r}){const[t,n]=zt.useState(""),[s,l]=zt.useState(""),[c,d]=zt.useState(""),[p,g]=zt.useState(!1);function y(z){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(z)}function T(z){switch(z){case"auth/invalid-email":return"Invalid email format (name@example.com).";case"auth/user-not-found":return"No account found with this email.";case"auth/wrong-password":return"Incorrect password.";case"auth/email-already-in-use":return"Email already in use - try logging in.";default:return"Authentication failed."}}async function b(){if(d(""),!y(t.trim()))return d("Please enter a valid email.");g(!0);try{const z=await db(Ml,t.trim(),s);r(z.user)}catch(z){d(T(z.code||z.message))}finally{g(!1)}}async function R(){if(d(""),!y(t.trim()))return d("Please enter a valid email.");g(!0);try{const z=await fb(Ml,t.trim(),s);r(z.user)}catch(z){d(T(z.code||z.message))}finally{g(!1)}}async function H(){d("");try{const z=await Ub(Ml,K2);r(z.user)}catch{d("Google sign-in failed.")}}return Y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-gray-50 to-gray-100 px-4",children:Y.jsxs("div",{className:"bg-white shadow-lg rounded-2xl p-8 w-full max-w-md",children:[Y.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Welcome to Listening FIB"}),Y.jsx("p",{className:"text-gray-600 mb-6",children:"Sign in to practice listening — or create a free account."}),Y.jsxs("div",{className:"flex flex-col gap-3",children:[Y.jsx("label",{className:"text-sm",children:"Email"}),Y.jsx("input",{type:"email",value:t,onChange:z=>n(z.target.value),className:"border px-3 py-2 rounded focus:outline-none",placeholder:"you@example.com"}),Y.jsx("label",{className:"text-sm",children:"Password"}),Y.jsx("input",{type:"password",value:s,onChange:z=>l(z.target.value),className:"border px-3 py-2 rounded focus:outline-none",placeholder:"At least 6 characters"}),Y.jsx(Y2,{message:c}),Y.jsxs("div",{className:"flex gap-2",children:[Y.jsx(ge,{onClick:b,disabled:p,children:p?"...":"Login"}),Y.jsx(ge,{variant:"soft",onClick:R,disabled:p,children:"Create Account"})]}),Y.jsxs("div",{className:"flex items-center gap-2 my-2",children:[Y.jsx("div",{className:"flex-1 h-px bg-gray-200"}),Y.jsx("span",{className:"text-xs text-gray-400",children:"OR"}),Y.jsx("div",{className:"flex-1 h-px bg-gray-200"})]}),Y.jsx(ge,{variant:"soft",onClick:H,children:"Continue with Google"})]})]})})}function Z2({questions:r=[],refreshQuestions:t=()=>{},setEditQuestion:n=()=>{},editQuestion:s=null,updateQuestion:l=async()=>{},onClose:c=()=>{}}){const[d,p]=zt.useState({title:"",transcript:"",audioUrl:"",timeLimitSec:""});zt.useEffect(()=>{p(s?{title:s.title||"",transcript:s.transcript||"",audioUrl:s.audioUrl||"",timeLimitSec:s.timeLimitSec||""}:{title:"",transcript:"",audioUrl:"",timeLimitSec:""})},[s]);function g(b){p(R=>({...R,[b.target.name]:b.target.value}))}async function y(){const b=/\[(.+?)\]/g,R=[],H=[];let z=0,tt,W=0;for(;tt=b.exec(d.transcript);)tt.index>z&&R.push(d.transcript.slice(z,tt.index)),R.push({blank:W}),H.push(tt[1]),W++,z=b.lastIndex;z<d.transcript.length&&R.push(d.transcript.slice(z));const dt={title:d.title,transcript:d.transcript,audioUrl:d.audioUrl,timeLimitSec:Number(d.timeLimitSec)||90,tokens:R,blanks:H,updatedAt:Rl()};try{s&&s.id&&!String(s.id).startsWith("local-")?await bm(Ki(Un,"questions",s.id),dt):await G2(jc(Un,"questions"),dt),await t(),n(null),p({title:"",transcript:"",audioUrl:"",timeLimitSec:""}),alert("Saved.")}catch(mt){console.error(mt),alert("Save failed. Check console for details.")}}async function T(b){if(confirm("Delete this question?"))try{await Rm(Ki(Un,"questions",b)),await t(),alert("Deleted.")}catch(R){console.error(R),alert("Delete failed. Check console for details.")}}return Y.jsxs("div",{className:"p-6 space-y-6",children:[Y.jsxs("div",{className:"flex items-center justify-between",children:[Y.jsx("h1",{className:"text-2xl font-bold",children:"Admin Panel"}),Y.jsx("div",{className:"flex gap-2",children:Y.jsx(ge,{variant:"ghost",onClick:c,children:"Close"})})]}),Y.jsx("div",{className:"space-y-3",children:r.map(b=>Y.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-2xl shadow",children:[Y.jsxs("div",{children:[Y.jsx("h2",{className:"font-semibold",children:b.title}),Y.jsx("p",{className:"text-sm text-gray-600",children:b.transcript})]}),Y.jsxs("div",{className:"flex gap-2",children:[Y.jsx(ge,{variant:"soft",onClick:()=>n(b),children:"Edit"}),Y.jsx(ge,{variant:"danger",onClick:()=>T(b.id),children:"Delete"})]})]},b.id))}),Y.jsxs("div",{className:"p-6 bg-white rounded-2xl shadow space-y-4",children:[Y.jsx("h2",{className:"text-xl font-semibold",children:s?"Edit Question":"Add Question"}),Y.jsx("input",{name:"title",value:d.title,onChange:g,placeholder:"Title",className:"w-full p-2 border rounded-xl"}),Y.jsx("textarea",{name:"transcript",value:d.transcript,onChange:g,placeholder:"Transcript (wrap blanks with [ ])",className:"w-full p-2 border rounded-xl"}),Y.jsx("input",{name:"audioUrl",value:d.audioUrl,onChange:g,placeholder:"Audio URL",className:"w-full p-2 border rounded-xl"}),Y.jsx("input",{name:"timeLimitSec",type:"number",value:d.timeLimitSec,onChange:g,placeholder:"Time Limit (seconds)",className:"w-full p-2 border rounded-xl"}),Y.jsxs("div",{className:"flex gap-2",children:[Y.jsx(ge,{onClick:y,children:s?"Save Changes":"Add Question"}),Y.jsx(ge,{variant:"soft",onClick:()=>{n(null),p({title:"",transcript:"",audioUrl:"",timeLimitSec:""})},children:"Clear"})]})]})]})}function W2({value:r,correct:t,onChange:n}){return Y.jsx("input",{type:"text",value:r,onChange:s=>n(s.target.value),className:`mx-1 px-2 py-1 border-b focus:outline-none focus:border-black ${t==null?"border-gray-400":t?"border-green-500 text-green-700":"border-red-500 text-red-700"}`,placeholder:"..."})}function J2(){const[r,t]=zt.useState(null),[n,s]=zt.useState(!0),[l,c]=zt.useState([]),[d,p]=zt.useState(!0),[g,y]=zt.useState(0),[T,b]=zt.useState({}),[R,H]=zt.useState(!1),[z,tt]=zt.useState(0),[W,dt]=zt.useState(null),[mt,ht]=zt.useState(0),[qt,Tt]=zt.useState(!1),[xt,O]=zt.useState("panel"),[S,I]=zt.useState(null),[V,M]=zt.useState([]),x=l[g]||{tokens:[],blanks:[],title:"Loading...",audioUrl:"",timeLimitSec:90,id:"placeholder"},C=x.blanks?.length||0,ve=r?.email==="lifeisascamm@gmail.com";zt.useEffect(()=>{const ot=gb(Ml,Mt=>{t(Mt),s(!1)});return()=>ot()},[]);async function Zt(){p(!0);try{const Mt=(await yE($d(jc(Un,"questions")),8e3)).docs.map(jt=>({id:jt.id,...jt.data()}));Mt.length?c(Mt):c(_E)}catch(ot){console.warn("refreshQuestions failed or timed out:",ot),c(_E)}finally{p(!1)}}zt.useEffect(()=>{Zt()},[]),zt.useEffect(()=>{b({}),H(!1),tt(0),dt(null),ht(0)},[g,x]);async function G(){let ot=0;for(let jt=0;jt<C;jt++)T[jt]&&T[jt].trim().toLowerCase()===(x.blanks[jt]||"").trim().toLowerCase()&&ot++;tt(ot),H(!0);const Mt=W?Math.floor((Date.now()-W)/1e3):0;if(ht(Mt),r)try{const jt=`${r.uid}_${x.id}`;await Zd(Ki(Un,"results",jt),{userId:r.uid,userEmail:r.email||"",questionId:x.id,score:ot,timeTaken:Mt,answers:T,createdAt:Rl()});const nn=Ki(Un,"users",r.uid),Zn=await H2(nn);if(!Zn.exists())await Zd(nn,{email:r.email||"",questionsDone:1,bestTime:Mt,updatedAt:Rl()});else{const Wn=Zn.data(),rr=Wn.bestTime,Ks=rr==null?Mt:Math.min(rr,Mt);await bm(nn,{email:r.email||"",questionsDone:(Wn.questionsDone||0)+1,bestTime:Ks,updatedAt:Rl()})}}catch(jt){console.warn("Failed to save results to Firestore:",jt)}}function nt(){const ot={};(x.blanks||[]).forEach((Mt,jt)=>ot[jt]=Mt),b(ot),H(!0)}function lt(){b({}),H(!1),tt(0),dt(null),ht(0)}function Bt(){y(ot=>Math.min(l.length-1,ot+1))}function D(){y(ot=>Math.max(0,ot-1))}function Z(){W||dt(Date.now())}async function it(ot){try{ot&&!String(ot).startsWith("local-")?(await Rm(Ki(Un,"questions",ot)),await Zt()):await Zt(),alert("Deleted.")}catch(Mt){console.error(Mt),alert("Delete failed. Check console for details.")}}async function J(ot,Mt){try{ot&&!String(ot).startsWith("local-")&&await bm(Ki(Un,"questions",ot),{...Mt,updatedAt:Rl()}),await Zt()}catch(jt){console.error("Update failed:",jt),alert("Update failed. Check console for details.")}}async function ct(){try{const Mt=(await yE($d(jc(Un,"users")),8e3)).docs.map(jt=>({userId:jt.id,...jt.data()}));M(Mt||[])}catch(ot){console.warn("fetchUsersStats failed or timed out:",ot),M(Mt=>Mt||[])}}async function bt(ot){if(confirm("Reset this user's stats (delete results)?"))try{const jt=(await $d(z2(jc(Un,"results"),B2("userId","==",ot)))).docs.map(nn=>Rm(Ki(Un,"results",nn.id)));await Promise.all(jt),await Zd(Ki(Un,"users",ot),{questionsDone:0,bestTime:null,email:""}),ct(),alert("Reset done.")}catch(Mt){console.error(Mt),alert("Reset failed.")}}function vt(){O("manage")}function Ee(){O("users"),ct()}function Kt(){O("panel"),I(null)}return zt.useEffect(()=>{S&&O("panel")},[S]),n?Y.jsx("div",{className:"p-8 text-center",children:"Loading..."}):r?Y.jsx("div",{className:"min-h-screen bg-gradient-to-b from-white to-gray-100 text-gray-900",children:Y.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[Y.jsxs("header",{className:"flex items-center justify-between gap-4 mb-6",children:[Y.jsxs("div",{children:[Y.jsx("h1",{className:"text-2xl font-bold",children:"Listening: Fill in the Blanks"}),Y.jsxs("p",{className:"text-sm text-gray-600",children:["Question ",g+1," of ",l.length]})]}),Y.jsxs("div",{className:"flex items-center gap-3",children:[ve&&Y.jsx(ge,{variant:"soft",onClick:()=>Tt(ot=>!ot),children:qt?"Close Admin":"Go to Admin Mode"}),Y.jsx("span",{className:"text-gray-600 text-sm",children:r.email}),Y.jsx(ge,{variant:"ghost",onClick:()=>yb(Ml),children:"Logout"})]})]}),qt&&ve?Y.jsxs("div",{className:"mb-6 space-y-4",children:[xt==="panel"&&Y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Y.jsx(Z2,{onClose:()=>Tt(!1),questions:l,refreshQuestions:Zt,setEditQuestion:ot=>{I(ot),O("panel")},editQuestion:S,updateQuestion:J}),Y.jsxs("div",{className:"space-y-4",children:[Y.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow",children:[Y.jsx("h3",{className:"font-semibold",children:"Quick manage"}),Y.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[Y.jsx(ge,{onClick:vt,children:"Manage Questions"}),Y.jsx(ge,{variant:"soft",onClick:()=>{I(null),O("panel")},children:"New Question"}),Y.jsx(ge,{variant:"ghost",onClick:Ee,children:"User stats"})]})]}),Y.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow",children:[Y.jsx("h3",{className:"font-semibold",children:"Edit preview"}),S?Y.jsxs("div",{children:[Y.jsx("div",{className:"text-sm font-medium",children:S.title}),Y.jsx("div",{className:"text-xs text-gray-600 mt-1",children:S.tokens?S.tokens.map(ot=>typeof ot=="string"?ot:`[${S.blanks[ot.blank]}]`).join(""):""}),Y.jsxs("div",{className:"mt-2 flex gap-2",children:[Y.jsx(ge,{onClick:()=>{O("panel")},children:"Open editor"}),Y.jsx(ge,{variant:"soft",onClick:()=>I(null),children:"Clear"})]})]}):Y.jsx("div",{className:"text-sm text-gray-500",children:"No question selected for editing."})]})]})]}),xt==="manage"&&Y.jsx("div",{children:Y.jsx(ManageQuestions,{questions:l,onEdit:ot=>{I(ot),O("panel")},onDelete:it,onBack:Kt})}),xt==="users"&&Y.jsxs("div",{children:[Y.jsx("div",{className:"mb-4 flex justify-end",children:Y.jsx(ge,{onClick:Kt,children:"Back to Admin"})}),Y.jsx(ManageUsers,{usersStats:V,resetUser:bt})]})]}):Y.jsxs(Y.Fragment,{children:[Y.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 md:p-6",children:[Y.jsx("h2",{className:"text-lg font-semibold",children:x.title}),Y.jsx("div",{className:"my-4",children:Y.jsx(X2,{src:x.audioUrl,onPlay:Z})}),Y.jsx("div",{className:"mt-4 leading-8 text-[1.05rem]",children:x.tokens&&x.tokens.map((ot,Mt)=>typeof ot=="string"?Y.jsx("span",{children:ot},Mt):Y.jsx(W2,{value:T[ot.blank]||"",correct:R?T[ot.blank]&&T[ot.blank].trim().toLowerCase()===(x.blanks[ot.blank]||"").trim().toLowerCase():null,onChange:jt=>b(nn=>({...nn,[ot.blank]:jt}))},Mt))}),Y.jsxs("div",{className:"mt-6 flex flex-wrap gap-3",children:[Y.jsx(ge,{onClick:G,disabled:R,children:"Check answers"}),Y.jsx(ge,{variant:"soft",onClick:nt,children:"Show answers"}),Y.jsx(ge,{variant:"ghost",onClick:lt,children:"Reset"}),Y.jsxs("div",{className:"ml-auto text-sm text-gray-600",children:["Score: ",R?`${z}/${C}`:"—"]})]}),R&&Y.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:["Time taken: ",Im(mt)]})]}),Y.jsxs("section",{className:"flex items-center justify-between mt-6",children:[Y.jsx(ge,{variant:"soft",onClick:D,disabled:g===0,children:"Previous"}),Y.jsx(ge,{variant:"solid",onClick:Bt,disabled:g===l.length-1,children:"Next"})]})]})]})}):Y.jsx($2,{onLogin:ot=>t(ot)})}const _E=[{id:"q1",title:"Urban parks audio clip",audioUrl:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",timeLimitSec:90,tokens:["City parks provide vital ",{blank:0}," for residents, offering spaces for ",{blank:1},", relaxation, and community events."],blanks:["amenities","exercise"]}],tD=CS.createRoot(document.getElementById("root"));tD.render(Y.jsx(ES.StrictMode,{children:Y.jsx(J2,{})}));
