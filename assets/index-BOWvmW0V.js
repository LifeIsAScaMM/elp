(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function hE(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Od={exports:{}},gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_;function aS(){if(w_)return gl;w_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return gl.Fragment=t,gl.jsx=n,gl.jsxs=n,gl}var R_;function oS(){return R_||(R_=1,Od.exports=aS()),Od.exports}var $=oS(),Vd={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function lS(){if(I_)return Rt;I_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),I=Symbol.iterator;function C(D){return D===null||typeof D!="object"?null:(D=I&&D[I]||D["@@iterator"],typeof D=="function"?D:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,nt={};function W(D,Z,it){this.props=D,this.context=Z,this.refs=nt,this.updater=it||G}W.prototype.isReactComponent={},W.prototype.setState=function(D,Z){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,Z,"setState")},W.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function pt(){}pt.prototype=W.prototype;function gt(D,Z,it){this.props=D,this.context=Z,this.refs=nt,this.updater=it||G}var ht=gt.prototype=new pt;ht.constructor=gt,z(ht,W.prototype),ht.isPureReactComponent=!0;var rt=Array.isArray,st={H:null,A:null,T:null,S:null,V:null},dt=Object.prototype.hasOwnProperty;function V(D,Z,it,tt,mt,Ct){return it=Ct.ref,{$$typeof:r,type:D,key:Z,ref:it!==void 0?it:null,props:Ct}}function S(D,Z){return V(D.type,Z,void 0,void 0,void 0,D.props)}function w(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function N(D){var Z={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(it){return Z[it]})}var M=/\/+/g;function x(D,Z){return typeof D=="object"&&D!==null&&D.key!=null?N(""+D.key):Z.toString(36)}function R(){}function me(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(R,R):(D.status="pending",D.then(function(Z){D.status==="pending"&&(D.status="fulfilled",D.value=Z)},function(Z){D.status==="pending"&&(D.status="rejected",D.reason=Z)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function At(D,Z,it,tt,mt){var Ct=typeof D;(Ct==="undefined"||Ct==="boolean")&&(D=null);var St=!1;if(D===null)St=!0;else switch(Ct){case"bigint":case"string":case"number":St=!0;break;case"object":switch(D.$$typeof){case r:case t:St=!0;break;case T:return St=D._init,At(St(D._payload),Z,it,tt,mt)}}if(St)return mt=mt(D),St=tt===""?"."+x(D,0):tt,rt(mt)?(it="",St!=null&&(it=St.replace(M,"$&/")+"/"),At(mt,Z,it,"",function(Fn){return Fn})):mt!=null&&(w(mt)&&(mt=S(mt,it+(mt.key==null||D&&D.key===mt.key?"":(""+mt.key).replace(M,"$&/")+"/")+St)),Z.push(mt)),1;St=0;var De=tt===""?".":tt+":";if(rt(D))for(var Jt=0;Jt<D.length;Jt++)tt=D[Jt],Ct=De+x(tt,Jt),St+=At(tt,Z,it,Ct,mt);else if(Jt=C(D),typeof Jt=="function")for(D=Jt.call(D),Jt=0;!(tt=D.next()).done;)tt=tt.value,Ct=De+x(tt,Jt++),St+=At(tt,Z,it,Ct,mt);else if(Ct==="object"){if(typeof D.then=="function")return At(me(D),Z,it,tt,mt);throw Z=String(D),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return St}function H(D,Z,it){if(D==null)return D;var tt=[],mt=0;return At(D,tt,"","",function(Ct){return Z.call(it,Ct,mt++)}),tt}function J(D){if(D._status===-1){var Z=D._result;Z=Z(),Z.then(function(it){(D._status===0||D._status===-1)&&(D._status=1,D._result=it)},function(it){(D._status===0||D._status===-1)&&(D._status=2,D._result=it)}),D._status===-1&&(D._status=0,D._result=Z)}if(D._status===1)return D._result.default;throw D._result}var ut=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function jt(){}return Rt.Children={map:H,forEach:function(D,Z,it){H(D,function(){Z.apply(this,arguments)},it)},count:function(D){var Z=0;return H(D,function(){Z++}),Z},toArray:function(D){return H(D,function(Z){return Z})||[]},only:function(D){if(!w(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Rt.Component=W,Rt.Fragment=n,Rt.Profiler=l,Rt.PureComponent=gt,Rt.StrictMode=s,Rt.Suspense=g,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=st,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return st.H.useMemoCache(D)}},Rt.cache=function(D){return function(){return D.apply(null,arguments)}},Rt.cloneElement=function(D,Z,it){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var tt=z({},D.props),mt=D.key,Ct=void 0;if(Z!=null)for(St in Z.ref!==void 0&&(Ct=void 0),Z.key!==void 0&&(mt=""+Z.key),Z)!dt.call(Z,St)||St==="key"||St==="__self"||St==="__source"||St==="ref"&&Z.ref===void 0||(tt[St]=Z[St]);var St=arguments.length-2;if(St===1)tt.children=it;else if(1<St){for(var De=Array(St),Jt=0;Jt<St;Jt++)De[Jt]=arguments[Jt+2];tt.children=De}return V(D.type,mt,void 0,void 0,Ct,tt)},Rt.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},Rt.createElement=function(D,Z,it){var tt,mt={},Ct=null;if(Z!=null)for(tt in Z.key!==void 0&&(Ct=""+Z.key),Z)dt.call(Z,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(mt[tt]=Z[tt]);var St=arguments.length-2;if(St===1)mt.children=it;else if(1<St){for(var De=Array(St),Jt=0;Jt<St;Jt++)De[Jt]=arguments[Jt+2];mt.children=De}if(D&&D.defaultProps)for(tt in St=D.defaultProps,St)mt[tt]===void 0&&(mt[tt]=St[tt]);return V(D,Ct,void 0,void 0,null,mt)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(D){return{$$typeof:p,render:D}},Rt.isValidElement=w,Rt.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:J}},Rt.memo=function(D,Z){return{$$typeof:y,type:D,compare:Z===void 0?null:Z}},Rt.startTransition=function(D){var Z=st.T,it={};st.T=it;try{var tt=D(),mt=st.S;mt!==null&&mt(it,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(jt,ut)}catch(Ct){ut(Ct)}finally{st.T=Z}},Rt.unstable_useCacheRefresh=function(){return st.H.useCacheRefresh()},Rt.use=function(D){return st.H.use(D)},Rt.useActionState=function(D,Z,it){return st.H.useActionState(D,Z,it)},Rt.useCallback=function(D,Z){return st.H.useCallback(D,Z)},Rt.useContext=function(D){return st.H.useContext(D)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(D,Z){return st.H.useDeferredValue(D,Z)},Rt.useEffect=function(D,Z,it){var tt=st.H;if(typeof it=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return tt.useEffect(D,Z)},Rt.useId=function(){return st.H.useId()},Rt.useImperativeHandle=function(D,Z,it){return st.H.useImperativeHandle(D,Z,it)},Rt.useInsertionEffect=function(D,Z){return st.H.useInsertionEffect(D,Z)},Rt.useLayoutEffect=function(D,Z){return st.H.useLayoutEffect(D,Z)},Rt.useMemo=function(D,Z){return st.H.useMemo(D,Z)},Rt.useOptimistic=function(D,Z){return st.H.useOptimistic(D,Z)},Rt.useReducer=function(D,Z,it){return st.H.useReducer(D,Z,it)},Rt.useRef=function(D){return st.H.useRef(D)},Rt.useState=function(D){return st.H.useState(D)},Rt.useSyncExternalStore=function(D,Z,it){return st.H.useSyncExternalStore(D,Z,it)},Rt.useTransition=function(){return st.H.useTransition()},Rt.version="19.1.1",Rt}var C_;function Sm(){return C_||(C_=1,Vd.exports=lS()),Vd.exports}var Pt=Sm();const uS=hE(Pt);var Md={exports:{}},yl={},xd={exports:{}},Pd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_;function cS(){return D_||(D_=1,(function(r){function t(H,J){var ut=H.length;H.push(J);t:for(;0<ut;){var jt=ut-1>>>1,D=H[jt];if(0<l(D,J))H[jt]=J,H[ut]=D,ut=jt;else break t}}function n(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var J=H[0],ut=H.pop();if(ut!==J){H[0]=ut;t:for(var jt=0,D=H.length,Z=D>>>1;jt<Z;){var it=2*(jt+1)-1,tt=H[it],mt=it+1,Ct=H[mt];if(0>l(tt,ut))mt<D&&0>l(Ct,tt)?(H[jt]=Ct,H[mt]=ut,jt=mt):(H[jt]=tt,H[it]=ut,jt=it);else if(mt<D&&0>l(Ct,ut))H[jt]=Ct,H[mt]=ut,jt=mt;else break t}}return J}function l(H,J){var ut=H.sortIndex-J.sortIndex;return ut!==0?ut:H.id-J.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var g=[],y=[],T=1,I=null,C=3,G=!1,z=!1,nt=!1,W=!1,pt=typeof setTimeout=="function"?setTimeout:null,gt=typeof clearTimeout=="function"?clearTimeout:null,ht=typeof setImmediate<"u"?setImmediate:null;function rt(H){for(var J=n(y);J!==null;){if(J.callback===null)s(y);else if(J.startTime<=H)s(y),J.sortIndex=J.expirationTime,t(g,J);else break;J=n(y)}}function st(H){if(nt=!1,rt(H),!z)if(n(g)!==null)z=!0,dt||(dt=!0,x());else{var J=n(y);J!==null&&At(st,J.startTime-H)}}var dt=!1,V=-1,S=5,w=-1;function N(){return W?!0:!(r.unstable_now()-w<S)}function M(){if(W=!1,dt){var H=r.unstable_now();w=H;var J=!0;try{t:{z=!1,nt&&(nt=!1,gt(V),V=-1),G=!0;var ut=C;try{e:{for(rt(H),I=n(g);I!==null&&!(I.expirationTime>H&&N());){var jt=I.callback;if(typeof jt=="function"){I.callback=null,C=I.priorityLevel;var D=jt(I.expirationTime<=H);if(H=r.unstable_now(),typeof D=="function"){I.callback=D,rt(H),J=!0;break e}I===n(g)&&s(g),rt(H)}else s(g);I=n(g)}if(I!==null)J=!0;else{var Z=n(y);Z!==null&&At(st,Z.startTime-H),J=!1}}break t}finally{I=null,C=ut,G=!1}J=void 0}}finally{J?x():dt=!1}}}var x;if(typeof ht=="function")x=function(){ht(M)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,me=R.port2;R.port1.onmessage=M,x=function(){me.postMessage(null)}}else x=function(){pt(M,0)};function At(H,J){V=pt(function(){H(r.unstable_now())},J)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_next=function(H){switch(C){case 1:case 2:case 3:var J=3;break;default:J=C}var ut=C;C=J;try{return H()}finally{C=ut}},r.unstable_requestPaint=function(){W=!0},r.unstable_runWithPriority=function(H,J){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ut=C;C=H;try{return J()}finally{C=ut}},r.unstable_scheduleCallback=function(H,J,ut){var jt=r.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?jt+ut:jt):ut=jt,H){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ut+D,H={id:T++,callback:J,priorityLevel:H,startTime:ut,expirationTime:D,sortIndex:-1},ut>jt?(H.sortIndex=ut,t(y,H),n(g)===null&&H===n(y)&&(nt?(gt(V),V=-1):nt=!0,At(st,ut-jt))):(H.sortIndex=D,t(g,H),z||G||(z=!0,dt||(dt=!0,x()))),H},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(H){var J=C;return function(){var ut=C;C=J;try{return H.apply(this,arguments)}finally{C=ut}}}})(Pd)),Pd}var N_;function hS(){return N_||(N_=1,xd.exports=cS()),xd.exports}var kd={exports:{}},Ke={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_;function fS(){if(O_)return Ke;O_=1;var r=Sm();function t(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,y,T){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:I==null?null:""+I,children:g,containerInfo:y,implementation:T}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ke.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ke.createPortal=function(g,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return c(g,y,null,T)},Ke.flushSync=function(g){var y=d.T,T=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=y,s.p=T,s.d.f()}},Ke.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},Ke.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Ke.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var T=y.as,I=p(T,y.crossOrigin),C=typeof y.integrity=="string"?y.integrity:void 0,G=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:I,integrity:C,fetchPriority:G}):T==="script"&&s.d.X(g,{crossOrigin:I,integrity:C,fetchPriority:G,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ke.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=p(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},Ke.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,I=p(T,y.crossOrigin);s.d.L(g,T,{crossOrigin:I,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ke.preloadModule=function(g,y){if(typeof g=="string")if(y){var T=p(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},Ke.requestFormReset=function(g){s.d.r(g)},Ke.unstable_batchedUpdates=function(g,y){return g(y)},Ke.useFormState=function(g,y,T){return d.H.useFormState(g,y,T)},Ke.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ke.version="19.1.1",Ke}var V_;function dS(){if(V_)return kd.exports;V_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),kd.exports=fS(),kd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function mS(){if(M_)return yl;M_=1;var r=hS(),t=Sm(),n=dS();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function d(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function p(e){if(c(e)!==e)throw Error(s(188))}function g(e){var i=e.alternate;if(!i){if(i=c(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,o=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return p(h),e;if(f===o)return p(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=f;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,o=f;break}if(E===o){v=!0,o=h,a=f;break}E=E.sibling}if(!v){for(E=f.child;E;){if(E===a){v=!0,a=f,o=h;break}if(E===o){v=!0,o=f,a=h;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function y(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=y(e),i!==null)return i;e=e.sibling}return null}var T=Object.assign,I=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),nt=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),pt=Symbol.for("react.provider"),gt=Symbol.for("react.consumer"),ht=Symbol.for("react.context"),rt=Symbol.for("react.forward_ref"),st=Symbol.for("react.suspense"),dt=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function x(e){return e===null||typeof e!="object"?null:(e=M&&e[M]||e["@@iterator"],typeof e=="function"?e:null)}var R=Symbol.for("react.client.reference");function me(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===R?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case z:return"Fragment";case W:return"Profiler";case nt:return"StrictMode";case st:return"Suspense";case dt:return"SuspenseList";case w:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case G:return"Portal";case ht:return(e.displayName||"Context")+".Provider";case gt:return(e._context.displayName||"Context")+".Consumer";case rt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case V:return i=e.displayName||null,i!==null?i:me(e.type)||"Memo";case S:i=e._payload,e=e._init;try{return me(e(i))}catch{}}return null}var At=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut={pending:!1,data:null,method:null,action:null},jt=[],D=-1;function Z(e){return{current:e}}function it(e){0>D||(e.current=jt[D],jt[D]=null,D--)}function tt(e,i){D++,jt[D]=e.current,e.current=i}var mt=Z(null),Ct=Z(null),St=Z(null),De=Z(null);function Jt(e,i){switch(tt(St,i),tt(Ct,e),tt(mt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Jy(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Jy(i),e=t_(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}it(mt),tt(mt,e)}function Fn(){it(mt),it(Ct),it(St)}function Wi(e){e.memoizedState!==null&&tt(De,e);var i=mt.current,a=t_(i,e.type);i!==a&&(tt(Ct,e),tt(mt,a))}function pi(e){Ct.current===e&&(it(mt),it(Ct)),De.current===e&&(it(De),hl._currentValue=ut)}var Xr=Object.prototype.hasOwnProperty,$r=r.unstable_scheduleCallback,Zr=r.unstable_cancelCallback,oo=r.unstable_shouldYield,tu=r.unstable_requestPaint,vn=r.unstable_now,Nh=r.unstable_getCurrentPriorityLevel,lo=r.unstable_ImmediatePriority,Hs=r.unstable_UserBlockingPriority,Wr=r.unstable_NormalPriority,Oh=r.unstable_LowPriority,Gs=r.unstable_IdlePriority,uo=r.log,eu=r.unstable_setDisableYieldValue,oe=null,Ft=null;function ln(e){if(typeof uo=="function"&&eu(e),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(oe,e)}catch{}}var Fe=Math.clz32?Math.clz32:Jr,nu=Math.log,Vh=Math.LN2;function Jr(e){return e>>>=0,e===0?32:31-(nu(e)/Vh|0)|0}var ts=256,es=4194304;function kn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Fs(e,i,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?h=kn(o):(v&=E,v!==0?h=kn(v):a||(a=E&~e,a!==0&&(h=kn(a))))):(E=o&~f,E!==0?h=kn(E):v!==0?h=kn(v):a||(a=o&~e,a!==0&&(h=kn(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function ns(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function co(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ho(){var e=ts;return ts<<=1,(ts&4194048)===0&&(ts=256),e}function fo(){var e=es;return es<<=1,(es&62914560)===0&&(es=4194304),e}function gi(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function yi(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function mo(e,i,a,o,h,f){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,b=e.expirationTimes,L=e.hiddenUpdates;for(a=v&~a;0<a;){var F=31-Fe(a),Y=1<<F;E[F]=0,b[F]=-1;var B=L[F];if(B!==null)for(L[F]=null,F=0;F<B.length;F++){var j=B[F];j!==null&&(j.lane&=-536870913)}a&=~Y}o!==0&&Qn(e,o,0),f!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~i))}function Qn(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-Fe(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function po(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var o=31-Fe(a),h=1<<o;h&i|e[o]&i&&(e[o]|=i),a&=~h}}function Ji(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Qs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function tr(){var e=J.p;return e!==0?e:(e=window.event,e===void 0?32:v_(e.type))}function iu(e,i){var a=J.p;try{return J.p=e,i()}finally{J.p=a}}var ie=Math.random().toString(36).slice(2),Se="__reactFiber$"+ie,pe="__reactProps$"+ie,En="__reactContainer$"+ie,go="__reactEvents$"+ie,Mh="__reactListeners$"+ie,er="__reactHandles$"+ie,ru="__reactResources$"+ie,is="__reactMarker$"+ie;function nr(e){delete e[Se],delete e[pe],delete e[go],delete e[Mh],delete e[er]}function _i(e){var i=e[Se];if(i)return i;for(var a=e.parentNode;a;){if(i=a[En]||a[Se]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=r_(e);e!==null;){if(a=e[Se])return a;e=r_(e)}return i}e=a,a=e.parentNode}return null}function Kn(e){if(e=e[Se]||e[En]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function Yn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function We(e){var i=e[ru];return i||(i=e[ru]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ce(e){e[is]=!0}var yo=new Set,Ks={};function Un(e,i){vi(e,i),vi(e+"Capture",i)}function vi(e,i){for(Ks[e]=i,e=0;e<i.length;e++)yo.add(i[e])}var su=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),au={},rs={};function ou(e){return Xr.call(rs,e)?!0:Xr.call(au,e)?!1:su.test(e)?rs[e]=!0:(au[e]=!0,!1)}function ir(e,i,a){if(ou(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function Xn(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Ue(e,i,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+o)}}var ss,lu;function Ei(e){if(ss===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ss=i&&i[1]||"",lu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ss+e+lu}var Ys=!1;function Xs(e,i){if(!e||Ys)return"";Ys=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(j){var B=j}Reflect.construct(e,[],Y)}else{try{Y.call()}catch(j){B=j}e.call(Y.prototype)}}else{try{throw Error()}catch(j){B=j}(Y=e())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(j){if(j&&B&&typeof j.stack=="string")return[j.stack,B.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],E=f[1];if(v&&E){var b=v.split(`
`),L=E.split(`
`);for(h=o=0;o<b.length&&!b[o].includes("DetermineComponentFrameRoot");)o++;for(;h<L.length&&!L[h].includes("DetermineComponentFrameRoot");)h++;if(o===b.length||h===L.length)for(o=b.length-1,h=L.length-1;1<=o&&0<=h&&b[o]!==L[h];)h--;for(;1<=o&&0<=h;o--,h--)if(b[o]!==L[h]){if(o!==1||h!==1)do if(o--,h--,0>h||b[o]!==L[h]){var F=`
`+b[o].replace(" at new "," at ");return e.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",e.displayName)),F}while(1<=o&&0<=h);break}}}finally{Ys=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ei(a):""}function _o(e){switch(e.tag){case 26:case 27:case 5:return Ei(e.type);case 16:return Ei("Lazy");case 13:return Ei("Suspense");case 19:return Ei("SuspenseList");case 0:case 15:return Xs(e.type,!1);case 11:return Xs(e.type.render,!1);case 1:return Xs(e.type,!0);case 31:return Ei("Activity");default:return""}}function $s(e){try{var i="";do i+=_o(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Je(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vo(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function xh(e){var i=vo(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),o=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Zs(e){e._valueTracker||(e._valueTracker=xh(e))}function Eo(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return e&&(o=vo(e)?e.checked?"true":"false":e.value),e=o,e!==a?(i.setValue(e),!0):!1}function as(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ph=/[\n"\\]/g;function ge(e){return e.replace(Ph,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function un(e,i,a,o,h,f,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+Je(i)):e.value!==""+Je(i)&&(e.value=""+Je(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?rr(e,v,Je(i)):a!=null?rr(e,v,Je(a)):o!=null&&e.removeAttribute("value"),h==null&&f!=null&&(e.defaultChecked=!!f),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+Je(E):e.removeAttribute("name")}function os(e,i,a,o,h,f,v,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+Je(a):"",i=i!=null?""+Je(i):a,E||i===e.value||(e.value=i),e.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function rr(e,i,a){i==="number"&&as(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ti(e,i,a,o){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+Je(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function Yt(e,i,a){if(i!=null&&(i=""+Je(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+Je(a):""}function ls(e,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(At(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=Je(i),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function Tn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var us=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function uu(e,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,a):typeof a!="number"||a===0||us.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function To(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&uu(e,h,o)}else for(var f in i)i.hasOwnProperty(f)&&uu(e,f,i[f])}function Ao(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Uh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ws(e){return Uh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ai=null;function An(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Si=null,bi=null;function So(e){var i=Kn(e);if(i&&(e=i.stateNode)){var a=e[pe]||null;t:switch(e=i.stateNode,i.type){case"input":if(un(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ge(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==e&&o.form===e.form){var h=o[pe]||null;if(!h)throw Error(s(90));un(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===e.form&&Eo(o)}break t;case"textarea":Yt(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Ti(e,!!a.multiple,i,!1)}}}var $n=!1;function cu(e,i,a){if($n)return e(i,a);$n=!0;try{var o=e(i);return o}finally{if($n=!1,(Si!==null||bi!==null)&&(ic(),Si&&(i=Si,e=bi,bi=Si=null,So(i),e)))for(i=0;i<e.length;i++)So(e[i])}}function cs(e,i){var a=e.stateNode;if(a===null)return null;var o=a[pe]||null;if(o===null)return null;a=o[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sn=!1;if(Ln)try{var hs={};Object.defineProperty(hs,"passive",{get:function(){Sn=!0}}),window.addEventListener("test",hs,hs),window.removeEventListener("test",hs,hs)}catch{Sn=!1}var Zn=null,sr=null,wi=null;function bo(){if(wi)return wi;var e,i=sr,a=i.length,o,h="value"in Zn?Zn.value:Zn.textContent,f=h.length;for(e=0;e<a&&i[e]===h[e];e++);var v=a-e;for(o=1;o<=v&&i[a-o]===h[f-o];o++);return wi=h.slice(e,1<o?1-o:void 0)}function Wn(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Jn(){return!0}function wo(){return!1}function Ne(e){function i(a,o,h,f,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Jn:wo,this.isPropagationStopped=wo,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Jn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Jn)},persist:function(){},isPersistent:Jn}),i}var Ht={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Js=Ne(Ht),fs=T({},Ht,{view:0,detail:0}),hu=Ne(fs),ta,ea,ti,ds=T({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ti&&(ti&&e.type==="mousemove"?(ta=e.screenX-ti.screenX,ea=e.screenY-ti.screenY):ea=ta=0,ti=e),ta)},movementY:function(e){return"movementY"in e?e.movementY:ea}}),bn=Ne(ds),fu=T({},ds,{dataTransfer:0}),Lh=Ne(fu),ms=T({},fs,{relatedTarget:0}),na=Ne(ms),Ro=T({},Ht,{animationName:0,elapsedTime:0,pseudoElement:0}),ia=Ne(Ro),du=T({},Ht,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ra=Ne(du),zh=T({},Ht,{data:0}),Io=Ne(zh),ps={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Co(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=pu[e])?!!i[e]:!1}function gs(){return Co}var gu=T({},fs,{key:function(e){if(e.key){var i=ps[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Wn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gs,charCode:function(e){return e.type==="keypress"?Wn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sa=Ne(gu),yu=T({},ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Do=Ne(yu),Ri=T({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gs}),_u=Ne(Ri),vu=T({},Ht,{propertyName:0,elapsedTime:0,pseudoElement:0}),Eu=Ne(vu),Tu=T({},ds,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),aa=Ne(Tu),tn=T({},Ht,{newState:0,oldState:0}),Au=Ne(tn),Su=[9,13,27,32],ei=Ln&&"CompositionEvent"in window,u=null;Ln&&"documentMode"in document&&(u=document.documentMode);var m=Ln&&"TextEvent"in window&&!u,_=Ln&&(!ei||u&&8<u&&11>=u),A=" ",k=!1;function q(e,i){switch(e){case"keyup":return Su.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function et(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var kt=!1;function be(e,i){switch(e){case"compositionend":return et(i);case"keypress":return i.which!==32?null:(k=!0,A);case"textInput":return e=i.data,e===A&&k?null:e;default:return null}}function Ut(e,i){if(kt)return e==="compositionend"||!ei&&q(e,i)?(e=bo(),wi=sr=Zn=null,kt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Oe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function we(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Oe[e.type]:i==="textarea"}function Ii(e,i,a,o){Si?bi?bi.push(o):bi=[o]:Si=o,i=uc(i,"onChange"),0<i.length&&(a=new Js("onChange","change",null,a,o),e.push({event:a,listeners:i}))}var Le=null,ni=null;function No(e){Yy(e,0)}function bu(e){var i=Yn(e);if(Eo(i))return e}function pp(e,i){if(e==="change")return i}var gp=!1;if(Ln){var Bh;if(Ln){var jh="oninput"in document;if(!jh){var yp=document.createElement("div");yp.setAttribute("oninput","return;"),jh=typeof yp.oninput=="function"}Bh=jh}else Bh=!1;gp=Bh&&(!document.documentMode||9<document.documentMode)}function _p(){Le&&(Le.detachEvent("onpropertychange",vp),ni=Le=null)}function vp(e){if(e.propertyName==="value"&&bu(ni)){var i=[];Ii(i,ni,e,An(e)),cu(No,i)}}function k0(e,i,a){e==="focusin"?(_p(),Le=i,ni=a,Le.attachEvent("onpropertychange",vp)):e==="focusout"&&_p()}function U0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bu(ni)}function L0(e,i){if(e==="click")return bu(i)}function z0(e,i){if(e==="input"||e==="change")return bu(i)}function B0(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var cn=typeof Object.is=="function"?Object.is:B0;function Oo(e,i){if(cn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Xr.call(i,h)||!cn(e[h],i[h]))return!1}return!0}function Ep(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Tp(e,i){var a=Ep(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=i&&o>=i)return{node:a,offset:i-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Ep(a)}}function Ap(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Ap(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Sp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=as(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=as(e.document)}return i}function qh(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var j0=Ln&&"documentMode"in document&&11>=document.documentMode,oa=null,Hh=null,Vo=null,Gh=!1;function bp(e,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Gh||oa==null||oa!==as(o)||(o=oa,"selectionStart"in o&&qh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Vo&&Oo(Vo,o)||(Vo=o,o=uc(Hh,"onSelect"),0<o.length&&(i=new Js("onSelect","select",null,i,a),e.push({event:i,listeners:o}),i.target=oa)))}function ys(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var la={animationend:ys("Animation","AnimationEnd"),animationiteration:ys("Animation","AnimationIteration"),animationstart:ys("Animation","AnimationStart"),transitionrun:ys("Transition","TransitionRun"),transitionstart:ys("Transition","TransitionStart"),transitioncancel:ys("Transition","TransitionCancel"),transitionend:ys("Transition","TransitionEnd")},Fh={},wp={};Ln&&(wp=document.createElement("div").style,"AnimationEvent"in window||(delete la.animationend.animation,delete la.animationiteration.animation,delete la.animationstart.animation),"TransitionEvent"in window||delete la.transitionend.transition);function _s(e){if(Fh[e])return Fh[e];if(!la[e])return e;var i=la[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in wp)return Fh[e]=i[a];return e}var Rp=_s("animationend"),Ip=_s("animationiteration"),Cp=_s("animationstart"),q0=_s("transitionrun"),H0=_s("transitionstart"),G0=_s("transitioncancel"),Dp=_s("transitionend"),Np=new Map,Qh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qh.push("scrollEnd");function zn(e,i){Np.set(e,i),Un(i,[e])}var Op=new WeakMap;function wn(e,i){if(typeof e=="object"&&e!==null){var a=Op.get(e);return a!==void 0?a:(i={value:e,source:i,stack:$s(i)},Op.set(e,i),i)}return{value:e,source:i,stack:$s(i)}}var Rn=[],ua=0,Kh=0;function wu(){for(var e=ua,i=Kh=ua=0;i<e;){var a=Rn[i];Rn[i++]=null;var o=Rn[i];Rn[i++]=null;var h=Rn[i];Rn[i++]=null;var f=Rn[i];if(Rn[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}f!==0&&Vp(a,h,f)}}function Ru(e,i,a,o){Rn[ua++]=e,Rn[ua++]=i,Rn[ua++]=a,Rn[ua++]=o,Kh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Yh(e,i,a,o){return Ru(e,i,a,o),Iu(e)}function ca(e,i){return Ru(e,null,null,i),Iu(e)}function Vp(e,i,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=e.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(h=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,h&&i!==null&&(h=31-Fe(a),e=f.hiddenUpdates,o=e[h],o===null?e[h]=[i]:o.push(i),i.lane=a|536870912),f):null}function Iu(e){if(50<il)throw il=0,ed=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var ha={};function F0(e,i,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(e,i,a,o){return new F0(e,i,a,o)}function Xh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ci(e,i){var a=e.alternate;return a===null?(a=hn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Mp(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Cu(e,i,a,o,h,f){var v=0;if(o=e,typeof e=="function")Xh(e)&&(v=1);else if(typeof e=="string")v=KA(e,a,mt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case w:return e=hn(31,a,i,h),e.elementType=w,e.lanes=f,e;case z:return vs(a.children,h,f,i);case nt:v=8,h|=24;break;case W:return e=hn(12,a,i,h|2),e.elementType=W,e.lanes=f,e;case st:return e=hn(13,a,i,h),e.elementType=st,e.lanes=f,e;case dt:return e=hn(19,a,i,h),e.elementType=dt,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case pt:case ht:v=10;break t;case gt:v=9;break t;case rt:v=11;break t;case V:v=14;break t;case S:v=16,o=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return i=hn(v,a,i,h),i.elementType=e,i.type=o,i.lanes=f,i}function vs(e,i,a,o){return e=hn(7,e,o,i),e.lanes=a,e}function $h(e,i,a){return e=hn(6,e,null,i),e.lanes=a,e}function Zh(e,i,a){return i=hn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var fa=[],da=0,Du=null,Nu=0,In=[],Cn=0,Es=null,Di=1,Ni="";function Ts(e,i){fa[da++]=Nu,fa[da++]=Du,Du=e,Nu=i}function xp(e,i,a){In[Cn++]=Di,In[Cn++]=Ni,In[Cn++]=Es,Es=e;var o=Di;e=Ni;var h=32-Fe(o)-1;o&=~(1<<h),a+=1;var f=32-Fe(i)+h;if(30<f){var v=h-h%5;f=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Di=1<<32-Fe(i)+h|a<<h|o,Ni=f+e}else Di=1<<f|a<<h|o,Ni=e}function Wh(e){e.return!==null&&(Ts(e,1),xp(e,1,0))}function Jh(e){for(;e===Du;)Du=fa[--da],fa[da]=null,Nu=fa[--da],fa[da]=null;for(;e===Es;)Es=In[--Cn],In[Cn]=null,Ni=In[--Cn],In[Cn]=null,Di=In[--Cn],In[Cn]=null}var en=null,le=null,qt=!1,As=null,ii=!1,tf=Error(s(519));function Ss(e){var i=Error(s(418,""));throw Po(wn(i,e)),tf}function Pp(e){var i=e.stateNode,a=e.type,o=e.memoizedProps;switch(i[Se]=e,i[pe]=o,a){case"dialog":Ot("cancel",i),Ot("close",i);break;case"iframe":case"object":case"embed":Ot("load",i);break;case"video":case"audio":for(a=0;a<sl.length;a++)Ot(sl[a],i);break;case"source":Ot("error",i);break;case"img":case"image":case"link":Ot("error",i),Ot("load",i);break;case"details":Ot("toggle",i);break;case"input":Ot("invalid",i),os(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Zs(i);break;case"select":Ot("invalid",i);break;case"textarea":Ot("invalid",i),ls(i,o.value,o.defaultValue,o.children),Zs(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||Wy(i.textContent,a)?(o.popover!=null&&(Ot("beforetoggle",i),Ot("toggle",i)),o.onScroll!=null&&Ot("scroll",i),o.onScrollEnd!=null&&Ot("scrollend",i),o.onClick!=null&&(i.onclick=cc),i=!0):i=!1,i||Ss(e)}function kp(e){for(en=e.return;en;)switch(en.tag){case 5:case 13:ii=!1;return;case 27:case 3:ii=!0;return;default:en=en.return}}function Mo(e){if(e!==en)return!1;if(!qt)return kp(e),qt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||yd(e.type,e.memoizedProps)),a=!a),a&&le&&Ss(e),kp(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){le=jn(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}le=null}}else i===27?(i=le,Tr(e.type)?(e=Td,Td=null,le=e):le=i):le=en?jn(e.stateNode.nextSibling):null;return!0}function xo(){le=en=null,qt=!1}function Up(){var e=As;return e!==null&&(sn===null?sn=e:sn.push.apply(sn,e),As=null),e}function Po(e){As===null?As=[e]:As.push(e)}var ef=Z(null),bs=null,Oi=null;function ar(e,i,a){tt(ef,i._currentValue),i._currentValue=a}function Vi(e){e._currentValue=ef.current,it(ef)}function nf(e,i,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===a)break;e=e.return}}function rf(e,i,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var f=h.dependencies;if(f!==null){var v=h.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=h;for(var b=0;b<i.length;b++)if(E.context===i[b]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),nf(f.return,a,e),o||(v=null);break t}f=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),nf(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function ko(e,i,a,o){e=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=h.type;cn(h.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(h===De.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(hl):e=[hl])}h=h.return}e!==null&&rf(i,e,a,o),i.flags|=262144}function Ou(e){for(e=e.firstContext;e!==null;){if(!cn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ws(e){bs=e,Oi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Qe(e){return Lp(bs,e)}function Vu(e,i){return bs===null&&ws(e),Lp(e,i)}function Lp(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Oi===null){if(e===null)throw Error(s(308));Oi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Oi=Oi.next=i;return a}var Q0=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},K0=r.unstable_scheduleCallback,Y0=r.unstable_NormalPriority,Re={$$typeof:ht,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sf(){return{controller:new Q0,data:new Map,refCount:0}}function Uo(e){e.refCount--,e.refCount===0&&K0(Y0,function(){e.controller.abort()})}var Lo=null,af=0,ma=0,pa=null;function X0(e,i){if(Lo===null){var a=Lo=[];af=0,ma=ld(),pa={status:"pending",value:void 0,then:function(o){a.push(o)}}}return af++,i.then(zp,zp),i}function zp(){if(--af===0&&Lo!==null){pa!==null&&(pa.status="fulfilled");var e=Lo;Lo=null,ma=0,pa=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function $0(e,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Bp=H.S;H.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&X0(e,i),Bp!==null&&Bp(e,i)};var Rs=Z(null);function of(){var e=Rs.current;return e!==null?e:te.pooledCache}function Mu(e,i){i===null?tt(Rs,Rs.current):tt(Rs,i.pool)}function jp(){var e=of();return e===null?null:{parent:Re._currentValue,pool:e}}var zo=Error(s(460)),qp=Error(s(474)),xu=Error(s(542)),lf={then:function(){}};function Hp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Pu(){}function Gp(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Pu,Pu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Qp(e),e;default:if(typeof i.status=="string")i.then(Pu,Pu);else{if(e=te,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Qp(e),e}throw Bo=i,zo}}var Bo=null;function Fp(){if(Bo===null)throw Error(s(459));var e=Bo;return Bo=null,e}function Qp(e){if(e===zo||e===xu)throw Error(s(483))}var or=!1;function uf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function lr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ur(e,i,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Qt&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Iu(e),Vp(e,null,a),i}return Ru(e,o,i,a),Iu(e)}function jo(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,po(e,a)}}function hf(e,i){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var ff=!1;function qo(){if(ff){var e=pa;if(e!==null)throw e}}function Ho(e,i,a,o){ff=!1;var h=e.updateQueue;or=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var b=E,L=b.next;b.next=null,v===null?f=L:v.next=L,v=b;var F=e.alternate;F!==null&&(F=F.updateQueue,E=F.lastBaseUpdate,E!==v&&(E===null?F.firstBaseUpdate=L:E.next=L,F.lastBaseUpdate=b))}if(f!==null){var Y=h.baseState;v=0,F=L=b=null,E=f;do{var B=E.lane&-536870913,j=B!==E.lane;if(j?(Lt&B)===B:(o&B)===B){B!==0&&B===ma&&(ff=!0),F!==null&&(F=F.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var Tt=e,yt=E;B=i;var Zt=a;switch(yt.tag){case 1:if(Tt=yt.payload,typeof Tt=="function"){Y=Tt.call(Zt,Y,B);break t}Y=Tt;break t;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=yt.payload,B=typeof Tt=="function"?Tt.call(Zt,Y,B):Tt,B==null)break t;Y=T({},Y,B);break t;case 2:or=!0}}B=E.callback,B!==null&&(e.flags|=64,j&&(e.flags|=8192),j=h.callbacks,j===null?h.callbacks=[B]:j.push(B))}else j={lane:B,tag:E.tag,payload:E.payload,callback:E.callback,next:null},F===null?(L=F=j,b=Y):F=F.next=j,v|=B;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;j=E,E=j.next,j.next=null,h.lastBaseUpdate=j,h.shared.pending=null}}while(!0);F===null&&(b=Y),h.baseState=b,h.firstBaseUpdate=L,h.lastBaseUpdate=F,f===null&&(h.shared.lanes=0),yr|=v,e.lanes=v,e.memoizedState=Y}}function Kp(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function Yp(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Kp(a[e],i)}var ga=Z(null),ku=Z(0);function Xp(e,i){e=zi,tt(ku,e),tt(ga,i),zi=e|i.baseLanes}function df(){tt(ku,zi),tt(ga,ga.current)}function mf(){zi=ku.current,it(ga),it(ku)}var cr=0,It=null,Xt=null,ye=null,Uu=!1,ya=!1,Is=!1,Lu=0,Go=0,_a=null,Z0=0;function he(){throw Error(s(321))}function pf(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!cn(e[a],i[a]))return!1;return!0}function gf(e,i,a,o,h,f){return cr=f,It=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=e===null||e.memoizedState===null?Vg:Mg,Is=!1,f=a(o,h),Is=!1,ya&&(f=Zp(i,a,o,h)),$p(e),f}function $p(e){H.H=Gu;var i=Xt!==null&&Xt.next!==null;if(cr=0,ye=Xt=It=null,Uu=!1,Go=0,_a=null,i)throw Error(s(300));e===null||Ve||(e=e.dependencies,e!==null&&Ou(e)&&(Ve=!0))}function Zp(e,i,a,o){It=e;var h=0;do{if(ya&&(_a=null),Go=0,ya=!1,25<=h)throw Error(s(301));if(h+=1,ye=Xt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}H.H=rA,f=i(a,o)}while(ya);return f}function W0(){var e=H.H,i=e.useState()[0];return i=typeof i.then=="function"?Fo(i):i,e=e.useState()[0],(Xt!==null?Xt.memoizedState:null)!==e&&(It.flags|=1024),i}function yf(){var e=Lu!==0;return Lu=0,e}function _f(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function vf(e){if(Uu){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Uu=!1}cr=0,ye=Xt=It=null,ya=!1,Go=Lu=0,_a=null}function nn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ye===null?It.memoizedState=ye=e:ye=ye.next=e,ye}function _e(){if(Xt===null){var e=It.alternate;e=e!==null?e.memoizedState:null}else e=Xt.next;var i=ye===null?It.memoizedState:ye.next;if(i!==null)ye=i,Xt=e;else{if(e===null)throw It.alternate===null?Error(s(467)):Error(s(310));Xt=e,e={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},ye===null?It.memoizedState=ye=e:ye=ye.next=e}return ye}function Ef(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fo(e){var i=Go;return Go+=1,_a===null&&(_a=[]),e=Gp(_a,e,i),i=It,(ye===null?i.memoizedState:ye.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?Vg:Mg),e}function zu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Fo(e);if(e.$$typeof===ht)return Qe(e)}throw Error(s(438,String(e)))}function Tf(e){var i=null,a=It.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=It.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Ef(),It.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),o=0;o<e;o++)a[o]=N;return i.index++,a}function Mi(e,i){return typeof i=="function"?i(e):i}function Bu(e){var i=_e();return Af(i,Xt,e)}function Af(e,i,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=e.baseQueue,f=o.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}i.baseQueue=h=f,o.pending=null}if(f=e.baseState,h===null)e.memoizedState=f;else{i=h.next;var E=v=null,b=null,L=i,F=!1;do{var Y=L.lane&-536870913;if(Y!==L.lane?(Lt&Y)===Y:(cr&Y)===Y){var B=L.revertLane;if(B===0)b!==null&&(b=b.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),Y===ma&&(F=!0);else if((cr&B)===B){L=L.next,B===ma&&(F=!0);continue}else Y={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=Y,v=f):b=b.next=Y,It.lanes|=B,yr|=B;Y=L.action,Is&&a(f,Y),f=L.hasEagerState?L.eagerState:a(f,Y)}else B={lane:Y,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=B,v=f):b=b.next=B,It.lanes|=Y,yr|=Y;L=L.next}while(L!==null&&L!==i);if(b===null?v=f:b.next=E,!cn(f,e.memoizedState)&&(Ve=!0,F&&(a=pa,a!==null)))throw a;e.memoizedState=f,e.baseState=v,e.baseQueue=b,o.lastRenderedState=f}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Sf(e){var i=_e(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do f=e(f,v.action),v=v.next;while(v!==h);cn(f,i.memoizedState)||(Ve=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,o]}function Wp(e,i,a){var o=It,h=_e(),f=qt;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!cn((Xt||h).memoizedState,a);v&&(h.memoizedState=a,Ve=!0),h=h.queue;var E=eg.bind(null,o,h,e);if(Qo(2048,8,E,[e]),h.getSnapshot!==i||v||ye!==null&&ye.memoizedState.tag&1){if(o.flags|=2048,va(9,ju(),tg.bind(null,o,h,a,i),null),te===null)throw Error(s(349));f||(cr&124)!==0||Jp(o,i,a)}return a}function Jp(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=It.updateQueue,i===null?(i=Ef(),It.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function tg(e,i,a,o){i.value=a,i.getSnapshot=o,ng(i)&&ig(e)}function eg(e,i,a){return a(function(){ng(i)&&ig(e)})}function ng(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!cn(e,a)}catch{return!0}}function ig(e){var i=ca(e,2);i!==null&&gn(i,e,2)}function bf(e){var i=nn();if(typeof e=="function"){var a=e;if(e=a(),Is){ln(!0);try{a()}finally{ln(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:e},i}function rg(e,i,a,o){return e.baseState=a,Af(e,Xt,typeof o=="function"?o:Mi)}function J0(e,i,a,o,h){if(Hu(e))throw Error(s(485));if(e=i.action,e!==null){var f={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};H.T!==null?a(!0):f.isTransition=!1,o(f),a=i.pending,a===null?(f.next=i.pending=f,sg(i,f)):(f.next=a.next,i.pending=a.next=f)}}function sg(e,i){var a=i.action,o=i.payload,h=e.state;if(i.isTransition){var f=H.T,v={};H.T=v;try{var E=a(h,o),b=H.S;b!==null&&b(v,E),ag(e,i,E)}catch(L){wf(e,i,L)}finally{H.T=f}}else try{f=a(h,o),ag(e,i,f)}catch(L){wf(e,i,L)}}function ag(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){og(e,i,o)},function(o){return wf(e,i,o)}):og(e,i,a)}function og(e,i,a){i.status="fulfilled",i.value=a,lg(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,sg(e,a)))}function wf(e,i,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,lg(i),i=i.next;while(i!==o)}e.action=null}function lg(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function ug(e,i){return i}function cg(e,i){if(qt){var a=te.formState;if(a!==null){t:{var o=It;if(qt){if(le){e:{for(var h=le,f=ii;h.nodeType!==8;){if(!f){h=null;break e}if(h=jn(h.nextSibling),h===null){h=null;break e}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){le=jn(h.nextSibling),o=h.data==="F!";break t}}Ss(o)}o=!1}o&&(i=a[0])}}return a=nn(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ug,lastRenderedState:i},a.queue=o,a=Dg.bind(null,It,o),o.dispatch=a,o=bf(!1),f=Nf.bind(null,It,!1,o.queue),o=nn(),h={state:i,dispatch:null,action:e,pending:null},o.queue=h,a=J0.bind(null,It,h,f,a),h.dispatch=a,o.memoizedState=e,[i,a,!1]}function hg(e){var i=_e();return fg(i,Xt,e)}function fg(e,i,a){if(i=Af(e,i,ug)[0],e=Bu(Mi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Fo(i)}catch(v){throw v===zo?xu:v}else o=i;i=_e();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(It.flags|=2048,va(9,ju(),tA.bind(null,h,a),null)),[o,f,e]}function tA(e,i){e.action=i}function dg(e){var i=_e(),a=Xt;if(a!==null)return fg(i,a,e);_e(),i=i.memoizedState,a=_e();var o=a.queue.dispatch;return a.memoizedState=e,[i,o,!1]}function va(e,i,a,o){return e={tag:e,create:a,deps:o,inst:i,next:null},i=It.updateQueue,i===null&&(i=Ef(),It.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,i.lastEffect=e),e}function ju(){return{destroy:void 0,resource:void 0}}function mg(){return _e().memoizedState}function qu(e,i,a,o){var h=nn();o=o===void 0?null:o,It.flags|=e,h.memoizedState=va(1|i,ju(),a,o)}function Qo(e,i,a,o){var h=_e();o=o===void 0?null:o;var f=h.memoizedState.inst;Xt!==null&&o!==null&&pf(o,Xt.memoizedState.deps)?h.memoizedState=va(i,f,a,o):(It.flags|=e,h.memoizedState=va(1|i,f,a,o))}function pg(e,i){qu(8390656,8,e,i)}function gg(e,i){Qo(2048,8,e,i)}function yg(e,i){return Qo(4,2,e,i)}function _g(e,i){return Qo(4,4,e,i)}function vg(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Eg(e,i,a){a=a!=null?a.concat([e]):null,Qo(4,4,vg.bind(null,i,e),a)}function Rf(){}function Tg(e,i){var a=_e();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&pf(i,o[1])?o[0]:(a.memoizedState=[e,i],e)}function Ag(e,i){var a=_e();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&pf(i,o[1]))return o[0];if(o=e(),Is){ln(!0);try{e()}finally{ln(!1)}}return a.memoizedState=[o,i],o}function If(e,i,a){return a===void 0||(cr&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=wy(),It.lanes|=e,yr|=e,a)}function Sg(e,i,a,o){return cn(a,i)?a:ga.current!==null?(e=If(e,a,o),cn(e,i)||(Ve=!0),e):(cr&42)===0?(Ve=!0,e.memoizedState=a):(e=wy(),It.lanes|=e,yr|=e,i)}function bg(e,i,a,o,h){var f=J.p;J.p=f!==0&&8>f?f:8;var v=H.T,E={};H.T=E,Nf(e,!1,i,a);try{var b=h(),L=H.S;if(L!==null&&L(E,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var F=$0(b,o);Ko(e,i,F,pn(e))}else Ko(e,i,o,pn(e))}catch(Y){Ko(e,i,{then:function(){},status:"rejected",reason:Y},pn())}finally{J.p=f,H.T=v}}function eA(){}function Cf(e,i,a,o){if(e.tag!==5)throw Error(s(476));var h=wg(e).queue;bg(e,h,i,ut,a===null?eA:function(){return Rg(e),a(o)})}function wg(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ut,baseState:ut,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:ut},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Rg(e){var i=wg(e).next.queue;Ko(e,i,{},pn())}function Df(){return Qe(hl)}function Ig(){return _e().memoizedState}function Cg(){return _e().memoizedState}function nA(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=pn();e=lr(a);var o=ur(i,e,a);o!==null&&(gn(o,i,a),jo(o,i,a)),i={cache:sf()},e.payload=i;return}i=i.return}}function iA(e,i,a){var o=pn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Hu(e)?Ng(i,a):(a=Yh(e,i,a,o),a!==null&&(gn(a,e,o),Og(a,i,o)))}function Dg(e,i,a){var o=pn();Ko(e,i,a,o)}function Ko(e,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Hu(e))Ng(i,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var v=i.lastRenderedState,E=f(v,a);if(h.hasEagerState=!0,h.eagerState=E,cn(E,v))return Ru(e,i,h,0),te===null&&wu(),!1}catch{}finally{}if(a=Yh(e,i,h,o),a!==null)return gn(a,e,o),Og(a,i,o),!0}return!1}function Nf(e,i,a,o){if(o={lane:2,revertLane:ld(),action:o,hasEagerState:!1,eagerState:null,next:null},Hu(e)){if(i)throw Error(s(479))}else i=Yh(e,a,o,2),i!==null&&gn(i,e,2)}function Hu(e){var i=e.alternate;return e===It||i!==null&&i===It}function Ng(e,i){ya=Uu=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Og(e,i,a){if((a&4194048)!==0){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,po(e,a)}}var Gu={readContext:Qe,use:zu,useCallback:he,useContext:he,useEffect:he,useImperativeHandle:he,useLayoutEffect:he,useInsertionEffect:he,useMemo:he,useReducer:he,useRef:he,useState:he,useDebugValue:he,useDeferredValue:he,useTransition:he,useSyncExternalStore:he,useId:he,useHostTransitionStatus:he,useFormState:he,useActionState:he,useOptimistic:he,useMemoCache:he,useCacheRefresh:he},Vg={readContext:Qe,use:zu,useCallback:function(e,i){return nn().memoizedState=[e,i===void 0?null:i],e},useContext:Qe,useEffect:pg,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,qu(4194308,4,vg.bind(null,i,e),a)},useLayoutEffect:function(e,i){return qu(4194308,4,e,i)},useInsertionEffect:function(e,i){qu(4,2,e,i)},useMemo:function(e,i){var a=nn();i=i===void 0?null:i;var o=e();if(Is){ln(!0);try{e()}finally{ln(!1)}}return a.memoizedState=[o,i],o},useReducer:function(e,i,a){var o=nn();if(a!==void 0){var h=a(i);if(Is){ln(!0);try{a(i)}finally{ln(!1)}}}else h=i;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=iA.bind(null,It,e),[o.memoizedState,e]},useRef:function(e){var i=nn();return e={current:e},i.memoizedState=e},useState:function(e){e=bf(e);var i=e.queue,a=Dg.bind(null,It,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Rf,useDeferredValue:function(e,i){var a=nn();return If(a,e,i)},useTransition:function(){var e=bf(!1);return e=bg.bind(null,It,e.queue,!0,!1),nn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var o=It,h=nn();if(qt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),te===null)throw Error(s(349));(Lt&124)!==0||Jp(o,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,pg(eg.bind(null,o,f,e),[e]),o.flags|=2048,va(9,ju(),tg.bind(null,o,f,a,i),null),a},useId:function(){var e=nn(),i=te.identifierPrefix;if(qt){var a=Ni,o=Di;a=(o&~(1<<32-Fe(o)-1)).toString(32)+a,i="«"+i+"R"+a,a=Lu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=Z0++,i="«"+i+"r"+a.toString(32)+"»";return e.memoizedState=i},useHostTransitionStatus:Df,useFormState:cg,useActionState:cg,useOptimistic:function(e){var i=nn();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Nf.bind(null,It,!0,a),a.dispatch=i,[e,i]},useMemoCache:Tf,useCacheRefresh:function(){return nn().memoizedState=nA.bind(null,It)}},Mg={readContext:Qe,use:zu,useCallback:Tg,useContext:Qe,useEffect:gg,useImperativeHandle:Eg,useInsertionEffect:yg,useLayoutEffect:_g,useMemo:Ag,useReducer:Bu,useRef:mg,useState:function(){return Bu(Mi)},useDebugValue:Rf,useDeferredValue:function(e,i){var a=_e();return Sg(a,Xt.memoizedState,e,i)},useTransition:function(){var e=Bu(Mi)[0],i=_e().memoizedState;return[typeof e=="boolean"?e:Fo(e),i]},useSyncExternalStore:Wp,useId:Ig,useHostTransitionStatus:Df,useFormState:hg,useActionState:hg,useOptimistic:function(e,i){var a=_e();return rg(a,Xt,e,i)},useMemoCache:Tf,useCacheRefresh:Cg},rA={readContext:Qe,use:zu,useCallback:Tg,useContext:Qe,useEffect:gg,useImperativeHandle:Eg,useInsertionEffect:yg,useLayoutEffect:_g,useMemo:Ag,useReducer:Sf,useRef:mg,useState:function(){return Sf(Mi)},useDebugValue:Rf,useDeferredValue:function(e,i){var a=_e();return Xt===null?If(a,e,i):Sg(a,Xt.memoizedState,e,i)},useTransition:function(){var e=Sf(Mi)[0],i=_e().memoizedState;return[typeof e=="boolean"?e:Fo(e),i]},useSyncExternalStore:Wp,useId:Ig,useHostTransitionStatus:Df,useFormState:dg,useActionState:dg,useOptimistic:function(e,i){var a=_e();return Xt!==null?rg(a,Xt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Tf,useCacheRefresh:Cg},Ea=null,Yo=0;function Fu(e){var i=Yo;return Yo+=1,Ea===null&&(Ea=[]),Gp(Ea,e,i)}function Xo(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Qu(e,i){throw i.$$typeof===I?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function xg(e){var i=e._init;return i(e._payload)}function Pg(e){function i(P,O){if(e){var U=P.deletions;U===null?(P.deletions=[O],P.flags|=16):U.push(O)}}function a(P,O){if(!e)return null;for(;O!==null;)i(P,O),O=O.sibling;return null}function o(P){for(var O=new Map;P!==null;)P.key!==null?O.set(P.key,P):O.set(P.index,P),P=P.sibling;return O}function h(P,O){return P=Ci(P,O),P.index=0,P.sibling=null,P}function f(P,O,U){return P.index=U,e?(U=P.alternate,U!==null?(U=U.index,U<O?(P.flags|=67108866,O):U):(P.flags|=67108866,O)):(P.flags|=1048576,O)}function v(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function E(P,O,U,Q){return O===null||O.tag!==6?(O=$h(U,P.mode,Q),O.return=P,O):(O=h(O,U),O.return=P,O)}function b(P,O,U,Q){var lt=U.type;return lt===z?F(P,O,U.props.children,Q,U.key):O!==null&&(O.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===S&&xg(lt)===O.type)?(O=h(O,U.props),Xo(O,U),O.return=P,O):(O=Cu(U.type,U.key,U.props,null,P.mode,Q),Xo(O,U),O.return=P,O)}function L(P,O,U,Q){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=Zh(U,P.mode,Q),O.return=P,O):(O=h(O,U.children||[]),O.return=P,O)}function F(P,O,U,Q,lt){return O===null||O.tag!==7?(O=vs(U,P.mode,Q,lt),O.return=P,O):(O=h(O,U),O.return=P,O)}function Y(P,O,U){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=$h(""+O,P.mode,U),O.return=P,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case C:return U=Cu(O.type,O.key,O.props,null,P.mode,U),Xo(U,O),U.return=P,U;case G:return O=Zh(O,P.mode,U),O.return=P,O;case S:var Q=O._init;return O=Q(O._payload),Y(P,O,U)}if(At(O)||x(O))return O=vs(O,P.mode,U,null),O.return=P,O;if(typeof O.then=="function")return Y(P,Fu(O),U);if(O.$$typeof===ht)return Y(P,Vu(P,O),U);Qu(P,O)}return null}function B(P,O,U,Q){var lt=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return lt!==null?null:E(P,O,""+U,Q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case C:return U.key===lt?b(P,O,U,Q):null;case G:return U.key===lt?L(P,O,U,Q):null;case S:return lt=U._init,U=lt(U._payload),B(P,O,U,Q)}if(At(U)||x(U))return lt!==null?null:F(P,O,U,Q,null);if(typeof U.then=="function")return B(P,O,Fu(U),Q);if(U.$$typeof===ht)return B(P,O,Vu(P,U),Q);Qu(P,U)}return null}function j(P,O,U,Q,lt){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return P=P.get(U)||null,E(O,P,""+Q,lt);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case C:return P=P.get(Q.key===null?U:Q.key)||null,b(O,P,Q,lt);case G:return P=P.get(Q.key===null?U:Q.key)||null,L(O,P,Q,lt);case S:var Dt=Q._init;return Q=Dt(Q._payload),j(P,O,U,Q,lt)}if(At(Q)||x(Q))return P=P.get(U)||null,F(O,P,Q,lt,null);if(typeof Q.then=="function")return j(P,O,U,Fu(Q),lt);if(Q.$$typeof===ht)return j(P,O,U,Vu(O,Q),lt);Qu(O,Q)}return null}function Tt(P,O,U,Q){for(var lt=null,Dt=null,ct=O,_t=O=0,xe=null;ct!==null&&_t<U.length;_t++){ct.index>_t?(xe=ct,ct=null):xe=ct.sibling;var Bt=B(P,ct,U[_t],Q);if(Bt===null){ct===null&&(ct=xe);break}e&&ct&&Bt.alternate===null&&i(P,ct),O=f(Bt,O,_t),Dt===null?lt=Bt:Dt.sibling=Bt,Dt=Bt,ct=xe}if(_t===U.length)return a(P,ct),qt&&Ts(P,_t),lt;if(ct===null){for(;_t<U.length;_t++)ct=Y(P,U[_t],Q),ct!==null&&(O=f(ct,O,_t),Dt===null?lt=ct:Dt.sibling=ct,Dt=ct);return qt&&Ts(P,_t),lt}for(ct=o(ct);_t<U.length;_t++)xe=j(ct,P,_t,U[_t],Q),xe!==null&&(e&&xe.alternate!==null&&ct.delete(xe.key===null?_t:xe.key),O=f(xe,O,_t),Dt===null?lt=xe:Dt.sibling=xe,Dt=xe);return e&&ct.forEach(function(Rr){return i(P,Rr)}),qt&&Ts(P,_t),lt}function yt(P,O,U,Q){if(U==null)throw Error(s(151));for(var lt=null,Dt=null,ct=O,_t=O=0,xe=null,Bt=U.next();ct!==null&&!Bt.done;_t++,Bt=U.next()){ct.index>_t?(xe=ct,ct=null):xe=ct.sibling;var Rr=B(P,ct,Bt.value,Q);if(Rr===null){ct===null&&(ct=xe);break}e&&ct&&Rr.alternate===null&&i(P,ct),O=f(Rr,O,_t),Dt===null?lt=Rr:Dt.sibling=Rr,Dt=Rr,ct=xe}if(Bt.done)return a(P,ct),qt&&Ts(P,_t),lt;if(ct===null){for(;!Bt.done;_t++,Bt=U.next())Bt=Y(P,Bt.value,Q),Bt!==null&&(O=f(Bt,O,_t),Dt===null?lt=Bt:Dt.sibling=Bt,Dt=Bt);return qt&&Ts(P,_t),lt}for(ct=o(ct);!Bt.done;_t++,Bt=U.next())Bt=j(ct,P,_t,Bt.value,Q),Bt!==null&&(e&&Bt.alternate!==null&&ct.delete(Bt.key===null?_t:Bt.key),O=f(Bt,O,_t),Dt===null?lt=Bt:Dt.sibling=Bt,Dt=Bt);return e&&ct.forEach(function(sS){return i(P,sS)}),qt&&Ts(P,_t),lt}function Zt(P,O,U,Q){if(typeof U=="object"&&U!==null&&U.type===z&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case C:t:{for(var lt=U.key;O!==null;){if(O.key===lt){if(lt=U.type,lt===z){if(O.tag===7){a(P,O.sibling),Q=h(O,U.props.children),Q.return=P,P=Q;break t}}else if(O.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===S&&xg(lt)===O.type){a(P,O.sibling),Q=h(O,U.props),Xo(Q,U),Q.return=P,P=Q;break t}a(P,O);break}else i(P,O);O=O.sibling}U.type===z?(Q=vs(U.props.children,P.mode,Q,U.key),Q.return=P,P=Q):(Q=Cu(U.type,U.key,U.props,null,P.mode,Q),Xo(Q,U),Q.return=P,P=Q)}return v(P);case G:t:{for(lt=U.key;O!==null;){if(O.key===lt)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){a(P,O.sibling),Q=h(O,U.children||[]),Q.return=P,P=Q;break t}else{a(P,O);break}else i(P,O);O=O.sibling}Q=Zh(U,P.mode,Q),Q.return=P,P=Q}return v(P);case S:return lt=U._init,U=lt(U._payload),Zt(P,O,U,Q)}if(At(U))return Tt(P,O,U,Q);if(x(U)){if(lt=x(U),typeof lt!="function")throw Error(s(150));return U=lt.call(U),yt(P,O,U,Q)}if(typeof U.then=="function")return Zt(P,O,Fu(U),Q);if(U.$$typeof===ht)return Zt(P,O,Vu(P,U),Q);Qu(P,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,O!==null&&O.tag===6?(a(P,O.sibling),Q=h(O,U),Q.return=P,P=Q):(a(P,O),Q=$h(U,P.mode,Q),Q.return=P,P=Q),v(P)):a(P,O)}return function(P,O,U,Q){try{Yo=0;var lt=Zt(P,O,U,Q);return Ea=null,lt}catch(ct){if(ct===zo||ct===xu)throw ct;var Dt=hn(29,ct,null,P.mode);return Dt.lanes=Q,Dt.return=P,Dt}finally{}}}var Ta=Pg(!0),kg=Pg(!1),Dn=Z(null),ri=null;function hr(e){var i=e.alternate;tt(Ie,Ie.current&1),tt(Dn,e),ri===null&&(i===null||ga.current!==null||i.memoizedState!==null)&&(ri=e)}function Ug(e){if(e.tag===22){if(tt(Ie,Ie.current),tt(Dn,e),ri===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(ri=e)}}else fr()}function fr(){tt(Ie,Ie.current),tt(Dn,Dn.current)}function xi(e){it(Dn),ri===e&&(ri=null),it(Ie)}var Ie=Z(0);function Ku(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Ed(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Of(e,i,a,o){i=e.memoizedState,a=a(o,i),a=a==null?i:T({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Vf={enqueueSetState:function(e,i,a){e=e._reactInternals;var o=pn(),h=lr(o);h.payload=i,a!=null&&(h.callback=a),i=ur(e,h,o),i!==null&&(gn(i,e,o),jo(i,e,o))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var o=pn(),h=lr(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=ur(e,h,o),i!==null&&(gn(i,e,o),jo(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=pn(),o=lr(a);o.tag=2,i!=null&&(o.callback=i),i=ur(e,o,a),i!==null&&(gn(i,e,a),jo(i,e,a))}};function Lg(e,i,a,o,h,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,v):i.prototype&&i.prototype.isPureReactComponent?!Oo(a,o)||!Oo(h,f):!0}function zg(e,i,a,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==e&&Vf.enqueueReplaceState(i,i.state,null)}function Cs(e,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(e=e.defaultProps){a===i&&(a=T({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var Yu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Bg(e){Yu(e)}function jg(e){console.error(e)}function qg(e){Yu(e)}function Xu(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function Hg(e,i,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Mf(e,i,a){return a=lr(a),a.tag=3,a.payload={element:null},a.callback=function(){Xu(e,i)},a}function Gg(e){return e=lr(e),e.tag=3,e}function Fg(e,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;e.payload=function(){return h(f)},e.callback=function(){Hg(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Hg(i,a,o),typeof h!="function"&&(_r===null?_r=new Set([this]):_r.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function sA(e,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&ko(i,a,h,!0),a=Dn.current,a!==null){switch(a.tag){case 13:return ri===null?id():a.alternate===null&&ue===0&&(ue=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===lf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),sd(e,o,h)),!1;case 22:return a.flags|=65536,o===lf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),sd(e,o,h)),!1}throw Error(s(435,a.tag))}return sd(e,o,h),id(),!1}if(qt)return i=Dn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==tf&&(e=Error(s(422),{cause:o}),Po(wn(e,a)))):(o!==tf&&(i=Error(s(423),{cause:o}),Po(wn(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=wn(o,a),h=Mf(e.stateNode,o,h),hf(e,h),ue!==4&&(ue=2)),!1;var f=Error(s(520),{cause:o});if(f=wn(f,a),nl===null?nl=[f]:nl.push(f),ue!==4&&(ue=2),i===null)return!0;o=wn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Mf(a.stateNode,o,e),hf(a,e),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(_r===null||!_r.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Gg(h),Fg(h,e,a,o),hf(a,h),!1}a=a.return}while(a!==null);return!1}var Qg=Error(s(461)),Ve=!1;function ze(e,i,a,o){i.child=e===null?kg(i,null,a,o):Ta(i,e.child,a,o)}function Kg(e,i,a,o,h){a=a.render;var f=i.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return ws(i),o=gf(e,i,a,v,f,h),E=yf(),e!==null&&!Ve?(_f(e,i,h),Pi(e,i,h)):(qt&&E&&Wh(i),i.flags|=1,ze(e,i,o,h),i.child)}function Yg(e,i,a,o,h){if(e===null){var f=a.type;return typeof f=="function"&&!Xh(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,Xg(e,i,f,o,h)):(e=Cu(a.type,null,o,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(f=e.child,!jf(e,h)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:Oo,a(v,o)&&e.ref===i.ref)return Pi(e,i,h)}return i.flags|=1,e=Ci(f,o),e.ref=i.ref,e.return=i,i.child=e}function Xg(e,i,a,o,h){if(e!==null){var f=e.memoizedProps;if(Oo(f,o)&&e.ref===i.ref)if(Ve=!1,i.pendingProps=o=f,jf(e,h))(e.flags&131072)!==0&&(Ve=!0);else return i.lanes=e.lanes,Pi(e,i,h)}return xf(e,i,a,o,h)}function $g(e,i,a){var o=i.pendingProps,h=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,e!==null){for(h=i.child=e.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~o}else i.childLanes=0,i.child=null;return Zg(e,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Mu(i,f!==null?f.cachePool:null),f!==null?Xp(i,f):df(),Ug(i);else return i.lanes=i.childLanes=536870912,Zg(e,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(Mu(i,f.cachePool),Xp(i,f),fr(),i.memoizedState=null):(e!==null&&Mu(i,null),df(),fr());return ze(e,i,h,a),i.child}function Zg(e,i,a,o){var h=of();return h=h===null?null:{parent:Re._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&Mu(i,null),df(),Ug(i),e!==null&&ko(e,i,o,!0),null}function $u(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function xf(e,i,a,o,h){return ws(i),a=gf(e,i,a,o,void 0,h),o=yf(),e!==null&&!Ve?(_f(e,i,h),Pi(e,i,h)):(qt&&o&&Wh(i),i.flags|=1,ze(e,i,a,h),i.child)}function Wg(e,i,a,o,h,f){return ws(i),i.updateQueue=null,a=Zp(i,o,a,h),$p(e),o=yf(),e!==null&&!Ve?(_f(e,i,f),Pi(e,i,f)):(qt&&o&&Wh(i),i.flags|=1,ze(e,i,a,f),i.child)}function Jg(e,i,a,o,h){if(ws(i),i.stateNode===null){var f=ha,v=a.contextType;typeof v=="object"&&v!==null&&(f=Qe(v)),f=new a(o,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Vf,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=o,f.state=i.memoizedState,f.refs={},uf(i),v=a.contextType,f.context=typeof v=="object"&&v!==null?Qe(v):ha,f.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Of(i,a,v,o),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&Vf.enqueueReplaceState(f,f.state,null),Ho(i,o,f,h),qo(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){f=i.stateNode;var E=i.memoizedProps,b=Cs(a,E);f.props=b;var L=f.context,F=a.contextType;v=ha,typeof F=="object"&&F!==null&&(v=Qe(F));var Y=a.getDerivedStateFromProps;F=typeof Y=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,F||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||L!==v)&&zg(i,f,o,v),or=!1;var B=i.memoizedState;f.state=B,Ho(i,o,f,h),qo(),L=i.memoizedState,E||B!==L||or?(typeof Y=="function"&&(Of(i,a,Y,o),L=i.memoizedState),(b=or||Lg(i,a,b,o,B,L,v))?(F||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=L),f.props=o,f.state=L,f.context=v,o=b):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{f=i.stateNode,cf(e,i),v=i.memoizedProps,F=Cs(a,v),f.props=F,Y=i.pendingProps,B=f.context,L=a.contextType,b=ha,typeof L=="object"&&L!==null&&(b=Qe(L)),E=a.getDerivedStateFromProps,(L=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==Y||B!==b)&&zg(i,f,o,b),or=!1,B=i.memoizedState,f.state=B,Ho(i,o,f,h),qo();var j=i.memoizedState;v!==Y||B!==j||or||e!==null&&e.dependencies!==null&&Ou(e.dependencies)?(typeof E=="function"&&(Of(i,a,E,o),j=i.memoizedState),(F=or||Lg(i,a,F,o,B,j,b)||e!==null&&e.dependencies!==null&&Ou(e.dependencies))?(L||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,j,b),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,j,b)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=j),f.props=o,f.state=j,f.context=b,o=F):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(i.flags|=1024),o=!1)}return f=o,$u(e,i),o=(i.flags&128)!==0,f||o?(f=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,e!==null&&o?(i.child=Ta(i,e.child,null,h),i.child=Ta(i,null,a,h)):ze(e,i,a,h),i.memoizedState=f.state,e=i.child):e=Pi(e,i,h),e}function ty(e,i,a,o){return xo(),i.flags|=256,ze(e,i,a,o),i.child}var Pf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kf(e){return{baseLanes:e,cachePool:jp()}}function Uf(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Nn),e}function ey(e,i,a){var o=i.pendingProps,h=!1,f=(i.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(Ie.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(qt){if(h?hr(i):fr(),qt){var E=le,b;if(b=E){t:{for(b=E,E=ii;b.nodeType!==8;){if(!E){E=null;break t}if(b=jn(b.nextSibling),b===null){E=null;break t}}E=b}E!==null?(i.memoizedState={dehydrated:E,treeContext:Es!==null?{id:Di,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},b=hn(18,null,null,0),b.stateNode=E,b.return=i,i.child=b,en=i,le=null,b=!0):b=!1}b||Ss(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Ed(E)?i.lanes=32:i.lanes=536870912,null;xi(i)}return E=o.children,o=o.fallback,h?(fr(),h=i.mode,E=Zu({mode:"hidden",children:E},h),o=vs(o,h,a,null),E.return=i,o.return=i,E.sibling=o,i.child=E,h=i.child,h.memoizedState=kf(a),h.childLanes=Uf(e,v,a),i.memoizedState=Pf,o):(hr(i),Lf(i,E))}if(b=e.memoizedState,b!==null&&(E=b.dehydrated,E!==null)){if(f)i.flags&256?(hr(i),i.flags&=-257,i=zf(e,i,a)):i.memoizedState!==null?(fr(),i.child=e.child,i.flags|=128,i=null):(fr(),h=o.fallback,E=i.mode,o=Zu({mode:"visible",children:o.children},E),h=vs(h,E,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,Ta(i,e.child,null,a),o=i.child,o.memoizedState=kf(a),o.childLanes=Uf(e,v,a),i.memoizedState=Pf,i=h);else if(hr(i),Ed(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var L=v.dgst;v=L,o=Error(s(419)),o.stack="",o.digest=v,Po({value:o,source:null,stack:null}),i=zf(e,i,a)}else if(Ve||ko(e,i,a,!1),v=(a&e.childLanes)!==0,Ve||v){if(v=te,v!==null&&(o=a&-a,o=(o&42)!==0?1:Ji(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==b.retryLane))throw b.retryLane=o,ca(e,o),gn(v,e,o),Qg;E.data==="$?"||id(),i=zf(e,i,a)}else E.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=b.treeContext,le=jn(E.nextSibling),en=i,qt=!0,As=null,ii=!1,e!==null&&(In[Cn++]=Di,In[Cn++]=Ni,In[Cn++]=Es,Di=e.id,Ni=e.overflow,Es=i),i=Lf(i,o.children),i.flags|=4096);return i}return h?(fr(),h=o.fallback,E=i.mode,b=e.child,L=b.sibling,o=Ci(b,{mode:"hidden",children:o.children}),o.subtreeFlags=b.subtreeFlags&65011712,L!==null?h=Ci(L,h):(h=vs(h,E,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,E=e.child.memoizedState,E===null?E=kf(a):(b=E.cachePool,b!==null?(L=Re._currentValue,b=b.parent!==L?{parent:L,pool:L}:b):b=jp(),E={baseLanes:E.baseLanes|a,cachePool:b}),h.memoizedState=E,h.childLanes=Uf(e,v,a),i.memoizedState=Pf,o):(hr(i),a=e.child,e=a.sibling,a=Ci(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function Lf(e,i){return i=Zu({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Zu(e,i){return e=hn(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function zf(e,i,a){return Ta(i,e.child,null,a),e=Lf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function ny(e,i,a){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),nf(e.return,i,a)}function Bf(e,i,a,o,h){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=h)}function iy(e,i,a){var o=i.pendingProps,h=o.revealOrder,f=o.tail;if(ze(e,i,o.children,a),o=Ie.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ny(e,a,i);else if(e.tag===19)ny(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(tt(Ie,o),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&Ku(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Bf(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Ku(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Bf(i,!0,a,null,f);break;case"together":Bf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Pi(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),yr|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(ko(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=Ci(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Ci(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function jf(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Ou(e)))}function aA(e,i,a){switch(i.tag){case 3:Jt(i,i.stateNode.containerInfo),ar(i,Re,e.memoizedState.cache),xo();break;case 27:case 5:Wi(i);break;case 4:Jt(i,i.stateNode.containerInfo);break;case 10:ar(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(hr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?ey(e,i,a):(hr(i),e=Pi(e,i,a),e!==null?e.sibling:null);hr(i);break;case 19:var h=(e.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(ko(e,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return iy(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),tt(Ie,Ie.current),o)break;return null;case 22:case 23:return i.lanes=0,$g(e,i,a);case 24:ar(i,Re,e.memoizedState.cache)}return Pi(e,i,a)}function ry(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Ve=!0;else{if(!jf(e,a)&&(i.flags&128)===0)return Ve=!1,aA(e,i,a);Ve=(e.flags&131072)!==0}else Ve=!1,qt&&(i.flags&1048576)!==0&&xp(i,Nu,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")Xh(o)?(e=Cs(o,e),i.tag=1,i=Jg(null,i,o,e,a)):(i.tag=0,i=xf(null,i,o,e,a));else{if(o!=null){if(h=o.$$typeof,h===rt){i.tag=11,i=Kg(null,i,o,e,a);break t}else if(h===V){i.tag=14,i=Yg(null,i,o,e,a);break t}}throw i=me(o)||o,Error(s(306,i,""))}}return i;case 0:return xf(e,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=Cs(o,i.pendingProps),Jg(e,i,o,h,a);case 3:t:{if(Jt(i,i.stateNode.containerInfo),e===null)throw Error(s(387));o=i.pendingProps;var f=i.memoizedState;h=f.element,cf(e,i),Ho(i,o,null,a);var v=i.memoizedState;if(o=v.cache,ar(i,Re,o),o!==f.cache&&rf(i,[Re],a,!0),qo(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=ty(e,i,o,a);break t}else if(o!==h){h=wn(Error(s(424)),i),Po(h),i=ty(e,i,o,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(le=jn(e.firstChild),en=i,qt=!0,As=null,ii=!0,a=kg(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(xo(),o===h){i=Pi(e,i,a);break t}ze(e,i,o,a)}i=i.child}return i;case 26:return $u(e,i),e===null?(a=l_(i.type,null,i.pendingProps,null))?i.memoizedState=a:qt||(a=i.type,e=i.pendingProps,o=hc(St.current).createElement(a),o[Se]=i,o[pe]=e,je(o,a,e),ce(o),i.stateNode=o):i.memoizedState=l_(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Wi(i),e===null&&qt&&(o=i.stateNode=s_(i.type,i.pendingProps,St.current),en=i,ii=!0,h=le,Tr(i.type)?(Td=h,le=jn(o.firstChild)):le=h),ze(e,i,i.pendingProps.children,a),$u(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&qt&&((h=o=le)&&(o=xA(o,i.type,i.pendingProps,ii),o!==null?(i.stateNode=o,en=i,le=jn(o.firstChild),ii=!1,h=!0):h=!1),h||Ss(i)),Wi(i),h=i.type,f=i.pendingProps,v=e!==null?e.memoizedProps:null,o=f.children,yd(h,f)?o=null:v!==null&&yd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=gf(e,i,W0,null,null,a),hl._currentValue=h),$u(e,i),ze(e,i,o,a),i.child;case 6:return e===null&&qt&&((e=a=le)&&(a=PA(a,i.pendingProps,ii),a!==null?(i.stateNode=a,en=i,le=null,e=!0):e=!1),e||Ss(i)),null;case 13:return ey(e,i,a);case 4:return Jt(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=Ta(i,null,o,a):ze(e,i,o,a),i.child;case 11:return Kg(e,i,i.type,i.pendingProps,a);case 7:return ze(e,i,i.pendingProps,a),i.child;case 8:return ze(e,i,i.pendingProps.children,a),i.child;case 12:return ze(e,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,ar(i,i.type,o.value),ze(e,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,ws(i),h=Qe(h),o=o(h),i.flags|=1,ze(e,i,o,a),i.child;case 14:return Yg(e,i,i.type,i.pendingProps,a);case 15:return Xg(e,i,i.type,i.pendingProps,a);case 19:return iy(e,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},e===null?(a=Zu(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Ci(e.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return $g(e,i,a);case 24:return ws(i),o=Qe(Re),e===null?(h=of(),h===null&&(h=te,f=sf(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:o,cache:h},uf(i),ar(i,Re,h)):((e.lanes&a)!==0&&(cf(e,i),Ho(i,null,null,a),qo()),h=e.memoizedState,f=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),ar(i,Re,o)):(o=f.cache,ar(i,Re,o),o!==h.cache&&rf(i,[Re],a,!0))),ze(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ki(e){e.flags|=4}function sy(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!d_(i)){if(i=Dn.current,i!==null&&((Lt&4194048)===Lt?ri!==null:(Lt&62914560)!==Lt&&(Lt&536870912)===0||i!==ri))throw Bo=lf,qp;e.flags|=8192}}function Wu(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?fo():536870912,e.lanes|=i,wa|=i)}function $o(e,i){if(!qt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function se(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,i}function oA(e,i,a){var o=i.pendingProps;switch(Jh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return se(i),null;case 1:return se(i),null;case 3:return a=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Vi(Re),Fn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Mo(i)?ki(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Up())),se(i),null;case 26:return a=i.memoizedState,e===null?(ki(i),a!==null?(se(i),sy(i,a)):(se(i),i.flags&=-16777217)):a?a!==e.memoizedState?(ki(i),se(i),sy(i,a)):(se(i),i.flags&=-16777217):(e.memoizedProps!==o&&ki(i),se(i),i.flags&=-16777217),null;case 27:pi(i),a=St.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==o&&ki(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return se(i),null}e=mt.current,Mo(i)?Pp(i):(e=s_(h,o,a),i.stateNode=e,ki(i))}return se(i),null;case 5:if(pi(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&ki(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return se(i),null}if(e=mt.current,Mo(i))Pp(i);else{switch(h=hc(St.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}e[Se]=i,e[pe]=o;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(je(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&ki(i)}}return se(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&ki(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(e=St.current,Mo(i)){if(e=i.stateNode,a=i.memoizedProps,o=null,h=en,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Se]=i,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Wy(e.nodeValue,a)),e||Ss(i)}else e=hc(e).createTextNode(o),e[Se]=i,i.stateNode=e}return se(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Mo(i),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Se]=i}else xo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;se(i),h=!1}else h=Up(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(xi(i),i):(xi(i),null)}if(xi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),Wu(i,i.updateQueue),se(i),null;case 4:return Fn(),e===null&&fd(i.stateNode.containerInfo),se(i),null;case 10:return Vi(i.type),se(i),null;case 19:if(it(Ie),h=i.memoizedState,h===null)return se(i),null;if(o=(i.flags&128)!==0,f=h.rendering,f===null)if(o)$o(h,!1);else{if(ue!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(f=Ku(e),f!==null){for(i.flags|=128,$o(h,!1),e=f.updateQueue,i.updateQueue=e,Wu(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Mp(a,e),a=a.sibling;return tt(Ie,Ie.current&1|2),i.child}e=e.sibling}h.tail!==null&&vn()>ec&&(i.flags|=128,o=!0,$o(h,!1),i.lanes=4194304)}else{if(!o)if(e=Ku(f),e!==null){if(i.flags|=128,o=!0,e=e.updateQueue,i.updateQueue=e,Wu(i,e),$o(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!qt)return se(i),null}else 2*vn()-h.renderingStartTime>ec&&a!==536870912&&(i.flags|=128,o=!0,$o(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(e=h.last,e!==null?e.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=vn(),i.sibling=null,e=Ie.current,tt(Ie,o?e&1|2:e&1),i):(se(i),null);case 22:case 23:return xi(i),mf(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(se(i),i.subtreeFlags&6&&(i.flags|=8192)):se(i),a=i.updateQueue,a!==null&&Wu(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),e!==null&&it(Rs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Vi(Re),se(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function lA(e,i){switch(Jh(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Vi(Re),Fn(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return pi(i),null;case 13:if(xi(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));xo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return it(Ie),null;case 4:return Fn(),null;case 10:return Vi(i.type),null;case 22:case 23:return xi(i),mf(),e!==null&&it(Rs),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Vi(Re),null;case 25:return null;default:return null}}function ay(e,i){switch(Jh(i),i.tag){case 3:Vi(Re),Fn();break;case 26:case 27:case 5:pi(i);break;case 4:Fn();break;case 13:xi(i);break;case 19:it(Ie);break;case 10:Vi(i.type);break;case 22:case 23:xi(i),mf(),e!==null&&it(Rs);break;case 24:Vi(Re)}}function Zo(e,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==h)}}catch(E){Wt(i,i.return,E)}}function dr(e,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&e)===e){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=i;var b=a,L=E;try{L()}catch(F){Wt(h,b,F)}}}o=o.next}while(o!==f)}}catch(F){Wt(i,i.return,F)}}function oy(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{Yp(i,a)}catch(o){Wt(e,e.return,o)}}}function ly(e,i,a){a.props=Cs(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Wt(e,i,o)}}function Wo(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){Wt(e,i,h)}}function si(e,i){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Wt(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Wt(e,i,h)}else a.current=null}function uy(e){var i=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Wt(e,e.return,h)}}function qf(e,i,a){try{var o=e.stateNode;DA(o,e.type,a,i),o[pe]=i}catch(h){Wt(e,e.return,h)}}function cy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Tr(e.type)||e.tag===4}function Hf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||cy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Tr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gf(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=cc));else if(o!==4&&(o===27&&Tr(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(Gf(e,i,a),e=e.sibling;e!==null;)Gf(e,i,a),e=e.sibling}function Ju(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(o!==4&&(o===27&&Tr(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ju(e,i,a),e=e.sibling;e!==null;)Ju(e,i,a),e=e.sibling}function hy(e){var i=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);je(i,o,a),i[Se]=e,i[pe]=a}catch(f){Wt(e,e.return,f)}}var Ui=!1,fe=!1,Ff=!1,fy=typeof WeakSet=="function"?WeakSet:Set,Me=null;function uA(e,i){if(e=e.containerInfo,pd=yc,e=Sp(e),qh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break t}var v=0,E=-1,b=-1,L=0,F=0,Y=e,B=null;e:for(;;){for(var j;Y!==a||h!==0&&Y.nodeType!==3||(E=v+h),Y!==f||o!==0&&Y.nodeType!==3||(b=v+o),Y.nodeType===3&&(v+=Y.nodeValue.length),(j=Y.firstChild)!==null;)B=Y,Y=j;for(;;){if(Y===e)break e;if(B===a&&++L===h&&(E=v),B===f&&++F===o&&(b=v),(j=Y.nextSibling)!==null)break;Y=B,B=Y.parentNode}Y=j}a=E===-1||b===-1?null:{start:E,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(gd={focusedElem:e,selectionRange:a},yc=!1,Me=i;Me!==null;)if(i=Me,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,Me=e;else for(;Me!==null;){switch(i=Me,f=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var Tt=Cs(a.type,h,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(Tt,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(yt){Wt(a,a.return,yt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)vd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":vd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Me=e;break}Me=i.return}}function dy(e,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:mr(e,a),o&4&&Zo(5,a);break;case 1:if(mr(e,a),o&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(v){Wt(a,a.return,v)}else{var h=Cs(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Wt(a,a.return,v)}}o&64&&oy(a),o&512&&Wo(a,a.return);break;case 3:if(mr(e,a),o&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Yp(e,i)}catch(v){Wt(a,a.return,v)}}break;case 27:i===null&&o&4&&hy(a);case 26:case 5:mr(e,a),i===null&&o&4&&uy(a),o&512&&Wo(a,a.return);break;case 12:mr(e,a);break;case 13:mr(e,a),o&4&&gy(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=_A.bind(null,a),kA(e,a))));break;case 22:if(o=a.memoizedState!==null||Ui,!o){i=i!==null&&i.memoizedState!==null||fe,h=Ui;var f=fe;Ui=o,(fe=i)&&!f?pr(e,a,(a.subtreeFlags&8772)!==0):mr(e,a),Ui=h,fe=f}break;case 30:break;default:mr(e,a)}}function my(e){var i=e.alternate;i!==null&&(e.alternate=null,my(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&nr(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var re=null,rn=!1;function Li(e,i,a){for(a=a.child;a!==null;)py(e,i,a),a=a.sibling}function py(e,i,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(oe,a)}catch{}switch(a.tag){case 26:fe||si(a,i),Li(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:fe||si(a,i);var o=re,h=rn;Tr(a.type)&&(re=a.stateNode,rn=!1),Li(e,i,a),ol(a.stateNode),re=o,rn=h;break;case 5:fe||si(a,i);case 6:if(o=re,h=rn,re=null,Li(e,i,a),re=o,rn=h,re!==null)if(rn)try{(re.nodeType===9?re.body:re.nodeName==="HTML"?re.ownerDocument.body:re).removeChild(a.stateNode)}catch(f){Wt(a,i,f)}else try{re.removeChild(a.stateNode)}catch(f){Wt(a,i,f)}break;case 18:re!==null&&(rn?(e=re,i_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),pl(e)):i_(re,a.stateNode));break;case 4:o=re,h=rn,re=a.stateNode.containerInfo,rn=!0,Li(e,i,a),re=o,rn=h;break;case 0:case 11:case 14:case 15:fe||dr(2,a,i),fe||dr(4,a,i),Li(e,i,a);break;case 1:fe||(si(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&ly(a,i,o)),Li(e,i,a);break;case 21:Li(e,i,a);break;case 22:fe=(o=fe)||a.memoizedState!==null,Li(e,i,a),fe=o;break;default:Li(e,i,a)}}function gy(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{pl(e)}catch(a){Wt(i,i.return,a)}}function cA(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new fy),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new fy),i;default:throw Error(s(435,e.tag))}}function Qf(e,i){var a=cA(e);i.forEach(function(o){var h=vA.bind(null,e,o);a.has(o)||(a.add(o),o.then(h,h))})}function fn(e,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=e,v=i,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(Tr(E.type)){re=E.stateNode,rn=!1;break t}break;case 5:re=E.stateNode,rn=!1;break t;case 3:case 4:re=E.stateNode.containerInfo,rn=!0;break t}E=E.return}if(re===null)throw Error(s(160));py(f,v,h),re=null,rn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)yy(i,e),i=i.sibling}var Bn=null;function yy(e,i){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:fn(i,e),dn(e),o&4&&(dr(3,e,e.return),Zo(3,e),dr(5,e,e.return));break;case 1:fn(i,e),dn(e),o&512&&(fe||a===null||si(a,a.return)),o&64&&Ui&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Bn;if(fn(i,e),dn(e),o&512&&(fe||a===null||si(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[is]||f[Se]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),je(f,o,a),f[Se]=e,ce(f),o=f;break t;case"link":var v=h_("link","href",h).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(f=v[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}f=h.createElement(o),je(f,o,a),h.head.appendChild(f);break;case"meta":if(v=h_("meta","content",h).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(f=v[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}f=h.createElement(o),je(f,o,a),h.head.appendChild(f);break;default:throw Error(s(468,o))}f[Se]=e,ce(f),o=f}e.stateNode=o}else f_(h,e.type,e.stateNode);else e.stateNode=c_(h,o,e.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?f_(h,e.type,e.stateNode):c_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&qf(e,e.memoizedProps,a.memoizedProps)}break;case 27:fn(i,e),dn(e),o&512&&(fe||a===null||si(a,a.return)),a!==null&&o&4&&qf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(fn(i,e),dn(e),o&512&&(fe||a===null||si(a,a.return)),e.flags&32){h=e.stateNode;try{Tn(h,"")}catch(j){Wt(e,e.return,j)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,qf(e,h,a!==null?a.memoizedProps:h)),o&1024&&(Ff=!0);break;case 6:if(fn(i,e),dn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(j){Wt(e,e.return,j)}}break;case 3:if(mc=null,h=Bn,Bn=fc(i.containerInfo),fn(i,e),Bn=h,dn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{pl(i.containerInfo)}catch(j){Wt(e,e.return,j)}Ff&&(Ff=!1,_y(e));break;case 4:o=Bn,Bn=fc(e.stateNode.containerInfo),fn(i,e),dn(e),Bn=o;break;case 12:fn(i,e),dn(e);break;case 13:fn(i,e),dn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Wf=vn()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Qf(e,o)));break;case 22:h=e.memoizedState!==null;var b=a!==null&&a.memoizedState!==null,L=Ui,F=fe;if(Ui=L||h,fe=F||b,fn(i,e),fe=F,Ui=L,dn(e),o&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||b||Ui||fe||Ds(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){b=a=i;try{if(f=b.stateNode,h)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=b.stateNode;var Y=b.memoizedProps.style,B=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;E.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(j){Wt(b,b.return,j)}}}else if(i.tag===6){if(a===null){b=i;try{b.stateNode.nodeValue=h?"":b.memoizedProps}catch(j){Wt(b,b.return,j)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Qf(e,a))));break;case 19:fn(i,e),dn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Qf(e,o)));break;case 30:break;case 21:break;default:fn(i,e),dn(e)}}function dn(e){var i=e.flags;if(i&2){try{for(var a,o=e.return;o!==null;){if(cy(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=Hf(e);Ju(e,f,h);break;case 5:var v=a.stateNode;a.flags&32&&(Tn(v,""),a.flags&=-33);var E=Hf(e);Ju(e,E,v);break;case 3:case 4:var b=a.stateNode.containerInfo,L=Hf(e);Gf(e,L,b);break;default:throw Error(s(161))}}catch(F){Wt(e,e.return,F)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function _y(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;_y(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function mr(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)dy(e,i.alternate,i),i=i.sibling}function Ds(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:dr(4,i,i.return),Ds(i);break;case 1:si(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&ly(i,i.return,a),Ds(i);break;case 27:ol(i.stateNode);case 26:case 5:si(i,i.return),Ds(i);break;case 22:i.memoizedState===null&&Ds(i);break;case 30:Ds(i);break;default:Ds(i)}e=e.sibling}}function pr(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=e,f=i,v=f.flags;switch(f.tag){case 0:case 11:case 15:pr(h,f,a),Zo(4,f);break;case 1:if(pr(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(L){Wt(o,o.return,L)}if(o=f,h=o.updateQueue,h!==null){var E=o.stateNode;try{var b=h.shared.hiddenCallbacks;if(b!==null)for(h.shared.hiddenCallbacks=null,h=0;h<b.length;h++)Kp(b[h],E)}catch(L){Wt(o,o.return,L)}}a&&v&64&&oy(f),Wo(f,f.return);break;case 27:hy(f);case 26:case 5:pr(h,f,a),a&&o===null&&v&4&&uy(f),Wo(f,f.return);break;case 12:pr(h,f,a);break;case 13:pr(h,f,a),a&&v&4&&gy(h,f);break;case 22:f.memoizedState===null&&pr(h,f,a),Wo(f,f.return);break;case 30:break;default:pr(h,f,a)}i=i.sibling}}function Kf(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Uo(a))}function Yf(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Uo(e))}function ai(e,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)vy(e,i,a,o),i=i.sibling}function vy(e,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ai(e,i,a,o),h&2048&&Zo(9,i);break;case 1:ai(e,i,a,o);break;case 3:ai(e,i,a,o),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Uo(e)));break;case 12:if(h&2048){ai(e,i,a,o),e=i.stateNode;try{var f=i.memoizedProps,v=f.id,E=f.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){Wt(i,i.return,b)}}else ai(e,i,a,o);break;case 13:ai(e,i,a,o);break;case 23:break;case 22:f=i.stateNode,v=i.alternate,i.memoizedState!==null?f._visibility&2?ai(e,i,a,o):Jo(e,i):f._visibility&2?ai(e,i,a,o):(f._visibility|=2,Aa(e,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&Kf(v,i);break;case 24:ai(e,i,a,o),h&2048&&Yf(i.alternate,i);break;default:ai(e,i,a,o)}}function Aa(e,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=e,v=i,E=a,b=o,L=v.flags;switch(v.tag){case 0:case 11:case 15:Aa(f,v,E,b,h),Zo(8,v);break;case 23:break;case 22:var F=v.stateNode;v.memoizedState!==null?F._visibility&2?Aa(f,v,E,b,h):Jo(f,v):(F._visibility|=2,Aa(f,v,E,b,h)),h&&L&2048&&Kf(v.alternate,v);break;case 24:Aa(f,v,E,b,h),h&&L&2048&&Yf(v.alternate,v);break;default:Aa(f,v,E,b,h)}i=i.sibling}}function Jo(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,o=i,h=o.flags;switch(o.tag){case 22:Jo(a,o),h&2048&&Kf(o.alternate,o);break;case 24:Jo(a,o),h&2048&&Yf(o.alternate,o);break;default:Jo(a,o)}i=i.sibling}}var tl=8192;function Sa(e){if(e.subtreeFlags&tl)for(e=e.child;e!==null;)Ey(e),e=e.sibling}function Ey(e){switch(e.tag){case 26:Sa(e),e.flags&tl&&e.memoizedState!==null&&XA(Bn,e.memoizedState,e.memoizedProps);break;case 5:Sa(e);break;case 3:case 4:var i=Bn;Bn=fc(e.stateNode.containerInfo),Sa(e),Bn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=tl,tl=16777216,Sa(e),tl=i):Sa(e));break;default:Sa(e)}}function Ty(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function el(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Me=o,Sy(o,e)}Ty(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ay(e),e=e.sibling}function Ay(e){switch(e.tag){case 0:case 11:case 15:el(e),e.flags&2048&&dr(9,e,e.return);break;case 3:el(e);break;case 12:el(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,tc(e)):el(e);break;default:el(e)}}function tc(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Me=o,Sy(o,e)}Ty(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:dr(8,i,i.return),tc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,tc(i));break;default:tc(i)}e=e.sibling}}function Sy(e,i){for(;Me!==null;){var a=Me;switch(a.tag){case 0:case 11:case 15:dr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Uo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Me=o;else t:for(a=e;Me!==null;){o=Me;var h=o.sibling,f=o.return;if(my(o),o===a){Me=null;break t}if(h!==null){h.return=f,Me=h;break t}Me=f}}}var hA={getCacheForType:function(e){var i=Qe(Re),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},fA=typeof WeakMap=="function"?WeakMap:Map,Qt=0,te=null,Nt=null,Lt=0,Kt=0,mn=null,gr=!1,ba=!1,Xf=!1,zi=0,ue=0,yr=0,Ns=0,$f=0,Nn=0,wa=0,nl=null,sn=null,Zf=!1,Wf=0,ec=1/0,nc=null,_r=null,Be=0,vr=null,Ra=null,Ia=0,Jf=0,td=null,by=null,il=0,ed=null;function pn(){if((Qt&2)!==0&&Lt!==0)return Lt&-Lt;if(H.T!==null){var e=ma;return e!==0?e:ld()}return tr()}function wy(){Nn===0&&(Nn=(Lt&536870912)===0||qt?ho():536870912);var e=Dn.current;return e!==null&&(e.flags|=32),Nn}function gn(e,i,a){(e===te&&(Kt===2||Kt===9)||e.cancelPendingCommit!==null)&&(Ca(e,0),Er(e,Lt,Nn,!1)),yi(e,a),((Qt&2)===0||e!==te)&&(e===te&&((Qt&2)===0&&(Ns|=a),ue===4&&Er(e,Lt,Nn,!1)),oi(e))}function Ry(e,i,a){if((Qt&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&e.expiredLanes)===0||ns(e,i),h=o?pA(e,i):rd(e,i,!0),f=o;do{if(h===0){ba&&!o&&Er(e,i,0,!1);break}else{if(a=e.current.alternate,f&&!dA(a)){h=rd(e,i,!1),f=!1;continue}if(h===2){if(f=i,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var E=e;h=nl;var b=E.current.memoizedState.isDehydrated;if(b&&(Ca(E,v).flags|=256),v=rd(E,v,!1),v!==2){if(Xf&&!b){E.errorRecoveryDisabledLanes|=f,Ns|=f,h=4;break t}f=sn,sn=h,f!==null&&(sn===null?sn=f:sn.push.apply(sn,f))}h=v}if(f=!1,h!==2)continue}}if(h===1){Ca(e,0),Er(e,i,0,!0);break}t:{switch(o=e,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Er(o,i,Nn,!gr);break t;case 2:sn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Wf+300-vn(),10<h)){if(Er(o,i,Nn,!gr),Fs(o,0,!0)!==0)break t;o.timeoutHandle=e_(Iy.bind(null,o,a,sn,nc,Zf,i,Nn,Ns,wa,gr,f,2,-0,0),h);break t}Iy(o,a,sn,nc,Zf,i,Nn,Ns,wa,gr,f,0,-0,0)}}break}while(!0);oi(e)}function Iy(e,i,a,o,h,f,v,E,b,L,F,Y,B,j){if(e.timeoutHandle=-1,Y=i.subtreeFlags,(Y&8192||(Y&16785408)===16785408)&&(cl={stylesheets:null,count:0,unsuspend:YA},Ey(i),Y=$A(),Y!==null)){e.cancelPendingCommit=Y(xy.bind(null,e,i,f,a,o,h,v,E,b,F,1,B,j)),Er(e,f,v,!L);return}xy(e,i,f,a,o,h,v,E,b)}function dA(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!cn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Er(e,i,a,o){i&=~$f,i&=~Ns,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var h=i;0<h;){var f=31-Fe(h),v=1<<f;o[f]=-1,h&=~v}a!==0&&Qn(e,a,i)}function ic(){return(Qt&6)===0?(rl(0),!1):!0}function nd(){if(Nt!==null){if(Kt===0)var e=Nt.return;else e=Nt,Oi=bs=null,vf(e),Ea=null,Yo=0,e=Nt;for(;e!==null;)ay(e.alternate,e),e=e.return;Nt=null}}function Ca(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,OA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),nd(),te=e,Nt=a=Ci(e.current,null),Lt=i,Kt=0,mn=null,gr=!1,ba=ns(e,i),Xf=!1,wa=Nn=$f=Ns=yr=ue=0,sn=nl=null,Zf=!1,(i&8)!==0&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var h=31-Fe(o),f=1<<h;i|=e[h],o&=~f}return zi=i,wu(),a}function Cy(e,i){It=null,H.H=Gu,i===zo||i===xu?(i=Fp(),Kt=3):i===qp?(i=Fp(),Kt=4):Kt=i===Qg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,mn=i,Nt===null&&(ue=1,Xu(e,wn(i,e.current)))}function Dy(){var e=H.H;return H.H=Gu,e===null?Gu:e}function Ny(){var e=H.A;return H.A=hA,e}function id(){ue=4,gr||(Lt&4194048)!==Lt&&Dn.current!==null||(ba=!0),(yr&134217727)===0&&(Ns&134217727)===0||te===null||Er(te,Lt,Nn,!1)}function rd(e,i,a){var o=Qt;Qt|=2;var h=Dy(),f=Ny();(te!==e||Lt!==i)&&(nc=null,Ca(e,i)),i=!1;var v=ue;t:do try{if(Kt!==0&&Nt!==null){var E=Nt,b=mn;switch(Kt){case 8:nd(),v=6;break t;case 3:case 2:case 9:case 6:Dn.current===null&&(i=!0);var L=Kt;if(Kt=0,mn=null,Da(e,E,b,L),a&&ba){v=0;break t}break;default:L=Kt,Kt=0,mn=null,Da(e,E,b,L)}}mA(),v=ue;break}catch(F){Cy(e,F)}while(!0);return i&&e.shellSuspendCounter++,Oi=bs=null,Qt=o,H.H=h,H.A=f,Nt===null&&(te=null,Lt=0,wu()),v}function mA(){for(;Nt!==null;)Oy(Nt)}function pA(e,i){var a=Qt;Qt|=2;var o=Dy(),h=Ny();te!==e||Lt!==i?(nc=null,ec=vn()+500,Ca(e,i)):ba=ns(e,i);t:do try{if(Kt!==0&&Nt!==null){i=Nt;var f=mn;e:switch(Kt){case 1:Kt=0,mn=null,Da(e,i,f,1);break;case 2:case 9:if(Hp(f)){Kt=0,mn=null,Vy(i);break}i=function(){Kt!==2&&Kt!==9||te!==e||(Kt=7),oi(e)},f.then(i,i);break t;case 3:Kt=7;break t;case 4:Kt=5;break t;case 7:Hp(f)?(Kt=0,mn=null,Vy(i)):(Kt=0,mn=null,Da(e,i,f,7));break;case 5:var v=null;switch(Nt.tag){case 26:v=Nt.memoizedState;case 5:case 27:var E=Nt;if(!v||d_(v)){Kt=0,mn=null;var b=E.sibling;if(b!==null)Nt=b;else{var L=E.return;L!==null?(Nt=L,rc(L)):Nt=null}break e}}Kt=0,mn=null,Da(e,i,f,5);break;case 6:Kt=0,mn=null,Da(e,i,f,6);break;case 8:nd(),ue=6;break t;default:throw Error(s(462))}}gA();break}catch(F){Cy(e,F)}while(!0);return Oi=bs=null,H.H=o,H.A=h,Qt=a,Nt!==null?0:(te=null,Lt=0,wu(),ue)}function gA(){for(;Nt!==null&&!oo();)Oy(Nt)}function Oy(e){var i=ry(e.alternate,e,zi);e.memoizedProps=e.pendingProps,i===null?rc(e):Nt=i}function Vy(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=Wg(a,i,i.pendingProps,i.type,void 0,Lt);break;case 11:i=Wg(a,i,i.pendingProps,i.type.render,i.ref,Lt);break;case 5:vf(i);default:ay(a,i),i=Nt=Mp(i,zi),i=ry(a,i,zi)}e.memoizedProps=e.pendingProps,i===null?rc(e):Nt=i}function Da(e,i,a,o){Oi=bs=null,vf(i),Ea=null,Yo=0;var h=i.return;try{if(sA(e,h,i,a,Lt)){ue=1,Xu(e,wn(a,e.current)),Nt=null;return}}catch(f){if(h!==null)throw Nt=h,f;ue=1,Xu(e,wn(a,e.current)),Nt=null;return}i.flags&32768?(qt||o===1?e=!0:ba||(Lt&536870912)!==0?e=!1:(gr=e=!0,(o===2||o===9||o===3||o===6)&&(o=Dn.current,o!==null&&o.tag===13&&(o.flags|=16384))),My(i,e)):rc(i)}function rc(e){var i=e;do{if((i.flags&32768)!==0){My(i,gr);return}e=i.return;var a=oA(i.alternate,i,zi);if(a!==null){Nt=a;return}if(i=i.sibling,i!==null){Nt=i;return}Nt=i=e}while(i!==null);ue===0&&(ue=5)}function My(e,i){do{var a=lA(e.alternate,e);if(a!==null){a.flags&=32767,Nt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Nt=e;return}Nt=e=a}while(e!==null);ue=6,Nt=null}function xy(e,i,a,o,h,f,v,E,b){e.cancelPendingCommit=null;do sc();while(Be!==0);if((Qt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=Kh,mo(e,a,f,v,E,b),e===te&&(Nt=te=null,Lt=0),Ra=i,vr=e,Ia=a,Jf=f,td=h,by=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,EA(Wr,function(){return zy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=H.T,H.T=null,h=J.p,J.p=2,v=Qt,Qt|=4;try{uA(e,i,a)}finally{Qt=v,J.p=h,H.T=o}}Be=1,Py(),ky(),Uy()}}function Py(){if(Be===1){Be=0;var e=vr,i=Ra,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var o=J.p;J.p=2;var h=Qt;Qt|=4;try{yy(i,e);var f=gd,v=Sp(e.containerInfo),E=f.focusedElem,b=f.selectionRange;if(v!==E&&E&&E.ownerDocument&&Ap(E.ownerDocument.documentElement,E)){if(b!==null&&qh(E)){var L=b.start,F=b.end;if(F===void 0&&(F=L),"selectionStart"in E)E.selectionStart=L,E.selectionEnd=Math.min(F,E.value.length);else{var Y=E.ownerDocument||document,B=Y&&Y.defaultView||window;if(B.getSelection){var j=B.getSelection(),Tt=E.textContent.length,yt=Math.min(b.start,Tt),Zt=b.end===void 0?yt:Math.min(b.end,Tt);!j.extend&&yt>Zt&&(v=Zt,Zt=yt,yt=v);var P=Tp(E,yt),O=Tp(E,Zt);if(P&&O&&(j.rangeCount!==1||j.anchorNode!==P.node||j.anchorOffset!==P.offset||j.focusNode!==O.node||j.focusOffset!==O.offset)){var U=Y.createRange();U.setStart(P.node,P.offset),j.removeAllRanges(),yt>Zt?(j.addRange(U),j.extend(O.node,O.offset)):(U.setEnd(O.node,O.offset),j.addRange(U))}}}}for(Y=[],j=E;j=j.parentNode;)j.nodeType===1&&Y.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Y.length;E++){var Q=Y[E];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}yc=!!pd,gd=pd=null}finally{Qt=h,J.p=o,H.T=a}}e.current=i,Be=2}}function ky(){if(Be===2){Be=0;var e=vr,i=Ra,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var o=J.p;J.p=2;var h=Qt;Qt|=4;try{dy(e,i.alternate,i)}finally{Qt=h,J.p=o,H.T=a}}Be=3}}function Uy(){if(Be===4||Be===3){Be=0,tu();var e=vr,i=Ra,a=Ia,o=by;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Be=5:(Be=0,Ra=vr=null,Ly(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(_r=null),Qs(a),i=i.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(oe,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=H.T,h=J.p,J.p=2,H.T=null;try{for(var f=e.onRecoverableError,v=0;v<o.length;v++){var E=o[v];f(E.value,{componentStack:E.stack})}}finally{H.T=i,J.p=h}}(Ia&3)!==0&&sc(),oi(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===ed?il++:(il=0,ed=e):il=0,rl(0)}}function Ly(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Uo(i)))}function sc(e){return Py(),ky(),Uy(),zy()}function zy(){if(Be!==5)return!1;var e=vr,i=Jf;Jf=0;var a=Qs(Ia),o=H.T,h=J.p;try{J.p=32>a?32:a,H.T=null,a=td,td=null;var f=vr,v=Ia;if(Be=0,Ra=vr=null,Ia=0,(Qt&6)!==0)throw Error(s(331));var E=Qt;if(Qt|=4,Ay(f.current),vy(f,f.current,v,a),Qt=E,rl(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(oe,f)}catch{}return!0}finally{J.p=h,H.T=o,Ly(e,i)}}function By(e,i,a){i=wn(a,i),i=Mf(e.stateNode,i,2),e=ur(e,i,2),e!==null&&(yi(e,2),oi(e))}function Wt(e,i,a){if(e.tag===3)By(e,e,a);else for(;i!==null;){if(i.tag===3){By(i,e,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(_r===null||!_r.has(o))){e=wn(a,e),a=Gg(2),o=ur(i,a,2),o!==null&&(Fg(a,o,i,e),yi(o,2),oi(o));break}}i=i.return}}function sd(e,i,a){var o=e.pingCache;if(o===null){o=e.pingCache=new fA;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(Xf=!0,h.add(a),e=yA.bind(null,e,i,a),i.then(e,e))}function yA(e,i,a){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,te===e&&(Lt&a)===a&&(ue===4||ue===3&&(Lt&62914560)===Lt&&300>vn()-Wf?(Qt&2)===0&&Ca(e,0):$f|=a,wa===Lt&&(wa=0)),oi(e)}function jy(e,i){i===0&&(i=fo()),e=ca(e,i),e!==null&&(yi(e,i),oi(e))}function _A(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),jy(e,a)}function vA(e,i){var a=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),jy(e,a)}function EA(e,i){return $r(e,i)}var ac=null,Na=null,ad=!1,oc=!1,od=!1,Os=0;function oi(e){e!==Na&&e.next===null&&(Na===null?ac=Na=e:Na=Na.next=e),oc=!0,ad||(ad=!0,AA())}function rl(e,i){if(!od&&oc){od=!0;do for(var a=!1,o=ac;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var v=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-Fe(42|e)+1)-1,f&=h&~(v&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Fy(o,f))}else f=Lt,f=Fs(o,o===te?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||ns(o,f)||(a=!0,Fy(o,f));o=o.next}while(a);od=!1}}function TA(){qy()}function qy(){oc=ad=!1;var e=0;Os!==0&&(NA()&&(e=Os),Os=0);for(var i=vn(),a=null,o=ac;o!==null;){var h=o.next,f=Hy(o,i);f===0?(o.next=null,a===null?ac=h:a.next=h,h===null&&(Na=a)):(a=o,(e!==0||(f&3)!==0)&&(oc=!0)),o=h}rl(e)}function Hy(e,i){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-Fe(f),E=1<<v,b=h[v];b===-1?((E&a)===0||(E&o)!==0)&&(h[v]=co(E,i)):b<=i&&(e.expiredLanes|=E),f&=~E}if(i=te,a=Lt,a=Fs(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===i&&(Kt===2||Kt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Zr(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ns(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(o!==null&&Zr(o),Qs(a)){case 2:case 8:a=Hs;break;case 32:a=Wr;break;case 268435456:a=Gs;break;default:a=Wr}return o=Gy.bind(null,e),a=$r(a,o),e.callbackPriority=i,e.callbackNode=a,i}return o!==null&&o!==null&&Zr(o),e.callbackPriority=2,e.callbackNode=null,2}function Gy(e,i){if(Be!==0&&Be!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(sc()&&e.callbackNode!==a)return null;var o=Lt;return o=Fs(e,e===te?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Ry(e,o,i),Hy(e,vn()),e.callbackNode!=null&&e.callbackNode===a?Gy.bind(null,e):null)}function Fy(e,i){if(sc())return null;Ry(e,i,!0)}function AA(){VA(function(){(Qt&6)!==0?$r(lo,TA):qy()})}function ld(){return Os===0&&(Os=ho()),Os}function Qy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ws(""+e)}function Ky(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function SA(e,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var f=Qy((h[pe]||null).action),v=o.submitter;v&&(i=(i=v[pe]||null)?Qy(i.formAction):v.getAttribute("formAction"),i!==null&&(f=i,v=null));var E=new Js("action","action",null,o,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Os!==0){var b=v?Ky(h,v):new FormData(h);Cf(a,{pending:!0,data:b,method:h.method,action:f},null,b)}}else typeof f=="function"&&(E.preventDefault(),b=v?Ky(h,v):new FormData(h),Cf(a,{pending:!0,data:b,method:h.method,action:f},f,b))},currentTarget:h}]})}}for(var ud=0;ud<Qh.length;ud++){var cd=Qh[ud],bA=cd.toLowerCase(),wA=cd[0].toUpperCase()+cd.slice(1);zn(bA,"on"+wA)}zn(Rp,"onAnimationEnd"),zn(Ip,"onAnimationIteration"),zn(Cp,"onAnimationStart"),zn("dblclick","onDoubleClick"),zn("focusin","onFocus"),zn("focusout","onBlur"),zn(q0,"onTransitionRun"),zn(H0,"onTransitionStart"),zn(G0,"onTransitionCancel"),zn(Dp,"onTransitionEnd"),vi("onMouseEnter",["mouseout","mouseover"]),vi("onMouseLeave",["mouseout","mouseover"]),vi("onPointerEnter",["pointerout","pointerover"]),vi("onPointerLeave",["pointerout","pointerover"]),Un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Un("onBeforeInput",["compositionend","keypress","textInput","paste"]),Un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sl));function Yy(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var f=void 0;if(i)for(var v=o.length-1;0<=v;v--){var E=o[v],b=E.instance,L=E.currentTarget;if(E=E.listener,b!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=L;try{f(h)}catch(F){Yu(F)}h.currentTarget=null,f=b}else for(v=0;v<o.length;v++){if(E=o[v],b=E.instance,L=E.currentTarget,E=E.listener,b!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=L;try{f(h)}catch(F){Yu(F)}h.currentTarget=null,f=b}}}}function Ot(e,i){var a=i[go];a===void 0&&(a=i[go]=new Set);var o=e+"__bubble";a.has(o)||(Xy(i,e,2,!1),a.add(o))}function hd(e,i,a){var o=0;i&&(o|=4),Xy(a,e,o,i)}var lc="_reactListening"+Math.random().toString(36).slice(2);function fd(e){if(!e[lc]){e[lc]=!0,yo.forEach(function(a){a!=="selectionchange"&&(RA.has(a)||hd(a,!1,e),hd(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[lc]||(i[lc]=!0,hd("selectionchange",!1,i))}}function Xy(e,i,a,o){switch(v_(i)){case 2:var h=JA;break;case 8:h=tS;break;default:h=Rd}a=h.bind(null,i,a,e),h=void 0,!Sn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function dd(e,i,a,o,h){var f=o;if((i&1)===0&&(i&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=o.return;v!==null;){var b=v.tag;if((b===3||b===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=_i(E),v===null)return;if(b=v.tag,b===5||b===6||b===26||b===27){o=f=v;continue t}E=E.parentNode}}o=o.return}cu(function(){var L=f,F=An(a),Y=[];t:{var B=Np.get(e);if(B!==void 0){var j=Js,Tt=e;switch(e){case"keypress":if(Wn(a)===0)break t;case"keydown":case"keyup":j=sa;break;case"focusin":Tt="focus",j=na;break;case"focusout":Tt="blur",j=na;break;case"beforeblur":case"afterblur":j=na;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=bn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Lh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=_u;break;case Rp:case Ip:case Cp:j=ia;break;case Dp:j=Eu;break;case"scroll":case"scrollend":j=hu;break;case"wheel":j=aa;break;case"copy":case"cut":case"paste":j=ra;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Do;break;case"toggle":case"beforetoggle":j=Au}var yt=(i&4)!==0,Zt=!yt&&(e==="scroll"||e==="scrollend"),P=yt?B!==null?B+"Capture":null:B;yt=[];for(var O=L,U;O!==null;){var Q=O;if(U=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||U===null||P===null||(Q=cs(O,P),Q!=null&&yt.push(al(O,Q,U))),Zt)break;O=O.return}0<yt.length&&(B=new j(B,Tt,null,a,F),Y.push({event:B,listeners:yt}))}}if((i&7)===0){t:{if(B=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",B&&a!==Ai&&(Tt=a.relatedTarget||a.fromElement)&&(_i(Tt)||Tt[En]))break t;if((j||B)&&(B=F.window===F?F:(B=F.ownerDocument)?B.defaultView||B.parentWindow:window,j?(Tt=a.relatedTarget||a.toElement,j=L,Tt=Tt?_i(Tt):null,Tt!==null&&(Zt=c(Tt),yt=Tt.tag,Tt!==Zt||yt!==5&&yt!==27&&yt!==6)&&(Tt=null)):(j=null,Tt=L),j!==Tt)){if(yt=bn,Q="onMouseLeave",P="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(yt=Do,Q="onPointerLeave",P="onPointerEnter",O="pointer"),Zt=j==null?B:Yn(j),U=Tt==null?B:Yn(Tt),B=new yt(Q,O+"leave",j,a,F),B.target=Zt,B.relatedTarget=U,Q=null,_i(F)===L&&(yt=new yt(P,O+"enter",Tt,a,F),yt.target=U,yt.relatedTarget=Zt,Q=yt),Zt=Q,j&&Tt)e:{for(yt=j,P=Tt,O=0,U=yt;U;U=Oa(U))O++;for(U=0,Q=P;Q;Q=Oa(Q))U++;for(;0<O-U;)yt=Oa(yt),O--;for(;0<U-O;)P=Oa(P),U--;for(;O--;){if(yt===P||P!==null&&yt===P.alternate)break e;yt=Oa(yt),P=Oa(P)}yt=null}else yt=null;j!==null&&$y(Y,B,j,yt,!1),Tt!==null&&Zt!==null&&$y(Y,Zt,Tt,yt,!0)}}t:{if(B=L?Yn(L):window,j=B.nodeName&&B.nodeName.toLowerCase(),j==="select"||j==="input"&&B.type==="file")var lt=pp;else if(we(B))if(gp)lt=z0;else{lt=U0;var Dt=k0}else j=B.nodeName,!j||j.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?L&&Ao(L.elementType)&&(lt=pp):lt=L0;if(lt&&(lt=lt(e,L))){Ii(Y,lt,a,F);break t}Dt&&Dt(e,B,L),e==="focusout"&&L&&B.type==="number"&&L.memoizedProps.value!=null&&rr(B,"number",B.value)}switch(Dt=L?Yn(L):window,e){case"focusin":(we(Dt)||Dt.contentEditable==="true")&&(oa=Dt,Hh=L,Vo=null);break;case"focusout":Vo=Hh=oa=null;break;case"mousedown":Gh=!0;break;case"contextmenu":case"mouseup":case"dragend":Gh=!1,bp(Y,a,F);break;case"selectionchange":if(j0)break;case"keydown":case"keyup":bp(Y,a,F)}var ct;if(ei)t:{switch(e){case"compositionstart":var _t="onCompositionStart";break t;case"compositionend":_t="onCompositionEnd";break t;case"compositionupdate":_t="onCompositionUpdate";break t}_t=void 0}else kt?q(e,a)&&(_t="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(_t="onCompositionStart");_t&&(_&&a.locale!=="ko"&&(kt||_t!=="onCompositionStart"?_t==="onCompositionEnd"&&kt&&(ct=bo()):(Zn=F,sr="value"in Zn?Zn.value:Zn.textContent,kt=!0)),Dt=uc(L,_t),0<Dt.length&&(_t=new Io(_t,e,null,a,F),Y.push({event:_t,listeners:Dt}),ct?_t.data=ct:(ct=et(a),ct!==null&&(_t.data=ct)))),(ct=m?be(e,a):Ut(e,a))&&(_t=uc(L,"onBeforeInput"),0<_t.length&&(Dt=new Io("onBeforeInput","beforeinput",null,a,F),Y.push({event:Dt,listeners:_t}),Dt.data=ct)),SA(Y,e,L,a,F)}Yy(Y,i)})}function al(e,i,a){return{instance:e,listener:i,currentTarget:a}}function uc(e,i){for(var a=i+"Capture",o=[];e!==null;){var h=e,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=cs(e,a),h!=null&&o.unshift(al(e,h,f)),h=cs(e,i),h!=null&&o.push(al(e,h,f))),e.tag===3)return o;e=e.return}return[]}function Oa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function $y(e,i,a,o,h){for(var f=i._reactName,v=[];a!==null&&a!==o;){var E=a,b=E.alternate,L=E.stateNode;if(E=E.tag,b!==null&&b===o)break;E!==5&&E!==26&&E!==27||L===null||(b=L,h?(L=cs(a,f),L!=null&&v.unshift(al(a,L,b))):h||(L=cs(a,f),L!=null&&v.push(al(a,L,b)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var IA=/\r\n?/g,CA=/\u0000|\uFFFD/g;function Zy(e){return(typeof e=="string"?e:""+e).replace(IA,`
`).replace(CA,"")}function Wy(e,i){return i=Zy(i),Zy(e)===i}function cc(){}function $t(e,i,a,o,h,f){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||Tn(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&Tn(e,""+o);break;case"className":Xn(e,"class",o);break;case"tabIndex":Xn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Xn(e,a,o);break;case"style":To(e,o,f);break;case"data":if(i!=="object"){Xn(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Ws(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&$t(e,i,"name",h.name,h,null),$t(e,i,"formEncType",h.formEncType,h,null),$t(e,i,"formMethod",h.formMethod,h,null),$t(e,i,"formTarget",h.formTarget,h,null)):($t(e,i,"encType",h.encType,h,null),$t(e,i,"method",h.method,h,null),$t(e,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Ws(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=cc);break;case"onScroll":o!=null&&Ot("scroll",e);break;case"onScrollEnd":o!=null&&Ot("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Ws(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Ot("beforetoggle",e),Ot("toggle",e),ir(e,"popover",o);break;case"xlinkActuate":Ue(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ue(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ue(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ue(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ue(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ue(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ue(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ue(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ue(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ir(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=kh.get(a)||a,ir(e,a,o))}}function md(e,i,a,o,h,f){switch(a){case"style":To(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?Tn(e,o):(typeof o=="number"||typeof o=="bigint")&&Tn(e,""+o);break;case"onScroll":o!=null&&Ot("scroll",e);break;case"onScrollEnd":o!=null&&Ot("scrollend",e);break;case"onClick":o!=null&&(e.onclick=cc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ks.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=e[pe]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(i,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):ir(e,a,o)}}}function je(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",e),Ot("load",e);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:$t(e,i,f,v,a,null)}}h&&$t(e,i,"srcSet",a.srcSet,a,null),o&&$t(e,i,"src",a.src,a,null);return;case"input":Ot("invalid",e);var E=f=v=h=null,b=null,L=null;for(o in a)if(a.hasOwnProperty(o)){var F=a[o];if(F!=null)switch(o){case"name":h=F;break;case"type":v=F;break;case"checked":b=F;break;case"defaultChecked":L=F;break;case"value":f=F;break;case"defaultValue":E=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:$t(e,i,o,F,a,null)}}os(e,f,E,b,L,v,h,!1),Zs(e);return;case"select":Ot("invalid",e),o=v=f=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:$t(e,i,h,E,a,null)}i=f,a=v,e.multiple=!!o,i!=null?Ti(e,!!o,i,!1):a!=null&&Ti(e,!!o,a,!0);return;case"textarea":Ot("invalid",e),f=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:$t(e,i,v,E,a,null)}ls(e,o,h,f),Zs(e);return;case"option":for(b in a)if(a.hasOwnProperty(b)&&(o=a[b],o!=null))switch(b){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:$t(e,i,b,o,a,null)}return;case"dialog":Ot("beforetoggle",e),Ot("toggle",e),Ot("cancel",e),Ot("close",e);break;case"iframe":case"object":Ot("load",e);break;case"video":case"audio":for(o=0;o<sl.length;o++)Ot(sl[o],e);break;case"image":Ot("error",e),Ot("load",e);break;case"details":Ot("toggle",e);break;case"embed":case"source":case"link":Ot("error",e),Ot("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(o=a[L],o!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:$t(e,i,L,o,a,null)}return;default:if(Ao(i)){for(F in a)a.hasOwnProperty(F)&&(o=a[F],o!==void 0&&md(e,i,F,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&$t(e,i,E,o,a,null))}function DA(e,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,v=null,E=null,b=null,L=null,F=null;for(j in a){var Y=a[j];if(a.hasOwnProperty(j)&&Y!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":b=Y;default:o.hasOwnProperty(j)||$t(e,i,j,null,o,Y)}}for(var B in o){var j=o[B];if(Y=a[B],o.hasOwnProperty(B)&&(j!=null||Y!=null))switch(B){case"type":f=j;break;case"name":h=j;break;case"checked":L=j;break;case"defaultChecked":F=j;break;case"value":v=j;break;case"defaultValue":E=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,i));break;default:j!==Y&&$t(e,i,B,j,o,Y)}}un(e,v,E,b,L,F,f,h);return;case"select":j=v=E=B=null;for(f in a)if(b=a[f],a.hasOwnProperty(f)&&b!=null)switch(f){case"value":break;case"multiple":j=b;default:o.hasOwnProperty(f)||$t(e,i,f,null,o,b)}for(h in o)if(f=o[h],b=a[h],o.hasOwnProperty(h)&&(f!=null||b!=null))switch(h){case"value":B=f;break;case"defaultValue":E=f;break;case"multiple":v=f;default:f!==b&&$t(e,i,h,f,o,b)}i=E,a=v,o=j,B!=null?Ti(e,!!a,B,!1):!!o!=!!a&&(i!=null?Ti(e,!!a,i,!0):Ti(e,!!a,a?[]:"",!1));return;case"textarea":j=B=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:$t(e,i,E,null,o,h)}for(v in o)if(h=o[v],f=a[v],o.hasOwnProperty(v)&&(h!=null||f!=null))switch(v){case"value":B=h;break;case"defaultValue":j=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&$t(e,i,v,h,o,f)}Yt(e,B,j);return;case"option":for(var Tt in a)if(B=a[Tt],a.hasOwnProperty(Tt)&&B!=null&&!o.hasOwnProperty(Tt))switch(Tt){case"selected":e.selected=!1;break;default:$t(e,i,Tt,null,o,B)}for(b in o)if(B=o[b],j=a[b],o.hasOwnProperty(b)&&B!==j&&(B!=null||j!=null))switch(b){case"selected":e.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:$t(e,i,b,B,o,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in a)B=a[yt],a.hasOwnProperty(yt)&&B!=null&&!o.hasOwnProperty(yt)&&$t(e,i,yt,null,o,B);for(L in o)if(B=o[L],j=a[L],o.hasOwnProperty(L)&&B!==j&&(B!=null||j!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,i));break;default:$t(e,i,L,B,o,j)}return;default:if(Ao(i)){for(var Zt in a)B=a[Zt],a.hasOwnProperty(Zt)&&B!==void 0&&!o.hasOwnProperty(Zt)&&md(e,i,Zt,void 0,o,B);for(F in o)B=o[F],j=a[F],!o.hasOwnProperty(F)||B===j||B===void 0&&j===void 0||md(e,i,F,B,o,j);return}}for(var P in a)B=a[P],a.hasOwnProperty(P)&&B!=null&&!o.hasOwnProperty(P)&&$t(e,i,P,null,o,B);for(Y in o)B=o[Y],j=a[Y],!o.hasOwnProperty(Y)||B===j||B==null&&j==null||$t(e,i,Y,B,o,j)}var pd=null,gd=null;function hc(e){return e.nodeType===9?e:e.ownerDocument}function Jy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function t_(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function yd(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var _d=null;function NA(){var e=window.event;return e&&e.type==="popstate"?e===_d?!1:(_d=e,!0):(_d=null,!1)}var e_=typeof setTimeout=="function"?setTimeout:void 0,OA=typeof clearTimeout=="function"?clearTimeout:void 0,n_=typeof Promise=="function"?Promise:void 0,VA=typeof queueMicrotask=="function"?queueMicrotask:typeof n_<"u"?function(e){return n_.resolve(null).then(e).catch(MA)}:e_;function MA(e){setTimeout(function(){throw e})}function Tr(e){return e==="head"}function i_(e,i){var a=i,o=0,h=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var v=e.ownerDocument;if(a&1&&ol(v.documentElement),a&2&&ol(v.body),a&4)for(a=v.head,ol(a),v=a.firstChild;v;){var E=v.nextSibling,b=v.nodeName;v[is]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){e.removeChild(f),pl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);pl(i)}function vd(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":vd(a),nr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function xA(e,i,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[is])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=jn(e.nextSibling),e===null)break}return null}function PA(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=jn(e.nextSibling),e===null))return null;return e}function Ed(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function kA(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function jn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var Td=null;function r_(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function s_(e,i,a){switch(i=hc(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function ol(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);nr(e)}var On=new Map,a_=new Set;function fc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Bi=J.d;J.d={f:UA,r:LA,D:zA,C:BA,L:jA,m:qA,X:GA,S:HA,M:FA};function UA(){var e=Bi.f(),i=ic();return e||i}function LA(e){var i=Kn(e);i!==null&&i.tag===5&&i.type==="form"?Rg(i):Bi.r(e)}var Va=typeof document>"u"?null:document;function o_(e,i,a){var o=Va;if(o&&typeof i=="string"&&i){var h=ge(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),a_.has(h)||(a_.add(h),e={rel:e,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),je(i,"link",e),ce(i),o.head.appendChild(i)))}}function zA(e){Bi.D(e),o_("dns-prefetch",e,null)}function BA(e,i){Bi.C(e,i),o_("preconnect",e,i)}function jA(e,i,a){Bi.L(e,i,a);var o=Va;if(o&&e&&i){var h='link[rel="preload"][as="'+ge(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+ge(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+ge(a.imageSizes)+'"]')):h+='[href="'+ge(e)+'"]';var f=h;switch(i){case"style":f=Ma(e);break;case"script":f=xa(e)}On.has(f)||(e=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),On.set(f,e),o.querySelector(h)!==null||i==="style"&&o.querySelector(ll(f))||i==="script"&&o.querySelector(ul(f))||(i=o.createElement("link"),je(i,"link",e),ce(i),o.head.appendChild(i)))}}function qA(e,i){Bi.m(e,i);var a=Va;if(a&&e){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+ge(o)+'"][href="'+ge(e)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=xa(e)}if(!On.has(f)&&(e=T({rel:"modulepreload",href:e},i),On.set(f,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ul(f)))return}o=a.createElement("link"),je(o,"link",e),ce(o),a.head.appendChild(o)}}}function HA(e,i,a){Bi.S(e,i,a);var o=Va;if(o&&e){var h=We(o).hoistableStyles,f=Ma(e);i=i||"default";var v=h.get(f);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(ll(f)))E.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":i},a),(a=On.get(f))&&Ad(e,a);var b=v=o.createElement("link");ce(b),je(b,"link",e),b._p=new Promise(function(L,F){b.onload=L,b.onerror=F}),b.addEventListener("load",function(){E.loading|=1}),b.addEventListener("error",function(){E.loading|=2}),E.loading|=4,dc(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(f,v)}}}function GA(e,i){Bi.X(e,i);var a=Va;if(a&&e){var o=We(a).hoistableScripts,h=xa(e),f=o.get(h);f||(f=a.querySelector(ul(h)),f||(e=T({src:e,async:!0},i),(i=On.get(h))&&Sd(e,i),f=a.createElement("script"),ce(f),je(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function FA(e,i){Bi.M(e,i);var a=Va;if(a&&e){var o=We(a).hoistableScripts,h=xa(e),f=o.get(h);f||(f=a.querySelector(ul(h)),f||(e=T({src:e,async:!0,type:"module"},i),(i=On.get(h))&&Sd(e,i),f=a.createElement("script"),ce(f),je(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function l_(e,i,a,o){var h=(h=St.current)?fc(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ma(a.href),a=We(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ma(a.href);var f=We(h).hoistableStyles,v=f.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=h.querySelector(ll(e)))&&!f._p&&(v.instance=f,v.state.loading=5),On.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},On.set(e,a),f||QA(h,e,a,v.state))),i&&o===null)throw Error(s(528,""));return v}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=xa(a),a=We(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Ma(e){return'href="'+ge(e)+'"'}function ll(e){return'link[rel="stylesheet"]['+e+"]"}function u_(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function QA(e,i,a,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),je(i,"link",a),ce(i),e.head.appendChild(i))}function xa(e){return'[src="'+ge(e)+'"]'}function ul(e){return"script[async]"+e}function c_(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+ge(a.href)+'"]');if(o)return i.instance=o,ce(o),o;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ce(o),je(o,"style",h),dc(o,a.precedence,e),i.instance=o;case"stylesheet":h=Ma(a.href);var f=e.querySelector(ll(h));if(f)return i.state.loading|=4,i.instance=f,ce(f),f;o=u_(a),(h=On.get(h))&&Ad(o,h),f=(e.ownerDocument||e).createElement("link"),ce(f);var v=f;return v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),je(f,"link",o),i.state.loading|=4,dc(f,a.precedence,e),i.instance=f;case"script":return f=xa(a.src),(h=e.querySelector(ul(f)))?(i.instance=h,ce(h),h):(o=a,(h=On.get(f))&&(o=T({},a),Sd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),ce(h),je(h,"link",o),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,dc(o,a.precedence,e));return i.instance}function dc(e,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===i)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(e,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Ad(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Sd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var mc=null;function h_(e,i,a){if(mc===null){var o=new Map,h=mc=new Map;h.set(a,o)}else h=mc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var f=a[h];if(!(f[is]||f[Se]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(i)||"";v=e+v;var E=o.get(v);E?E.push(f):o.set(v,[f])}}return o}function f_(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function KA(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function d_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var cl=null;function YA(){}function XA(e,i,a){if(cl===null)throw Error(s(475));var o=cl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Ma(a.href),f=e.querySelector(ll(h));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=pc.bind(o),e.then(o,o)),i.state.loading|=4,i.instance=f,ce(f);return}f=e.ownerDocument||e,a=u_(a),(h=On.get(h))&&Ad(a,h),f=f.createElement("link"),ce(f);var v=f;v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),je(f,"link",a),i.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=pc.bind(o),e.addEventListener("load",i),e.addEventListener("error",i))}}function $A(){if(cl===null)throw Error(s(475));var e=cl;return e.stylesheets&&e.count===0&&bd(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&bd(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function pc(){if(this.count--,this.count===0){if(this.stylesheets)bd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var gc=null;function bd(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,gc=new Map,i.forEach(ZA,e),gc=null,pc.call(e))}function ZA(e,i){if(!(i.state.loading&4)){var a=gc.get(e);if(a)var o=a.get(null);else{a=new Map,gc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var v=h[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,h),a.set(v,h),this.count++,o=pc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var hl={$$typeof:ht,Provider:null,Consumer:null,_currentValue:ut,_currentValue2:ut,_threadCount:0};function WA(e,i,a,o,h,f,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gi(0),this.hiddenUpdates=gi(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function m_(e,i,a,o,h,f,v,E,b,L,F,Y){return e=new WA(e,i,a,v,E,b,L,Y),i=1,f===!0&&(i|=24),f=hn(3,null,null,i),e.current=f,f.stateNode=e,i=sf(),i.refCount++,e.pooledCache=i,i.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:i},uf(f),e}function p_(e){return e?(e=ha,e):ha}function g_(e,i,a,o,h,f){h=p_(h),o.context===null?o.context=h:o.pendingContext=h,o=lr(i),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=ur(e,o,i),a!==null&&(gn(a,e,i),jo(a,e,i))}function y_(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function wd(e,i){y_(e,i),(e=e.alternate)&&y_(e,i)}function __(e){if(e.tag===13){var i=ca(e,67108864);i!==null&&gn(i,e,67108864),wd(e,67108864)}}var yc=!0;function JA(e,i,a,o){var h=H.T;H.T=null;var f=J.p;try{J.p=2,Rd(e,i,a,o)}finally{J.p=f,H.T=h}}function tS(e,i,a,o){var h=H.T;H.T=null;var f=J.p;try{J.p=8,Rd(e,i,a,o)}finally{J.p=f,H.T=h}}function Rd(e,i,a,o){if(yc){var h=Id(o);if(h===null)dd(e,i,o,_c,a),E_(e,o);else if(nS(h,e,i,a,o))o.stopPropagation();else if(E_(e,o),i&4&&-1<eS.indexOf(e)){for(;h!==null;){var f=Kn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=kn(f.pendingLanes);if(v!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var b=1<<31-Fe(v);E.entanglements[1]|=b,v&=~b}oi(f),(Qt&6)===0&&(ec=vn()+500,rl(0))}}break;case 13:E=ca(f,2),E!==null&&gn(E,f,2),ic(),wd(f,2)}if(f=Id(o),f===null&&dd(e,i,o,_c,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else dd(e,i,o,null,a)}}function Id(e){return e=An(e),Cd(e)}var _c=null;function Cd(e){if(_c=null,e=_i(e),e!==null){var i=c(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=d(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return _c=e,null}function v_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nh()){case lo:return 2;case Hs:return 8;case Wr:case Oh:return 32;case Gs:return 268435456;default:return 32}default:return 32}}var Dd=!1,Ar=null,Sr=null,br=null,fl=new Map,dl=new Map,wr=[],eS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function E_(e,i){switch(e){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":fl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":dl.delete(i.pointerId)}}function ml(e,i,a,o,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},i!==null&&(i=Kn(i),i!==null&&__(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function nS(e,i,a,o,h){switch(i){case"focusin":return Ar=ml(Ar,e,i,a,o,h),!0;case"dragenter":return Sr=ml(Sr,e,i,a,o,h),!0;case"mouseover":return br=ml(br,e,i,a,o,h),!0;case"pointerover":var f=h.pointerId;return fl.set(f,ml(fl.get(f)||null,e,i,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,dl.set(f,ml(dl.get(f)||null,e,i,a,o,h)),!0}return!1}function T_(e){var i=_i(e.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){e.blockedOn=i,iu(e.priority,function(){if(a.tag===13){var o=pn();o=Ji(o);var h=ca(a,o);h!==null&&gn(h,a,o),wd(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=Id(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Ai=o,a.target.dispatchEvent(o),Ai=null}else return i=Kn(a),i!==null&&__(i),e.blockedOn=a,!1;i.shift()}return!0}function A_(e,i,a){vc(e)&&a.delete(i)}function iS(){Dd=!1,Ar!==null&&vc(Ar)&&(Ar=null),Sr!==null&&vc(Sr)&&(Sr=null),br!==null&&vc(br)&&(br=null),fl.forEach(A_),dl.forEach(A_)}function Ec(e,i){e.blockedOn===i&&(e.blockedOn=null,Dd||(Dd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,iS)))}var Tc=null;function S_(e){Tc!==e&&(Tc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Tc===e&&(Tc=null);for(var i=0;i<e.length;i+=3){var a=e[i],o=e[i+1],h=e[i+2];if(typeof o!="function"){if(Cd(o||a)===null)continue;break}var f=Kn(a);f!==null&&(e.splice(i,3),i-=3,Cf(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function pl(e){function i(b){return Ec(b,e)}Ar!==null&&Ec(Ar,e),Sr!==null&&Ec(Sr,e),br!==null&&Ec(br,e),fl.forEach(i),dl.forEach(i);for(var a=0;a<wr.length;a++){var o=wr[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<wr.length&&(a=wr[0],a.blockedOn===null);)T_(a),a.blockedOn===null&&wr.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],v=h[pe]||null;if(typeof f=="function")v||S_(a);else if(v){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,v=f[pe]||null)E=v.formAction;else if(Cd(h)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),S_(a)}}}function Nd(e){this._internalRoot=e}Ac.prototype.render=Nd.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=pn();g_(a,o,e,i,null,null)},Ac.prototype.unmount=Nd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;g_(e.current,2,null,e,null,null),ic(),i[En]=null}};function Ac(e){this._internalRoot=e}Ac.prototype.unstable_scheduleHydration=function(e){if(e){var i=tr();e={blockedOn:null,target:e,priority:i};for(var a=0;a<wr.length&&i!==0&&i<wr[a].priority;a++);wr.splice(a,0,e),a===0&&T_(e)}};var b_=t.version;if(b_!=="19.1.1")throw Error(s(527,b_,"19.1.1"));J.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(i),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var rS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sc.isDisabled&&Sc.supportsFiber)try{oe=Sc.inject(rS),Ft=Sc}catch{}}return yl.createRoot=function(e,i){if(!l(e))throw Error(s(299));var a=!1,o="",h=Bg,f=jg,v=qg,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=m_(e,1,!1,null,null,a,o,h,f,v,E,null),e[En]=i.current,fd(e),new Nd(i)},yl.hydrateRoot=function(e,i,a){if(!l(e))throw Error(s(299));var o=!1,h="",f=Bg,v=jg,E=qg,b=null,L=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(b=a.unstable_transitionCallbacks),a.formState!==void 0&&(L=a.formState)),i=m_(e,1,!0,i,a??null,o,h,f,v,E,b,L),i.context=p_(null),a=i.current,o=pn(),o=Ji(o),h=lr(o),h.callback=null,ur(a,h,o),a=o,i.current.lanes=a,yi(i,a),oi(i),e[En]=i.current,fd(e),new Ac(i)},yl.version="19.1.1",yl}var x_;function pS(){if(x_)return Md.exports;x_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Md.exports=mS(),Md.exports}var gS=pS();const yS=hE(gS),_S=()=>{};var P_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},vS=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];t[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],d=r[n++],p=r[n++],g=((l&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;t[s++]=String.fromCharCode(55296+(g>>10)),t[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[n++],d=r[n++];t[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return t.join("")},dE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,p=d?r[l+1]:0,g=l+2<r.length,y=g?r[l+2]:0,T=c>>2,I=(c&3)<<4|p>>4;let C=(p&15)<<2|y>>6,G=y&63;g||(G=64,d||(C=64)),s.push(n[T],n[I],n[C],n[G])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(fE(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):vS(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],p=l<r.length?n[r.charAt(l)]:0;++l;const y=l<r.length?n[r.charAt(l)]:64;++l;const I=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||p==null||y==null||I==null)throw new ES;const C=c<<2|p>>4;if(s.push(C),y!==64){const G=p<<4&240|y>>2;if(s.push(G),I!==64){const z=y<<6&192|I;s.push(z)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class ES extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TS=function(r){const t=fE(r);return dE.encodeByteArray(t,!0)},qc=function(r){return TS(r).replace(/\./g,"")},mE=function(r){try{return dE.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=()=>AS().__FIREBASE_DEFAULTS__,bS=()=>{if(typeof process>"u"||typeof P_>"u")return;const r=P_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},wS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&mE(r[1]);return t&&JSON.parse(t)},lh=()=>{try{return _S()||SS()||bS()||wS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},pE=r=>lh()?.emulatorHosts?.[r],RS=r=>{const t=pE(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},gE=()=>lh()?.config,yE=r=>lh()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _E(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[qc(JSON.stringify(n)),qc(JSON.stringify(d)),""].join(".")}const bl={};function DS(){const r={prod:[],emulator:[]};for(const t of Object.keys(bl))bl[t]?r.emulator.push(t):r.prod.push(t);return r}function NS(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let k_=!1;function vE(r,t){if(typeof window>"u"||typeof document>"u"||!Wa(window.location.host)||bl[r]===t||bl[r]||k_)return;bl[r]=t;function n(C){return`__firebase__banner__${C}`}const s="__firebase__banner",c=DS().prod.length>0;function d(){const C=document.getElementById(s);C&&C.remove()}function p(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function g(C,G){C.setAttribute("width","24"),C.setAttribute("id",G),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function y(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{k_=!0,d()},C}function T(C,G){C.setAttribute("id",G),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function I(){const C=NS(s),G=n("text"),z=document.getElementById(G)||document.createElement("span"),nt=n("learnmore"),W=document.getElementById(nt)||document.createElement("a"),pt=n("preprendIcon"),gt=document.getElementById(pt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const ht=C.element;p(ht),T(W,nt);const rt=y();g(gt,pt),ht.append(gt,z,W,rt),document.body.appendChild(ht)}c?(z.innerText="Preview backend disconnected.",gt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(gt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",G)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function VS(){const r=lh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function PS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kS(){const r=Ze();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function US(){return!VS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LS(){try{return typeof indexedDB=="object"}catch{return!1}}function zS(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="FirebaseError";class Zi extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=BS,Object.setPrototypeOf(this,Zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jl.prototype.create)}}class jl{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},l=`${this.service}/${t}`,c=this.errors[t],d=c?jS(c,s):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new Zi(l,p,s)}}function jS(r,t){return r.replace(qS,(n,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const qS=/\{\$([^}]+)}/g;function HS(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Ps(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const l of n){if(!s.includes(l))return!1;const c=r[l],d=t[l];if(U_(c)&&U_(d)){if(!Ps(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function U_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function _l(r){const t={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");t[decodeURIComponent(l)]=decodeURIComponent(c)}}),t}function vl(r){const t=r.indexOf("?");if(!t)return"";const n=r.indexOf("#",t);return r.substring(t,n>0?n:void 0)}function GS(r,t){const n=new FS(r,t);return n.subscribe.bind(n)}class FS{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let l;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");QS(t,["next","error","complete"])?l=t:l={next:t,error:n,complete:s},l.next===void 0&&(l.next=Ud),l.error===void 0&&(l.error=Ud),l.complete===void 0&&(l.complete=Ud);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QS(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function Ud(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(r){return r&&r._delegate?r._delegate:r}class ks{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new IS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(XS(t))try{this.getOrInitializeService({instanceIdentifier:Vs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(t=Vs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Vs){return this.instances.has(t)}getOptions(t=Vs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);s===p&&d.resolve(l)}return l}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&t(c,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:YS(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Vs){return this.component?this.component.multipleInstances?t:Vs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YS(r){return r===Vs?void 0:r}function XS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new KS(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Vt||(Vt={}));const ZS={debug:Vt.DEBUG,verbose:Vt.VERBOSE,info:Vt.INFO,warn:Vt.WARN,error:Vt.ERROR,silent:Vt.SILENT},WS=Vt.INFO,JS={[Vt.DEBUG]:"log",[Vt.VERBOSE]:"log",[Vt.INFO]:"info",[Vt.WARN]:"warn",[Vt.ERROR]:"error"},t1=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=JS[t];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class bm{constructor(t){this.name=t,this._logLevel=WS,this._logHandler=t1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Vt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?ZS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Vt.DEBUG,...t),this._logHandler(this,Vt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Vt.VERBOSE,...t),this._logHandler(this,Vt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Vt.INFO,...t),this._logHandler(this,Vt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Vt.WARN,...t),this._logHandler(this,Vt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Vt.ERROR,...t),this._logHandler(this,Vt.ERROR,...t)}}const e1=(r,t)=>t.some(n=>r instanceof n);let L_,z_;function n1(){return L_||(L_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function i1(){return z_||(z_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const EE=new WeakMap,Xd=new WeakMap,TE=new WeakMap,Ld=new WeakMap,wm=new WeakMap;function r1(r){const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(Vr(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return t.then(n=>{n instanceof IDBCursor&&EE.set(n,r)}).catch(()=>{}),wm.set(t,r),t}function s1(r){if(Xd.has(r))return;const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});Xd.set(r,t)}let $d={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return Xd.get(r);if(t==="objectStoreNames")return r.objectStoreNames||TE.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vr(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function a1(r){$d=r($d)}function o1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(zd(this),t,...n);return TE.set(s,t.sort?t.sort():[t]),Vr(s)}:i1().includes(r)?function(...t){return r.apply(zd(this),t),Vr(EE.get(this))}:function(...t){return Vr(r.apply(zd(this),t))}}function l1(r){return typeof r=="function"?o1(r):(r instanceof IDBTransaction&&s1(r),e1(r,n1())?new Proxy(r,$d):r)}function Vr(r){if(r instanceof IDBRequest)return r1(r);if(Ld.has(r))return Ld.get(r);const t=l1(r);return t!==r&&(Ld.set(r,t),wm.set(t,r)),t}const zd=r=>wm.get(r);function u1(r,t,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,t),p=Vr(d);return s&&d.addEventListener("upgradeneeded",g=>{s(Vr(d.result),g.oldVersion,g.newVersion,Vr(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const c1=["get","getKey","getAll","getAllKeys","count"],h1=["put","add","delete","clear"],Bd=new Map;function B_(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Bd.get(t))return Bd.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,l=h1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||c1.includes(n)))return;const c=async function(d,...p){const g=this.transaction(d,l?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&g.done]))[0]};return Bd.set(t,c),c}a1(r=>({...r,get:(t,n,s)=>B_(t,n)||r.get(t,n,s),has:(t,n)=>!!B_(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(d1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function d1(r){return r.getComponent()?.type==="VERSION"}const Zd="@firebase/app",j_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=new bm("@firebase/app"),m1="@firebase/app-compat",p1="@firebase/analytics-compat",g1="@firebase/analytics",y1="@firebase/app-check-compat",_1="@firebase/app-check",v1="@firebase/auth",E1="@firebase/auth-compat",T1="@firebase/database",A1="@firebase/data-connect",S1="@firebase/database-compat",b1="@firebase/functions",w1="@firebase/functions-compat",R1="@firebase/installations",I1="@firebase/installations-compat",C1="@firebase/messaging",D1="@firebase/messaging-compat",N1="@firebase/performance",O1="@firebase/performance-compat",V1="@firebase/remote-config",M1="@firebase/remote-config-compat",x1="@firebase/storage",P1="@firebase/storage-compat",k1="@firebase/firestore",U1="@firebase/ai",L1="@firebase/firestore-compat",z1="firebase",B1="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="[DEFAULT]",j1={[Zd]:"fire-core",[m1]:"fire-core-compat",[g1]:"fire-analytics",[p1]:"fire-analytics-compat",[_1]:"fire-app-check",[y1]:"fire-app-check-compat",[v1]:"fire-auth",[E1]:"fire-auth-compat",[T1]:"fire-rtdb",[A1]:"fire-data-connect",[S1]:"fire-rtdb-compat",[b1]:"fire-fn",[w1]:"fire-fn-compat",[R1]:"fire-iid",[I1]:"fire-iid-compat",[C1]:"fire-fcm",[D1]:"fire-fcm-compat",[N1]:"fire-perf",[O1]:"fire-perf-compat",[V1]:"fire-rc",[M1]:"fire-rc-compat",[x1]:"fire-gcs",[P1]:"fire-gcs-compat",[k1]:"fire-fst",[L1]:"fire-fst-compat",[U1]:"fire-vertex","fire-js":"fire-js",[z1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new Map,q1=new Map,Jd=new Map;function q_(r,t){try{r.container.addComponent(t)}catch(n){Qi.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function Fa(r){const t=r.name;if(Jd.has(t))return Qi.debug(`There were multiple attempts to register component ${t}.`),!1;Jd.set(t,r);for(const n of Hc.values())q_(n,r);for(const n of q1.values())q_(n,r);return!0}function Rm(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function yn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mr=new jl("app","Firebase",H1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ks("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=B1;function AE(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s={name:Wd,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw Mr.create("bad-app-name",{appName:String(l)});if(n||(n=gE()),!n)throw Mr.create("no-options");const c=Hc.get(l);if(c){if(Ps(n,c.options)&&Ps(s,c.config))return c;throw Mr.create("duplicate-app",{appName:l})}const d=new $S(l);for(const g of Jd.values())d.addComponent(g);const p=new G1(n,s,d);return Hc.set(l,p),p}function SE(r=Wd){const t=Hc.get(r);if(!t&&r===Wd&&gE())return AE();if(!t)throw Mr.create("no-app",{appName:r});return t}function xr(r,t,n){let s=j1[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${t}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Qi.warn(d.join(" "));return}Fa(new ks(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="firebase-heartbeat-database",Q1=1,Vl="firebase-heartbeat-store";let jd=null;function bE(){return jd||(jd=u1(F1,Q1,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Vl)}catch(n){console.warn(n)}}}}).catch(r=>{throw Mr.create("idb-open",{originalErrorMessage:r.message})})),jd}async function K1(r){try{const n=(await bE()).transaction(Vl),s=await n.objectStore(Vl).get(wE(r));return await n.done,s}catch(t){if(t instanceof Zi)Qi.warn(t.message);else{const n=Mr.create("idb-get",{originalErrorMessage:t?.message});Qi.warn(n.message)}}}async function H_(r,t){try{const s=(await bE()).transaction(Vl,"readwrite");await s.objectStore(Vl).put(t,wE(r)),await s.done}catch(n){if(n instanceof Zi)Qi.warn(n.message);else{const s=Mr.create("idb-set",{originalErrorMessage:n?.message});Qi.warn(s.message)}}}function wE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=1024,X1=30;class $1{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new W1(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=G_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>X1){const l=J1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Qi.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=G_(),{heartbeatsToSend:n,unsentEntries:s}=Z1(this._heartbeatsCache.heartbeats),l=qc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Qi.warn(t),""}}}function G_(){return new Date().toISOString().substring(0,10)}function Z1(r,t=Y1){const n=[];let s=r.slice();for(const l of r){const c=n.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),F_(n)>t){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),F_(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class W1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LS()?zS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await K1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return H_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return H_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function F_(r){return qc(JSON.stringify({version:2,heartbeats:r})).length}function J1(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(r){Fa(new ks("platform-logger",t=>new f1(t),"PRIVATE")),Fa(new ks("heartbeat",t=>new $1(t),"PRIVATE")),xr(Zd,j_,r),xr(Zd,j_,"esm2020"),xr("fire-js","")}tb("");var eb="firebase",nb="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xr(eb,nb,"app");function RE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ib=RE,IE=new jl("auth","Firebase",RE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=new bm("@firebase/auth");function rb(r,...t){Gc.logLevel<=Vt.WARN&&Gc.warn(`Auth (${Ja}): ${r}`,...t)}function Oc(r,...t){Gc.logLevel<=Vt.ERROR&&Gc.error(`Auth (${Ja}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(r,...t){throw Cm(r,...t)}function Hn(r,...t){return Cm(r,...t)}function Im(r,t,n){const s={...ib(),[t]:n};return new jl("auth","Firebase",s).create(t,{appName:r.name})}function Fi(r){return Im(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sb(r,t,n){const s=n;if(!(t instanceof s))throw s.name!==t.constructor.name&&Pn(r,"argument-error"),Im(r,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cm(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return IE.create(r,...t)}function vt(r,t,...n){if(!r)throw Cm(t,...n)}function Hi(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Oc(t),new Error(t)}function Ki(r,t){r||Hi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(){return typeof self<"u"&&self.location?.href||""}function ab(){return Q_()==="http:"||Q_()==="https:"}function Q_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ab()||xS()||"connection"in navigator)?navigator.onLine:!0}function lb(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(t,n){this.shortDelay=t,this.longDelay=n,Ki(n>t,"Short delay should be less than long delay!"),this.isMobile=OS()||PS()}get(){return ob()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(r,t){Ki(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hb=new Hl(3e4,6e4);function Gr(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function Fr(r,t,n,s,l={}){return DE(r,l,async()=>{let c={},d={};s&&(t==="GET"?d=s:c={body:JSON.stringify(s)});const p=ql({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:t,headers:g,...c};return MS()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&Wa(r.emulatorConfig.host)&&(y.credentials="include"),CE.fetch()(await NE(r,r.config.apiHost,n,p),y)})}async function DE(r,t,n){r._canInitEmulator=!1;const s={...ub,...t};try{const l=new db(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw bc(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw bc(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw bc(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw bc(r,"user-disabled",d);const T=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Im(r,T,y);Pn(r,T)}}catch(l){if(l instanceof Zi)throw l;Pn(r,"network-request-failed",{message:String(l)})}}async function Gl(r,t,n,s,l={}){const c=await Fr(r,t,n,s,l);return"mfaPendingCredential"in c&&Pn(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function NE(r,t,n,s){const l=`${t}${n}?${s}`,c=r,d=c.config.emulator?Dm(r.config,l):`${r.config.apiScheme}://${l}`;return cb.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function fb(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class db{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Hn(this.auth,"network-request-failed")),hb.get())})}}function bc(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=Hn(r,t,s);return l.customData._tokenResponse=n,l}function K_(r){return r!==void 0&&r.enterprise!==void 0}class mb{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return fb(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function pb(r,t){return Fr(r,"GET","/v2/recaptchaConfig",Gr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gb(r,t){return Fr(r,"POST","/v1/accounts:delete",t)}async function Fc(r,t){return Fr(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function yb(r,t=!1){const n=ke(r),s=await n.getIdToken(t),l=Nm(s);vt(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:s,authTime:wl(qd(l.auth_time)),issuedAtTime:wl(qd(l.iat)),expirationTime:wl(qd(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function qd(r){return Number(r)*1e3}function Nm(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return Oc("JWT malformed, contained fewer than 3 sections"),null;try{const l=mE(n);return l?JSON.parse(l):(Oc("Failed to decode base64 JWT payload"),null)}catch(l){return Oc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function Y_(r){const t=Nm(r);return vt(t,"internal-error"),vt(typeof t.exp<"u","internal-error"),vt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof Zi&&_b(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function _b({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wl(this.lastLoginAt),this.creationTime=wl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qc(r){const t=r.auth,n=await r.getIdToken(),s=await Ml(r,Fc(t,{idToken:n}));vt(s?.users.length,t,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=l.providerUserInfo?.length?OE(l.providerUserInfo):[],d=Tb(r.providerData,c),p=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!d?.length,y=p?g:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new em(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(r,T)}async function Eb(r){const t=ke(r);await Qc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Tb(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function OE(r){return r.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ab(r,t){const n=await DE(r,{},async()=>{const s=ql({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await NE(r,l,"/v1/token",`key=${c}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return r.emulatorConfig&&Wa(r.emulatorConfig.host)&&(g.credentials="include"),CE.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Sb(r,t){return Fr(r,"POST","/v2/accounts:revokeToken",Gr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){vt(t.idToken,"internal-error"),vt(typeof t.idToken<"u","internal-error"),vt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Y_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){vt(t.length!==0,"internal-error");const n=Y_(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(vt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await Ab(t,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,d=new za;return s&&(vt(typeof s=="string","internal-error",{appName:t}),d.refreshToken=s),l&&(vt(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),c&&(vt(typeof c=="number","internal-error",{appName:t}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new za,this.toJSON())}_performRefresh(){return Hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(r,t){vt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class qn{constructor({uid:t,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new vb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new em(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await Ml(this,this.stsTokenManager.getToken(this.auth,t));return vt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return yb(this,t)}reload(){return Eb(this)}_assign(t){this!==t&&(vt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new qn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){vt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await Qc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yn(this.auth.app))return Promise.reject(Fi(this.auth));const t=await this.getIdToken();return await Ml(this,gb(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:I,emailVerified:C,isAnonymous:G,providerData:z,stsTokenManager:nt}=n;vt(I&&nt,t,"internal-error");const W=za.fromJSON(this.name,nt);vt(typeof I=="string",t,"internal-error"),Ir(s,t.name),Ir(l,t.name),vt(typeof C=="boolean",t,"internal-error"),vt(typeof G=="boolean",t,"internal-error"),Ir(c,t.name),Ir(d,t.name),Ir(p,t.name),Ir(g,t.name),Ir(y,t.name),Ir(T,t.name);const pt=new qn({uid:I,auth:t,email:l,emailVerified:C,displayName:s,isAnonymous:G,photoURL:d,phoneNumber:c,tenantId:p,stsTokenManager:W,createdAt:y,lastLoginAt:T});return z&&Array.isArray(z)&&(pt.providerData=z.map(gt=>({...gt}))),g&&(pt._redirectEventId=g),pt}static async _fromIdTokenResponse(t,n,s=!1){const l=new za;l.updateFromServerResponse(n);const c=new qn({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await Qc(c),c}static async _fromGetAccountInfoResponse(t,n,s){const l=n.users[0];vt(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?OE(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,p=new za;p.updateFromIdToken(s);const g=new qn({uid:l.localId,auth:t,stsTokenManager:p,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new em(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=new Map;function Gi(r){Ki(r instanceof Function,"Expected a class definition");let t=X_.get(r);return t?(Ki(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,X_.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}VE.type="NONE";const $_=VE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(r,t,n){return`firebase:${r}:${t}:${n}`}class Ba{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Vc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Vc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Fc(this.auth,{idToken:t}).catch(()=>{});return n?qn._fromGetAccountInfoResponse(this.auth,n,t):null}return qn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Ba(Gi($_),t,s);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||Gi($_);const d=Vc(s,t.config.apiKey,t.name);let p=null;for(const y of n)try{const T=await y._get(d);if(T){let I;if(typeof T=="string"){const C=await Fc(t,{idToken:T}).catch(()=>{});if(!C)break;I=await qn._fromGetAccountInfoResponse(t,C,T)}else I=qn._fromJSON(t,T);y!==c&&(p=I),c=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Ba(c,t,s):(c=g[0],p&&await c._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new Ba(c,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(kE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ME(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(LE(t))return"Blackberry";if(zE(t))return"Webos";if(xE(t))return"Safari";if((t.includes("chrome/")||PE(t))&&!t.includes("edge/"))return"Chrome";if(UE(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function ME(r=Ze()){return/firefox\//i.test(r)}function xE(r=Ze()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function PE(r=Ze()){return/crios\//i.test(r)}function kE(r=Ze()){return/iemobile/i.test(r)}function UE(r=Ze()){return/android/i.test(r)}function LE(r=Ze()){return/blackberry/i.test(r)}function zE(r=Ze()){return/webos/i.test(r)}function Om(r=Ze()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function bb(r=Ze()){return Om(r)&&!!window.navigator?.standalone}function wb(){return kS()&&document.documentMode===10}function BE(r=Ze()){return Om(r)||UE(r)||zE(r)||LE(r)||/windows phone/i.test(r)||kE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(r,t=[]){let n;switch(r){case"Browser":n=Z_(Ze());break;case"Worker":n=`${Z_(Ze())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ja}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=c=>new Promise((d,p)=>{try{const g=t(c);d(g)}catch(g){p(g)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ib(r,t={}){return Fr(r,"GET","/v2/passwordPolicy",Gr(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb=6;class Db{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Cb,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(t,n,s,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new W_(this),this.idTokenSubscription=new W_(this),this.beforeStateQueue=new Rb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Gi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ba.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Fc(this,{idToken:t}),s=await qn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(yn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,p=await this.tryRedirectSignIn(t);(!c||c===d)&&p?.user&&(s=p.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return vt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Qc(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=lb()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(yn(this.app))return Promise.reject(Fi(this));const n=t?ke(t):null;return n&&vt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&vt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return yn(this.app)?Promise.reject(Fi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return yn(this.app)?Promise.reject(Fi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Ib(this),n=new Db(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new jl("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Sb(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Gi(t)||this._popupRedirectResolver;vt(n,this,"argument-error"),this.redirectPersistenceManager=await Ba.create(this,[Gi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(vt(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const g=t.addObserver(n,s,l);return()=>{d=!0,g()}}else{const g=t.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return vt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=jE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&rb(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Qr(r){return ke(r)}class W_{constructor(t){this.auth=t,this.observer=null,this.addObserver=GS(n=>this.observer=n)}get next(){return vt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ob(r){uh=r}function qE(r){return uh.loadJS(r)}function Vb(){return uh.recaptchaEnterpriseScript}function Mb(){return uh.gapiScript}function xb(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Pb{constructor(){this.enterprise=new kb}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class kb{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const Ub="recaptcha-enterprise",HE="NO_RECAPTCHA";class Lb{constructor(t){this.type=Ub,this.auth=Qr(t)}async verify(t="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,p)=>{pb(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new mb(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function l(c,d,p){const g=window.grecaptcha;K_(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:t}).then(y=>{d(y)}).catch(()=>{d(HE)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Pb().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(p=>{if(!n&&K_(window.grecaptcha))l(p,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=Vb();g.length!==0&&(g+=p),qE(g).then(()=>{l(p,c,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function J_(r,t,n,s=!1,l=!1){const c=new Lb(r);let d;if(l)d=HE;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const p={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function nm(r,t,n,s,l){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await J_(r,t,n,n==="getOobCode");return s(r,c)}else return s(r,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await J_(r,t,n,n==="getOobCode");return s(r,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(r,t){const n=Rm(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Ps(c,t??{}))return l;Pn(l,"already-initialized")}return n.initialize({options:t})}function Bb(r,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Gi);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function jb(r,t,n){const s=Qr(r);vt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,c=GE(t),{host:d,port:p}=qb(t),g=p===null?"":`:${p}`,y={url:`${c}//${d}${g}/`},T=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){vt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),vt(Ps(y,s.config.emulator)&&Ps(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,Wa(d)?(_E(`${c}//${d}${g}`),vE("Auth",!0)):Hb()}function GE(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function qb(r){const t=GE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:tv(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:tv(d)}}}function tv(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function Hb(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Hi("not implemented")}_getIdTokenResponse(t){return Hi("not implemented")}_linkToIdToken(t,n){return Hi("not implemented")}_getReauthenticationResolver(t){return Hi("not implemented")}}async function Gb(r,t){return Fr(r,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fb(r,t){return Gl(r,"POST","/v1/accounts:signInWithPassword",Gr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qb(r,t){return Gl(r,"POST","/v1/accounts:signInWithEmailLink",Gr(r,t))}async function Kb(r,t){return Gl(r,"POST","/v1/accounts:signInWithEmailLink",Gr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends Vm{constructor(t,n,s,l=null){super("password",s),this._email=t,this._password=n,this._tenantId=l}static _fromEmailAndPassword(t,n){return new xl(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new xl(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nm(t,n,"signInWithPassword",Fb);case"emailLink":return Qb(t,{email:this._email,oobCode:this._password});default:Pn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nm(t,s,"signUpPassword",Gb);case"emailLink":return Kb(t,{idToken:n,email:this._email,oobCode:this._password});default:Pn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(r,t){return Gl(r,"POST","/v1/accounts:signInWithIdp",Gr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="http://localhost";class Us extends Vm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Us(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Pn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l,...c}=n;if(!s||!l)return null;const d=new Us(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(t){const n=this.buildRequest();return ja(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,ja(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,ja(t,n)}buildRequest(){const t={requestUri:Yb,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=ql(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $b(r){const t=_l(vl(r)).link,n=t?_l(vl(t)).deep_link_id:null,s=_l(vl(r)).deep_link_id;return(s?_l(vl(s)).link:null)||s||n||t||r}class Mm{constructor(t){const n=_l(vl(t)),s=n.apiKey??null,l=n.oobCode??null,c=Xb(n.mode??null);vt(s&&l&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=$b(t);try{return new Mm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(){this.providerId=to.PROVIDER_ID}static credential(t,n){return xl._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=Mm.parseLink(n);return vt(s,"argument-error"),xl._fromEmailAndCode(t,s.code,s.tenantId)}}to.PROVIDER_ID="password";to.EMAIL_PASSWORD_SIGN_IN_METHOD="password";to.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl extends xm{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Fl{constructor(){super("facebook.com")}static credential(t){return Us._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Cr.credentialFromTaggedObject(t)}static credentialFromError(t){return Cr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Cr.credential(t.oauthAccessToken)}catch{return null}}}Cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Fl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Us._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return qi.credentialFromTaggedObject(t)}static credentialFromError(t){return qi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return qi.credential(n,s)}catch{return null}}}qi.GOOGLE_SIGN_IN_METHOD="google.com";qi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Fl{constructor(){super("github.com")}static credential(t){return Us._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Dr.credentialFromTaggedObject(t)}static credentialFromError(t){return Dr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Dr.credential(t.oauthAccessToken)}catch{return null}}}Dr.GITHUB_SIGN_IN_METHOD="github.com";Dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Fl{constructor(){super("twitter.com")}static credential(t,n){return Us._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Nr.credentialFromTaggedObject(t)}static credentialFromError(t){return Nr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Nr.credential(n,s)}catch{return null}}}Nr.TWITTER_SIGN_IN_METHOD="twitter.com";Nr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zb(r,t){return Gl(r,"POST","/v1/accounts:signUp",Gr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,l=!1){const c=await qn._fromIdTokenResponse(t,s,l),d=ev(s);return new Ls({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const l=ev(s);return new Ls({user:t,providerId:l,_tokenResponse:s,operationType:n})}}function ev(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends Zi{constructor(t,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Kc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,l){return new Kc(t,n,s,l)}}function FE(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Kc._fromErrorAndOperation(r,c,t,s):c})}async function Wb(r,t,n=!1){const s=await Ml(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return Ls._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jb(r,t,n=!1){const{auth:s}=r;if(yn(s.app))return Promise.reject(Fi(s));const l="reauthenticate";try{const c=await Ml(r,FE(s,l,t,r),n);vt(c.idToken,s,"internal-error");const d=Nm(c.idToken);vt(d,s,"internal-error");const{sub:p}=d;return vt(r.uid===p,s,"user-mismatch"),Ls._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&Pn(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QE(r,t,n=!1){if(yn(r.app))return Promise.reject(Fi(r));const s="signIn",l=await FE(r,s,t),c=await Ls._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}async function tw(r,t){return QE(Qr(r),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KE(r){const t=Qr(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ew(r,t,n){if(yn(r.app))return Promise.reject(Fi(r));const s=Qr(r),d=await nm(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Zb).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&KE(r),g}),p=await Ls._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(p.user),p}function nw(r,t,n){return yn(r.app)?Promise.reject(Fi(r)):tw(ke(r),to.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&KE(r),s})}function iw(r,t,n,s){return ke(r).onIdTokenChanged(t,n,s)}function rw(r,t,n){return ke(r).beforeAuthStateChanged(t,n)}function sw(r,t,n,s){return ke(r).onAuthStateChanged(t,n,s)}function aw(r){return ke(r).signOut()}const Yc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yc,"1"),this.storage.removeItem(Yc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=1e3,lw=10;class XE extends YE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&t(n,l,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const s=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);wb()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,lw):l()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},ow)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}XE.type="LOCAL";const uw=XE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E extends YE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}$E.type="SESSION";const ZE=$E;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const s=new ch(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:l,data:c}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const p=Array.from(d).map(async y=>y(n.origin,c)),g=await cw(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ch.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((p,g)=>{const y=Pm("",20);l.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(I){const C=I;if(C.data.eventId===y)switch(C.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(C.data.response);break;default:clearTimeout(T),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:y,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(){return window}function fw(r){ui().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(){return typeof ui().WorkerGlobalScope<"u"&&typeof ui().importScripts=="function"}async function dw(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mw(){return navigator?.serviceWorker?.controller||null}function pw(){return WE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="firebaseLocalStorageDb",gw=1,Xc="firebaseLocalStorage",tT="fbase_key";class Ql{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hh(r,t){return r.transaction([Xc],t?"readwrite":"readonly").objectStore(Xc)}function yw(){const r=indexedDB.deleteDatabase(JE);return new Ql(r).toPromise()}function im(){const r=indexedDB.open(JE,gw);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Xc,{keyPath:tT})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Xc)?t(s):(s.close(),await yw(),t(await im()))})})}async function nv(r,t,n){const s=hh(r,!0).put({[tT]:t,value:n});return new Ql(s).toPromise()}async function _w(r,t){const n=hh(r,!1).get(t),s=await new Ql(n).toPromise();return s===void 0?null:s.value}function iv(r,t){const n=hh(r,!0).delete(t);return new Ql(n).toPromise()}const vw=800,Ew=3;class eT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await im(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>Ew)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return WE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ch._getInstance(pw()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await dw(),!this.activeServiceWorker)return;this.sender=new hw(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||mw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await im();return await nv(t,Yc,"1"),await iv(t,Yc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>nv(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>_w(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>iv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=hh(l,!1).getAll();return new Ql(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eT.type="LOCAL";const Tw=eT;new Hl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(r,t){return t?Gi(t):(vt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km extends Vm{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ja(t,this._buildIdpRequest())}_linkToIdToken(t,n){return ja(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return ja(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Aw(r){return QE(r.auth,new km(r),r.bypassAuthState)}function Sw(r){const{auth:t,user:n}=r;return vt(n,t,"internal-error"),Jb(n,new km(r),r.bypassAuthState)}async function bw(r){const{auth:t,user:n}=r;return vt(n,t,"internal-error"),Wb(n,new km(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(t,n,s,l,c=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:d,type:p}=t;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Aw;case"linkViaPopup":case"linkViaRedirect":return bw;case"reauthViaPopup":case"reauthViaRedirect":return Sw;default:Pn(this.auth,"internal-error")}}resolve(t){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww=new Hl(2e3,1e4);async function Rw(r,t,n){if(yn(r.app))return Promise.reject(Hn(r,"operation-not-supported-in-this-environment"));const s=Qr(r);sb(r,t,xm);const l=nT(s,n);return new Ms(s,"signInViaPopup",t,l).executeNotNull()}class Ms extends iT{constructor(t,n,s,l,c){super(t,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Ms.currentPopupAction&&Ms.currentPopupAction.cancel(),Ms.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return vt(t,this.auth,"internal-error"),t}async onExecution(){Ki(this.filter.length===1,"Popup operations only handle one event");const t=Pm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ms.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,ww.get())};t()}}Ms.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="pendingRedirect",Mc=new Map;class Cw extends iT{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Mc.get(this.auth._key());if(!t){try{const s=await Dw(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Mc.set(this.auth._key(),t)}return this.bypassAuthState||Mc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Dw(r,t){const n=Vw(t),s=Ow(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function Nw(r,t){Mc.set(r._key(),t)}function Ow(r){return Gi(r._redirectPersistence)}function Vw(r){return Vc(Iw,r.config.apiKey,r.name)}async function Mw(r,t,n=!1){if(yn(r.app))return Promise.reject(Fi(r));const s=Qr(r),l=nT(s,t),d=await new Cw(s,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw=600*1e3;class Pw{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!kw(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!rT(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Hn(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=xw&&this.cachedEventUids.clear(),this.cachedEventUids.has(rv(t))}saveEventToCache(t){this.cachedEventUids.add(rv(t)),this.lastProcessedEventTime=Date.now()}}function rv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function rT({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function kw(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rT(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uw(r,t={}){return Fr(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zw=/^https?/;async function Bw(r){if(r.config.emulator)return;const{authorizedDomains:t}=await Uw(r);for(const n of t)try{if(jw(n))return}catch{}Pn(r,"unauthorized-domain")}function jw(r){const t=tm(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!zw.test(n))return!1;if(Lw.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=new Hl(3e4,6e4);function sv(){const r=ui().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function Hw(r){return new Promise((t,n)=>{function s(){sv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{sv(),n(Hn(r,"network-request-failed"))},timeout:qw.get()})}if(ui().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(ui().gapi?.load)s();else{const l=xb("iframefcb");return ui()[l]=()=>{gapi.load?s():n(Hn(r,"network-request-failed"))},qE(`${Mb()}?onload=${l}`).catch(c=>n(c))}}).catch(t=>{throw xc=null,t})}let xc=null;function Gw(r){return xc=xc||Hw(r),xc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=new Hl(5e3,15e3),Qw="__/auth/iframe",Kw="emulator/auth/iframe",Yw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $w(r){const t=r.config;vt(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?Dm(t,Kw):`https://${r.config.authDomain}/${Qw}`,s={apiKey:t.apiKey,appName:r.name,v:Ja},l=Xw.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${ql(s).slice(1)}`}async function Zw(r){const t=await Gw(r),n=ui().gapi;return vt(n,r,"internal-error"),t.open({where:document.body,url:$w(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yw,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=Hn(r,"network-request-failed"),p=ui().setTimeout(()=>{c(d)},Fw.get());function g(){ui().clearTimeout(p),l(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Jw=500,tR=600,eR="_blank",nR="http://localhost";class av{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iR(r,t,n,s=Jw,l=tR){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g={...Ww,width:s.toString(),height:l.toString(),top:c,left:d},y=Ze().toLowerCase();n&&(p=PE(y)?eR:n),ME(y)&&(t=t||nR,g.scrollbars="yes");const T=Object.entries(g).reduce((C,[G,z])=>`${C}${G}=${z},`,"");if(bb(y)&&p!=="_self")return rR(t||"",p),new av(null);const I=window.open(t||"",p,T);vt(I,r,"popup-blocked");try{I.focus()}catch{}return new av(I)}function rR(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="__/auth/handler",aR="emulator/auth/handler",oR=encodeURIComponent("fac");async function ov(r,t,n,s,l,c){vt(r.config.authDomain,r,"auth-domain-config-required"),vt(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Ja,eventId:l};if(t instanceof xm){t.setDefaultLanguage(r.languageCode),d.providerId=t.providerId||"",HS(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,I]of Object.entries({}))d[T]=I}if(t instanceof Fl){const T=t.getScopes().filter(I=>I!=="");T.length>0&&(d.scopes=T.join(","))}r.tenantId&&(d.tid=r.tenantId);const p=d;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const g=await r._getAppCheckToken(),y=g?`#${oR}=${encodeURIComponent(g)}`:"";return`${lR(r)}?${ql(p).slice(1)}${y}`}function lR({config:r}){return r.emulator?Dm(r,aR):`https://${r.authDomain}/${sR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="webStorageSupport";class uR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZE,this._completeRedirectFn=Mw,this._overrideRedirectResult=Nw}async _openPopup(t,n,s,l){Ki(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const c=await ov(t,n,s,tm(),l);return iR(t,c,Pm())}async _openRedirect(t,n,s,l){await this._originValidation(t);const c=await ov(t,n,s,tm(),l);return fw(c),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Ki(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await Zw(t),s=new Pw(t);return n.register("authEvent",l=>(vt(l?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Hd,{type:Hd},l=>{const c=l?.[0]?.[Hd];c!==void 0&&n(!!c),Pn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Bw(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return BE()||xE()||Om()}}const cR=uR;var lv="@firebase/auth",uv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){vt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dR(r){Fa(new ks("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=s.options;vt(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jE(r)},y=new Nb(s,l,c,g);return Bb(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Fa(new ks("auth-internal",t=>{const n=Qr(t.getProvider("auth").getImmediate());return(s=>new hR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xr(lv,uv,fR(r)),xr(lv,uv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=300,pR=yE("authIdTokenMaxAge")||mR;let cv=null;const gR=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>pR)return;const l=n?.token;cv!==l&&(cv=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function yR(r=SE()){const t=Rm(r,"auth");if(t.isInitialized())return t.getImmediate();const n=zb(r,{popupRedirectResolver:cR,persistence:[Tw,uw,ZE]}),s=yE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=gR(c.toString());rw(n,d,()=>d(n.currentUser)),iw(n,p=>d(p))}}const l=pE("auth");return l&&jb(n,`http://${l}`),n}function _R(){return document.getElementsByTagName("head")?.[0]??document}Ob({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const c=Hn("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",_R().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dR("Browser");var hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pr,sT;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(V,S){function w(){}w.prototype=S.prototype,V.D=S.prototype,V.prototype=new w,V.prototype.constructor=V,V.C=function(N,M,x){for(var R=Array(arguments.length-2),me=2;me<arguments.length;me++)R[me-2]=arguments[me];return S.prototype[M].apply(N,R)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(V,S,w){w||(w=0);var N=Array(16);if(typeof S=="string")for(var M=0;16>M;++M)N[M]=S.charCodeAt(w++)|S.charCodeAt(w++)<<8|S.charCodeAt(w++)<<16|S.charCodeAt(w++)<<24;else for(M=0;16>M;++M)N[M]=S[w++]|S[w++]<<8|S[w++]<<16|S[w++]<<24;S=V.g[0],w=V.g[1],M=V.g[2];var x=V.g[3],R=S+(x^w&(M^x))+N[0]+3614090360&4294967295;S=w+(R<<7&4294967295|R>>>25),R=x+(M^S&(w^M))+N[1]+3905402710&4294967295,x=S+(R<<12&4294967295|R>>>20),R=M+(w^x&(S^w))+N[2]+606105819&4294967295,M=x+(R<<17&4294967295|R>>>15),R=w+(S^M&(x^S))+N[3]+3250441966&4294967295,w=M+(R<<22&4294967295|R>>>10),R=S+(x^w&(M^x))+N[4]+4118548399&4294967295,S=w+(R<<7&4294967295|R>>>25),R=x+(M^S&(w^M))+N[5]+1200080426&4294967295,x=S+(R<<12&4294967295|R>>>20),R=M+(w^x&(S^w))+N[6]+2821735955&4294967295,M=x+(R<<17&4294967295|R>>>15),R=w+(S^M&(x^S))+N[7]+4249261313&4294967295,w=M+(R<<22&4294967295|R>>>10),R=S+(x^w&(M^x))+N[8]+1770035416&4294967295,S=w+(R<<7&4294967295|R>>>25),R=x+(M^S&(w^M))+N[9]+2336552879&4294967295,x=S+(R<<12&4294967295|R>>>20),R=M+(w^x&(S^w))+N[10]+4294925233&4294967295,M=x+(R<<17&4294967295|R>>>15),R=w+(S^M&(x^S))+N[11]+2304563134&4294967295,w=M+(R<<22&4294967295|R>>>10),R=S+(x^w&(M^x))+N[12]+1804603682&4294967295,S=w+(R<<7&4294967295|R>>>25),R=x+(M^S&(w^M))+N[13]+4254626195&4294967295,x=S+(R<<12&4294967295|R>>>20),R=M+(w^x&(S^w))+N[14]+2792965006&4294967295,M=x+(R<<17&4294967295|R>>>15),R=w+(S^M&(x^S))+N[15]+1236535329&4294967295,w=M+(R<<22&4294967295|R>>>10),R=S+(M^x&(w^M))+N[1]+4129170786&4294967295,S=w+(R<<5&4294967295|R>>>27),R=x+(w^M&(S^w))+N[6]+3225465664&4294967295,x=S+(R<<9&4294967295|R>>>23),R=M+(S^w&(x^S))+N[11]+643717713&4294967295,M=x+(R<<14&4294967295|R>>>18),R=w+(x^S&(M^x))+N[0]+3921069994&4294967295,w=M+(R<<20&4294967295|R>>>12),R=S+(M^x&(w^M))+N[5]+3593408605&4294967295,S=w+(R<<5&4294967295|R>>>27),R=x+(w^M&(S^w))+N[10]+38016083&4294967295,x=S+(R<<9&4294967295|R>>>23),R=M+(S^w&(x^S))+N[15]+3634488961&4294967295,M=x+(R<<14&4294967295|R>>>18),R=w+(x^S&(M^x))+N[4]+3889429448&4294967295,w=M+(R<<20&4294967295|R>>>12),R=S+(M^x&(w^M))+N[9]+568446438&4294967295,S=w+(R<<5&4294967295|R>>>27),R=x+(w^M&(S^w))+N[14]+3275163606&4294967295,x=S+(R<<9&4294967295|R>>>23),R=M+(S^w&(x^S))+N[3]+4107603335&4294967295,M=x+(R<<14&4294967295|R>>>18),R=w+(x^S&(M^x))+N[8]+1163531501&4294967295,w=M+(R<<20&4294967295|R>>>12),R=S+(M^x&(w^M))+N[13]+2850285829&4294967295,S=w+(R<<5&4294967295|R>>>27),R=x+(w^M&(S^w))+N[2]+4243563512&4294967295,x=S+(R<<9&4294967295|R>>>23),R=M+(S^w&(x^S))+N[7]+1735328473&4294967295,M=x+(R<<14&4294967295|R>>>18),R=w+(x^S&(M^x))+N[12]+2368359562&4294967295,w=M+(R<<20&4294967295|R>>>12),R=S+(w^M^x)+N[5]+4294588738&4294967295,S=w+(R<<4&4294967295|R>>>28),R=x+(S^w^M)+N[8]+2272392833&4294967295,x=S+(R<<11&4294967295|R>>>21),R=M+(x^S^w)+N[11]+1839030562&4294967295,M=x+(R<<16&4294967295|R>>>16),R=w+(M^x^S)+N[14]+4259657740&4294967295,w=M+(R<<23&4294967295|R>>>9),R=S+(w^M^x)+N[1]+2763975236&4294967295,S=w+(R<<4&4294967295|R>>>28),R=x+(S^w^M)+N[4]+1272893353&4294967295,x=S+(R<<11&4294967295|R>>>21),R=M+(x^S^w)+N[7]+4139469664&4294967295,M=x+(R<<16&4294967295|R>>>16),R=w+(M^x^S)+N[10]+3200236656&4294967295,w=M+(R<<23&4294967295|R>>>9),R=S+(w^M^x)+N[13]+681279174&4294967295,S=w+(R<<4&4294967295|R>>>28),R=x+(S^w^M)+N[0]+3936430074&4294967295,x=S+(R<<11&4294967295|R>>>21),R=M+(x^S^w)+N[3]+3572445317&4294967295,M=x+(R<<16&4294967295|R>>>16),R=w+(M^x^S)+N[6]+76029189&4294967295,w=M+(R<<23&4294967295|R>>>9),R=S+(w^M^x)+N[9]+3654602809&4294967295,S=w+(R<<4&4294967295|R>>>28),R=x+(S^w^M)+N[12]+3873151461&4294967295,x=S+(R<<11&4294967295|R>>>21),R=M+(x^S^w)+N[15]+530742520&4294967295,M=x+(R<<16&4294967295|R>>>16),R=w+(M^x^S)+N[2]+3299628645&4294967295,w=M+(R<<23&4294967295|R>>>9),R=S+(M^(w|~x))+N[0]+4096336452&4294967295,S=w+(R<<6&4294967295|R>>>26),R=x+(w^(S|~M))+N[7]+1126891415&4294967295,x=S+(R<<10&4294967295|R>>>22),R=M+(S^(x|~w))+N[14]+2878612391&4294967295,M=x+(R<<15&4294967295|R>>>17),R=w+(x^(M|~S))+N[5]+4237533241&4294967295,w=M+(R<<21&4294967295|R>>>11),R=S+(M^(w|~x))+N[12]+1700485571&4294967295,S=w+(R<<6&4294967295|R>>>26),R=x+(w^(S|~M))+N[3]+2399980690&4294967295,x=S+(R<<10&4294967295|R>>>22),R=M+(S^(x|~w))+N[10]+4293915773&4294967295,M=x+(R<<15&4294967295|R>>>17),R=w+(x^(M|~S))+N[1]+2240044497&4294967295,w=M+(R<<21&4294967295|R>>>11),R=S+(M^(w|~x))+N[8]+1873313359&4294967295,S=w+(R<<6&4294967295|R>>>26),R=x+(w^(S|~M))+N[15]+4264355552&4294967295,x=S+(R<<10&4294967295|R>>>22),R=M+(S^(x|~w))+N[6]+2734768916&4294967295,M=x+(R<<15&4294967295|R>>>17),R=w+(x^(M|~S))+N[13]+1309151649&4294967295,w=M+(R<<21&4294967295|R>>>11),R=S+(M^(w|~x))+N[4]+4149444226&4294967295,S=w+(R<<6&4294967295|R>>>26),R=x+(w^(S|~M))+N[11]+3174756917&4294967295,x=S+(R<<10&4294967295|R>>>22),R=M+(S^(x|~w))+N[2]+718787259&4294967295,M=x+(R<<15&4294967295|R>>>17),R=w+(x^(M|~S))+N[9]+3951481745&4294967295,V.g[0]=V.g[0]+S&4294967295,V.g[1]=V.g[1]+(M+(R<<21&4294967295|R>>>11))&4294967295,V.g[2]=V.g[2]+M&4294967295,V.g[3]=V.g[3]+x&4294967295}s.prototype.u=function(V,S){S===void 0&&(S=V.length);for(var w=S-this.blockSize,N=this.B,M=this.h,x=0;x<S;){if(M==0)for(;x<=w;)l(this,V,x),x+=this.blockSize;if(typeof V=="string"){for(;x<S;)if(N[M++]=V.charCodeAt(x++),M==this.blockSize){l(this,N),M=0;break}}else for(;x<S;)if(N[M++]=V[x++],M==this.blockSize){l(this,N),M=0;break}}this.h=M,this.o+=S},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var S=1;S<V.length-8;++S)V[S]=0;var w=8*this.o;for(S=V.length-8;S<V.length;++S)V[S]=w&255,w/=256;for(this.u(V),V=Array(16),S=w=0;4>S;++S)for(var N=0;32>N;N+=8)V[w++]=this.g[S]>>>N&255;return V};function c(V,S){var w=p;return Object.prototype.hasOwnProperty.call(w,V)?w[V]:w[V]=S(V)}function d(V,S){this.h=S;for(var w=[],N=!0,M=V.length-1;0<=M;M--){var x=V[M]|0;N&&x==S||(w[M]=x,N=!1)}this.g=w}var p={};function g(V){return-128<=V&&128>V?c(V,function(S){return new d([S|0],0>S?-1:0)}):new d([V|0],0>V?-1:0)}function y(V){if(isNaN(V)||!isFinite(V))return I;if(0>V)return W(y(-V));for(var S=[],w=1,N=0;V>=w;N++)S[N]=V/w|0,w*=4294967296;return new d(S,0)}function T(V,S){if(V.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(V.charAt(0)=="-")return W(T(V.substring(1),S));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=y(Math.pow(S,8)),N=I,M=0;M<V.length;M+=8){var x=Math.min(8,V.length-M),R=parseInt(V.substring(M,M+x),S);8>x?(x=y(Math.pow(S,x)),N=N.j(x).add(y(R))):(N=N.j(w),N=N.add(y(R)))}return N}var I=g(0),C=g(1),G=g(16777216);r=d.prototype,r.m=function(){if(nt(this))return-W(this).m();for(var V=0,S=1,w=0;w<this.g.length;w++){var N=this.i(w);V+=(0<=N?N:4294967296+N)*S,S*=4294967296}return V},r.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(z(this))return"0";if(nt(this))return"-"+W(this).toString(V);for(var S=y(Math.pow(V,6)),w=this,N="";;){var M=rt(w,S).g;w=pt(w,M.j(S));var x=((0<w.g.length?w.g[0]:w.h)>>>0).toString(V);if(w=M,z(w))return x+N;for(;6>x.length;)x="0"+x;N=x+N}},r.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function z(V){if(V.h!=0)return!1;for(var S=0;S<V.g.length;S++)if(V.g[S]!=0)return!1;return!0}function nt(V){return V.h==-1}r.l=function(V){return V=pt(this,V),nt(V)?-1:z(V)?0:1};function W(V){for(var S=V.g.length,w=[],N=0;N<S;N++)w[N]=~V.g[N];return new d(w,~V.h).add(C)}r.abs=function(){return nt(this)?W(this):this},r.add=function(V){for(var S=Math.max(this.g.length,V.g.length),w=[],N=0,M=0;M<=S;M++){var x=N+(this.i(M)&65535)+(V.i(M)&65535),R=(x>>>16)+(this.i(M)>>>16)+(V.i(M)>>>16);N=R>>>16,x&=65535,R&=65535,w[M]=R<<16|x}return new d(w,w[w.length-1]&-2147483648?-1:0)};function pt(V,S){return V.add(W(S))}r.j=function(V){if(z(this)||z(V))return I;if(nt(this))return nt(V)?W(this).j(W(V)):W(W(this).j(V));if(nt(V))return W(this.j(W(V)));if(0>this.l(G)&&0>V.l(G))return y(this.m()*V.m());for(var S=this.g.length+V.g.length,w=[],N=0;N<2*S;N++)w[N]=0;for(N=0;N<this.g.length;N++)for(var M=0;M<V.g.length;M++){var x=this.i(N)>>>16,R=this.i(N)&65535,me=V.i(M)>>>16,At=V.i(M)&65535;w[2*N+2*M]+=R*At,gt(w,2*N+2*M),w[2*N+2*M+1]+=x*At,gt(w,2*N+2*M+1),w[2*N+2*M+1]+=R*me,gt(w,2*N+2*M+1),w[2*N+2*M+2]+=x*me,gt(w,2*N+2*M+2)}for(N=0;N<S;N++)w[N]=w[2*N+1]<<16|w[2*N];for(N=S;N<2*S;N++)w[N]=0;return new d(w,0)};function gt(V,S){for(;(V[S]&65535)!=V[S];)V[S+1]+=V[S]>>>16,V[S]&=65535,S++}function ht(V,S){this.g=V,this.h=S}function rt(V,S){if(z(S))throw Error("division by zero");if(z(V))return new ht(I,I);if(nt(V))return S=rt(W(V),S),new ht(W(S.g),W(S.h));if(nt(S))return S=rt(V,W(S)),new ht(W(S.g),S.h);if(30<V.g.length){if(nt(V)||nt(S))throw Error("slowDivide_ only works with positive integers.");for(var w=C,N=S;0>=N.l(V);)w=st(w),N=st(N);var M=dt(w,1),x=dt(N,1);for(N=dt(N,2),w=dt(w,2);!z(N);){var R=x.add(N);0>=R.l(V)&&(M=M.add(w),x=R),N=dt(N,1),w=dt(w,1)}return S=pt(V,M.j(S)),new ht(M,S)}for(M=I;0<=V.l(S);){for(w=Math.max(1,Math.floor(V.m()/S.m())),N=Math.ceil(Math.log(w)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),x=y(w),R=x.j(S);nt(R)||0<R.l(V);)w-=N,x=y(w),R=x.j(S);z(x)&&(x=C),M=M.add(x),V=pt(V,R)}return new ht(M,V)}r.A=function(V){return rt(this,V).h},r.and=function(V){for(var S=Math.max(this.g.length,V.g.length),w=[],N=0;N<S;N++)w[N]=this.i(N)&V.i(N);return new d(w,this.h&V.h)},r.or=function(V){for(var S=Math.max(this.g.length,V.g.length),w=[],N=0;N<S;N++)w[N]=this.i(N)|V.i(N);return new d(w,this.h|V.h)},r.xor=function(V){for(var S=Math.max(this.g.length,V.g.length),w=[],N=0;N<S;N++)w[N]=this.i(N)^V.i(N);return new d(w,this.h^V.h)};function st(V){for(var S=V.g.length+1,w=[],N=0;N<S;N++)w[N]=V.i(N)<<1|V.i(N-1)>>>31;return new d(w,V.h)}function dt(V,S){var w=S>>5;S%=32;for(var N=V.g.length-w,M=[],x=0;x<N;x++)M[x]=0<S?V.i(x+w)>>>S|V.i(x+w+1)<<32-S:V.i(x+w);return new d(M,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,sT=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=T,Pr=d}).apply(typeof hv<"u"?hv:typeof self<"u"?self:typeof window<"u"?window:{});var wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aT,El,oT,Pc,rm,lT,uT,cT;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof wc=="object"&&wc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)t:{var _=s;u=u.split(".");for(var A=0;A<u.length-1;A++){var k=u[A];if(!(k in _))break t;_=_[k]}u=u[u.length-1],A=_[u],m=m(A),m!=A&&m!=null&&t(_,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var _=0,A=!1,k={next:function(){if(!A&&_<u.length){var q=_++;return{value:m(q,u[q]),done:!1}}return A=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function g(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function T(u,m,_){return u.call.apply(u.bind,arguments)}function I(u,m,_){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,A),u.apply(m,k)}}return function(){return u.apply(m,arguments)}}function C(u,m,_){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:I,C.apply(null,arguments)}function G(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function z(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(A,k,q){for(var et=Array(arguments.length-2),kt=2;kt<arguments.length;kt++)et[kt-2]=arguments[kt];return m.prototype[k].apply(A,et)}}function nt(u){const m=u.length;if(0<m){const _=Array(m);for(let A=0;A<m;A++)_[A]=u[A];return _}return[]}function W(u,m){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(g(A)){const k=u.length||0,q=A.length||0;u.length=k+q;for(let et=0;et<q;et++)u[k+et]=A[et]}else u.push(A)}}class pt{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function gt(u){return/^[\s\xa0]*$/.test(u)}function ht(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function rt(u){return rt[" "](u),u}rt[" "]=function(){};var st=ht().indexOf("Gecko")!=-1&&!(ht().toLowerCase().indexOf("webkit")!=-1&&ht().indexOf("Edge")==-1)&&!(ht().indexOf("Trident")!=-1||ht().indexOf("MSIE")!=-1)&&ht().indexOf("Edge")==-1;function dt(u,m,_){for(const A in u)m.call(_,u[A],A,u)}function V(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function S(u){const m={};for(const _ in u)m[_]=u[_];return m}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,m){let _,A;for(let k=1;k<arguments.length;k++){A=arguments[k];for(_ in A)u[_]=A[_];for(let q=0;q<w.length;q++)_=w[q],Object.prototype.hasOwnProperty.call(A,_)&&(u[_]=A[_])}}function M(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function x(u){p.setTimeout(()=>{throw u},0)}function R(){var u=jt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class me{constructor(){this.h=this.g=null}add(m,_){const A=At.get();A.set(m,_),this.h?this.h.next=A:this.g=A,this.h=A}}var At=new pt(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let J,ut=!1,jt=new me,D=()=>{const u=p.Promise.resolve(void 0);J=()=>{u.then(Z)}};var Z=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(_){x(_)}var m=At;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ut=!1};function it(){this.s=this.s,this.C=this.C}it.prototype.s=!1,it.prototype.ma=function(){this.s||(this.s=!0,this.N())},it.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function tt(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}tt.prototype.h=function(){this.defaultPrevented=!0};var mt=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,m),p.removeEventListener("test",_,m)}catch{}return u})();function Ct(u,m){if(tt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(st){t:{try{rt(m.nodeName);var k=!0;break t}catch{}k=!1}k||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:St[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ct.aa.h.call(this)}}z(Ct,tt);var St={2:"touch",3:"pen",4:"mouse"};Ct.prototype.h=function(){Ct.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var De="closure_listenable_"+(1e6*Math.random()|0),Jt=0;function Fn(u,m,_,A,k){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!A,this.ha=k,this.key=++Jt,this.da=this.fa=!1}function Wi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function pi(u){this.src=u,this.g={},this.h=0}pi.prototype.add=function(u,m,_,A,k){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var et=$r(u,m,A,k);return-1<et?(m=u[et],_||(m.fa=!1)):(m=new Fn(m,this.src,q,!!A,k),m.fa=_,u.push(m)),m};function Xr(u,m){var _=m.type;if(_ in u.g){var A=u.g[_],k=Array.prototype.indexOf.call(A,m,void 0),q;(q=0<=k)&&Array.prototype.splice.call(A,k,1),q&&(Wi(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function $r(u,m,_,A){for(var k=0;k<u.length;++k){var q=u[k];if(!q.da&&q.listener==m&&q.capture==!!_&&q.ha==A)return k}return-1}var Zr="closure_lm_"+(1e6*Math.random()|0),oo={};function tu(u,m,_,A,k){if(Array.isArray(m)){for(var q=0;q<m.length;q++)tu(u,m[q],_,A,k);return null}return _=eu(_),u&&u[De]?u.K(m,_,y(A)?!!A.capture:!1,k):vn(u,m,_,!1,A,k)}function vn(u,m,_,A,k,q){if(!m)throw Error("Invalid event type");var et=y(k)?!!k.capture:!!k,kt=Gs(u);if(kt||(u[Zr]=kt=new pi(u)),_=kt.add(m,_,A,et,q),_.proxy)return _;if(A=Nh(),_.proxy=A,A.src=u,A.listener=_,u.addEventListener)mt||(k=et),k===void 0&&(k=!1),u.addEventListener(m.toString(),A,k);else if(u.attachEvent)u.attachEvent(Wr(m.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Nh(){function u(_){return m.call(u.src,u.listener,_)}const m=Oh;return u}function lo(u,m,_,A,k){if(Array.isArray(m))for(var q=0;q<m.length;q++)lo(u,m[q],_,A,k);else A=y(A)?!!A.capture:!!A,_=eu(_),u&&u[De]?(u=u.i,m=String(m).toString(),m in u.g&&(q=u.g[m],_=$r(q,_,A,k),-1<_&&(Wi(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete u.g[m],u.h--)))):u&&(u=Gs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=$r(m,_,A,k)),(_=-1<u?m[u]:null)&&Hs(_))}function Hs(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[De])Xr(m.i,u);else{var _=u.type,A=u.proxy;m.removeEventListener?m.removeEventListener(_,A,u.capture):m.detachEvent?m.detachEvent(Wr(_),A):m.addListener&&m.removeListener&&m.removeListener(A),(_=Gs(m))?(Xr(_,u),_.h==0&&(_.src=null,m[Zr]=null)):Wi(u)}}}function Wr(u){return u in oo?oo[u]:oo[u]="on"+u}function Oh(u,m){if(u.da)u=!0;else{m=new Ct(m,this);var _=u.listener,A=u.ha||u.src;u.fa&&Hs(u),u=_.call(A,m)}return u}function Gs(u){return u=u[Zr],u instanceof pi?u:null}var uo="__closure_events_fn_"+(1e9*Math.random()>>>0);function eu(u){return typeof u=="function"?u:(u[uo]||(u[uo]=function(m){return u.handleEvent(m)}),u[uo])}function oe(){it.call(this),this.i=new pi(this),this.M=this,this.F=null}z(oe,it),oe.prototype[De]=!0,oe.prototype.removeEventListener=function(u,m,_,A){lo(this,u,m,_,A)};function Ft(u,m){var _,A=u.F;if(A)for(_=[];A;A=A.F)_.push(A);if(u=u.M,A=m.type||m,typeof m=="string")m=new tt(m,u);else if(m instanceof tt)m.target=m.target||u;else{var k=m;m=new tt(A,u),N(m,k)}if(k=!0,_)for(var q=_.length-1;0<=q;q--){var et=m.g=_[q];k=ln(et,A,!0,m)&&k}if(et=m.g=u,k=ln(et,A,!0,m)&&k,k=ln(et,A,!1,m)&&k,_)for(q=0;q<_.length;q++)et=m.g=_[q],k=ln(et,A,!1,m)&&k}oe.prototype.N=function(){if(oe.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],A=0;A<_.length;A++)Wi(_[A]);delete u.g[m],u.h--}}this.F=null},oe.prototype.K=function(u,m,_,A){return this.i.add(String(u),m,!1,_,A)},oe.prototype.L=function(u,m,_,A){return this.i.add(String(u),m,!0,_,A)};function ln(u,m,_,A){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var k=!0,q=0;q<m.length;++q){var et=m[q];if(et&&!et.da&&et.capture==_){var kt=et.listener,be=et.ha||et.src;et.fa&&Xr(u.i,et),k=kt.call(be,A)!==!1&&k}}return k&&!A.defaultPrevented}function Fe(u,m,_){if(typeof u=="function")_&&(u=C(u,_));else if(u&&typeof u.handleEvent=="function")u=C(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(u,m||0)}function nu(u){u.g=Fe(()=>{u.g=null,u.i&&(u.i=!1,nu(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Vh extends it{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:nu(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jr(u){it.call(this),this.h=u,this.g={}}z(Jr,it);var ts=[];function es(u){dt(u.g,function(m,_){this.g.hasOwnProperty(_)&&Hs(m)},u),u.g={}}Jr.prototype.N=function(){Jr.aa.N.call(this),es(this)},Jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kn=p.JSON.stringify,Fs=p.JSON.parse,ns=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function co(){}co.prototype.h=null;function ho(u){return u.h||(u.h=u.i())}function fo(){}var gi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yi(){tt.call(this,"d")}z(yi,tt);function mo(){tt.call(this,"c")}z(mo,tt);var Qn={},po=null;function Ji(){return po=po||new oe}Qn.La="serverreachability";function Qs(u){tt.call(this,Qn.La,u)}z(Qs,tt);function tr(u){const m=Ji();Ft(m,new Qs(m))}Qn.STAT_EVENT="statevent";function iu(u,m){tt.call(this,Qn.STAT_EVENT,u),this.stat=m}z(iu,tt);function ie(u){const m=Ji();Ft(m,new iu(m,u))}Qn.Ma="timingevent";function Se(u,m){tt.call(this,Qn.Ma,u),this.size=m}z(Se,tt);function pe(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function En(){this.g=!0}En.prototype.xa=function(){this.g=!1};function go(u,m,_,A,k,q){u.info(function(){if(u.g)if(q)for(var et="",kt=q.split("&"),be=0;be<kt.length;be++){var Ut=kt[be].split("=");if(1<Ut.length){var Oe=Ut[0];Ut=Ut[1];var we=Oe.split("_");et=2<=we.length&&we[1]=="type"?et+(Oe+"="+Ut+"&"):et+(Oe+"=redacted&")}}else et=null;else et=q;return"XMLHTTP REQ ("+A+") [attempt "+k+"]: "+m+`
`+_+`
`+et})}function Mh(u,m,_,A,k,q,et){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+k+"]: "+m+`
`+_+`
`+q+" "+et})}function er(u,m,_,A){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+is(u,_)+(A?" "+A:"")})}function ru(u,m){u.info(function(){return"TIMEOUT: "+m})}En.prototype.info=function(){};function is(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var A=_[u];if(!(2>A.length)){var k=A[1];if(Array.isArray(k)&&!(1>k.length)){var q=k[0];if(q!="noop"&&q!="stop"&&q!="close")for(var et=1;et<k.length;et++)k[et]=""}}}}return kn(_)}catch{return m}}var nr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_i={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kn;function Yn(){}z(Yn,co),Yn.prototype.g=function(){return new XMLHttpRequest},Yn.prototype.i=function(){return{}},Kn=new Yn;function We(u,m,_,A){this.j=u,this.i=m,this.l=_,this.R=A||1,this.U=new Jr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ce}function ce(){this.i=null,this.g="",this.h=!1}var yo={},Ks={};function Un(u,m,_){u.L=1,u.v=ls(un(m)),u.m=_,u.P=!0,vi(u,null)}function vi(u,m){u.F=Date.now(),rs(u),u.A=un(u.v);var _=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),So(_.i,"t",A),u.C=0,_=u.j.J,u.h=new ce,u.g=Eu(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Vh(C(u.Y,u,u.g),u.O)),m=u.U,_=u.g,A=u.ca;var k="readystatechange";Array.isArray(k)||(k&&(ts[0]=k.toString()),k=ts);for(var q=0;q<k.length;q++){var et=tu(_,k[q],A||m.handleEvent,!1,m.h||m);if(!et)break;m.g[et.key]=et}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),tr(),go(u.i,u.u,u.A,u.l,u.R,u.m)}We.prototype.ca=function(u){u=u.target;const m=this.M;m&&bn(u)==3?m.j():this.Y(u)},We.prototype.Y=function(u){try{if(u==this.g)t:{const we=bn(this.g);var m=this.g.Ba();const Ii=this.g.Z();if(!(3>we)&&(we!=3||this.g&&(this.h.h||this.g.oa()||fu(this.g)))){this.J||we!=4||m==7||(m==8||0>=Ii?tr(3):tr(2)),ir(this);var _=this.g.Z();this.X=_;e:if(su(this)){var A=fu(this.g);u="";var k=A.length,q=bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ue(this),Xn(this);var et="";break e}this.h.i=new p.TextDecoder}for(m=0;m<k;m++)this.h.h=!0,u+=this.h.i.decode(A[m],{stream:!(q&&m==k-1)});A.length=0,this.h.g+=u,this.C=0,et=this.h.g}else et=this.g.oa();if(this.o=_==200,Mh(this.i,this.u,this.A,this.l,this.R,we,_),this.o){if(this.T&&!this.K){e:{if(this.g){var kt,be=this.g;if((kt=be.g?be.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gt(kt)){var Ut=kt;break e}}Ut=null}if(_=Ut)er(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ss(this,_);else{this.o=!1,this.s=3,ie(12),Ue(this),Xn(this);break t}}if(this.P){_=!0;let Le;for(;!this.J&&this.C<et.length;)if(Le=au(this,et),Le==Ks){we==4&&(this.s=4,ie(14),_=!1),er(this.i,this.l,null,"[Incomplete Response]");break}else if(Le==yo){this.s=4,ie(15),er(this.i,this.l,et,"[Invalid Chunk]"),_=!1;break}else er(this.i,this.l,Le,null),ss(this,Le);if(su(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||et.length!=0||this.h.h||(this.s=1,ie(16),_=!1),this.o=this.o&&_,!_)er(this.i,this.l,et,"[Invalid Chunked Response]"),Ue(this),Xn(this);else if(0<et.length&&!this.W){this.W=!0;var Oe=this.j;Oe.g==this&&Oe.ba&&!Oe.M&&(Oe.j.info("Great, no buffering proxy detected. Bytes received: "+et.length),gs(Oe),Oe.M=!0,ie(11))}}else er(this.i,this.l,et,null),ss(this,et);we==4&&Ue(this),this.o&&!this.J&&(we==4?yu(this.j,this):(this.o=!1,rs(this)))}else Lh(this.g),_==400&&0<et.indexOf("Unknown SID")?(this.s=3,ie(12)):(this.s=0,ie(13)),Ue(this),Xn(this)}}}catch{}finally{}};function su(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function au(u,m){var _=u.C,A=m.indexOf(`
`,_);return A==-1?Ks:(_=Number(m.substring(_,A)),isNaN(_)?yo:(A+=1,A+_>m.length?Ks:(m=m.slice(A,A+_),u.C=A+_,m)))}We.prototype.cancel=function(){this.J=!0,Ue(this)};function rs(u){u.S=Date.now()+u.I,ou(u,u.I)}function ou(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=pe(C(u.ba,u),m)}function ir(u){u.B&&(p.clearTimeout(u.B),u.B=null)}We.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ru(this.i,this.A),this.L!=2&&(tr(),ie(17)),Ue(this),this.s=2,Xn(this)):ou(this,this.S-u)};function Xn(u){u.j.G==0||u.J||yu(u.j,u)}function Ue(u){ir(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,es(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ss(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||_o(_.h,u))){if(!u.K&&_o(_.h,u)&&_.G==3){try{var A=_.Da.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var k=A;if(k[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)sa(_),ia(_);else break t;Co(_),ie(18)}}else _.za=k[1],0<_.za-_.T&&37500>k[2]&&_.F&&_.v==0&&!_.C&&(_.C=pe(C(_.Za,_),6e3));if(1>=Xs(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ri(_,11)}else if((u.K||_.g==u)&&sa(_),!gt(m))for(k=_.Da.g.parse(m),m=0;m<k.length;m++){let Ut=k[m];if(_.T=Ut[0],Ut=Ut[1],_.G==2)if(Ut[0]=="c"){_.K=Ut[1],_.ia=Ut[2];const Oe=Ut[3];Oe!=null&&(_.la=Oe,_.j.info("VER="+_.la));const we=Ut[4];we!=null&&(_.Aa=we,_.j.info("SVER="+_.Aa));const Ii=Ut[5];Ii!=null&&typeof Ii=="number"&&0<Ii&&(A=1.5*Ii,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const Le=u.g;if(Le){const ni=Le.g?Le.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ni){var q=A.h;q.g||ni.indexOf("spdy")==-1&&ni.indexOf("quic")==-1&&ni.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&($s(q,q.h),q.h=null))}if(A.D){const No=Le.g?Le.g.getResponseHeader("X-HTTP-Session-Id"):null;No&&(A.ya=No,Yt(A.I,A.D,No))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var et=u;if(A.qa=vu(A,A.J?A.ia:null,A.W),et.K){Je(A.h,et);var kt=et,be=A.L;be&&(kt.I=be),kt.B&&(ir(kt),rs(kt)),A.g=et}else pu(A);0<_.i.length&&ra(_)}else Ut[0]!="stop"&&Ut[0]!="close"||Ri(_,7);else _.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?Ri(_,7):Ro(_):Ut[0]!="noop"&&_.l&&_.l.ta(Ut),_.v=0)}}tr(4)}catch{}}var lu=class{constructor(u,m){this.g=u,this.map=m}};function Ei(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ys(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Xs(u){return u.h?1:u.g?u.g.size:0}function _o(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function $s(u,m){u.g?u.g.add(m):u.h=m}function Je(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ei.prototype.cancel=function(){if(this.i=vo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function vo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return nt(u.i)}function xh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var m=[],_=u.length,A=0;A<_;A++)m.push(u[A]);return m}m=[],_=0;for(A in u)m[_++]=u[A];return m}function Zs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const A in u)m[_++]=A;return m}}}function Eo(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=Zs(u),A=xh(u),k=A.length,q=0;q<k;q++)m.call(void 0,A[q],_&&_[q],u)}var as=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ph(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var A=u[_].indexOf("="),k=null;if(0<=A){var q=u[_].substring(0,A);k=u[_].substring(A+1)}else q=u[_];m(q,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function ge(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ge){this.h=u.h,os(this,u.j),this.o=u.o,this.g=u.g,rr(this,u.s),this.l=u.l;var m=u.i,_=new Ai;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Ti(this,_),this.m=u.m}else u&&(m=String(u).match(as))?(this.h=!1,os(this,m[1]||"",!0),this.o=Tn(m[2]||""),this.g=Tn(m[3]||"",!0),rr(this,m[4]),this.l=Tn(m[5]||"",!0),Ti(this,m[6]||"",!0),this.m=Tn(m[7]||"")):(this.h=!1,this.i=new Ai(null,this.h))}ge.prototype.toString=function(){var u=[],m=this.j;m&&u.push(us(m,To,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(us(m,To,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(us(_,_.charAt(0)=="/"?kh:Ao,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",us(_,Ws)),u.join("")};function un(u){return new ge(u)}function os(u,m,_){u.j=_?Tn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function rr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Ti(u,m,_){m instanceof Ai?(u.i=m,cu(u.i,u.h)):(_||(m=us(m,Uh)),u.i=new Ai(m,u.h))}function Yt(u,m,_){u.i.set(m,_)}function ls(u){return Yt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Tn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function us(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,uu),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function uu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var To=/[#\/\?@]/g,Ao=/[#\?:]/g,kh=/[#\?]/g,Uh=/[#\?@]/g,Ws=/#/g;function Ai(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function An(u){u.g||(u.g=new Map,u.h=0,u.i&&Ph(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Ai.prototype,r.add=function(u,m){An(this),this.i=null,u=$n(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function Si(u,m){An(u),m=$n(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function bi(u,m){return An(u),m=$n(u,m),u.g.has(m)}r.forEach=function(u,m){An(this),this.g.forEach(function(_,A){_.forEach(function(k){u.call(m,k,A,this)},this)},this)},r.na=function(){An(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let A=0;A<m.length;A++){const k=u[A];for(let q=0;q<k.length;q++)_.push(m[A])}return _},r.V=function(u){An(this);let m=[];if(typeof u=="string")bi(this,u)&&(m=m.concat(this.g.get($n(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return An(this),this.i=null,u=$n(this,u),bi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function So(u,m,_){Si(u,m),0<_.length&&(u.i=null,u.g.set($n(u,m),nt(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var A=m[_];const q=encodeURIComponent(String(A)),et=this.V(A);for(A=0;A<et.length;A++){var k=q;et[A]!==""&&(k+="="+encodeURIComponent(String(et[A]))),u.push(k)}}return this.i=u.join("&")};function $n(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function cu(u,m){m&&!u.j&&(An(u),u.i=null,u.g.forEach(function(_,A){var k=A.toLowerCase();A!=k&&(Si(this,A),So(this,k,_))},u)),u.j=m}function cs(u,m){const _=new En;if(p.Image){const A=new Image;A.onload=G(Sn,_,"TestLoadImage: loaded",!0,m,A),A.onerror=G(Sn,_,"TestLoadImage: error",!1,m,A),A.onabort=G(Sn,_,"TestLoadImage: abort",!1,m,A),A.ontimeout=G(Sn,_,"TestLoadImage: timeout",!1,m,A),p.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else m(!1)}function Ln(u,m){const _=new En,A=new AbortController,k=setTimeout(()=>{A.abort(),Sn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:A.signal}).then(q=>{clearTimeout(k),q.ok?Sn(_,"TestPingServer: ok",!0,m):Sn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(k),Sn(_,"TestPingServer: error",!1,m)})}function Sn(u,m,_,A,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),A(_)}catch{}}function hs(){this.g=new ns}function Zn(u,m,_){const A=_||"";try{Eo(u,function(k,q){let et=k;y(k)&&(et=kn(k)),m.push(A+q+"="+encodeURIComponent(et))})}catch(k){throw m.push(A+"type="+encodeURIComponent("_badmap")),k}}function sr(u){this.l=u.Ub||null,this.j=u.eb||!1}z(sr,co),sr.prototype.g=function(){return new wi(this.l,this.j)},sr.prototype.i=(function(u){return function(){return u}})({});function wi(u,m){oe.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}z(wi,oe),r=wi.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Jn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Jn(this)),this.g&&(this.readyState=3,Jn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bo(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function bo(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Wn(this):Jn(this),this.readyState==3&&bo(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Wn(this))},r.Qa=function(u){this.g&&(this.response=u,Wn(this))},r.ga=function(){this.g&&Wn(this)};function Wn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Jn(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Jn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(wi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function wo(u){let m="";return dt(u,function(_,A){m+=A,m+=":",m+=_,m+=`\r
`}),m}function Ne(u,m,_){t:{for(A in _){var A=!1;break t}A=!0}A||(_=wo(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Yt(u,m,_))}function Ht(u){oe.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}z(Ht,oe);var Js=/^https?$/i,fs=["POST","PUT"];r=Ht.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kn.g(),this.v=this.o?ho(this.o):ho(Kn),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(q){hu(this,q);return}if(u=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var k in A)_.set(k,A[k]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const q of A.keys())_.set(q,A.get(q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),k=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(fs,m,void 0))||A||k||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,et]of _)this.g.setRequestHeader(q,et);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ds(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){hu(this,q)}};function hu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,ta(u),ti(u)}function ta(u){u.A||(u.A=!0,Ft(u,"complete"),Ft(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ft(this,"complete"),Ft(this,"abort"),ti(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ti(this,!0)),Ht.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ea(this):this.bb())},r.bb=function(){ea(this)};function ea(u){if(u.h&&typeof d<"u"&&(!u.v[1]||bn(u)!=4||u.Z()!=2)){if(u.u&&bn(u)==4)Fe(u.Ea,0,u);else if(Ft(u,"readystatechange"),bn(u)==4){u.h=!1;try{const et=u.Z();t:switch(et){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var _;if(!(_=m)){var A;if(A=et===0){var k=String(u.D).match(as)[1]||null;!k&&p.self&&p.self.location&&(k=p.self.location.protocol.slice(0,-1)),A=!Js.test(k?k.toLowerCase():"")}_=A}if(_)Ft(u,"complete"),Ft(u,"success");else{u.m=6;try{var q=2<bn(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",ta(u)}}finally{ti(u)}}}}function ti(u,m){if(u.g){ds(u);const _=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Ft(u,"ready");try{_.onreadystatechange=A}catch{}}}function ds(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function bn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<bn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Fs(m)}};function fu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Lh(u){const m={};u=(u.g&&2<=bn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(gt(u[A]))continue;var _=M(u[A]);const k=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=m[k]||[];m[k]=q,q.push(_)}V(m,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ms(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function na(u){this.Aa=0,this.i=[],this.j=new En,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ms("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ms("baseRetryDelayMs",5e3,u),this.cb=ms("retryDelaySeedMs",1e4,u),this.Wa=ms("forwardChannelMaxRetries",2,u),this.wa=ms("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ei(u&&u.concurrentRequestLimit),this.Da=new hs,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=na.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,A){ie(0),this.W=u,this.H=m||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=vu(this,null,this.W),ra(this)};function Ro(u){if(du(u),u.G==3){var m=u.U++,_=un(u.I);if(Yt(_,"SID",u.K),Yt(_,"RID",m),Yt(_,"TYPE","terminate"),ps(u,_),m=new We(u,u.j,m),m.L=2,m.v=ls(un(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=m.v,_=!0),_||(m.g=Eu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),rs(m)}_u(u)}function ia(u){u.g&&(gs(u),u.g.cancel(),u.g=null)}function du(u){ia(u),u.u&&(p.clearTimeout(u.u),u.u=null),sa(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function ra(u){if(!Ys(u.h)&&!u.s){u.s=!0;var m=u.Ga;J||D(),ut||(J(),ut=!0),jt.add(m,u),u.B=0}}function zh(u,m){return Xs(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=pe(C(u.Ga,u,m),Do(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const k=new We(this,this.j,u);let q=this.o;if(this.S&&(q?(q=S(q),N(q,this.S)):q=this.S),this.m!==null||this.O||(k.H=q,q=null),this.P)t:{for(var m=0,_=0;_<this.i.length;_++){e:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(m+=A,4096<m){m=_;break t}if(m===4096||_===this.i.length-1){m=_+1;break t}}m=1e3}else m=1e3;m=mu(this,k,m),_=un(this.I),Yt(_,"RID",u),Yt(_,"CVER",22),this.D&&Yt(_,"X-HTTP-Session-Id",this.D),ps(this,_),q&&(this.O?m="headers="+encodeURIComponent(String(wo(q)))+"&"+m:this.m&&Ne(_,this.m,q)),$s(this.h,k),this.Ua&&Yt(_,"TYPE","init"),this.P?(Yt(_,"$req",m),Yt(_,"SID","null"),k.T=!0,Un(k,_,null)):Un(k,_,m),this.G=2}}else this.G==3&&(u?Io(this,u):this.i.length==0||Ys(this.h)||Io(this))};function Io(u,m){var _;m?_=m.l:_=u.U++;const A=un(u.I);Yt(A,"SID",u.K),Yt(A,"RID",_),Yt(A,"AID",u.T),ps(u,A),u.m&&u.o&&Ne(A,u.m,u.o),_=new We(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=mu(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),$s(u.h,_),Un(_,A,m)}function ps(u,m){u.H&&dt(u.H,function(_,A){Yt(m,A,_)}),u.l&&Eo({},function(_,A){Yt(m,A,_)})}function mu(u,m,_){_=Math.min(u.i.length,_);var A=u.l?C(u.l.Na,u.l,u):null;t:{var k=u.i;let q=-1;for(;;){const et=["count="+_];q==-1?0<_?(q=k[0].g,et.push("ofs="+q)):q=0:et.push("ofs="+q);let kt=!0;for(let be=0;be<_;be++){let Ut=k[be].g;const Oe=k[be].map;if(Ut-=q,0>Ut)q=Math.max(0,k[be].g-100),kt=!1;else try{Zn(Oe,et,"req"+Ut+"_")}catch{A&&A(Oe)}}if(kt){A=et.join("&");break t}}}return u=u.i.splice(0,_),m.D=u,A}function pu(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;J||D(),ut||(J(),ut=!0),jt.add(m,u),u.v=0}}function Co(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=pe(C(u.Fa,u),Do(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,gu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=pe(C(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ie(10),ia(this),gu(this))};function gs(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function gu(u){u.g=new We(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=un(u.qa);Yt(m,"RID","rpc"),Yt(m,"SID",u.K),Yt(m,"AID",u.T),Yt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Yt(m,"TO",u.ja),Yt(m,"TYPE","xmlhttp"),ps(u,m),u.m&&u.o&&Ne(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=ls(un(m)),_.m=null,_.P=!0,vi(_,u)}r.Za=function(){this.C!=null&&(this.C=null,ia(this),Co(this),ie(19))};function sa(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function yu(u,m){var _=null;if(u.g==m){sa(u),gs(u),u.g=null;var A=2}else if(_o(u.h,m))_=m.D,Je(u.h,m),A=1;else return;if(u.G!=0){if(m.o)if(A==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var k=u.B;A=Ji(),Ft(A,new Se(A,_)),ra(u)}else pu(u);else if(k=m.s,k==3||k==0&&0<m.X||!(A==1&&zh(u,m)||A==2&&Co(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),k){case 1:Ri(u,5);break;case 4:Ri(u,10);break;case 3:Ri(u,6);break;default:Ri(u,2)}}}function Do(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Ri(u,m){if(u.j.info("Error code "+m),m==2){var _=C(u.fb,u),A=u.Xa;const k=!A;A=new ge(A||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||os(A,"https"),ls(A),k?cs(A.toString(),_):Ln(A.toString(),_)}else ie(2);u.G=0,u.l&&u.l.sa(m),_u(u),du(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ie(2)):(this.j.info("Failed to ping google.com"),ie(1))};function _u(u){if(u.G=0,u.ka=[],u.l){const m=vo(u.h);(m.length!=0||u.i.length!=0)&&(W(u.ka,m),W(u.ka,u.i),u.h.i.length=0,nt(u.i),u.i.length=0),u.l.ra()}}function vu(u,m,_){var A=_ instanceof ge?un(_):new ge(_);if(A.g!="")m&&(A.g=m+"."+A.g),rr(A,A.s);else{var k=p.location;A=k.protocol,m=m?m+"."+k.hostname:k.hostname,k=+k.port;var q=new ge(null);A&&os(q,A),m&&(q.g=m),k&&rr(q,k),_&&(q.l=_),A=q}return _=u.D,m=u.ya,_&&m&&Yt(A,_,m),Yt(A,"VER",u.la),ps(u,A),A}function Eu(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Ht(new sr({eb:_})):new Ht(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tu(){}r=Tu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function aa(){}aa.prototype.g=function(u,m){return new tn(u,m)};function tn(u,m){oe.call(this),this.g=new na(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!gt(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!gt(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ei(this)}z(tn,oe),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){Ro(this.g)},tn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=kn(u),u=_);m.i.push(new lu(m.Ya++,u)),m.G==3&&ra(m)},tn.prototype.N=function(){this.g.l=null,delete this.j,Ro(this.g),delete this.g,tn.aa.N.call(this)};function Au(u){yi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const _ in m){u=_;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}z(Au,yi);function Su(){mo.call(this),this.status=1}z(Su,mo);function ei(u){this.g=u}z(ei,Tu),ei.prototype.ua=function(){Ft(this.g,"a")},ei.prototype.ta=function(u){Ft(this.g,new Au(u))},ei.prototype.sa=function(u){Ft(this.g,new Su)},ei.prototype.ra=function(){Ft(this.g,"b")},aa.prototype.createWebChannel=aa.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,cT=function(){return new aa},uT=function(){return Ji()},lT=Qn,rm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},nr.NO_ERROR=0,nr.TIMEOUT=8,nr.HTTP_ERROR=6,Pc=nr,_i.COMPLETE="complete",oT=_i,fo.EventType=gi,gi.OPEN="a",gi.CLOSE="b",gi.ERROR="c",gi.MESSAGE="d",oe.prototype.listen=oe.prototype.K,El=fo,Ht.prototype.listenOnce=Ht.prototype.L,Ht.prototype.getLastError=Ht.prototype.Ka,Ht.prototype.getLastErrorCode=Ht.prototype.Ba,Ht.prototype.getStatus=Ht.prototype.Z,Ht.prototype.getResponseJson=Ht.prototype.Oa,Ht.prototype.getResponseText=Ht.prototype.oa,Ht.prototype.send=Ht.prototype.ea,Ht.prototype.setWithCredentials=Ht.prototype.Ha,aT=Ht}).apply(typeof wc<"u"?wc:typeof self<"u"?self:typeof window<"u"?window:{});const fv="@firebase/firestore",dv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Xe.UNAUTHENTICATED=new Xe(null),Xe.GOOGLE_CREDENTIALS=new Xe("google-credentials-uid"),Xe.FIRST_PARTY=new Xe("first-party-uid"),Xe.MOCK_USER=new Xe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eo="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=new bm("@firebase/firestore");function Pa(){return zs.logLevel}function ot(r,...t){if(zs.logLevel<=Vt.DEBUG){const n=t.map(Um);zs.debug(`Firestore (${eo}): ${r}`,...n)}}function Yi(r,...t){if(zs.logLevel<=Vt.ERROR){const n=t.map(Um);zs.error(`Firestore (${eo}): ${r}`,...n)}}function Qa(r,...t){if(zs.logLevel<=Vt.WARN){const n=t.map(Um);zs.warn(`Firestore (${eo}): ${r}`,...n)}}function Um(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,hT(r,s,n)}function hT(r,t,n){let s=`FIRESTORE (${eo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Yi(s),new Error(s)}function Gt(r,t,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||hT(t,l,s)}function wt(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class at extends Zi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class vR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Xe.UNAUTHENTICATED)))}shutdown(){}}class ER{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class TR{constructor(t){this.t=t,this.currentUser=Xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Gt(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let c=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new kr,t.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=c;t.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new kr)}}),0),d()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Gt(typeof s.accessToken=="string",31837,{l:s}),new fT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Gt(t===null||typeof t=="string",2055,{h:t}),new Xe(t)}}class AR{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Xe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class SR{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new AR(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Xe.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class mv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bR{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Gt(this.o===void 0,3512);const s=c=>{c.error!=null&&ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ot("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>s(c)))};const l=c=>{ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new mv(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Gt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new mv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=wR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=t.charAt(l[c]%62))}return s}}function Mt(r,t){return r<t?-1:r>t?1:0}function sm(r,t){const n=Math.min(r.length,t.length);for(let s=0;s<n;s++){const l=r.charAt(s),c=t.charAt(s);if(l!==c)return Gd(l)===Gd(c)?Mt(l,c):Gd(l)?1:-1}return Mt(r.length,t.length)}const RR=55296,IR=57343;function Gd(r){const t=r.charCodeAt(0);return t>=RR&&t<=IR}function Ka(r,t,n){return r.length===t.length&&r.every(((s,l)=>n(s,t[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="__name__";class li{constructor(t,n,s){n===void 0?n=0:n>t.length&&Et(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&Et(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return li.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof li?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let l=0;l<s;l++){const c=li.compareSegments(t.get(l),n.get(l));if(c!==0)return c}return Mt(t.length,n.length)}static compareSegments(t,n){const s=li.isNumericId(t),l=li.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?li.extractNumericId(t).compare(li.extractNumericId(n)):sm(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Pr.fromString(t.substring(4,t.length-2))}}class ee extends li{construct(t,n,s){return new ee(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new at(K.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new ee(n)}static emptyPath(){return new ee([])}}const CR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends li{construct(t,n,s){return new He(t,n,s)}static isValidIdentifier(t){return CR.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===pv}static keyField(){return new He([pv])}static fromServerFormat(t){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new at(K.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;l<t.length;){const p=t[l];if(p==="\\"){if(l+1===t.length)throw new at(K.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new at(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=g,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(s+=p,l++):(c(),l++)}if(c(),d)throw new at(K.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new He(n)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(t){this.path=t}static fromPath(t){return new ft(ee.fromString(t))}static fromName(t){return new ft(ee.fromString(t).popFirst(5))}static empty(){return new ft(ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ee.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ee.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ft(new ee(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(r,t,n){if(!n)throw new at(K.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function DR(r,t,n,s){if(t===!0&&s===!0)throw new at(K.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function gv(r){if(!ft.isDocumentKey(r))throw new at(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function yv(r){if(ft.isDocumentKey(r))throw new at(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function mT(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function fh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Et(12329,{type:typeof r})}function Xi(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new at(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fh(r);throw new at(K.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r,t){const n={typeString:r};return t&&(n.value=t),n}function Kl(r,t){if(!mT(r))throw new at(K.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const l=t[s].typeString,c="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new at(K.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=-62135596800,vv=1e6;class ne{static now(){return ne.fromMillis(Date.now())}static fromDate(t){return ne.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*vv);return new ne(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new at(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new at(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<_v)throw new at(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new at(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vv}_compareTo(t){return this.seconds===t.seconds?Mt(this.nanoseconds,t.nanoseconds):Mt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ne._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Kl(t,ne._jsonSchema))return new ne(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-_v;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ne._jsonSchemaVersion="firestore/timestamp/1.0",ne._jsonSchema={type:Te("string",ne._jsonSchemaVersion),seconds:Te("number"),nanoseconds:Te("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{static fromTimestamp(t){return new bt(t)}static min(){return new bt(new ne(0,0))}static max(){return new bt(new ne(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=-1;function NR(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=bt.fromTimestamp(s===1e9?new ne(n+1,0):new ne(n,s));return new Lr(l,ft.empty(),t)}function OR(r){return new Lr(r.readTime,r.key,Pl)}class Lr{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Lr(bt.min(),ft.empty(),Pl)}static max(){return new Lr(bt.max(),ft.empty(),Pl)}}function VR(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=ft.comparator(r.documentKey,t.documentKey),n!==0?n:Mt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(r){if(r.code!==K.FAILED_PRECONDITION||r.message!==MR)throw r;ot("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new X(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):X.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):X.reject(n)}static resolve(t){return new X(((n,s)=>{n(t)}))}static reject(t){return new X(((n,s)=>{s(t)}))}static waitFor(t){return new X(((n,s)=>{let l=0,c=0,d=!1;t.forEach((p=>{++l,p.next((()=>{++c,d&&c===l&&n()}),(g=>s(g)))})),d=!0,c===l&&n()}))}static or(t){let n=X.resolve(!1);for(const s of t)n=n.next((l=>l?X.resolve(l):s()));return n}static forEach(t,n){const s=[];return t.forEach(((l,c)=>{s.push(n.call(this,l,c))})),this.waitFor(s)}static mapArray(t,n){return new X(((s,l)=>{const c=t.length,d=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(t[y]).next((T=>{d[y]=T,++p,p===c&&s(d)}),(T=>l(T)))}}))}static doWhile(t,n){return new X(((s,l)=>{const c=()=>{t()===!0?n().next((()=>{c()}),l):s()};c()}))}}function PR(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function io(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}dh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=-1;function mh(r){return r==null}function $c(r){return r===0&&1/r==-1/0}function kR(r){return typeof r=="number"&&Number.isInteger(r)&&!$c(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="";function UR(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=Ev(t)),t=LR(r.get(n),t);return Ev(t)}function LR(r,t){let n=t;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case pT:n+="";break;default:n+=c}}return n}function Ev(r){return r+pT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function Kr(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function gT(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t,n){this.comparator=t,this.root=n||qe.EMPTY}insert(t,n){return new ae(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,qe.BLACK,null,null))}remove(t){return new ae(this.comparator,this.root.remove(t,this.comparator).copy(null,null,qe.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Rc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Rc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Rc(this.root,t,this.comparator,!0)}}class Rc{constructor(t,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=n?s(t.key,n):1,n&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class qe{constructor(t,n,s,l,c){this.key=t,this.value=n,this.color=s??qe.RED,this.left=l??qe.EMPTY,this.right=c??qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,l,c){return new qe(t??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let l=this;const c=s(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return qe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return qe.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Et(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Et(27949);return t+(this.isRed()?0:1)}}qe.EMPTY=null,qe.RED=!0,qe.BLACK=!1;qe.EMPTY=new class{constructor(){this.size=0}get key(){throw Et(57766)}get value(){throw Et(16141)}get color(){throw Et(16727)}get left(){throw Et(29726)}get right(){throw Et(36894)}copy(t,n,s,l,c){return this}insert(t,n,s){return new qe(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.comparator=t,this.data=new ae(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Av(this.data.getIterator())}getIteratorFrom(t){return new Av(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof Ce)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Ce(this.comparator);return n.data=t,n}}class Av{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t){this.fields=t,t.sort(He.comparator)}static empty(){return new _n([])}unionWith(t){let n=new Ce(He.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new _n(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Ka(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new yT("Invalid base64 string: "+c):c}})(t);return new Ge(n)}static fromUint8Array(t){const n=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(t);return new Ge(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Mt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ge.EMPTY_BYTE_STRING=new Ge("");const zR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zr(r){if(Gt(!!r,39018),typeof r=="string"){let t=0;const n=zR.exec(r);if(Gt(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:de(r.seconds),nanos:de(r.nanos)}}function de(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Br(r){return typeof r=="string"?Ge.fromBase64String(r):Ge.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="server_timestamp",vT="__type__",ET="__previous_value__",TT="__local_write_time__";function Bm(r){return(r?.mapValue?.fields||{})[vT]?.stringValue===_T}function ph(r){const t=r.mapValue.fields[ET];return Bm(t)?ph(t):t}function kl(r){const t=zr(r.mapValue.fields[TT].timestampValue);return new ne(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(t,n,s,l,c,d,p,g,y,T){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=T}}const Zc="(default)";class Ul{constructor(t,n){this.projectId=t,this.database=n||Zc}static empty(){return new Ul("","")}get isDefaultDatabase(){return this.database===Zc}isEqual(t){return t instanceof Ul&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="__type__",jR="__max__",Ic={mapValue:{}},ST="__vector__",Wc="value";function jr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Bm(r)?4:HR(r)?9007199254740991:qR(r)?10:11:Et(28295,{value:r})}function mi(r,t){if(r===t)return!0;const n=jr(r);if(n!==jr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return kl(r).isEqual(kl(t));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=zr(l.timestampValue),p=zr(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(l,c){return Br(l.bytesValue).isEqual(Br(c.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(l,c){return de(l.geoPointValue.latitude)===de(c.geoPointValue.latitude)&&de(l.geoPointValue.longitude)===de(c.geoPointValue.longitude)})(r,t);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return de(l.integerValue)===de(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=de(l.doubleValue),p=de(c.doubleValue);return d===p?$c(d)===$c(p):isNaN(d)&&isNaN(p)}return!1})(r,t);case 9:return Ka(r.arrayValue.values||[],t.arrayValue.values||[],mi);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},p=c.mapValue.fields||{};if(Tv(d)!==Tv(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!mi(d[g],p[g])))return!1;return!0})(r,t);default:return Et(52216,{left:r})}}function Ll(r,t){return(r.values||[]).find((n=>mi(n,t)))!==void 0}function Ya(r,t){if(r===t)return 0;const n=jr(r),s=jr(t);if(n!==s)return Mt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Mt(r.booleanValue,t.booleanValue);case 2:return(function(c,d){const p=de(c.integerValue||c.doubleValue),g=de(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,t);case 3:return Sv(r.timestampValue,t.timestampValue);case 4:return Sv(kl(r),kl(t));case 5:return sm(r.stringValue,t.stringValue);case 6:return(function(c,d){const p=Br(c),g=Br(d);return p.compareTo(g)})(r.bytesValue,t.bytesValue);case 7:return(function(c,d){const p=c.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const T=Mt(p[y],g[y]);if(T!==0)return T}return Mt(p.length,g.length)})(r.referenceValue,t.referenceValue);case 8:return(function(c,d){const p=Mt(de(c.latitude),de(d.latitude));return p!==0?p:Mt(de(c.longitude),de(d.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return bv(r.arrayValue,t.arrayValue);case 10:return(function(c,d){const p=c.fields||{},g=d.fields||{},y=p[Wc]?.arrayValue,T=g[Wc]?.arrayValue,I=Mt(y?.values?.length||0,T?.values?.length||0);return I!==0?I:bv(y,T)})(r.mapValue,t.mapValue);case 11:return(function(c,d){if(c===Ic.mapValue&&d===Ic.mapValue)return 0;if(c===Ic.mapValue)return 1;if(d===Ic.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=d.fields||{},T=Object.keys(y);g.sort(),T.sort();for(let I=0;I<g.length&&I<T.length;++I){const C=sm(g[I],T[I]);if(C!==0)return C;const G=Ya(p[g[I]],y[T[I]]);if(G!==0)return G}return Mt(g.length,T.length)})(r.mapValue,t.mapValue);default:throw Et(23264,{he:n})}}function Sv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Mt(r,t);const n=zr(r),s=zr(t),l=Mt(n.seconds,s.seconds);return l!==0?l:Mt(n.nanos,s.nanos)}function bv(r,t){const n=r.values||[],s=t.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=Ya(n[l],s[l]);if(c)return c}return Mt(n.length,s.length)}function Xa(r){return am(r)}function am(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=zr(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Br(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return ft.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=am(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${am(n.fields[d])}`;return l+"}"})(r.mapValue):Et(61005,{value:r})}function kc(r){switch(jr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ph(r);return t?16+kc(t):16;case 5:return 2*r.stringValue.length;case 6:return Br(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+kc(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return Kr(s.fields,((c,d)=>{l+=c.length+kc(d)})),l})(r.mapValue);default:throw Et(13486,{value:r})}}function wv(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function om(r){return!!r&&"integerValue"in r}function jm(r){return!!r&&"arrayValue"in r}function Rv(r){return!!r&&"nullValue"in r}function Iv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Uc(r){return!!r&&"mapValue"in r}function qR(r){return(r?.mapValue?.fields||{})[AT]?.stringValue===ST}function Rl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return Kr(r.mapValue.fields,((n,s)=>t.mapValue.fields[n]=Rl(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Rl(r.arrayValue.values[n]);return t}return{...r}}function HR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===jR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(t){this.value=t}static empty(){return new on({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Uc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Rl(n)}setAll(t){let n=He.emptyPath(),s={},l=[];t.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,s,l),s={},l=[],n=p.popLast()}d?s[p.lastSegment()]=Rl(d):l.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(t){const n=this.field(t.popLast());Uc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return mi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=n.mapValue.fields[t.get(s)];Uc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,s){Kr(n,((l,c)=>t[l]=c));for(const l of s)delete t[l]}clone(){return new on(Rl(this.value))}}function bT(r){const t=[];return Kr(r.fields,((n,s)=>{const l=new He([n]);if(Uc(s)){const c=bT(s.mapValue).fields;if(c.length===0)t.push(l);else for(const d of c)t.push(l.child(d))}else t.push(l)})),new _n(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t,n,s,l,c,d,p){this.key=t,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(t){return new $e(t,0,bt.min(),bt.min(),bt.min(),on.empty(),0)}static newFoundDocument(t,n,s,l){return new $e(t,1,n,bt.min(),s,l,0)}static newNoDocument(t,n){return new $e(t,2,n,bt.min(),bt.min(),on.empty(),0)}static newUnknownDocument(t,n){return new $e(t,3,n,bt.min(),bt.min(),on.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof $e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new $e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(t,n){this.position=t,this.inclusive=n}}function Cv(r,t,n){let s=0;for(let l=0;l<r.position.length;l++){const c=t[l],d=r.position[l];if(c.field.isKeyField()?s=ft.comparator(ft.fromName(d.referenceValue),n.key):s=Ya(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Dv(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!mi(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(t,n="asc"){this.field=t,this.dir=n}}function GR(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{}class Ee extends wT{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new QR(t,n,s):n==="array-contains"?new XR(t,s):n==="in"?new $R(t,s):n==="not-in"?new ZR(t,s):n==="array-contains-any"?new WR(t,s):new Ee(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new KR(t,s):new YR(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ya(n,this.value)):n!==null&&jr(this.value)===jr(n)&&this.matchesComparison(Ya(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gn extends wT{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Gn(t,n)}matches(t){return RT(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function RT(r){return r.op==="and"}function IT(r){return FR(r)&&RT(r)}function FR(r){for(const t of r.filters)if(t instanceof Gn)return!1;return!0}function lm(r){if(r instanceof Ee)return r.field.canonicalString()+r.op.toString()+Xa(r.value);if(IT(r))return r.filters.map((t=>lm(t))).join(",");{const t=r.filters.map((n=>lm(n))).join(",");return`${r.op}(${t})`}}function CT(r,t){return r instanceof Ee?(function(s,l){return l instanceof Ee&&s.op===l.op&&s.field.isEqual(l.field)&&mi(s.value,l.value)})(r,t):r instanceof Gn?(function(s,l){return l instanceof Gn&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,d,p)=>c&&CT(d,l.filters[p])),!0):!1})(r,t):void Et(19439)}function DT(r){return r instanceof Ee?(function(n){return`${n.field.canonicalString()} ${n.op} ${Xa(n.value)}`})(r):r instanceof Gn?(function(n){return n.op.toString()+" {"+n.getFilters().map(DT).join(" ,")+"}"})(r):"Filter"}class QR extends Ee{constructor(t,n,s){super(t,n,s),this.key=ft.fromName(s.referenceValue)}matches(t){const n=ft.comparator(t.key,this.key);return this.matchesComparison(n)}}class KR extends Ee{constructor(t,n){super(t,"in",n),this.keys=NT("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class YR extends Ee{constructor(t,n){super(t,"not-in",n),this.keys=NT("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function NT(r,t){return(t.arrayValue?.values||[]).map((n=>ft.fromName(n.referenceValue)))}class XR extends Ee{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return jm(n)&&Ll(n.arrayValue,this.value)}}class $R extends Ee{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Ll(this.value.arrayValue,n)}}class ZR extends Ee{constructor(t,n){super(t,"not-in",n)}matches(t){if(Ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ll(this.value.arrayValue,n)}}class WR extends Ee{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!jm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Ll(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(t,n=null,s=[],l=[],c=null,d=null,p=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=p,this.Te=null}}function Nv(r,t=null,n=[],s=[],l=null,c=null,d=null){return new JR(r,t,n,s,l,c,d)}function qm(r){const t=wt(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>lm(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),mh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Xa(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Xa(s))).join(",")),t.Te=n}return t.Te}function Hm(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!GR(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!CT(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!Dv(r.startAt,t.startAt)&&Dv(r.endAt,t.endAt)}function um(r){return ft.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(t,n=null,s=[],l=[],c=null,d="F",p=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function tI(r,t,n,s,l,c,d,p){return new Yl(r,t,n,s,l,c,d,p)}function OT(r){return new Yl(r)}function Ov(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function VT(r){return r.collectionGroup!==null}function Il(r){const t=wt(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),n.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Ce(He.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(t).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new th(c,s))})),n.has(He.keyField().canonicalString())||t.Ie.push(new th(He.keyField(),s))}return t.Ie}function ci(r){const t=wt(r);return t.Ee||(t.Ee=eI(t,Il(r))),t.Ee}function eI(r,t){if(r.limitType==="F")return Nv(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new th(l.field,c)}));const n=r.endAt?new Jc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Jc(r.startAt.position,r.startAt.inclusive):null;return Nv(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function cm(r,t){const n=r.filters.concat([t]);return new Yl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function hm(r,t,n){return new Yl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function gh(r,t){return Hm(ci(r),ci(t))&&r.limitType===t.limitType}function MT(r){return`${qm(ci(r))}|lt:${r.limitType}`}function ka(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>DT(l))).join(", ")}]`),mh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>Xa(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>Xa(l))).join(",")),`Target(${s})`})(ci(r))}; limitType=${r.limitType})`}function yh(r,t){return t.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ft.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,t)&&(function(s,l){for(const c of Il(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,t)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,t)&&(function(s,l){return!(s.startAt&&!(function(d,p,g){const y=Cv(d,p,g);return d.inclusive?y<=0:y<0})(s.startAt,Il(s),l)||s.endAt&&!(function(d,p,g){const y=Cv(d,p,g);return d.inclusive?y>=0:y>0})(s.endAt,Il(s),l))})(r,t)}function nI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function xT(r){return(t,n)=>{let s=!1;for(const l of Il(r)){const c=iI(l,t,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function iI(r,t,n){const s=r.field.isKeyField()?ft.comparator(t.key,n.key):(function(c,d,p){const g=d.data.field(c),y=p.data.field(c);return g!==null&&y!==null?Ya(g,y):Et(42886)})(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Et(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Kr(this.inner,((n,s)=>{for(const[l,c]of s)t(l,c)}))}isEmpty(){return gT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=new ae(ft.comparator);function $i(){return rI}const PT=new ae(ft.comparator);function Tl(...r){let t=PT;for(const n of r)t=t.insert(n.key,n);return t}function kT(r){let t=PT;return r.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function xs(){return Cl()}function UT(){return Cl()}function Cl(){return new js((r=>r.toString()),((r,t)=>r.isEqual(t)))}const sI=new ae(ft.comparator),aI=new Ce(ft.comparator);function xt(...r){let t=aI;for(const n of r)t=t.add(n);return t}const oI=new Ce(Mt);function lI(){return oI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$c(t)?"-0":t}}function LT(r){return{integerValue:""+r}}function uI(r,t){return kR(t)?LT(t):Gm(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this._=void 0}}function cI(r,t,n){return r instanceof eh?(function(l,c){const d={fields:{[vT]:{stringValue:_T},[TT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Bm(c)&&(c=ph(c)),c&&(d.fields[ET]=c),{mapValue:d}})(n,t):r instanceof zl?BT(r,t):r instanceof Bl?jT(r,t):(function(l,c){const d=zT(l,c),p=Vv(d)+Vv(l.Ae);return om(d)&&om(l.Ae)?LT(p):Gm(l.serializer,p)})(r,t)}function hI(r,t,n){return r instanceof zl?BT(r,t):r instanceof Bl?jT(r,t):n}function zT(r,t){return r instanceof nh?(function(s){return om(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(t)?t:{integerValue:0}:null}class eh extends _h{}class zl extends _h{constructor(t){super(),this.elements=t}}function BT(r,t){const n=qT(t);for(const s of r.elements)n.some((l=>mi(l,s)))||n.push(s);return{arrayValue:{values:n}}}class Bl extends _h{constructor(t){super(),this.elements=t}}function jT(r,t){let n=qT(t);for(const s of r.elements)n=n.filter((l=>!mi(l,s)));return{arrayValue:{values:n}}}class nh extends _h{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function Vv(r){return de(r.integerValue||r.doubleValue)}function qT(r){return jm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function fI(r,t){return r.field.isEqual(t.field)&&(function(s,l){return s instanceof zl&&l instanceof zl||s instanceof Bl&&l instanceof Bl?Ka(s.elements,l.elements,mi):s instanceof nh&&l instanceof nh?mi(s.Ae,l.Ae):s instanceof eh&&l instanceof eh})(r.transform,t.transform)}class dI{constructor(t,n){this.version=t,this.transformResults=n}}class xn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new xn}static exists(t){return new xn(void 0,t)}static updateTime(t){return new xn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Lc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class vh{}function HT(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new Fm(r.key,xn.none()):new Xl(r.key,r.data,xn.none());{const n=r.data,s=on.empty();let l=new Ce(He.comparator);for(let c of t.fields)if(!l.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new Yr(r.key,s,new _n(l.toArray()),xn.none())}}function mI(r,t,n){r instanceof Xl?(function(l,c,d){const p=l.value.clone(),g=xv(l.fieldTransforms,c,d.transformResults);p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,t,n):r instanceof Yr?(function(l,c,d){if(!Lc(l.precondition,c))return void c.convertToUnknownDocument(d.version);const p=xv(l.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(GT(l)),g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,t,n):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,t,n)}function Dl(r,t,n,s){return r instanceof Xl?(function(c,d,p,g){if(!Lc(c.precondition,d))return p;const y=c.value.clone(),T=Pv(c.fieldTransforms,g,d);return y.setAll(T),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(r,t,n,s):r instanceof Yr?(function(c,d,p,g){if(!Lc(c.precondition,d))return p;const y=Pv(c.fieldTransforms,g,d),T=d.data;return T.setAll(GT(c)),T.setAll(y),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((I=>I.field)))})(r,t,n,s):(function(c,d,p){return Lc(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,t,n)}function pI(r,t){let n=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),c=zT(s.transform,l||null);c!=null&&(n===null&&(n=on.empty()),n.set(s.field,c))}return n||null}function Mv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Ka(s,l,((c,d)=>fI(c,d)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Xl extends vh{constructor(t,n,s,l=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Yr extends vh{constructor(t,n,s,l,c=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function GT(r){const t=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}})),t}function xv(r,t,n){const s=new Map;Gt(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const c=r[l],d=c.transform,p=t.data.field(c.field);s.set(c.field,hI(d,p,n[l]))}return s}function Pv(r,t,n){const s=new Map;for(const l of r){const c=l.transform,d=n.data.field(l.field);s.set(l.field,cI(c,d,t))}return s}class Fm extends vh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gI extends vh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(t,n,s,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&mI(c,t,s[l])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=Dl(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=Dl(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=UT();return this.mutations.forEach((l=>{const c=t.get(l.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=n.has(l.key)?null:p;const g=HT(d,p);g!==null&&s.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(bt.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),xt())}isEqual(t){return this.batchId===t.batchId&&Ka(this.mutations,t.mutations,((n,s)=>Mv(n,s)))&&Ka(this.baseMutations,t.baseMutations,((n,s)=>Mv(n,s)))}}class Qm{constructor(t,n,s,l){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(t,n,s){Gt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=(function(){return sI})();const c=t.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new Qm(t,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve,zt;function EI(r){switch(r){case K.OK:return Et(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return Et(15467,{code:r})}}function FT(r){if(r===void 0)return Yi("GRPC error has no .code"),K.UNKNOWN;switch(r){case ve.OK:return K.OK;case ve.CANCELLED:return K.CANCELLED;case ve.UNKNOWN:return K.UNKNOWN;case ve.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case ve.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case ve.INTERNAL:return K.INTERNAL;case ve.UNAVAILABLE:return K.UNAVAILABLE;case ve.UNAUTHENTICATED:return K.UNAUTHENTICATED;case ve.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case ve.NOT_FOUND:return K.NOT_FOUND;case ve.ALREADY_EXISTS:return K.ALREADY_EXISTS;case ve.PERMISSION_DENIED:return K.PERMISSION_DENIED;case ve.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case ve.ABORTED:return K.ABORTED;case ve.OUT_OF_RANGE:return K.OUT_OF_RANGE;case ve.UNIMPLEMENTED:return K.UNIMPLEMENTED;case ve.DATA_LOSS:return K.DATA_LOSS;default:return Et(39323,{code:r})}}(zt=ve||(ve={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=new Pr([4294967295,4294967295],0);function kv(r){const t=TI().encode(r),n=new sT;return n.update(t),new Uint8Array(n.digest())}function Uv(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Pr([n,s],0),new Pr([l,c],0)]}class Km{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Al(`Invalid padding: ${n}`);if(s<0)throw new Al(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Al(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new Al(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Pr.fromNumber(this.ge)}ye(t,n,s){let l=t.add(n.multiply(Pr.fromNumber(s)));return l.compare(AI)===1&&(l=new Pr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=kv(t),[s,l]=Uv(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(t,n,s){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),d=new Km(c,l,n);return s.forEach((p=>d.insert(p))),d}insert(t){if(this.ge===0)return;const n=kv(t),[s,l]=Uv(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class Al extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(t,n,s,l,c){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const l=new Map;return l.set(t,$l.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new Eh(bt.min(),l,new ae(Mt),$i(),xt())}}class $l{constructor(t,n,s,l,c){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new $l(s,n,xt(),xt(),xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(t,n,s,l){this.be=t,this.removedTargetIds=n,this.key=s,this.De=l}}class QT{constructor(t,n){this.targetId=t,this.Ce=n}}class KT{constructor(t,n,s=Ge.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=l}}class Lv{constructor(){this.ve=0,this.Fe=zv(),this.Me=Ge.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=xt(),n=xt(),s=xt();return this.Fe.forEach(((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:Et(38017,{changeType:c})}})),new $l(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=zv()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class SI{constructor(t){this.Ge=t,this.ze=new Map,this.je=$i(),this.Je=Cc(),this.He=Cc(),this.Ye=new ae(Mt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:Et(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(t){const n=t.targetId,s=t.Ce.count,l=this.ot(n);if(l){const c=l.target;if(um(c))if(s===0){const d=new ft(c.path);this.et(n,d,$e.newNoDocument(d,bt.min()))}else Gt(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const p=this.ut(t),g=p?this.ct(p,t,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let d,p;try{d=Br(s).toUint8Array()}catch(g){if(g instanceof yT)return Qa("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Km(d,l,c)}catch(g){return Qa(g instanceof Al?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((c=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;t.mightContain(p)||(this.et(n,c,null),l++)})),l}Tt(t){const n=new Map;this.ze.forEach(((c,d)=>{const p=this.ot(d);if(p){if(c.current&&um(p.target)){const g=new ft(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,$e.newNoDocument(g,t))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let s=xt();this.He.forEach(((c,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(t)));const l=new Eh(t,n,this.Ye,this.je,s);return this.je=$i(),this.Je=Cc(),this.He=Cc(),this.Ye=new ae(Mt),l}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Lv,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Ce(Mt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Ce(Mt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||ot("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Lv),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Cc(){return new ae(ft.comparator)}function zv(){return new ae(ft.comparator)}const bI={asc:"ASCENDING",desc:"DESCENDING"},wI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RI={and:"AND",or:"OR"};class II{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function fm(r,t){return r.useProto3Json||mh(t)?t:{value:t}}function ih(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function YT(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function CI(r,t){return ih(r,t.toTimestamp())}function hi(r){return Gt(!!r,49232),bt.fromTimestamp((function(n){const s=zr(n);return new ne(s.seconds,s.nanos)})(r))}function Ym(r,t){return dm(r,t).canonicalString()}function dm(r,t){const n=(function(l){return new ee(["projects",l.projectId,"databases",l.database])})(r).child("documents");return t===void 0?n:n.child(t)}function XT(r){const t=ee.fromString(r);return Gt(t0(t),10190,{key:t.toString()}),t}function mm(r,t){return Ym(r.databaseId,t.path)}function Fd(r,t){const n=XT(t);if(n.get(1)!==r.databaseId.projectId)throw new at(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new at(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ft(ZT(n))}function $T(r,t){return Ym(r.databaseId,t)}function DI(r){const t=XT(r);return t.length===4?ee.emptyPath():ZT(t)}function pm(r){return new ee(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function ZT(r){return Gt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Bv(r,t,n){return{name:mm(r,t),fields:n.value.mapValue.fields}}function NI(r,t){let n;if("targetChange"in t){t.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Et(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=(function(y,T){return y.useProto3Json?(Gt(T===void 0||typeof T=="string",58123),Ge.fromBase64String(T||"")):(Gt(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Ge.fromUint8Array(T||new Uint8Array))})(r,t.targetChange.resumeToken),d=t.targetChange.cause,p=d&&(function(y){const T=y.code===void 0?K.UNKNOWN:FT(y.code);return new at(T,y.message||"")})(d);n=new KT(s,l,c,p||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=Fd(r,s.document.name),c=hi(s.document.updateTime),d=s.document.createTime?hi(s.document.createTime):bt.min(),p=new on({mapValue:{fields:s.document.fields}}),g=$e.newFoundDocument(l,c,d,p),y=s.targetIds||[],T=s.removedTargetIds||[];n=new zc(y,T,g.key,g)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=Fd(r,s.document),c=s.readTime?hi(s.readTime):bt.min(),d=$e.newNoDocument(l,c),p=s.removedTargetIds||[];n=new zc([],p,d.key,d)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=Fd(r,s.document),c=s.removedTargetIds||[];n=new zc([],c,l,null)}else{if(!("filter"in t))return Et(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new vI(l,c),p=s.targetId;n=new QT(p,d)}}return n}function OI(r,t){let n;if(t instanceof Xl)n={update:Bv(r,t.key,t.value)};else if(t instanceof Fm)n={delete:mm(r,t.key)};else if(t instanceof Yr)n={update:Bv(r,t.key,t.data),updateMask:BI(t.fieldMask)};else{if(!(t instanceof gI))return Et(16599,{Vt:t.type});n={verify:mm(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(c,d){const p=d.transform;if(p instanceof eh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof zl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Bl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof nh)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw Et(20930,{transform:d.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:CI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Et(27497)})(r,t.precondition)),n}function VI(r,t){return r&&r.length>0?(Gt(t!==void 0,14353),r.map((n=>(function(l,c){let d=l.updateTime?hi(l.updateTime):hi(c);return d.isEqual(bt.min())&&(d=hi(c)),new dI(d,l.transformResults||[])})(n,t)))):[]}function MI(r,t){return{documents:[$T(r,t.path)]}}function xI(r,t){const n={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=$T(r,l);const c=(function(y){if(y.length!==0)return JT(Gn.create(y,"and"))})(t.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((T=>(function(C){return{field:Ua(C.field),direction:UI(C.dir)}})(T)))})(t.orderBy);d&&(n.structuredQuery.orderBy=d);const p=fm(r,t.limit);return p!==null&&(n.structuredQuery.limit=p),t.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:n,parent:l}}function PI(r){let t=DI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){Gt(s===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:t=t.child(T.collectionId)}let c=[];n.where&&(c=(function(I){const C=WT(I);return C instanceof Gn&&IT(C)?C.getFilters():[C]})(n.where));let d=[];n.orderBy&&(d=(function(I){return I.map((C=>(function(z){return new th(La(z.field),(function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(C)))})(n.orderBy));let p=null;n.limit&&(p=(function(I){let C;return C=typeof I=="object"?I.value:I,mh(C)?null:C})(n.limit));let g=null;n.startAt&&(g=(function(I){const C=!!I.before,G=I.values||[];return new Jc(G,C)})(n.startAt));let y=null;return n.endAt&&(y=(function(I){const C=!I.before,G=I.values||[];return new Jc(G,C)})(n.endAt)),tI(t,l,d,c,p,"F",g,y)}function kI(r,t){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et(28987,{purpose:l})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function WT(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=La(n.unaryFilter.field);return Ee.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=La(n.unaryFilter.field);return Ee.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=La(n.unaryFilter.field);return Ee.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=La(n.unaryFilter.field);return Ee.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Et(61313);default:return Et(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Ee.create(La(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Et(58110);default:return Et(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Gn.create(n.compositeFilter.filters.map((s=>WT(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Et(1026)}})(n.compositeFilter.op))})(r):Et(30097,{filter:r})}function UI(r){return bI[r]}function LI(r){return wI[r]}function zI(r){return RI[r]}function Ua(r){return{fieldPath:r.canonicalString()}}function La(r){return He.fromServerFormat(r.fieldPath)}function JT(r){return r instanceof Ee?(function(n){if(n.op==="=="){if(Iv(n.value))return{unaryFilter:{field:Ua(n.field),op:"IS_NAN"}};if(Rv(n.value))return{unaryFilter:{field:Ua(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Iv(n.value))return{unaryFilter:{field:Ua(n.field),op:"IS_NOT_NAN"}};if(Rv(n.value))return{unaryFilter:{field:Ua(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ua(n.field),op:LI(n.op),value:n.value}}})(r):r instanceof Gn?(function(n){const s=n.getFilters().map((l=>JT(l)));return s.length===1?s[0]:{compositeFilter:{op:zI(n.op),filters:s}}})(r):Et(54877,{filter:r})}function BI(r){const t=[];return r.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function t0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(t,n,s,l,c=bt.min(),d=bt.min(),p=Ge.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(t){return new Or(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(t){this.yt=t}}function qI(r){const t=PI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?hm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.Cn=new GI}addToCollectionParentIndex(t,n){return this.Cn.add(n),X.resolve()}getCollectionParents(t,n){return X.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return X.resolve()}deleteFieldIndex(t,n){return X.resolve()}deleteAllFieldIndexes(t){return X.resolve()}createTargetIndexes(t,n){return X.resolve()}getDocumentsMatchingTarget(t,n){return X.resolve(null)}getIndexType(t,n){return X.resolve(0)}getFieldIndexes(t,n){return X.resolve([])}getNextCollectionGroupToUpdate(t){return X.resolve(null)}getMinOffset(t,n){return X.resolve(Lr.min())}getMinOffsetFromCollectionGroup(t,n){return X.resolve(Lr.min())}updateCollectionGroup(t,n,s){return X.resolve()}updateIndexEntries(t,n){return X.resolve()}}class GI{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n]||new Ce(ee.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(t){return(this.index[t]||new Ce(ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},e0=41943040;class an{static withCacheSize(t){return new an(t,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(e0,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new $a(0)}static cr(){return new $a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="LruGarbageCollector",FI=1048576;function Hv([r,t],[n,s]){const l=Mt(r,n);return l===0?Mt(t,s):l}class QI{constructor(t){this.Ir=t,this.buffer=new Ce(Hv),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Hv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class KI{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ot(qv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){io(n)?ot(qv,"Ignoring IndexedDB error during garbage collection: ",n):await no(n)}await this.Vr(3e5)}))}}class YI{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return X.resolve(dh.ce);const s=new QI(n);return this.mr.forEachTarget(t,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(ot("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(jv)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(ot("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jv):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,l,c,d,p,g,y;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(ot("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),l=this.params.maximumSequenceNumbersToCollect):l=I,d=Date.now(),this.nthSequenceNumber(t,l)))).next((I=>(s=I,p=Date.now(),this.removeTargets(t,s,n)))).next((I=>(c=I,g=Date.now(),this.removeOrphanedDocuments(t,s)))).next((I=>(y=Date.now(),Pa()<=Vt.DEBUG&&ot("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${I} documents in `+(y-g)+`ms
Total Duration: ${y-T}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:I}))))}}function XI(r,t){return new YI(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this.changes=new js((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,$e.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?X.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(t,n,s,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(t,n)))).next((l=>(s!==null&&Dl(s.mutation,l,_n.empty(),ne.now()),l)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,xt()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=xt()){const l=xs();return this.populateOverlays(t,l,n).next((()=>this.computeViews(t,n,l,s).next((c=>{let d=Tl();return c.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(t,n){const s=xs();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,xt())))}populateOverlays(t,n,s){const l=[];return s.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(t,l).next((c=>{c.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(t,n,s,l){let c=$i();const d=Cl(),p=(function(){return Cl()})();return n.forEach(((g,y)=>{const T=s.get(y.key);l.has(y.key)&&(T===void 0||T.mutation instanceof Yr)?c=c.insert(y.key,y):T!==void 0?(d.set(y.key,T.mutation.getFieldMask()),Dl(T.mutation,y,T.mutation.getFieldMask(),ne.now())):d.set(y.key,_n.empty())})),this.recalculateAndSaveOverlays(t,c).next((g=>(g.forEach(((y,T)=>d.set(y,T))),n.forEach(((y,T)=>p.set(y,new ZI(T,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(t,n){const s=Cl();let l=new ae(((d,p)=>d-p)),c=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let T=s.get(g)||_n.empty();T=p.applyToLocalView(y,T),s.set(g,T);const I=(l.get(p.batchId)||xt()).add(g);l=l.insert(p.batchId,I)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,T=g.value,I=UT();T.forEach((C=>{if(!c.has(C)){const G=HT(n.get(C),s.get(C));G!==null&&I.set(C,G),c=c.add(C)}})),d.push(this.documentOverlayCache.saveOverlays(t,y,I))}return X.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,l){return(function(d){return ft.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):VT(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,l):this.getDocumentsMatchingCollectionQuery(t,n,s,l)}getNextDocuments(t,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,l-c.size):X.resolve(xs());let p=Pl,g=c;return d.next((y=>X.forEach(y,((T,I)=>(p<I.largestBatchId&&(p=I.largestBatchId),c.get(T)?X.resolve():this.remoteDocumentCache.getEntry(t,T).next((C=>{g=g.insert(T,C)}))))).next((()=>this.populateOverlays(t,y,c))).next((()=>this.computeViews(t,g,y,xt()))).next((T=>({batchId:p,changes:kT(T)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ft(n)).next((s=>{let l=Tl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,l){const c=n.collectionGroup;let d=Tl();return this.indexManager.getCollectionParents(t,c).next((p=>X.forEach(p,(g=>{const y=(function(I,C){return new Yl(C,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(t,y,s,l).next((T=>{T.forEach(((I,C)=>{d=d.insert(I,C)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(t,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,c,l)))).next((d=>{c.forEach(((g,y)=>{const T=y.getKey();d.get(T)===null&&(d=d.insert(T,$e.newInvalidDocument(T)))}));let p=Tl();return d.forEach(((g,y)=>{const T=c.get(g);T!==void 0&&Dl(T.mutation,y,_n.empty(),ne.now()),yh(n,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return X.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:hi(l.createTime)}})(n)),X.resolve()}getNamedQuery(t,n){return X.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:qI(l.bundledQuery),readTime:hi(l.readTime)}})(n)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(){this.overlays=new ae(ft.comparator),this.qr=new Map}getOverlay(t,n){return X.resolve(this.overlays.get(n))}getOverlays(t,n){const s=xs();return X.forEach(n,(l=>this.getOverlay(t,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((l,c)=>{this.St(t,n,c)})),X.resolve()}removeOverlaysForBatchId(t,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),X.resolve()}getOverlaysForCollection(t,n,s){const l=xs(),c=n.length+1,d=new ft(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return X.resolve(l)}getOverlaysForCollectionGroup(t,n,s,l){let c=new ae(((y,T)=>y-T));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=c.get(y.largestBatchId);T===null&&(T=xs(),c=c.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const p=xs(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,T)=>p.set(y,T))),!(p.size()>=l)););return X.resolve(p)}St(t,n,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new _I(n,s));let c=this.qr.get(n);c===void 0&&(c=xt(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(){this.sessionToken=Ge.EMPTY_BYTE_STRING}getSessionToken(t){return X.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(){this.Qr=new Ce(Pe.$r),this.Ur=new Ce(Pe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new Pe(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new Pe(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new ft(new ee([])),s=new Pe(n,t),l=new Pe(n,t+1),c=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ft(new ee([])),s=new Pe(n,t),l=new Pe(n,t+1);let c=xt();return this.Ur.forEachInRange([s,l],(d=>{c=c.add(d.key)})),c}containsKey(t){const n=new Pe(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Pe{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ft.comparator(t.key,n.key)||Mt(t.Yr,n.Yr)}static Kr(t,n){return Mt(t.Yr,n.Yr)||ft.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ce(Pe.$r)}checkEmpty(t){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new yI(c,n,s,l);this.mutationQueue.push(d);for(const p of l)this.Zr=this.Zr.add(new Pe(p.key,c)),this.indexManager.addToCollectionParentIndex(t,p.key.path.popLast());return X.resolve(d)}lookupMutationBatch(t,n){return X.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,l=this.ei(s),c=l<0?0:l;return X.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?zm:this.tr-1)}getAllMutationBatches(t){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Pe(n,0),l=new Pe(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(d=>{const p=this.Xr(d.Yr);c.push(p)})),X.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Ce(Mt);return n.forEach((l=>{const c=new Pe(l,0),d=new Pe(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(p=>{s=s.add(p.Yr)}))})),X.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,l=s.length+1;let c=s;ft.isDocumentKey(c)||(c=c.child(""));const d=new Pe(new ft(c),0);let p=new Ce(Mt);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Yr)),!0)}),d),X.resolve(this.ti(p))}ti(t){const n=[];return t.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(t,n){Gt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return X.forEach(n.mutations,(l=>{const c=new Pe(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new Pe(n,0),l=this.Zr.firstAfterOrEqual(s);return X.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,X.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(t){this.ri=t,this.docs=(function(){return new ae(ft.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return X.resolve(s?s.document.mutableCopy():$e.newInvalidDocument(n))}getEntries(t,n){let s=$i();return n.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():$e.newInvalidDocument(l))})),X.resolve(s)}getDocumentsMatchingQuery(t,n,s,l){let c=$i();const d=n.path,p=new ft(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:T}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||VR(OR(T),s)<=0||(l.has(T.key)||yh(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return X.resolve(c)}getAllFromCollectionGroup(t,n,s,l){Et(9500)}ii(t,n){return X.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new rC(this)}getSize(t){return X.resolve(this.size)}}class rC extends $I{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)})),X.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(t){this.persistence=t,this.si=new js((n=>qm(n)),Hm),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.oi=0,this._i=new Xm,this.targetCount=0,this.ai=$a.ur()}forEachTarget(t,n){return this.si.forEach(((s,l)=>n(l))),X.resolve()}getLastRemoteSnapshotVersion(t){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return X.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),X.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new $a(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,X.resolve()}updateTargetData(t,n){return this.Pr(n),X.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(t,n,s){let l=0;const c=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(t,p.targetId)),l++)})),X.waitFor(c).next((()=>l))}getTargetCount(t){return X.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return X.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),X.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((d=>{c.push(l.markPotentiallyOrphaned(t,d))})),X.waitFor(c)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),X.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return X.resolve(s)}containsKey(t,n){return X.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(t,n){this.ui={},this.overlays={},this.ci=new dh(0),this.li=!1,this.li=!0,this.hi=new eC,this.referenceDelegate=t(this),this.Pi=new sC(this),this.indexManager=new HI,this.remoteDocumentCache=(function(l){return new iC(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new jI(n),this.Ii=new JI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new tC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new nC(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){ot("MemoryPersistence","Starting transaction:",t);const l=new aC(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(t,n){return X.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class aC extends xR{constructor(t){super(),this.currentSequenceNumber=t}}class $m{constructor(t){this.persistence=t,this.Ri=new Xm,this.Vi=null}static mi(t){return new $m(t)}get fi(){if(this.Vi)return this.Vi;throw Et(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),X.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),X.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),X.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,(s=>{const l=ft.fromPath(s);return this.gi(t,l).next((c=>{c||n.removeEntry(l,bt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return X.or([()=>X.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class rh{constructor(t,n){this.persistence=t,this.pi=new js((s=>UR(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=XI(this,n)}static mi(t,n){return new rh(t,n)}Ei(){}di(t){return X.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((l=>s+l))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return X.forEach(this.pi,((s,l)=>this.br(t,s,l).next((c=>c?X.resolve():n(l)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(t,(d=>this.br(t,d,n).next((p=>{p||(s++,c.removeEntry(d,bt.min()))})))).next((()=>c.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),X.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),X.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),X.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),X.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=kc(t.data.value)),n}br(t,n,s){return X.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.pi.get(n);return X.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(t,n,s,l){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=l}static As(t,n){let s=xt(),l=xt();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Zm(t,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return US()?8:PR(Ze())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,l){const c={result:null};return this.ys(t,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(t,n,l,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new oC;return this.Ss(t,n,d).next((p=>{if(c.result=p,this.Vs)return this.bs(t,n,d,p.size)}))})).next((()=>c.result))}bs(t,n,s,l){return s.documentReadCount<this.fs?(Pa()<=Vt.DEBUG&&ot("QueryEngine","SDK will not create cache indexes for query:",ka(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(Pa()<=Vt.DEBUG&&ot("QueryEngine","Query:",ka(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Pa()<=Vt.DEBUG&&ot("QueryEngine","The SDK decides to create cache indexes for query:",ka(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ci(n))):X.resolve())}ys(t,n){if(Ov(n))return X.resolve(null);let s=ci(n);return this.indexManager.getIndexType(t,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=hm(n,null,"F"),s=ci(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((c=>{const d=xt(...c);return this.ps.getDocuments(t,d).next((p=>this.indexManager.getMinOffset(t,s).next((g=>{const y=this.Ds(n,p);return this.Cs(n,y,d,g.readTime)?this.ys(t,hm(n,null,"F")):this.vs(t,y,n,g)}))))})))))}ws(t,n,s,l){return Ov(n)||l.isEqual(bt.min())?X.resolve(null):this.ps.getDocuments(t,s).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,s,l)?X.resolve(null):(Pa()<=Vt.DEBUG&&ot("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),ka(n)),this.vs(t,d,n,NR(l,Pl)).next((p=>p)))}))}Ds(t,n){let s=new Ce(xT(t));return n.forEach(((l,c)=>{yh(t,c)&&(s=s.add(c))})),s}Cs(t,n,s,l){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const c=t.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(t,n,s){return Pa()<=Vt.DEBUG&&ot("QueryEngine","Using full collection scan to execute query:",ka(n)),this.ps.getDocumentsMatchingQuery(t,n,Lr.min(),s)}vs(t,n,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="LocalStore",uC=3e8;class cC{constructor(t,n,s,l){this.persistence=t,this.Fs=n,this.serializer=l,this.Ms=new ae(Mt),this.xs=new js((c=>qm(c)),Hm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new WI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function hC(r,t,n,s){return new cC(r,t,n,s)}async function i0(r,t){const n=wt(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],p=[];let g=xt();for(const y of l){d.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}for(const y of c){p.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}return n.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function fC(r,t){const n=wt(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=t.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,T){const I=y.batch,C=I.keys();let G=X.resolve();return C.forEach((z=>{G=G.next((()=>T.getEntry(g,z))).next((nt=>{const W=y.docVersions.get(z);Gt(W!==null,48541),nt.version.compareTo(W)<0&&(I.applyToRemoteDocument(nt,y),nt.isValidDocument()&&(nt.setReadTime(y.commitVersion),T.addEntry(nt)))}))})),G.next((()=>p.mutationQueue.removeMutationBatch(g,I)))})(n,s,t,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let g=xt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(t)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function r0(r){const t=wt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function dC(r,t){const n=wt(r),s=t.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];t.targetChanges.forEach(((T,I)=>{const C=l.get(I);if(!C)return;p.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,I).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,I))));let G=C.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(I)!==null?G=G.withResumeToken(Ge.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):T.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(T.resumeToken,s)),l=l.insert(I,G),(function(nt,W,pt){return nt.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-nt.snapshotVersion.toMicroseconds()>=uC?!0:pt.addedDocuments.size+pt.modifiedDocuments.size+pt.removedDocuments.size>0})(C,G,T)&&p.push(n.Pi.updateTargetData(c,G))}));let g=$i(),y=xt();if(t.documentUpdates.forEach((T=>{t.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),p.push(mC(c,d,t.documentUpdates).next((T=>{g=T.ks,y=T.qs}))),!s.isEqual(bt.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((I=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));p.push(T)}return X.waitFor(p).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.Ms=l,c)))}function mC(r,t,n){let s=xt(),l=xt();return n.forEach((c=>s=s.add(c))),t.getEntries(r,s).next((c=>{let d=$i();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(bt.min())?(t.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(g),d=d.insert(p,g)):ot(Wm,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{ks:d,qs:l}}))}function pC(r,t){const n=wt(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=zm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function gC(r,t){const n=wt(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,t).next((c=>c?(l=c,X.resolve(l)):n.Pi.allocateTargetId(s).next((d=>(l=new Or(t,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function gm(r,t,n){const s=wt(r),l=s.Ms.get(t),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!io(d))throw d;ot(Wm,`Failed to update sequence numbers for target ${t}: ${d}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function Gv(r,t,n){const s=wt(r);let l=bt.min(),c=xt();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,T){const I=wt(g),C=I.xs.get(T);return C!==void 0?X.resolve(I.Ms.get(C)):I.Pi.getTargetData(y,T)})(s,d,ci(t)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,p.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,t,n?l:bt.min(),n?c:xt()))).next((p=>(yC(s,nI(t),p),{documents:p,Qs:c})))))}function yC(r,t,n){let s=r.Os.get(t)||bt.min();n.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(t,s)}class Fv{constructor(){this.activeTargetIds=lI()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class _C{constructor(){this.Mo=new Fv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Fv,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="ConnectivityMonitor";class Kv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ot(Qv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ot(Qv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc=null;function ym(){return Dc===null?Dc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Dc++,"0x"+Dc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd="RestConnection",EC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class TC{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Zc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,n,s,l,c){const d=ym(),p=this.zo(t,n.toUriEncodedString());ot(Qd,`Sending RPC '${t}' ${d}:`,p,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,c);const{host:y}=new URL(p),T=Wa(y);return this.Jo(t,p,g,s,T).then((I=>(ot(Qd,`Received RPC '${t}' ${d}: `,I),I)),(I=>{throw Qa(Qd,`RPC '${t}' ${d} failed with error: `,I,"url: ",p,"request:",s),I}))}Ho(t,n,s,l,c,d){return this.Go(t,n,s,l,c)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+eo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>t[c]=l)),s&&s.headers.forEach(((l,c)=>t[c]=l))}zo(t,n){const s=EC[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye="WebChannelConnection";class SC extends TC{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,l,c){const d=ym();return new Promise(((p,g)=>{const y=new aT;y.setWithCredentials(!0),y.listenOnce(oT.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Pc.NO_ERROR:const I=y.getResponseJson();ot(Ye,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(I)),p(I);break;case Pc.TIMEOUT:ot(Ye,`RPC '${t}' ${d} timed out`),g(new at(K.DEADLINE_EXCEEDED,"Request time out"));break;case Pc.HTTP_ERROR:const C=y.getStatus();if(ot(Ye,`RPC '${t}' ${d} failed with status:`,C,"response text:",y.getResponseText()),C>0){let G=y.getResponseJson();Array.isArray(G)&&(G=G[0]);const z=G?.error;if(z&&z.status&&z.message){const nt=(function(pt){const gt=pt.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(gt)>=0?gt:K.UNKNOWN})(z.status);g(new at(nt,z.message))}else g(new at(K.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new at(K.UNAVAILABLE,"Connection failed."));break;default:Et(9055,{l_:t,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ot(Ye,`RPC '${t}' ${d} completed.`)}}));const T=JSON.stringify(l);ot(Ye,`RPC '${t}' ${d} sending request:`,l),y.send(n,"POST",T,s,15)}))}T_(t,n,s){const l=ym(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=cT(),p=uT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const T=c.join("");ot(Ye,`Creating RPC '${t}' stream ${l}: ${T}`,g);const I=d.createWebChannel(T,g);this.I_(I);let C=!1,G=!1;const z=new AC({Yo:W=>{G?ot(Ye,`Not sending because RPC '${t}' stream ${l} is closed:`,W):(C||(ot(Ye,`Opening RPC '${t}' stream ${l} transport.`),I.open(),C=!0),ot(Ye,`RPC '${t}' stream ${l} sending:`,W),I.send(W))},Zo:()=>I.close()}),nt=(W,pt,gt)=>{W.listen(pt,(ht=>{try{gt(ht)}catch(rt){setTimeout((()=>{throw rt}),0)}}))};return nt(I,El.EventType.OPEN,(()=>{G||(ot(Ye,`RPC '${t}' stream ${l} transport opened.`),z.o_())})),nt(I,El.EventType.CLOSE,(()=>{G||(G=!0,ot(Ye,`RPC '${t}' stream ${l} transport closed`),z.a_(),this.E_(I))})),nt(I,El.EventType.ERROR,(W=>{G||(G=!0,Qa(Ye,`RPC '${t}' stream ${l} transport errored. Name:`,W.name,"Message:",W.message),z.a_(new at(K.UNAVAILABLE,"The operation could not be completed")))})),nt(I,El.EventType.MESSAGE,(W=>{if(!G){const pt=W.data[0];Gt(!!pt,16349);const gt=pt,ht=gt?.error||gt[0]?.error;if(ht){ot(Ye,`RPC '${t}' stream ${l} received error:`,ht);const rt=ht.status;let st=(function(S){const w=ve[S];if(w!==void 0)return FT(w)})(rt),dt=ht.message;st===void 0&&(st=K.INTERNAL,dt="Unknown error status: "+rt+" with message "+ht.message),G=!0,z.a_(new at(st,dt)),I.close()}else ot(Ye,`RPC '${t}' stream ${l} received:`,pt),z.u_(pt)}})),nt(p,lT.STAT_EVENT,(W=>{W.stat===rm.PROXY?ot(Ye,`RPC '${t}' stream ${l} detected buffering proxy`):W.stat===rm.NOPROXY&&ot(Ye,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{z.__()}),0),z}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function Kd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(r){return new II(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(t,n,s=1e3,l=1.5,c=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&ot("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="PersistentStream";class a0{constructor(t,n,s,l,c,d,p,g){this.Mi=t,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new s0(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(Yi(n.toString()),Yi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{t((()=>{const l=new at(K.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return ot(Yv,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(ot(Yv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bC extends a0{constructor(t,n,s,l,c,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=NI(this.serializer,t),s=(function(c){if(!("targetChange"in c))return bt.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?bt.min():d.readTime?hi(d.readTime):bt.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=pm(this.serializer),n.addTarget=(function(c,d){let p;const g=d.target;if(p=um(g)?{documents:MI(c,g)}:{query:xI(c,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=YT(c,d.resumeToken);const y=fm(c,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(bt.min())>0){p.readTime=ih(c,d.snapshotVersion.toTimestamp());const y=fm(c,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,t);const s=kI(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=pm(this.serializer),n.removeTarget=t,this.q_(n)}}class wC extends a0{constructor(t,n,s,l,c,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Gt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Gt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Gt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=VI(t.writeResults,t.commitTime),s=hi(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=pm(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>OI(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{}class IC extends RC{constructor(t,n,s,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new at(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(t,dm(n,s),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new at(K.UNKNOWN,c.toString())}))}Ho(t,n,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(t,dm(n,s),l,d,p,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new at(K.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class CC{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Yi(n),this.aa=!1):ot("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="RemoteStore";class DC{constructor(t,n,s,l,c){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{qs(this)&&(ot(Bs,"Restarting streams for network reachability change."),await(async function(g){const y=wt(g);y.Ea.add(4),await Zl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Ah(y)})(this))}))})),this.Ra=new CC(s,l)}}async function Ah(r){if(qs(r))for(const t of r.da)await t(!0)}async function Zl(r){for(const t of r.da)await t(!1)}function o0(r,t){const n=wt(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),np(n)?ep(n):ro(n).O_()&&tp(n,t))}function Jm(r,t){const n=wt(r),s=ro(n);n.Ia.delete(t),s.O_()&&l0(n,t),n.Ia.size===0&&(s.O_()?s.L_():qs(n)&&n.Ra.set("Unknown"))}function tp(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(bt.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ro(r).Y_(t)}function l0(r,t){r.Va.Ue(t),ro(r).Z_(t)}function ep(r){r.Va=new SI({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),ro(r).start(),r.Ra.ua()}function np(r){return qs(r)&&!ro(r).x_()&&r.Ia.size>0}function qs(r){return wt(r).Ea.size===0}function u0(r){r.Va=void 0}async function NC(r){r.Ra.set("Online")}async function OC(r){r.Ia.forEach(((t,n)=>{tp(r,t)}))}async function VC(r,t){u0(r),np(r)?(r.Ra.ha(t),ep(r)):r.Ra.set("Unknown")}async function MC(r,t,n){if(r.Ra.set("Online"),t instanceof KT&&t.state===2&&t.cause)try{await(async function(l,c){const d=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.Va.removeTarget(p))})(r,t)}catch(s){ot(Bs,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await sh(r,s)}else if(t instanceof zc?r.Va.Ze(t):t instanceof QT?r.Va.st(t):r.Va.tt(t),!n.isEqual(bt.min()))try{const s=await r0(r.localStore);n.compareTo(s)>=0&&await(function(c,d){const p=c.Va.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const T=c.Ia.get(y);T&&c.Ia.set(y,T.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const T=c.Ia.get(g);if(!T)return;c.Ia.set(g,T.withResumeToken(Ge.EMPTY_BYTE_STRING,T.snapshotVersion)),l0(c,g);const I=new Or(T.target,g,y,T.sequenceNumber);tp(c,I)})),c.remoteSyncer.applyRemoteEvent(p)})(r,n)}catch(s){ot(Bs,"Failed to raise snapshot:",s),await sh(r,s)}}async function sh(r,t,n){if(!io(t))throw t;r.Ea.add(1),await Zl(r),r.Ra.set("Offline"),n||(n=()=>r0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ot(Bs,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Ah(r)}))}function c0(r,t){return t().catch((n=>sh(r,n,t)))}async function Sh(r){const t=wt(r),n=qr(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:zm;for(;xC(t);)try{const l=await pC(t.localStore,s);if(l===null){t.Ta.length===0&&n.L_();break}s=l.batchId,PC(t,l)}catch(l){await sh(t,l)}h0(t)&&f0(t)}function xC(r){return qs(r)&&r.Ta.length<10}function PC(r,t){r.Ta.push(t);const n=qr(r);n.O_()&&n.X_&&n.ea(t.mutations)}function h0(r){return qs(r)&&!qr(r).x_()&&r.Ta.length>0}function f0(r){qr(r).start()}async function kC(r){qr(r).ra()}async function UC(r){const t=qr(r);for(const n of r.Ta)t.ea(n.mutations)}async function LC(r,t,n){const s=r.Ta.shift(),l=Qm.from(s,t,n);await c0(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await Sh(r)}async function zC(r,t){t&&qr(r).X_&&await(async function(s,l){if((function(d){return EI(d)&&d!==K.ABORTED})(l.code)){const c=s.Ta.shift();qr(s).B_(),await c0(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Sh(s)}})(r,t),h0(r)&&f0(r)}async function Xv(r,t){const n=wt(r);n.asyncQueue.verifyOperationInProgress(),ot(Bs,"RemoteStore received new credentials");const s=qs(n);n.Ea.add(3),await Zl(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Ah(n)}async function BC(r,t){const n=wt(r);t?(n.Ea.delete(2),await Ah(n)):t||(n.Ea.add(2),await Zl(n),n.Ra.set("Unknown"))}function ro(r){return r.ma||(r.ma=(function(n,s,l){const c=wt(n);return c.sa(),new bC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:NC.bind(null,r),t_:OC.bind(null,r),r_:VC.bind(null,r),H_:MC.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),np(r)?ep(r):r.Ra.set("Unknown")):(await r.ma.stop(),u0(r))}))),r.ma}function qr(r){return r.fa||(r.fa=(function(n,s,l){const c=wt(n);return c.sa(),new wC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:kC.bind(null,r),r_:zC.bind(null,r),ta:UC.bind(null,r),na:LC.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await Sh(r)):(await r.fa.stop(),r.Ta.length>0&&(ot(Bs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(t,n,s,l,c){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,l,c){const d=Date.now()+s,p=new ip(t,n,d,l,c);return p.start(s),p}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new at(K.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rp(r,t){if(Yi("AsyncQueue",`${t}: ${r}`),io(r))return new at(K.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{static emptySet(t){return new qa(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||ft.comparator(n.key,s.key):(n,s)=>ft.comparator(n.key,s.key),this.keyedMap=Tl(),this.sortedSet=new ae(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof qa)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new qa;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(){this.ga=new ae(ft.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Et(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class Za{constructor(t,n,s,l,c,d,p,g,y){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(t,n,s,l,c){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new Za(t,n,qa.emptySet(n),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&gh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class qC{constructor(){this.queries=Zv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=wt(n),c=l.queries;l.queries=Zv(),c.forEach(((d,p)=>{for(const g of p.Sa)g.onError(s)}))})(this,new at(K.ABORTED,"Firestore shutting down"))}}function Zv(){return new js((r=>MT(r)),gh)}async function HC(r,t){const n=wt(r);let s=3;const l=t.query;let c=n.queries.get(l);c?!c.ba()&&t.Da()&&(s=2):(c=new jC,s=t.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const p=rp(d,`Initialization of query '${ka(t.query)}' failed`);return void t.onError(p)}n.queries.set(l,c),c.Sa.push(t),t.va(n.onlineState),c.wa&&t.Fa(c.wa)&&sp(n)}async function GC(r,t){const n=wt(r),s=t.query;let l=3;const c=n.queries.get(s);if(c){const d=c.Sa.indexOf(t);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=t.Da()?0:1:!c.ba()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function FC(r,t){const n=wt(r);let s=!1;for(const l of t){const c=l.query,d=n.queries.get(c);if(d){for(const p of d.Sa)p.Fa(l)&&(s=!0);d.wa=l}}s&&sp(n)}function QC(r,t,n){const s=wt(r),l=s.queries.get(t);if(l)for(const c of l.Sa)c.onError(n);s.queries.delete(t)}function sp(r){r.Ca.forEach((t=>{t.next()}))}var _m,Wv;(Wv=_m||(_m={})).Ma="default",Wv.Cache="cache";class KC{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new Za(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Za.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==_m.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(t){this.key=t}}class m0{constructor(t){this.key=t}}class YC{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xt(),this.mutatedKeys=xt(),this.eu=xT(t),this.tu=new qa(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new $v,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((T,I)=>{const C=l.get(T),G=yh(this.query,I)?I:null,z=!!C&&this.mutatedKeys.has(C.key),nt=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let W=!1;C&&G?C.data.isEqual(G.data)?z!==nt&&(s.track({type:3,doc:G}),W=!0):this.su(C,G)||(s.track({type:2,doc:G}),W=!0,(g&&this.eu(G,g)>0||y&&this.eu(G,y)<0)&&(p=!0)):!C&&G?(s.track({type:0,doc:G}),W=!0):C&&!G&&(s.track({type:1,doc:C}),W=!0,(g||y)&&(p=!0)),W&&(G?(d=d.add(G),c=nt?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{tu:d,iu:s,Cs:p,mutatedKeys:c}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,l){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const d=t.iu.ya();d.sort(((T,I)=>(function(G,z){const nt=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et(20277,{Rt:W})}};return nt(G)-nt(z)})(T.type,I.type)||this.eu(T.doc,I.doc))),this.ou(s),l=l??!1;const p=n&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,y=g!==this.Za;return this.Za=g,d.length!==0||y?{snapshot:new Za(this.query,t.tu,c,d,t.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $v,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=xt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new m0(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new d0(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=xt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Za.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ap="SyncEngine";class XC{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class $C{constructor(t){this.key=t,this.hu=!1}}class ZC{constructor(t,n,s,l,c,d){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new js((p=>MT(p)),gh),this.Iu=new Map,this.Eu=new Set,this.du=new ae(ft.comparator),this.Au=new Map,this.Ru=new Xm,this.Vu={},this.mu=new Map,this.fu=$a.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function WC(r,t,n=!0){const s=E0(r);let l;const c=s.Tu.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await p0(s,t,n,!0),l}async function JC(r,t){const n=E0(r);await p0(n,t,!0,!1)}async function p0(r,t,n,s){const l=await gC(r.localStore,ci(t)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let p;return s&&(p=await t2(r,t,c,d==="current",l.resumeToken)),r.isPrimaryClient&&n&&o0(r.remoteStore,l),p}async function t2(r,t,n,s,l){r.pu=(I,C,G)=>(async function(nt,W,pt,gt){let ht=W.view.ru(pt);ht.Cs&&(ht=await Gv(nt.localStore,W.query,!1).then((({documents:V})=>W.view.ru(V,ht))));const rt=gt&&gt.targetChanges.get(W.targetId),st=gt&&gt.targetMismatches.get(W.targetId)!=null,dt=W.view.applyChanges(ht,nt.isPrimaryClient,rt,st);return tE(nt,W.targetId,dt.au),dt.snapshot})(r,I,C,G);const c=await Gv(r.localStore,t,!0),d=new YC(t,c.Qs),p=d.ru(c.documents),g=$l.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),y=d.applyChanges(p,r.isPrimaryClient,g);tE(r,n,y.au);const T=new XC(t,n,d);return r.Tu.set(t,T),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),y.snapshot}async function e2(r,t,n){const s=wt(r),l=s.Tu.get(t),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((d=>!gh(d,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await gm(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&Jm(s.remoteStore,l.targetId),vm(s,l.targetId)})).catch(no)):(vm(s,l.targetId),await gm(s.localStore,l.targetId,!0))}async function n2(r,t){const n=wt(r),s=n.Tu.get(t),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Jm(n.remoteStore,s.targetId))}async function i2(r,t,n){const s=c2(r);try{const l=await(function(d,p){const g=wt(d),y=ne.now(),T=p.reduce(((G,z)=>G.add(z.key)),xt());let I,C;return g.persistence.runTransaction("Locally write mutations","readwrite",(G=>{let z=$i(),nt=xt();return g.Ns.getEntries(G,T).next((W=>{z=W,z.forEach(((pt,gt)=>{gt.isValidDocument()||(nt=nt.add(pt))}))})).next((()=>g.localDocuments.getOverlayedDocuments(G,z))).next((W=>{I=W;const pt=[];for(const gt of p){const ht=pI(gt,I.get(gt.key).overlayedDocument);ht!=null&&pt.push(new Yr(gt.key,ht,bT(ht.value.mapValue),xn.exists(!0)))}return g.mutationQueue.addMutationBatch(G,y,pt,p)})).next((W=>{C=W;const pt=W.applyToLocalDocumentSet(I,nt);return g.documentOverlayCache.saveOverlays(G,W.batchId,pt)}))})).then((()=>({batchId:C.batchId,changes:kT(I)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),(function(d,p,g){let y=d.Vu[d.currentUser.toKey()];y||(y=new ae(Mt)),y=y.insert(p,g),d.Vu[d.currentUser.toKey()]=y})(s,l.batchId,n),await Wl(s,l.changes),await Sh(s.remoteStore)}catch(l){const c=rp(l,"Failed to persist write");n.reject(c)}}async function g0(r,t){const n=wt(r);try{const s=await dC(n.localStore,t);t.targetChanges.forEach(((l,c)=>{const d=n.Au.get(c);d&&(Gt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Gt(d.hu,14607):l.removedDocuments.size>0&&(Gt(d.hu,42227),d.hu=!1))})),await Wl(n,s,t)}catch(s){await no(s)}}function Jv(r,t,n){const s=wt(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((c,d)=>{const p=d.view.va(t);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const g=wt(d);g.onlineState=p;let y=!1;g.queries.forEach(((T,I)=>{for(const C of I.Sa)C.va(p)&&(y=!0)})),y&&sp(g)})(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function r2(r,t,n){const s=wt(r);s.sharedClientState.updateQueryState(t,"rejected",n);const l=s.Au.get(t),c=l&&l.key;if(c){let d=new ae(ft.comparator);d=d.insert(c,$e.newNoDocument(c,bt.min()));const p=xt().add(c),g=new Eh(bt.min(),new Map,new ae(Mt),d,p);await g0(s,g),s.du=s.du.remove(c),s.Au.delete(t),op(s)}else await gm(s.localStore,t,!1).then((()=>vm(s,t,n))).catch(no)}async function s2(r,t){const n=wt(r),s=t.batch.batchId;try{const l=await fC(n.localStore,t);_0(n,s,null),y0(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Wl(n,l)}catch(l){await no(l)}}async function a2(r,t,n){const s=wt(r);try{const l=await(function(d,p){const g=wt(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return g.mutationQueue.lookupMutationBatch(y,p).next((I=>(Gt(I!==null,37113),T=I.keys(),g.mutationQueue.removeMutationBatch(y,I)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,T,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>g.localDocuments.getDocuments(y,T)))}))})(s.localStore,t);_0(s,t,n),y0(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Wl(s,l)}catch(l){await no(l)}}function y0(r,t){(r.mu.get(t)||[]).forEach((n=>{n.resolve()})),r.mu.delete(t)}function _0(r,t,n){const s=wt(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(t);c&&(n?c.reject(n):c.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function vm(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||v0(r,s)}))}function v0(r,t){r.Eu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(Jm(r.remoteStore,n),r.du=r.du.remove(t),r.Au.delete(n),op(r))}function tE(r,t,n){for(const s of n)s instanceof d0?(r.Ru.addReference(s.key,t),o2(r,s)):s instanceof m0?(ot(ap,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||v0(r,s.key)):Et(19791,{wu:s})}function o2(r,t){const n=t.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(ot(ap,"New document in limbo: "+n),r.Eu.add(s),op(r))}function op(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new ft(ee.fromString(t)),s=r.fu.next();r.Au.set(s,new $C(n)),r.du=r.du.insert(n,s),o0(r.remoteStore,new Or(ci(OT(n.path)),s,"TargetPurposeLimboResolution",dh.ce))}}async function Wl(r,t,n){const s=wt(r),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,g)=>{d.push(s.pu(g,t,n).then((y=>{if((y||n)&&s.isPrimaryClient){const T=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(y){l.push(y);const T=Zm.As(g.targetId,y);c.push(T)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(g,y){const T=wt(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>X.forEach(y,(C=>X.forEach(C.Es,(G=>T.persistence.referenceDelegate.addReference(I,C.targetId,G))).next((()=>X.forEach(C.ds,(G=>T.persistence.referenceDelegate.removeReference(I,C.targetId,G)))))))))}catch(I){if(!io(I))throw I;ot(Wm,"Failed to update sequence numbers: "+I)}for(const I of y){const C=I.targetId;if(!I.fromCache){const G=T.Ms.get(C),z=G.snapshotVersion,nt=G.withLastLimboFreeSnapshotVersion(z);T.Ms=T.Ms.insert(C,nt)}}})(s.localStore,c))}async function l2(r,t){const n=wt(r);if(!n.currentUser.isEqual(t)){ot(ap,"User change. New user:",t.toKey());const s=await i0(n.localStore,t);n.currentUser=t,(function(c,d){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new at(K.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Wl(n,s.Ls)}}function u2(r,t){const n=wt(r),s=n.Au.get(t);if(s&&s.hu)return xt().add(s.key);{let l=xt();const c=n.Iu.get(t);if(!c)return l;for(const d of c){const p=n.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function E0(r){const t=wt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=g0.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=u2.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=r2.bind(null,t),t.Pu.H_=FC.bind(null,t.eventManager),t.Pu.yu=QC.bind(null,t.eventManager),t}function c2(r){const t=wt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=s2.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=a2.bind(null,t),t}class ah{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Th(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return hC(this.persistence,new lC,t.initialUser,this.serializer)}Cu(t){return new n0($m.mi,this.serializer)}Du(t){return new _C}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ah.provider={build:()=>new ah};class h2 extends ah{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Gt(this.persistence.referenceDelegate instanceof rh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new KI(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new n0((s=>rh.mi(s,n)),this.serializer)}}class Em{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Jv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=l2.bind(null,this.syncEngine),await BC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new qC})()}createDatastore(t){const n=Th(t.databaseInfo.databaseId),s=(function(c){return new SC(c)})(t.databaseInfo);return(function(c,d,p,g){return new IC(c,d,p,g)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,l,c,d,p){return new DC(s,l,c,d,p)})(this.localStore,this.datastore,t.asyncQueue,(n=>Jv(this.syncEngine,n,0)),(function(){return Kv.v()?new Kv:new vC})())}createSyncEngine(t,n){return(function(l,c,d,p,g,y,T){const I=new ZC(l,c,d,p,g,y);return T&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=wt(n);ot(Bs,"RemoteStore shutting down."),s.Ea.add(5),await Zl(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Em.provider={build:()=>new Em};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Yi("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr="FirestoreClient";class d2{constructor(t,n,s,l,c){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=Xe.UNAUTHENTICATED,this.clientId=Lm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{ot(Hr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(ot(Hr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=rp(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function Yd(r,t){r.asyncQueue.verifyOperationInProgress(),ot(Hr,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await i0(t.localStore,l),s=l)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function eE(r,t){r.asyncQueue.verifyOperationInProgress();const n=await m2(r);ot(Hr,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener((s=>Xv(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>Xv(t.remoteStore,l))),r._onlineComponents=t}async function m2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ot(Hr,"Using user provided OfflineComponentProvider");try{await Yd(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(l){return l.name==="FirebaseError"?l.code===K.FAILED_PRECONDITION||l.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Qa("Error using user provided cache. Falling back to memory cache: "+n),await Yd(r,new ah)}}else ot(Hr,"Using default OfflineComponentProvider"),await Yd(r,new h2(void 0));return r._offlineComponents}async function T0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ot(Hr,"Using user provided OnlineComponentProvider"),await eE(r,r._uninitializedComponentsProvider._online)):(ot(Hr,"Using default OnlineComponentProvider"),await eE(r,new Em))),r._onlineComponents}function p2(r){return T0(r).then((t=>t.syncEngine))}async function g2(r){const t=await T0(r),n=t.eventManager;return n.onListen=WC.bind(null,t.syncEngine),n.onUnlisten=e2.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=JC.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=n2.bind(null,t.syncEngine),n}function y2(r,t,n={}){const s=new kr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const T=new f2({next:C=>{T.Nu(),d.enqueueAndForget((()=>GC(c,I))),C.fromCache&&g.source==="server"?y.reject(new at(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(C)},error:C=>y.reject(C)}),I=new KC(p,T,{includeMetadataChanges:!0,qa:!0});return HC(c,I)})(await g2(r),r.asyncQueue,t,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="firestore.googleapis.com",iE=!0;class rE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new at(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=S0,this.ssl=iE}else this.host=t.host,this.ssl=t.ssl??iE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=e0;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<FI)throw new at(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}DR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=A0(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new at(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new at(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new at(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class bh{constructor(t,n,s,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new at(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new at(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new vR;switch(s.type){case"firstParty":return new SR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new at(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=nE.get(n);s&&(ot("ComponentProvider","Removing Datastore"),nE.delete(n),s.terminate())})(this),Promise.resolve()}}function _2(r,t,n,s={}){r=Xi(r,bh);const l=Wa(t),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},p=`${t}:${n}`;l&&(_E(`https://${p}`),vE("Firestore",!0)),c.host!==S0&&c.host!==p&&Qa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:l,emulatorOptions:s};if(!Ps(g,d)&&(r._setSettings(g),s.mockUserToken)){let y,T;if(typeof s.mockUserToken=="string")y=s.mockUserToken,T=Xe.MOCK_USER;else{y=CS(s.mockUserToken,r._app?.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new at(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Xe(I)}r._authCredentials=new ER(new fT(y,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new so(this.firestore,t,this._query)}}class Ae{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ae(this.firestore,t,this._key)}toJSON(){return{type:Ae._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(Kl(n,Ae._jsonSchema))return new Ae(t,s||null,new ft(ee.fromString(n.referencePath)))}}Ae._jsonSchemaVersion="firestore/documentReference/1.0",Ae._jsonSchema={type:Te("string",Ae._jsonSchemaVersion),referencePath:Te("string")};class Ur extends so{constructor(t,n,s){super(t,n,OT(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ae(this.firestore,null,new ft(t))}withConverter(t){return new Ur(this.firestore,t,this._path)}}function Sl(r,t,...n){if(r=ke(r),dT("collection","path",t),r instanceof bh){const s=ee.fromString(t,...n);return yv(s),new Ur(r,null,s)}{if(!(r instanceof Ae||r instanceof Ur))throw new at(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ee.fromString(t,...n));return yv(s),new Ur(r.firestore,null,s)}}function Nl(r,t,...n){if(r=ke(r),arguments.length===1&&(t=Lm.newId()),dT("doc","path",t),r instanceof bh){const s=ee.fromString(t,...n);return gv(s),new Ae(r,null,new ft(s))}{if(!(r instanceof Ae||r instanceof Ur))throw new at(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ee.fromString(t,...n));return gv(s),new Ae(r.firestore,r instanceof Ur?r.converter:null,new ft(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="AsyncQueue";class aE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new s0(this,"async_queue_retry"),this._c=()=>{const s=Kd();s&&ot(sE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Kd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Kd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new kr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!io(t))throw t;ot(sE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,Yi("INTERNAL UNHANDLED ERROR: ",oE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=ip.createAndSchedule(this,t,n,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&Et(47125,{Pc:oE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function oE(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}class ao extends bh{constructor(t,n,s,l){super(t,n,s,l),this.type="firestore",this._queue=new aE,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new aE(t),this._firestoreClient=void 0,await t}}}function v2(r,t){const n=typeof r=="object"?r:SE(),s=typeof r=="string"?r:Zc,l=Rm(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=RS("firestore");c&&_2(l,...c)}return l}function b0(r){if(r._terminated)throw new at(K.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||E2(r),r._firestoreClient}function E2(r){const t=r._freezeSettings(),n=(function(l,c,d,p){return new BR(l,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,A0(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new d2(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Mn(Ge.fromBase64String(t))}catch(n){throw new at(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Mn(Ge.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Mn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Kl(t,Mn._jsonSchema))return Mn.fromBase64String(t.bytes)}}Mn._jsonSchemaVersion="firestore/bytes/1.0",Mn._jsonSchema={type:Te("string",Mn._jsonSchemaVersion),bytes:Te("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new at(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new at(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new at(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Mt(this._lat,t._lat)||Mt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fi._jsonSchemaVersion}}static fromJSON(t){if(Kl(t,fi._jsonSchema))return new fi(t.latitude,t.longitude)}}fi._jsonSchemaVersion="firestore/geoPoint/1.0",fi._jsonSchema={type:Te("string",fi._jsonSchemaVersion),latitude:Te("number"),longitude:Te("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:di._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Kl(t,di._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new di(t.vectorValues);throw new at(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}di._jsonSchemaVersion="firestore/vectorValue/1.0",di._jsonSchema={type:Te("string",di._jsonSchemaVersion),vectorValues:Te("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=/^__.*__$/;class A2{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Yr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Xl(t,this.data,n,this.fieldTransforms)}}class w0{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new Yr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function R0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et(40011,{Ac:r})}}class up{constructor(t,n,s,l,c,d){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new up({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return oh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(R0(this.Ac)&&T2.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class S2{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Th(t)}Cc(t,n,s,l=!1){return new up({Ac:t,methodName:n,Dc:s,path:He.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rh(r){const t=r._freezeSettings(),n=Th(r._databaseId);return new S2(r._databaseId,!!t.ignoreUndefinedProperties,n)}function I0(r,t,n,s,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,t,n,l);cp("Data must be an object, but it was:",d,s);const p=C0(s,d);let g,y;if(c.merge)g=new _n(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const T=[];for(const I of c.mergeFields){const C=Tm(t,I,n);if(!d.contains(C))throw new at(K.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);N0(T,C)||T.push(C)}g=new _n(T),y=d.fieldTransforms.filter((I=>g.covers(I.field)))}else g=null,y=d.fieldTransforms;return new A2(new on(p),g,y)}class Ih extends lp{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ih}}function b2(r,t,n,s){const l=r.Cc(1,t,n);cp("Data must be an object, but it was:",l,s);const c=[],d=on.empty();Kr(s,((g,y)=>{const T=hp(t,g,n);y=ke(y);const I=l.yc(T);if(y instanceof Ih)c.push(T);else{const C=Jl(y,I);C!=null&&(c.push(T),d.set(T,C))}}));const p=new _n(c);return new w0(d,p,l.fieldTransforms)}function w2(r,t,n,s,l,c){const d=r.Cc(1,t,n),p=[Tm(t,s,n)],g=[l];if(c.length%2!=0)throw new at(K.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<c.length;C+=2)p.push(Tm(t,c[C])),g.push(c[C+1]);const y=[],T=on.empty();for(let C=p.length-1;C>=0;--C)if(!N0(y,p[C])){const G=p[C];let z=g[C];z=ke(z);const nt=d.yc(G);if(z instanceof Ih)y.push(G);else{const W=Jl(z,nt);W!=null&&(y.push(G),T.set(G,W))}}const I=new _n(y);return new w0(T,I,d.fieldTransforms)}function R2(r,t,n,s=!1){return Jl(n,r.Cc(s?4:3,t))}function Jl(r,t){if(D0(r=ke(r)))return cp("Unsupported field value:",t,r),C0(r,t);if(r instanceof lp)return(function(s,l){if(!R0(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let d=0;for(const p of s){let g=Jl(p,l.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,t)}return(function(s,l){if((s=ke(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return uI(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=ne.fromDate(s);return{timestampValue:ih(l.serializer,c)}}if(s instanceof ne){const c=new ne(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ih(l.serializer,c)}}if(s instanceof fi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Mn)return{bytesValue:YT(l.serializer,s._byteString)};if(s instanceof Ae){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Ym(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof di)return(function(d,p){return{mapValue:{fields:{[AT]:{stringValue:ST},[Wc]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return Gm(p.serializer,y)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${fh(s)}`)})(r,t)}function C0(r,t){const n={};return gT(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Kr(r,((s,l)=>{const c=Jl(l,t.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function D0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ne||r instanceof fi||r instanceof Mn||r instanceof Ae||r instanceof lp||r instanceof di)}function cp(r,t,n){if(!D0(n)||!mT(n)){const s=fh(n);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function Tm(r,t,n){if((t=ke(t))instanceof wh)return t._internalPath;if(typeof t=="string")return hp(r,t);throw oh("Field path arguments must be of type string or ",r,!1,void 0,n)}const I2=new RegExp("[~\\*/\\[\\]]");function hp(r,t,n){if(t.search(I2)>=0)throw oh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new wh(...t.split("."))._internalPath}catch{throw oh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function oh(r,t,n,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let p=`Function ${t}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${l}`),g+=")"),new at(K.INVALID_ARGUMENT,p+r+g)}function N0(r,t){return r.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(t,n,s,l,c){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ae(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new C2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(fp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class C2 extends O0{data(){return super.data()}}function fp(r,t){return typeof t=="string"?hp(r,t):t instanceof wh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new at(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dp{}class N2 extends dp{}function O2(r,t,...n){let s=[];t instanceof dp&&s.push(t),s=s.concat(n),(function(c){const d=c.filter((g=>g instanceof mp)).length,p=c.filter((g=>g instanceof Ch)).length;if(d>1||d>0&&p>0)throw new at(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class Ch extends N2{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new Ch(t,n,s)}_apply(t){const n=this._parse(t);return V0(t._query,n),new so(t.firestore,t.converter,cm(t._query,n))}_parse(t){const n=Rh(t.firestore);return(function(c,d,p,g,y,T,I){let C;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new at(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){uE(I,T);const z=[];for(const nt of I)z.push(lE(g,c,nt));C={arrayValue:{values:z}}}else C=lE(g,c,I)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||uE(I,T),C=R2(p,d,I,T==="in"||T==="not-in");return Ee.create(y,T,C)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function V2(r,t,n){const s=t,l=fp("where",r);return Ch._create(l,s,n)}class mp extends dp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new mp(t,n)}_parse(t){const n=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Gn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(l,c){let d=l;const p=c.getFlattenedFilters();for(const g of p)V0(d,g),d=cm(d,g)})(t._query,n),new so(t.firestore,t.converter,cm(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function lE(r,t,n){if(typeof(n=ke(n))=="string"){if(n==="")throw new at(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VT(t)&&n.indexOf("/")!==-1)throw new at(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(ee.fromString(n));if(!ft.isDocumentKey(s))throw new at(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return wv(r,new ft(s))}if(n instanceof Ae)return wv(r,n._key);throw new at(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fh(n)}.`)}function uE(r,t){if(!Array.isArray(r)||r.length===0)throw new at(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function V0(r,t){const n=(function(l,c){for(const d of l)for(const p of d.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new at(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new at(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class M2{convertValue(t,n="none"){switch(jr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return de(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Br(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Et(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Kr(t,((l,c)=>{s[l]=this.convertValue(c,n)})),s}convertVectorValue(t){const n=t.fields?.[Wc].arrayValue?.values?.map((s=>de(s.doubleValue)));return new di(n)}convertGeoPoint(t){return new fi(de(t.latitude),de(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=ph(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(kl(t));default:return null}}convertTimestamp(t){const n=zr(t);return new ne(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=ee.fromString(t);Gt(t0(s),9688,{name:t});const l=new Ul(s.get(1),s.get(3)),c=new ft(s.popFirst(5));return l.isEqual(n)||Yi(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(r,t,n){let s;return s=r?r.toFirestore(t):t,s}class Nc{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ha extends O0{constructor(t,n,s,l,c,d){super(t,n,s,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(fp("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new at(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ha._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ha._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ha._jsonSchema={type:Te("string",Ha._jsonSchemaVersion),bundleSource:Te("string","DocumentSnapshot"),bundleName:Te("string"),bundle:Te("string")};class Bc extends Ha{data(t={}){return super.data(t)}}class Ga{constructor(t,n,s,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new Nc(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new Bc(this._firestore,this._userDataWriter,s.key,s,new Nc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new at(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const g=new Bc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Nc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new Bc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Nc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,T=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),T=d.indexOf(p.doc.key)),{type:x2(p.type),doc:g,oldIndex:y,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new at(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ga._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Lm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function x2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et(61501,{type:r})}}Ga._jsonSchemaVersion="firestore/querySnapshot/1.0",Ga._jsonSchema={type:Te("string",Ga._jsonSchemaVersion),bundleSource:Te("string","QuerySnapshot"),bundleName:Te("string"),bundle:Te("string")};class P2 extends M2{constructor(t){super(),this.firestore=t}convertBytes(t){return new Mn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ae(this.firestore,null,n)}}function jc(r){r=Xi(r,so);const t=Xi(r.firestore,ao),n=b0(t),s=new P2(t);return D2(r._query),y2(n,r._query).then((l=>new Ga(t,s,r,l)))}function k2(r,t,n){r=Xi(r,Ae);const s=Xi(r.firestore,ao),l=M0(r.converter,t);return Dh(s,[I0(Rh(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,xn.none())])}function U2(r,t,n,...s){r=Xi(r,Ae);const l=Xi(r.firestore,ao),c=Rh(l);let d;return d=typeof(t=ke(t))=="string"||t instanceof wh?w2(c,"updateDoc",r._key,t,n,s):b2(c,"updateDoc",r._key,t),Dh(l,[d.toMutation(r._key,xn.exists(!0))])}function cE(r){return Dh(Xi(r.firestore,ao),[new Fm(r._key,xn.none())])}function L2(r,t){const n=Xi(r.firestore,ao),s=Nl(r),l=M0(r.converter,t);return Dh(n,[I0(Rh(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,xn.exists(!1))]).then((()=>s))}function Dh(r,t){return(function(s,l){const c=new kr;return s.asyncQueue.enqueueAndForget((async()=>i2(await p2(s),l,c))),c.promise})(b0(r),t)}(function(t,n=!0){(function(l){eo=l})(Ja),Fa(new ks("firestore",((s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),p=new ao(new TR(s.getProvider("auth-internal")),new bR(d,s.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new at(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ul(y.options.projectId,T)})(d,l),d);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),xr(fv,dv,t),xr(fv,dv,"esm2020")})();const z2={apiKey:"AIzaSyBXwgi6OuXNYLDbhxBIVC84MmXQVXWr2A8",authDomain:"listening-app-3f383.firebaseapp.com",projectId:"listening-app-3f383",storageBucket:"listening-app-3f383.firebasestorage.app",messagingSenderId:"514391644676",appId:"1:514391644676:web:ae16404730766401173351"},x0=AE(z2),Ol=yR(x0),ji=v2(x0),B2=new qi;function Vn({children:r,className:t="",variant:n="solid",...s}){const l="px-4 py-2 rounded-2xl text-sm font-semibold transition shadow focus:outline-none focus:ring disabled:opacity-50",c={solid:"bg-black text-white hover:opacity-90",soft:"bg-gray-100 hover:bg-gray-200",ghost:"hover:bg-gray-100"};return $.jsx("button",{className:`${l} ${c[n]} ${t}`,...s,children:r})}function P0({message:r}){return r?$.jsx("p",{className:"text-sm text-red-600 mt-1",children:r}):null}function Am(r){if(!r||Number.isNaN(r))return"0:00";const t=Math.floor(r/60),n=Math.floor(r%60).toString().padStart(2,"0");return`${t}:${n}`}function j2({src:r,onPlay:t}){const n=Pt.useRef(null),[s,l]=Pt.useState(!1),[c,d]=Pt.useState(0),[p,g]=Pt.useState(0),[y,T]=Pt.useState(1),I=[.5,.75,1,1.25,1.5,2];Pt.useEffect(()=>{const z=n.current;if(!z)return;const nt=()=>d(z.currentTime),W=()=>g(isFinite(z.duration)?z.duration:0),pt=()=>l(!1);return z.addEventListener("timeupdate",nt),z.addEventListener("loadedmetadata",W),z.addEventListener("ended",pt),()=>{z.removeEventListener("timeupdate",nt),z.removeEventListener("loadedmetadata",W),z.removeEventListener("ended",pt)}},[r]),Pt.useEffect(()=>{n.current&&(n.current.playbackRate=y)},[y]),Pt.useEffect(()=>{const z=n.current;z&&(s?(z.play().catch(()=>l(!1)),t&&t()):z.pause())},[s]),Pt.useEffect(()=>{l(!1),d(0),g(0)},[r]);const C=()=>l(z=>!z),G=z=>{n.current&&(n.current.currentTime=z,d(z))};return $.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow flex flex-col gap-2",children:[$.jsx("audio",{ref:n,src:r,preload:"metadata",className:"hidden"}),$.jsxs("div",{className:"flex items-center gap-3",children:[$.jsx("button",{onClick:C,"aria-label":s?"Pause":"Play",className:"w-10 h-10 rounded-full bg-black text-white flex items-center justify-center shadow hover:scale-105 transition",children:s?"❚❚":"➤"}),$.jsx("div",{className:"flex-1",children:$.jsxs("div",{className:"flex items-center gap-2",children:[$.jsx("span",{className:"text-xs text-gray-600 w-12 text-left",children:Am(c)}),$.jsx("input",{type:"range",min:0,max:p||0,step:"0.1",value:Math.min(c,p||0),onChange:z=>G(Number(z.target.value)),className:"flex-1 h-1 bg-gray-200 rounded-lg accent-black"}),$.jsx("span",{className:"text-xs text-gray-600 w-12 text-right",children:Am(p)})]})})]}),$.jsxs("div",{className:"flex justify-end items-center gap-2",children:[$.jsx("label",{className:"text-xs text-gray-500",children:"Speed"}),$.jsx("select",{value:y,onChange:z=>T(Number(z.target.value)),className:"border rounded px-2 py-1 text-sm",children:I.map(z=>$.jsxs("option",{value:z,children:[z,"×"]},z))})]})]})}function q2({onLogin:r}){const[t,n]=Pt.useState(""),[s,l]=Pt.useState(""),[c,d]=Pt.useState(!1),[p,g]=Pt.useState("");function y(z){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(z)}function T(z){switch(z){case"auth/invalid-email":return"That doesn’t look like a valid email (use format name@example.com).";case"auth/user-not-found":return"No account found with this email. Try creating one instead.";case"auth/wrong-password":return"Wrong password. Try again.";case"auth/email-already-in-use":return"That email is already linked to an account. Try logging in instead.";default:return"Something went wrong. Please try again."}}async function I(){if(g(""),!y(t.trim())){g("Please enter a valid email address.");return}d(!0);try{const z=await nw(Ol,t.trim(),s);r(z.user)}catch(z){g(T(z.code))}finally{d(!1)}}async function C(){if(g(""),!y(t.trim())){g("Please enter a valid email address.");return}d(!0);try{const z=await ew(Ol,t.trim(),s);r(z.user)}catch(z){g(T(z.code))}finally{d(!1)}}async function G(){g("");try{const z=await Rw(Ol,B2);r(z.user)}catch{g("Google sign-in failed. Try again.")}}return $.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-gray-50 to-gray-100 px-4",children:$.jsxs("div",{className:"bg-white shadow-lg rounded-2xl p-8 w-full max-w-md",children:[$.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Welcome to Listening FIB"}),$.jsxs("p",{className:"text-gray-600 mb-6",children:["New here? Enter your email + password and click ",$.jsx("strong",{children:"Create Account"}),". ",$.jsx("br",{}),"Returning? Just click ",$.jsx("strong",{children:"Login"}),"."]}),$.jsxs("div",{className:"flex flex-col gap-4",children:[$.jsxs("div",{children:[$.jsx("label",{className:"block text-sm font-medium",children:"Step 1: Enter your email"}),$.jsx("input",{type:"email",required:!0,placeholder:"you@example.com",value:t,onChange:z=>n(z.target.value),className:"mt-1 border px-3 py-2 rounded w-full focus:outline-none focus:ring focus:border-black"})]}),$.jsxs("div",{children:[$.jsx("label",{className:"block text-sm font-medium",children:"Step 2: Enter your password"}),$.jsx("input",{type:"password",required:!0,placeholder:"At least 6 characters",value:s,onChange:z=>l(z.target.value),className:"mt-1 border px-3 py-2 rounded w-full focus:outline-none focus:ring focus:border-black"})]}),$.jsx(P0,{message:p}),$.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[$.jsx(Vn,{onClick:I,disabled:c,children:c?"Loading...":"Login"}),$.jsx(Vn,{variant:"soft",onClick:C,disabled:c,children:"Create Account"}),$.jsxs("div",{className:"flex items-center gap-2 my-2",children:[$.jsx("div",{className:"flex-1 h-px bg-gray-200"}),$.jsx("span",{className:"text-xs text-gray-400",children:"OR"}),$.jsx("div",{className:"flex-1 h-px bg-gray-200"})]}),$.jsx(Vn,{variant:"soft",onClick:G,children:"Continue with Google"})]})]})]})})}function H2({onClose:r}){const[t,n]=Pt.useState([]),[s,l]=Pt.useState(!0),[c,d]=Pt.useState(""),[p,g]=Pt.useState(""),[y,T]=Pt.useState(""),[I,C]=Pt.useState([]),[G,z]=Pt.useState("");Pt.useEffect(()=>{(async()=>{l(!0);try{const dt=(await jc(Sl(ji,"questions"))).docs.map(w=>({id:w.id,...w.data()}));n(dt);const V=await jc(Sl(ji,"results")),S={};V.docs.forEach(w=>{const N=w.data();S[N.userId]||(S[N.userId]={userId:N.userId,email:N.userEmail||"",bestTime:null,questionsDone:0}),S[N.userId].questionsDone+=1,typeof N.timeTaken=="number"&&(S[N.userId].bestTime==null||N.timeTaken<S[N.userId].bestTime)&&(S[N.userId].bestTime=N.timeTaken)}),C(Object.values(S))}catch(st){console.error(st),z("Failed to load admin data.")}finally{l(!1)}})()},[]);function nt(rt,st,dt){const V=[],S=[];let w=0;return dt.split(/(\[[^\]]+\])/g).filter(Boolean).forEach(M=>{const x=M.match(/^\[(.+)\]$/);x?(V.push({blank:w}),S.push(x[1]),w+=1):V.push(M)}),{title:rt,audioUrl:st,tokens:V,blanks:S}}async function W(){if(z(""),!c.trim())return z("Provide a title.");if(!y.trim())return z("Provide text with blanks using [answer].");try{const rt=nt(c.trim(),p.trim(),y.trim()),st=await L2(Sl(ji,"questions"),rt);n(dt=>[...dt,{id:st.id,...rt}]),d(""),g(""),T("")}catch(rt){console.error(rt),z("Failed to add question.")}}async function pt(rt){if(confirm("Delete this question?"))try{await cE(Nl(ji,"questions",rt)),n(st=>st.filter(dt=>dt.id!==rt))}catch(st){console.error(st),z("Failed to delete question.")}}async function gt(rt,st){if(st.trim())try{await U2(Nl(ji,"questions",rt),{title:st.trim()}),n(dt=>dt.map(V=>V.id===rt?{...V,title:st.trim()}:V))}catch(dt){console.error(dt),z("Failed to rename question.")}}async function ht(rt){if(confirm("Delete all results for this user?"))try{const dt=(await jc(O2(Sl(ji,"results"),V2("userId","==",rt)))).docs.map(V=>cE(Nl(ji,"results",V.id)));await Promise.all(dt),C(V=>V.filter(S=>S.userId!==rt))}catch(st){console.error(st),z("Failed to reset user stats.")}}return s?$.jsx("div",{className:"p-4",children:"Loading admin..."}):$.jsxs("div",{className:"bg-gray-50 rounded p-4 shadow",children:[$.jsxs("div",{className:"flex justify-between items-center mb-4",children:[$.jsx("h3",{className:"text-lg font-semibold",children:"Admin Panel"}),$.jsx("div",{className:"flex gap-2",children:$.jsx(Vn,{variant:"ghost",onClick:r,children:"Close"})})]}),$.jsxs("div",{className:"mb-6",children:[$.jsx("h4",{className:"font-semibold",children:"Add Question"}),$.jsxs("p",{className:"text-sm text-gray-600",children:["Put blanks in ",$.jsx("code",{children:"[like this]"}),". They will become fillable blanks."]}),$.jsx("input",{value:c,onChange:rt=>d(rt.target.value),placeholder:"Title",className:"w-full border px-2 py-1 rounded my-2"}),$.jsx("input",{value:p,onChange:rt=>g(rt.target.value),placeholder:"Audio URL (optional)",className:"w-full border px-2 py-1 rounded my-2"}),$.jsx("textarea",{value:y,onChange:rt=>T(rt.target.value),placeholder:"Text with [blanks]",className:"w-full border px-2 py-1 rounded my-2",rows:4}),$.jsx(P0,{message:G}),$.jsx("div",{className:"flex gap-2",children:$.jsx(Vn,{onClick:W,children:"Add Question"})})]}),$.jsxs("div",{className:"mb-6",children:[$.jsx("h4",{className:"font-semibold",children:"Questions"}),$.jsx("div",{className:"divide-y",children:t.map(rt=>$.jsxs("div",{className:"py-2 flex items-start justify-between gap-2",children:[$.jsxs("div",{children:[$.jsx("div",{className:"font-medium",children:rt.title}),$.jsx("div",{className:"text-sm text-gray-600",children:rt.tokens&&rt.tokens.map(st=>typeof st=="string"?st:"___").join("")})]}),$.jsxs("div",{className:"flex flex-col gap-2",children:[$.jsx("button",{onClick:()=>{const st=prompt("New title",rt.title);st&&gt(rt.id,st)},className:"text-sm underline",children:"Rename"}),$.jsx("button",{onClick:()=>pt(rt.id),className:"text-sm text-red-600",children:"Delete"})]})]},rt.id))})]}),$.jsxs("div",{children:[$.jsx("h4",{className:"font-semibold",children:"User Stats (from results collection)"}),$.jsxs("div",{className:"mt-2 divide-y",children:[I.length===0&&$.jsx("div",{className:"text-sm text-gray-600",children:"No stats available."}),I.map(rt=>$.jsxs("div",{className:"py-2 flex items-center justify-between",children:[$.jsxs("div",{children:[$.jsx("div",{className:"font-medium",children:rt.email||rt.userId}),$.jsxs("div",{className:"text-sm text-gray-600",children:["Best time: ",rt.bestTime!=null?`${rt.bestTime}s`:"—"," • Questions done: ",rt.questionsDone]})]}),$.jsx("div",{className:"flex gap-2",children:$.jsx("button",{onClick:()=>ht(rt.userId),className:"text-sm text-red-600",children:"Reset"})})]},rt.userId))]})]})]})}function G2(){const[r,t]=Pt.useState(null),[n,s]=Pt.useState(!0),[l,c]=Pt.useState([]),[d,p]=Pt.useState(!0),[g,y]=Pt.useState(0),[T,I]=Pt.useState({}),[C,G]=Pt.useState(0),[z,nt]=Pt.useState(!1),[W,pt]=Pt.useState(null),[gt,ht]=Pt.useState(0),[rt,st]=Pt.useState(!1),dt=l[g]||{tokens:[],blanks:[],title:"",audioUrl:""},V=dt.blanks.length;Pt.useEffect(()=>{const At=sw(Ol,H=>{t(H),s(!1)});return()=>At()},[]),Pt.useEffect(()=>{(async()=>{try{const J=(await jc(Sl(ji,"questions"))).docs.map(ut=>({id:ut.id,...ut.data()}));J.length?c(J):c([{id:"q1",title:"Urban parks audio clip",audioUrl:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",timeLimitSec:90,tokens:["City parks provide vital ",{blank:0}," for residents, offering spaces for ",{blank:1},", relaxation, and community events."],blanks:["amenities","exercise"]}])}catch(H){console.error(H),c([{id:"q1",title:"Urban parks audio clip",audioUrl:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",timeLimitSec:90,tokens:["City parks provide vital ",{blank:0}," for residents, offering spaces for ",{blank:1},", relaxation, and community events."],blanks:["amenities","exercise"]}])}finally{p(!1)}})()},[]);function S(At){return T[At]&&T[At].trim().toLowerCase()===dt.blanks[At].trim().toLowerCase()}async function w(){let At=0;for(let J=0;J<V;J++)S(J)&&At++;G(At),nt(!0);const H=W?Math.floor((Date.now()-W)/1e3):0;if(ht(H),r){const J=Nl(ji,"results",`${r.uid}_${dt.id}`);await k2(J,{userId:r.uid,userEmail:r.email,questionId:dt.id,score:At,timeTaken:H,answers:T,createdAt:Date.now()})}}function N(){const At={};dt.blanks.forEach((H,J)=>At[J]=H),I(At),nt(!0)}function M(){I({}),nt(!1),G(0),ht(0),pt(null)}function x(){y(At=>Math.min(l.length-1,At+1)),M()}function R(){y(At=>Math.max(0,At-1)),M()}if(n||d)return $.jsx("div",{className:"p-8 text-center",children:"Loading..."});if(!r)return $.jsx(q2,{onLogin:t});const me=r.email==="lifeisascamm@gmail.com";return $.jsx("div",{className:"min-h-screen bg-gradient-to-b from-white to-gray-100 text-gray-900",children:$.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[$.jsxs("header",{className:"flex items-center justify-between gap-4 mb-6",children:[$.jsxs("div",{children:[$.jsx("h1",{className:"text-2xl font-bold",children:"Listening: Fill in the Blanks"}),$.jsxs("p",{className:"text-sm text-gray-600",children:["Question ",g+1," of ",l.length]})]}),$.jsxs("div",{className:"flex items-center gap-3",children:[me&&$.jsx(Vn,{variant:"soft",onClick:()=>st(!0),children:"Go to Admin Mode"}),$.jsx("span",{className:"text-gray-600 text-sm",children:r.email}),$.jsx(Vn,{variant:"ghost",onClick:()=>aw(Ol),children:"Logout"})]})]}),rt&&me&&$.jsx("div",{className:"mb-6",children:$.jsx(H2,{onClose:()=>st(!1)})}),$.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[$.jsx("h2",{className:"text-lg font-semibold",children:dt.title}),$.jsx("div",{className:"my-4",children:$.jsx(j2,{src:dt.audioUrl,onPlay:()=>!W&&pt(Date.now())})}),$.jsx("div",{className:"mt-4 leading-8 text-[1.05rem]",children:dt.tokens.map((At,H)=>typeof At=="string"?$.jsx("span",{children:At},H):$.jsx("input",{type:"text",value:T[At.blank]||"",onChange:J=>I(ut=>({...ut,[At.blank]:J.target.value})),className:`mx-1 px-2 py-1 border-b focus:outline-none focus:border-black ${z?S(At.blank)?"border-green-500 text-green-700":"border-red-500 text-red-700":"border-gray-400"}`,placeholder:"..."},H))}),$.jsxs("div",{className:"mt-6 flex flex-wrap gap-3",children:[$.jsx(Vn,{onClick:w,disabled:z,children:"Check answers"}),$.jsx(Vn,{variant:"soft",onClick:N,children:"Show answers"}),$.jsx(Vn,{variant:"ghost",onClick:M,children:"Reset"}),$.jsxs("div",{className:"ml-auto text-sm text-gray-600",children:["Score: ",z?`${C}/${V}`:"—"]})]}),z&&$.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:["Time taken: ",Am(gt)]})]}),$.jsxs("section",{className:"flex items-center justify-between mt-6",children:[$.jsx(Vn,{variant:"soft",onClick:R,disabled:g===0,children:"Previous"}),$.jsx(Vn,{variant:"solid",onClick:x,disabled:g===l.length-1,children:"Next"})]})]})})}const F2=yS.createRoot(document.getElementById("root"));F2.render($.jsx(uS.StrictMode,{children:$.jsx(G2,{})}));
